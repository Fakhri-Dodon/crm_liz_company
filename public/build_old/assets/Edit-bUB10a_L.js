import{r as w,a as B,u as M,j as e,c as E}from"./app-DSAstNJH.js";import{B as R,h as Q}from"./html2pdf-BYVJ9Ekp.js";import{u as X}from"./useTranslation-BTkknNM_.js";import{T as z}from"./trash-2-CVjnwYw9.js";import"./createLucideIcon-B1SYFIyP.js";function U({leads:F=[],companies:C=[],auth:J,quotation:a,ppn:D}){const[O,S]=w.useState(!1),[N,k]=w.useState({name:"",processing:"",price:""}),{app_config:A}=B().props,{t:y}=X(),P=s=>{const c={...s,id:Date.now()+Math.random(),price:Number(s.price)||0};console.log("Menambahkan item dengan ID:",c.id),b("services",[...n.services,c])},{data:n,setData:b,patch:V,processing:G}=M({document_type:"QUOTATION",client_type:a.is_client?"Client":"Lead",prepared_by_name:a.creator?.name,prepared_by_role:a.creator?.role?.name,my_company_name:A.company_name,date:a.date||"",number:a.quotation_number||"",company_id:(()=>{if(a.is_client){const s=C.find(c=>String(c.lead_id)===String(a.lead_id));return s?s.id:null}return a.lead_id||null})(),contact_person_id:a.contact_person_id?String(a.contact_person_id):"",company_name:a.lead?.company_name||null,address:a.lead?.address||"",contact_person:a.lead?.contact_person||a.company?.lead?.contact_person||"",position:a.lead?.position||"",email:a.lead?.email||"",phone:a.lead?.phone||"",subject:a.subject||"",payment_terms:a.payment_terms||"",note:a.note||"",valid_until:a.valid_until||"",services:a.items.map(s=>({id:s.id,name:s.name,processing:s.processing,price:s.amount}))||[],discount:parseFloat(a.discount)>0?"yes":"no",discount_amount:parseFloat(a.discount)||0,sub_total:(()=>{const s=Array.isArray(a.items)&&a.items.length?a.items.reduce((c,o)=>c+(parseFloat(o.amount)||0),0):0;if(s>0)return s;if(a.sub_total!==void 0&&a.sub_total!==null){const c=parseFloat(a.sub_total)||0;if(c>0)return c}if(a.subtotal!==void 0&&a.subtotal!==null){const c=parseFloat(a.subtotal)||0;if(c>0)return c}return s})(),tax_amount:parseFloat(a.tax)||0,tax:(()=>{const s=parseFloat(a.tax)||0;let o=Array.isArray(a.items)&&a.items.length?a.items.reduce((i,m)=>i+(parseFloat(m.amount)||0),0):0;if(o<=0&&(a.sub_total!==void 0&&a.sub_total!==null&&(o=parseFloat(a.sub_total)||0),o<=0&&a.subtotal!==void 0&&a.subtotal!==null&&(o=parseFloat(a.subtotal)||0)),s<=0||o<=0)return 0;const f=s/o;return isFinite(f)?parseFloat(f.toFixed(2)):0})(),tax_type:(()=>{const s=parseFloat(a.tax)||0;let o=Array.isArray(a.items)&&a.items.length?a.items.reduce((i,m)=>i+(parseFloat(m.amount)||0),0):0;return o<=0&&(a.sub_total!==void 0&&a.sub_total!==null&&(o=parseFloat(a.sub_total)||0),o<=0&&a.subtotal!==void 0&&a.subtotal!==null&&(o=parseFloat(a.subtotal)||0)),s<=0||o<=0?null:s/o>=.12?"PPN 12%":"PPN 11%"})(),total:parseFloat(a.total)||(function(){let c=Array.isArray(a.items)&&a.items.length?a.items.reduce((i,m)=>i+(parseFloat(m.amount)||0),0):0;c<=0&&(a.sub_total!==void 0&&a.sub_total!==null&&(c=parseFloat(a.sub_total)||0),c<=0&&a.subtotal!==void 0&&a.subtotal!==null&&(c=parseFloat(a.subtotal)||0));const o=parseFloat(a.tax)||0,f=parseFloat(a.discount)||0;return c+o-f})()});console.log("full data :",n),console.log("data tax :",n.tax),w.useEffect(()=>{n.contact_person_id&&handleContactChange(n.contact_person_id)},[]);const I=async()=>{if(n.services.length===0){alert("Peringatan: Anda harus menambahkan setidaknya satu jasa/layanan sebelum menyimpan.");return}if(!n.company_id){alert("Pilih client");return}try{const s=document.getElementById("quotation-pdf"),c={margin:0,filename:`${n.number}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}},o=await Q().set(c).from(s).output("blob"),f=n.services.reduce((p,g)=>p+Number(g.price||0),0),i=f*(parseFloat(n.tax)||0),m=f+i-(parseFloat(n.discount_amount)||0),h=new FormData;h.append("_method","PATCH"),Object.keys(n).forEach(p=>{if(p==="services"){const g=n.services.map(t=>({id:t.id||null,name:t.name||t.name||"-",processing:t.processing||"-",price:t.price||0}));h.append("services",JSON.stringify(g))}else n[p]!==null&&n[p]!==void 0?h.append(p,n[p]):p==="sub_total"?h.append("sub_total",f):p==="tax_amount"?h.append("tax_amount",i):p==="total"?h.append("total",m):n[p]!==null&&n[p]!==void 0&&h.append(p,n[p])}),h.append("pdf_file",o,`${n.number}.pdf`),E.post(`/quotation/update/${a.id}`,h,{forceFormData:!0,onSuccess:()=>alert("Berhasil disimpan!"),onError:p=>{console.error("Penyebab Gagal Simpan",p);for(let g of h.entries())console.log(g[0]+": "+g[1])}})}catch(s){console.error("Error:",s)}},_=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(s),$=({data:s})=>{const c=new jsPDF,o=s.services.reduce((i,m)=>i+Number(m.price||0),0);s.tax_type&&o*(Number(s.tax)||0),s.has_discount==="yes"&&Number(s.discount_amount||0),c.text(`Quotation untuk: ${s.clientName}`,10,10);const f=c.output("bloburl");return window.open(f,"_blank"),e.jsxs("div",{className:"p-8 text-sm text-gray-800 leading-relaxed h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-blue-900 tracking-tighter italic",children:"LOGO"}),e.jsx("p",{className:"text-[10px] text-gray-500 max-w-[200px] mt-2",children:"Jl. Alamat Perusahaan No. 123, Jakarta Indonesia"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-2xl font-bold uppercase tracking-widest",children:s.document_type||"QUOTATION"}),e.jsxs("p",{className:"font-mono text-xs",children:["No: ",s.document_number||"---"]}),e.jsxs("p",{className:"font-mono text-xs",children:["Date: ",s.date||"---"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-10 mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold border-b border-gray-300 mb-2 uppercase text-[10px] text-gray-500",children:"To:"}),e.jsx("p",{className:"font-bold text-lg",children:s.company_name||"Customer Name"}),e.jsx("p",{children:s.address||"Customer Address"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold border-b border-gray-300 mb-2 uppercase text-[10px] text-gray-500",children:"Subject:"}),e.jsx("p",{className:"whitespace-pre-line",children:s.subject||"---"})]})]}),e.jsxs("table",{className:"w-full mb-8 text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 uppercase text-[10px] tracking-wider",children:[e.jsx("th",{className:"p-2 border",children:"No"}),e.jsx("th",{className:"p-2 border",children:"Description"}),e.jsx("th",{className:"p-2 border",children:"Process Time"}),e.jsx("th",{className:"p-2 border text-right",children:"Price"})]})}),e.jsx("tbody",{children:s.services.map((i,m)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 align-top text-center",children:m+1}),e.jsx("td",{className:"p-2 align-top font-semibold",children:i.name}),e.jsx("td",{className:"p-2 align-top italic text-gray-600",children:i.processing}),e.jsx("td",{className:"p-2 align-top text-right",children:_(i.price)})]},i.id))})]}),e.jsx("div",{className:"flex justify-end mb-10",children:e.jsxs("div",{className:"w-1/2 space-y-2",children:[e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:_(s.subTotal)})]}),s.has_discount==="yes"&&e.jsxs("div",{className:"flex justify-between text-red-600 italic",children:[e.jsx("span",{children:"Discount"}),e.jsx("span",{children:s.discount==="yes"&&e.jsxs("p",{children:["Diskon: -",_(s.discount_amount)]})})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:s.tax_type||"Tax"}),e.jsxs("span",{children:["(",s.tax_type||"-","):"," ",_(s.tax_amount)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-black bg-gray-50 p-1",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{children:_(s.total)})]})]})}),e.jsxs("div",{className:"mt-4 mb-10 italic text-[11px] text-gray-500",children:[s.valid_until&&e.jsxs("p",{children:["• This quotation is valid until ",s.valid_until]}),e.jsx("p",{children:"• Prices include applicable taxes unless stated otherwise."})]}),e.jsx("div",{className:"mt-auto flex justify-end text-center",children:e.jsxs("div",{className:"w-48",children:[e.jsx("p",{className:"mb-20 font-bold uppercase tracking-tighter",children:"Best Regards,"}),e.jsx("p",{className:"font-bold border-b border-black",children:s.company_name||"---"}),e.jsx("p",{className:"text-[10px] uppercase",children:"Authorized Signature"})]})})]})};w.useCallback((s,c,o,f,i)=>{const m=(s||[]).reduce((g,t)=>g+Number(t.price||0),0),h=o?m*c:0,p=m+h-Number(f||0);i("sub_total",m),i("tax_amount",h),i("total",p)},[]);const L=()=>{E.get("/quotation")};return e.jsxs(e.Fragment,{children:[O&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999]",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-[400px] border border-gray-200",children:[e.jsx("h3",{className:"font-black text-gray-800 mb-4 uppercase tracking-tight text-sm",children:"Add New Service"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-gray-400",children:"Service Name"}),e.jsx("input",{className:"w-full border-gray-300 rounded-lg p-2 text-sm",placeholder:"Sertifikasi Alat",value:N.name,onChange:s=>k({...N,name:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-gray-400",children:"Processing"}),e.jsx("input",{className:"w-full border-gray-300 rounded-lg p-2 text-sm",placeholder:"7 Days",value:N.processing,onChange:s=>k({...N,processing:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-gray-400",children:"Price"}),e.jsx("input",{type:"number",className:"w-full border-gray-300 rounded-lg p-2 text-sm",placeholder:"0",value:N.price,onChange:s=>k({...N,price:s.target.value})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm font-bold text-gray-400",children:"CANCEL"}),e.jsx("button",{onClick:()=>{if(!N.name||!N.price)return alert("Lengkapi data!");const s={id:Date.now(),name:N.name,processing:N.processing||"-",price:parseFloat(N.price)};P(s),S(!1),k({name:"",processing:"",price:""})},className:"bg-[#2d6a4f] text-white px-6 py-2 rounded-lg font-bold text-sm shadow-lg",children:"ADD ITEM"})]})]})}),e.jsx(R,{title:y("quotations.builder.title"),data:n,setData:b,onSave:I,onBack:L,renderEditor:({updateField:s})=>{const c=!n.client_type,o=t=>{const l=n.client_type==="Client",d=(l?C:F).find(x=>String(x.id)===String(t));if(d){const x=l?d.lead:d,u={company_id:d.id,lead_id:l?d.lead_id:d.id,company_name:l?d.lead?.company_name||d.client_code:d.company_name,address:x?.address||"",contact_person_id:"",contact_person:"",email:"",phone:"",position:""};Object.entries(u).forEach(([v,j])=>s(v,j)),b(v=>({...v,...u}))}},f=n.client_type==="Client"?C||[]:F||[],i=t=>{if(!t)return[];const l=t.contacts||t.contact_persons||t.contactPersons;return Array.isArray(l)&&l.length>0?l.map(r=>({id:r.id??r.contact_id??r.lead_id??r.email??"",name:r.name??r.contact_person??r.full_name??(r.lead&&r.lead.contact_person)??"",email:r.email??(r.lead&&r.lead.email)??"",phone:r.phone??(r.lead&&r.lead.phone)??r.mobile??"",position:r.position??r.job_title??"",raw:r})):[{id:t.id,name:t.contact_person??t.name??t.company_name??"",email:t.email??"",phone:t.phone??"",position:t.position??"",raw:t}]},m=t=>{const d=(n.client_type==="Client"?C:F).find(j=>String(j.id)===String(n.company_id));if(!d)return;const u=i(d).find(j=>String(j.id)===String(t));if(!u)return;const v={contact_person_id:u.id,contact_person:u.name||"",email:u.email||"",phone:u.phone||"",position:u.position||""};Object.entries(v).forEach(([j,T])=>{typeof s=="function"&&s(j,T)}),b(j=>({...j,...v}))};w.useEffect(()=>{if(!n.company_id||n.contact_person_id)return;const r=(n.client_type==="Client"?C:F).find(j=>String(j.id)===String(n.company_id));if(!r)return;const d=i(r);if(!d||d.length===0)return;const x=d[0],u=x.id,v={contact_person_id:String(u),contact_person:x.name||"",email:x.email||"",phone:x.phone||"",position:x.position||""};Object.entries(v).forEach(([j,T])=>{typeof s=="function"&&s(j,T)}),b(j=>({...j,...v}))},[n.company_id,n.client_type]),w.useEffect(()=>{typeof s=="function"&&(n.date&&s("date",n.date),n.valid_until&&s("valid_until",n.valid_until))},[n.date,n.valid_until]);const h=t=>{s("discount",t),b("discount",t),t==="no"&&(s("discount_amount",0),b("discount_amount",0))},p=t=>{const l=Number(t)||0;s("discount_amount",l),b("discount_amount",l)},g=t=>{let l=null,r=0;if(t&&t.includes("|")&&t!=="|0"){const u=t.split("|");l=u[0],r=parseFloat(u[1])||0}const x=Number(n.sub_total||0)*r;s("tax_type",l),s("tax",r),s("tax_amount",x),b(u=>({...u,tax_type:l,tax:r,tax_amount:x}))};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.date"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",className:"w-full border-gray-300 rounded text-sm",value:n.date||"",onChange:t=>{s("date",t.target.value),b("date",t.target.value)}})]}),e.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:["Client","Lead"].map(t=>{const l=n.client_type===t;return e.jsx("button",{type:"button",onClick:r=>{r.preventDefault();const d=t;typeof s=="function"&&s("client_type",d),b(x=>({...x,client_type:d,company_id:null,company_name:null,contact_person:"",email:"",phone:"",contact_person_id:null}))},className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${l?"bg-[#065f46] text-white shadow-md":"text-gray-400 hover:text-gray-600"}`,children:t.toUpperCase()},t)})}),e.jsxs("div",{className:c?"opacity-40 pointer-events-none":"",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.select_company"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:n.company_id||"",onChange:t=>o(t.target.value),children:[e.jsxs("option",{value:"",children:["-- Choose ",n.client_type," --"]}),f.map(t=>e.jsx("option",{value:t.id,children:n.client_type==="Client"?t.lead?.company_name||t.client_code:t.company_name},t.id))]})]}),e.jsxs("div",{className:`space-y-1 ${n.company_id?"":"opacity-40"}`,children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.select_contact"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:String(n.contact_person_id||""),onChange:t=>m(t.target.value),disabled:!n.company_id,children:[e.jsx("option",{value:"",children:"-- Choose Person --"}),(()=>{const r=(n.client_type==="Client"?C:F).find(x=>String(x.id)===String(n.company_id));if(!r)return null;const d=i(r);return!d||d.length===0?null:d.map(x=>{const u=x.name||x.contact_person||"No Name",v=x.position?` (${x.position})`:"";return e.jsxs("option",{value:x.id,children:[u,v]},x.id)})})()]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.subject"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{rows:"3",className:"w-full border-gray-300 rounded text-sm font-bold",value:n.subject||"",onChange:t=>{const l=t.target.value;s("subject",l),b("subject",l)}})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:y("quotations.builder.discount")}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:n.discount||"no",onChange:t=>h(t.target.value),children:[e.jsx("option",{value:"",children:"-- Choose Option --"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),n.discount==="yes"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:y("quotations.builder.discount_amount")}),e.jsx("input",{type:"number",className:"w-full border-gray-300 rounded text-sm font-bold",value:n.discount_amount||"",onChange:t=>p(t.target.value)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:y("quotations.builder.tax")}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:(()=>{const t=Number(n.tax||0),l=D.find(r=>Math.abs(Number(r.rate)-t)<1e-4);return l?`PPN ${l.name}|${l.rate}`:"|0"})(),onChange:t=>g(t.target.value),children:[e.jsx("option",{value:"|0",children:"-- No Tax --"}),D.map(t=>e.jsxs("option",{value:`PPN ${t.name}|${t.rate}`,children:["PPN ",t.name]},t.id))]})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.payment_terms"),e.jsx("span",{className:"text-red-600",children:"* "}),e.jsxs("span",{className:`text-[9px] font-bold ${n.payment_terms?.length>=250?"text-red-500":"text-gray-400"}`,children:[n.payment_terms?.length||0," / 255"]})]}),e.jsx("textarea",{rows:"3",className:"w-full border-gray-300 rounded text-sm font-bold",value:n.payment_terms||"",onChange:t=>{const l=t.target.value;l.length<=255&&(s("payment_terms",l),b("payment_terms",l))}})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.note"),e.jsx("span",{className:"text-red-600",children:"* "}),e.jsxs("span",{className:`text-[9px] font-bold ${n.note?.length>=250?"text-red-500":"text-gray-400"}`,children:[n.note?.length||0," / 255"]})]}),e.jsx("textarea",{rows:"3",className:"w-full border-gray-300 rounded text-sm font-bold",value:n.note||"",onChange:t=>{const l=t.target.value;l.length<=255&&(s("note",l),b("note",l))}})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[y("quotations.builder.valid_until"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",className:"w-full border-gray-300 rounded text-sm",value:n.valid_until,onChange:t=>{s("valid_until",t.target.value),b("valid_until",t.target.value)}})]})]})]})},renderPreview:({data:s,addItem:c,removeItem:o,updateField:f})=>{P||setBuilderAddItem(()=>c);const i=s.services.reduce((l,r)=>l+parseFloat(r.price||0),0),m=parseFloat(s.tax),h=isNaN(m)||!isFinite(m)?0:m,p=s.discount==="yes"&&parseFloat(s.discount_amount)||0,g=i*h,t=i+g-p;return w.useEffect(()=>{(Math.abs((s.sub_total||0)-i)>1||Math.abs((s.total||0)-t)>1)&&b(r=>({...r,sub_total:i,tax_amount:g,total:t}))},[i,g,t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-2 text-[12px]",children:[e.jsxs("div",{className:"flex justify-between pb-4 mb-6",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Number"}),e.jsx("p",{className:"font-bold",children:s.number||"Q-2024-XXXX"})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Date"}),e.jsx("p",{className:"font-bold",children:s.date||"Date Not Set"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"border border-black p-5 rounded-sm",children:e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"To:"}),e.jsx("p",{className:"font-bold text-emerald-800",children:s.contact_person||"---"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Email:"}),e.jsx("p",{className:"text-black",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Handphone:"}),e.jsx("p",{className:"text-black",children:s.phone})]})]})}),e.jsx("div",{className:"border border-black p-5 rounded-sm",children:e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Company:"}),e.jsx("p",{className:"font-black",children:s.company_name||"---"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Address:"}),e.jsx("p",{className:"text-black leading-tight",children:s.address||"No address provided."})]})]})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[15px] font-bold text-black",children:"Subject"}),e.jsx("p",{className:"text-[13px] text-gray-600 font-medium",children:s.subject})]})]}),e.jsx("p",{className:"text-[15px] font-bold text-black mb-2",children:"Quotation Detail"}),e.jsxs("table",{className:"w-full border-collapse border border-black",children:[e.jsx("thead",{className:"bg-gray-50 uppercase text-[10px] font-black border-b border-black",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-center w-8 border border-black",children:"No"}),e.jsx("th",{className:"p-2 text-left border border-black",children:"Description"}),e.jsx("th",{className:"p-2 text-center w-24 border border-black",children:"Processing"}),e.jsx("th",{className:"p-2 text-right w-32",children:"Amount"}),e.jsx("th",{"data-html2canvas-ignore":"true",className:"print:hidden p-2 w-10"})]})}),e.jsx("tbody",{children:s.services.map((l,r)=>e.jsxs("tr",{className:"border-b border-gray-100 relative group",children:[e.jsx("td",{className:"p-2 text-center font-bold text-gray-400 border border-black",children:s.services.indexOf(l)+1}),e.jsx("td",{className:"p-2 font-bold uppercase border border-black",children:l.name}),e.jsx("td",{className:"p-2 text-center border border-black",children:l.processing}),e.jsx("td",{className:"p-2 text-right font-black border-b border-black",children:_(l.price)}),e.jsx("td",{className:"print:hidden p-2 text-center border-b border-black",children:e.jsx("button",{type:"button","data-html2canvas-ignore":"true",onClick:()=>{console.log("ID Item ini adalah:",l.id),o(l.id)},className:"text-red-400 hover:text-red-600 transition-colors",children:e.jsx(z,{size:14})})})]},l.id||r))})]}),e.jsx("div",{"data-html2canvas-ignore":"true",className:"mt-4 flex justify-start print:hidden",children:e.jsx("button",{"data-html2canvas-ignore":"true",onClick:()=>S(!0),className:"flex items-center gap-2 bg-[#065f46] text-white px-4 py-2 rounded-sm text-[10px] font-bold tracking-widest hover:scale-105 transition-all shadow-lg",children:"ADD SERVICE"})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-stretch gap-10",children:[e.jsxs("div",{className:"w-3/5 flex flex-col",children:[e.jsxs("div",{className:"flex-grow space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[15px] font-bold mb-1",children:"Payment Terms"}),e.jsx("p",{className:"text-red-600 text-[11px] font-medium leading-tight whitespace-pre-wrap break-words max-w-[300px]",children:s.payment_terms||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[15px] font-bold mb-1",children:"Note"}),e.jsx("p",{className:"text-red-600 text-[11px] font-medium leading-tight whitespace-pre-wrap break-words max-w-[300px]",children:s.note||"-"})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("p",{className:"text-[15px] font-bold mb-1",children:"Valid Until"}),e.jsx("p",{className:"text-red-600 text-[11px] font-medium leading-tight",children:`This quotation is valid until (${s.valid_until||""})`})]})]}),e.jsxs("div",{className:"w-2/5 flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-1 font-bold mb-10",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Discount"}),e.jsx("span",{children:s.discount==="yes"?_(s.discount_amount):_(0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:_(s.sub_total||0)})]}),e.jsxs("div",{className:"flex justify-between border-b border-black pb-1",children:[e.jsx("span",{children:s.tax_type||"Tax"}),e.jsx("span",{children:_(s.tax_amount||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-black pt-1",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{children:_(s.total||0)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[16px] uppercase font-black",children:s.my_company_name||"---"}),e.jsx("div",{className:"h-20"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] uppercase font-black leading-tight",children:s.prepared_by_name||"---"}),e.jsx("p",{className:"text-[13px] text-gray-500 leading-tight",children:s.prepared_by_role||"---"})]})]})]})]}),e.jsx("div",{className:"mt-10 p-3 bg-slate-100 rounded-md border border-slate-200",children:e.jsx("p",{className:"text-[12px] text-gray-600",children:A?.address})})]})]})})},renderPDFPreview:$})]})}export{U as default};
