import{a as Y,r as c,u as y,j as e}from"./app--V8YQuQk.js";import{T as w,a as C,b as j,c as r,d as S,e as n}from"./Table-D-7eSfaE.js";import{B as i,t as x}from"./index-Dt_dz-fy.js";import{S as b}from"./SimpleModal-jwalo6FB.js";import{P as k}from"./plus-D5prKAx_.js";import{S as D}from"./square-pen-HBgHTwPe.js";import{T}from"./trash-2-D2TdDDoH.js";import{L as N}from"./loader-circle-DdQx-sZ8.js";import{S as z}from"./SettingsLayout-iUGQP_nY.js";import"./x-DGqtnagE.js";import"./createLucideIcon-D7A-7CJ7.js";import"./settings-B2fgqRwV.js";import"./users-Ct2E2Ljn.js";import"./file-text-BkpdNTL0.js";import"./receipt-ByUYRvJl.js";import"./percent-CepjKhjp.js";import"./mail-D6ZCm5oy.js";function G(){const{ppn:H,pph:E}=Y().props,[A,d]=c.useState(!1),[O,o]=c.useState(!1),[p,f]=c.useState(null),[h,g]=c.useState(null),[F,m]=c.useState(!1),[I,P]=c.useState(null),[u,R]=c.useState(null),t=y({name:"",rate:"",description:""}),a=y({name:"",rate:"",description:""}),q=()=>{f(null),t.reset(),d(!0)},M=s=>{f(s),t.setData({name:s.name,rate:(parseFloat(s.rate)*100).toString(),description:s.description||""}),d(!0)},$=s=>{s.preventDefault(),t.transform(l=>({...l,rate:parseFloat(l.rate)/100})),p?t.put(`/setting/ppn/update/${p.id}`,{onSuccess:()=>{x.success("PPN updated successfully"),d(!1)}}):t.post("/setting/ppn/store",{onSuccess:()=>{x.success("PPN added successfully"),d(!1),t.reset()}})},U=()=>{g(null),a.reset(),o(!0)},B=s=>{g(s),a.setData({name:s.name,rate:(parseFloat(s.rate)*100).toString(),description:s.description||""}),o(!0)},L=s=>{s.preventDefault(),a.transform(l=>({...l,rate:parseFloat(l.rate)/100})),h?a.put(`/setting/pph/update/${h.id}`,{onSuccess:()=>{x.success("PPH updated successfully"),o(!1)}}):a.post("/setting/pph/store",{onSuccess:()=>{x.success("PPH added successfully"),o(!1),a.reset()}})},v=(s,l)=>{P(s),R(l),m(!0)},V=()=>{const s=u==="ppn"?t:a,l=`/setting/${u}/destroy/${I}`;s.delete(l,{onSuccess:()=>{x.success(`${u.toUpperCase()} deleted successfully`),m(!1),P(null)},onFinish:()=>m(!1)})};return e.jsxs("div",{className:"space-y-8 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-red-700 mb-6 uppercase tracking-wider",children:"Tax Settings (PPN & PPH)"}),e.jsxs("div",{className:"space-y-4 pt-9",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"PPN (Value Added Tax)"}),e.jsxs(i,{onClick:q,className:"bg-teal-800 hover:bg-teal-900 text-white shadow-md flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"})," Add PPN"]})]}),e.jsx("div",{className:"border border-teal-900 rounded-lg overflow-hidden bg-white shadow-sm",children:e.jsxs(w,{children:[e.jsx(C,{className:"bg-teal-900",children:e.jsxs(j,{className:"hover:bg-teal-900 border-none",children:[e.jsx(r,{className:"text-white text-center w-16 font-bold",children:"No"}),e.jsx(r,{className:"text-white font-bold",children:"PPN"}),e.jsx(r,{className:"text-white font-bold",children:"Rate"}),e.jsx(r,{className:"text-white font-bold",children:"Description"}),e.jsx(r,{className:"text-white text-center w-24 font-bold",children:"Action"})]})}),e.jsx(S,{children:H?.map((s,l)=>e.jsxs(j,{className:"border-b",children:[e.jsx(n,{className:"text-center",children:l+1}),e.jsx(n,{className:"font-bold",children:s.name}),e.jsx(n,{className:"text-sm text-gray-600",children:s.rate}),e.jsx(n,{children:s.description}),e.jsx(n,{children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-blue-600 cursor-pointer",onClick:()=>M(s)}),e.jsx(T,{className:"w-4 h-4 text-red-600 cursor-pointer",onClick:()=>v(s.id,"ppn")})]})})]},s.id))})]})})]}),e.jsx(b,{isOpen:A,onClose:()=>{d(!1),t.reset()},title:p?"Edit PPN":"Create New PPN",children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["PPN",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",required:!0,placeholder:"Example: 35%",className:"mt-1 block w-full border border-gray-300 rounded-md p-2",value:t.data.name,onChange:s=>t.setData("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["PPN Rate",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"number",required:!0,placeholder:"adjust to PPN input",className:"block w-full border border-gray-300 rounded-md p-2 pr-10",value:t.data.rate,onChange:s=>t.setData("rate",s.target.value)}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 italic",children:"Enter a whole number (e.g., 11 will be saved as 0.11)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{className:"mt-1 block w-full border border-gray-300 rounded-md p-2",rows:"3",placeholder:"Add notes if necessary...",value:t.data.description,onChange:s=>t.setData("description",s.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(i,{type:"submit",className:"bg-teal-900 text-white hover:bg-teal-800",disabled:t.processing,children:t.processing?e.jsx(N,{className:"animate-spin w-4 h-4 mr-2"}):p?"Update PPN":"Save PPN"})]})]})}),e.jsxs("div",{className:"space-y-4 pt-9",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"PPH (Income Tax)"}),e.jsxs(i,{onClick:U,className:"bg-teal-800 hover:bg-teal-900 text-white shadow-md flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"})," Add PPH"]})]}),e.jsx("div",{className:"border border-teal-900 rounded-lg overflow-hidden bg-white shadow-sm",children:e.jsxs(w,{children:[e.jsx(C,{className:"bg-teal-900",children:e.jsxs(j,{className:"hover:bg-teal-900 border-none",children:[e.jsx(r,{className:"text-white text-center w-16 font-bold",children:"No"}),e.jsx(r,{className:"text-white font-bold",children:"PPH"}),e.jsx(r,{className:"text-white font-bold",children:"Rate"}),e.jsx(r,{className:"text-white font-bold",children:"Description"}),e.jsx(r,{className:"text-white text-center w-24 font-bold",children:"Action"})]})}),e.jsx(S,{children:E?.map((s,l)=>e.jsxs(j,{className:"border-b",children:[e.jsx(n,{className:"text-center",children:l+1}),e.jsx(n,{className:"font-bold",children:s.name}),e.jsx(n,{className:"text-sm text-gray-600",children:s.rate}),e.jsx(n,{children:s.description}),e.jsx(n,{children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-blue-600 cursor-pointer",onClick:()=>B(s)}),e.jsx(T,{className:"w-4 h-4 text-red-600 cursor-pointer",onClick:()=>v(s.id,"pph")})]})})]},s.id))})]})})]}),e.jsx(b,{isOpen:O,onClose:()=>{o(!1),a.reset()},title:h?"Edit PPH":"Create New PPH",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["PPH",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",required:!0,placeholder:"Example: 35%",className:"mt-1 block w-full border border-gray-300 rounded-md p-2",value:a.data.name,onChange:s=>a.setData("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["PPH Rate",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:"number",required:!0,placeholder:"adjust to PPH input",className:"block w-full border border-gray-300 rounded-md p-2 pr-10",value:a.data.rate,onChange:s=>a.setData("rate",s.target.value)}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 italic",children:"Enter a whole number (e.g., 5 will be saved as 0.05)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{className:"mt-1 block w-full border border-gray-300 rounded-md p-2",rows:"3",placeholder:"Add notes if necessary...",value:a.data.description,onChange:s=>a.setData("description",s.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(i,{type:"submit",className:"bg-teal-900 text-white hover:bg-teal-800",disabled:a.processing,children:a.processing?e.jsx(N,{className:"animate-spin w-4 h-4 mr-2"}):h?"Update PPH":"Save PPH"})]})]})}),e.jsx(b,{isOpen:F,onClose:()=>m(!1),title:"Confirm Deletion",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete this"," ",e.jsx("span",{className:"font-bold text-red-600",children:u?.toUpperCase()}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>m(!1),disabled:t.processing||a.processing,children:"Cancel"}),e.jsx(i,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:V,disabled:t.processing||a.processing,children:t.processing||a.processing?e.jsx(N,{className:"animate-spin w-4 h-4 mr-2"}):"Yes, Delete it"})]})]})})]})}function oe(){return e.jsx(z,{children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 min-h-screen",children:e.jsx(G,{})})})}export{oe as default};
