import{r as i,j as e,b as R}from"./app-D-CXuYp-.js";import{C as X,S as m}from"./ContactModal-CexXoaEx.js";import{u as ne}from"./useTranslation-C5DOJpQ8.js";import{C}from"./check-BdhqU_fL.js";import{X as _}from"./x-7oBENnvo.js";import{S as ce}from"./search-BSE1nh5m.js";import{P as k}from"./plus-9mmXNL9j.js";import{U as h}from"./user-FnYjhWZf.js";import{c as ie}from"./createLucideIcon-Da68c0mB.js";import{T as F}from"./trash-2-C428PtZi.js";import{M as q}from"./mail-CPS2hZM_.js";import{P as H}from"./phone-CLSBwmXQ.js";import{B as de}from"./briefcase-MmDWfAjW.js";import{C as oe}from"./chevron-up-C1grY4UU.js";import{C as xe}from"./chevron-down-D5S3ga3K.js";const me=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],O=ie("pen",me),De=({contacts:d=[],companyId:u,onUpdate:x,isLoading:P=!1,auth_permissions:J})=>{const{t:s}=ne(),[j,K]=i.useState(null),[S,B]=i.useState("grid"),[Q,p]=i.useState(!1),[W,V]=i.useState(!1),[Y,Z]=i.useState(null),[I,y]=i.useState(!1),[A,D]=i.useState(""),[r,b]=i.useState(""),[n,g]=i.useState("all"),[c,f]=i.useState("all"),[z,U]=i.useState("name_asc"),N=J||{};N.can_read;const w=N.can_create===1,v=N.can_update===1,L=N.can_delete===1,l=P||I,o=d.filter(t=>{const a=!r||t.name&&t.name.toLowerCase().includes(r.toLowerCase())||t.email&&t.email.toLowerCase().includes(r.toLowerCase())||t.position&&t.position.toLowerCase().includes(r.toLowerCase())||t.department&&t.department.toLowerCase().includes(r.toLowerCase()),le=n==="all"||n==="primary"&&t.is_primary||n==="secondary"&&!t.is_primary||n==="active"&&t.is_active||n==="inactive"&&!t.is_active,re=c==="all"||t.department&&t.department.toLowerCase()===c.toLowerCase();return a&&le&&re}).sort((t,a)=>{switch(z){case"name_asc":return(t.name||"").localeCompare(a.name||"");case"name_desc":return(a.name||"").localeCompare(t.name||"");case"date_asc":return new Date(t.created_at)-new Date(a.created_at);case"date_desc":return new Date(a.created_at)-new Date(t.created_at);case"position":return(t.position||"").localeCompare(a.position||"");default:return 0}}),ee=t=>{K(j===t?null:t)},M=t=>{D(t),setTimeout(()=>{D("")},3e3)},$=t=>{console.log("Editing contact:",t),Z(t),V(!0)},E=async t=>{if(confirm(s("contact_table.confirm_delete"))){y(!0);try{console.log("Deleting contact:",t);const a=await R.delete(`/companies/${u}/contacts/${t}`);if(console.log("Delete response:",a.data),a.data.success)x&&x(),M(s("contact_table.contact_deleted_success"));else throw new Error(a.data.message||s("contact_table.delete_failed"))}catch(a){console.error("Error deleting contact:",a),alert(a.response?.data?.message||s("contact_table.delete_error"))}finally{y(!1)}}},T=async t=>{y(!0);try{console.log("Toggling primary for contact:",t);const a=await R.post(`/companies/${u}/contacts/${t}/toggle-primary`);if(console.log("Toggle primary response:",a.data),a.data.success)x&&x(),M(s("contact_table.primary_contact_updated"));else throw new Error(a.data.message||s("contact_table.toggle_primary_failed"))}catch(a){console.error("Error toggling primary:",a),alert(a.response?.data?.message||s("contact_table.toggle_primary_error"))}finally{y(!1)}},G=(t,a)=>{console.log("Modal success:",a,t),x&&x(),M(s(a==="edit"?"contact_table.contact_updated_success":"contact_table.contact_added_success"))},te=()=>e.jsx("div",{className:"space-y-3",children:o.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx(h,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s(r||n!=="all"||c!=="all"?"contact_table.empty_search_results":"contact_table.no_contacts_found")}),e.jsx("p",{className:"text-gray-600 mb-4",children:s(r||n!=="all"||c!=="all"?"contact_table.try_different_search":"contact_table.add_first_contact")}),r||n!=="all"||c!=="all"?e.jsx("button",{onClick:()=>{b(""),g("all"),f("all")},className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:s("contact_table.clear_search_filters")}):w&&e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",disabled:l,children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),s("contact_table.add_first_contact_button")]})]}):o.map(t=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t.is_primary?"bg-gradient-to-br from-yellow-400 to-yellow-600":"bg-gradient-to-br from-teal-500 to-teal-700"}`,children:e.jsx(h,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900 text-sm",children:[t.name,t.is_primary&&e.jsx(m,{className:"w-3 h-3 text-yellow-500 inline-block ml-1"})]}),e.jsx("p",{className:"text-xs text-gray-600",children:t.position||s("contact_table.no_position")})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>{v&&T(t.id)},className:`p-1.5 rounded-lg ${t.is_primary?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:t.is_primary?s("contact_table.primary_contact"):s("contact_table.set_as_primary"),disabled:l,children:e.jsx(m,{className:"w-4 h-4"})}),v&&e.jsx("button",{onClick:()=>$(t),className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",title:s("contact_table.edit_contact"),disabled:l,children:e.jsx(O,{className:"w-4 h-4"})}),L&&e.jsx("button",{onClick:()=>E(t.id),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:s("contact_table.delete_contact"),disabled:l,children:e.jsx(F,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs text-gray-900 truncate",children:t.email||s("contact_table.no_email")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs text-gray-900",children:t.phone||s("contact_table.no_phone")})]}),t.department&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs text-gray-600",children:t.department})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[t.is_primary&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),s("contact_table.primary")]}),t.is_active===!1&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),s("contact_table.inactive")]})]}),e.jsx("button",{onClick:()=>ee(t.id),className:"text-gray-400 hover:text-gray-600","aria-label":j===t.id?s("contact_table.close_details"):s("contact_table.open_details"),children:j===t.id?e.jsx(oe,{className:"w-4 h-4"}):e.jsx(xe,{className:"w-4 h-4"})})]}),j===t.id&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"space-y-3",children:[t.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:s("contact_table.notes")}),e.jsx("p",{className:"text-sm text-gray-700",children:t.notes})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s("contact_table.created_at")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.created_at?new Date(t.created_at).toLocaleDateString():"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:s("contact_table.last_contacted")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.last_contacted?new Date(t.last_contacted).toLocaleDateString():s("contact_table.never_contacted")})]})]})]})})]},t.id))}),se=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.length===0?e.jsxs("div",{className:"col-span-full bg-white border border-gray-200 rounded-xl p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-100 to-teal-200 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(h,{className:"w-10 h-10 text-teal-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:s(r||n!=="all"||c!=="all"?"contact_table.empty_search_results":"contact_table.no_contacts_yet")}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:s(r||n!=="all"||c!=="all"?"contact_table.try_different_search":"contact_table.add_contacts_description")}),r||n!=="all"||c!=="all"?e.jsx("button",{onClick:()=>{b(""),g("all"),f("all")},className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:s("contact_table.clear_search_filters")}):w&&e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-teal-600 to-teal-700 text-white rounded-lg hover:from-teal-700 hover:to-teal-800 transition-all duration-300 font-medium shadow-md hover:shadow-lg",disabled:l,children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),s("contact_table.add_first_contact_button_long")]})]}):o.map(t=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${t.is_primary?"bg-gradient-to-br from-yellow-400 to-yellow-600":"bg-gradient-to-br from-teal-500 to-teal-700"}`,children:e.jsx(h,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[t.name,t.is_primary&&e.jsx(m,{className:"w-4 h-4 text-yellow-500 inline-block ml-2"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate max-w-[150px]",children:t.position||s("contact_table.no_position_specified")}),t.department&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.department})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T(t.id),className:`p-1.5 rounded-lg ${t.is_primary?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:t.is_primary?s("contact_table.primary_contact"):s("contact_table.set_as_primary"),disabled:l,children:e.jsx(m,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(t),className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",title:s("contact_table.edit_contact"),disabled:l,children:e.jsx(O,{className:"w-4 h-4"})})]}),L&&e.jsx("button",{onClick:()=>E(t.id),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:s("contact_table.delete_contact"),disabled:l,children:e.jsx(F,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(q,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:s("contact_table.email_label")}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.email||s("contact_table.no_email_provided")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(H,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:s("contact_table.phone_label")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.phone||s("contact_table.no_phone_provided")})]})]})]}),t.notes&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:s("contact_table.notes")}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:t.notes})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex space-x-2",children:[t.is_primary&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),s("contact_table.primary_contact_label")]}),t.is_active===!1&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),s("contact_table.inactive_label")]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.created_at&&e.jsxs("span",{children:[s("contact_table.created_at"),": ",new Date(t.created_at).toLocaleDateString()]})})]})]},t.id))}),ae=()=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:o.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-100 to-teal-200 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(h,{className:"w-10 h-10 text-teal-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:s(r||n!=="all"||c!=="all"?"contact_table.empty_search_results":"contact_table.no_contacts_available")}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:s(r||n!=="all"||c!=="all"?"contact_table.try_different_search":"contact_table.add_contacts_description_short")}),r||n!=="all"||c!=="all"?e.jsx("button",{onClick:()=>{b(""),g("all"),f("all")},className:"inline-flex items-center px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:s("contact_table.clear_search_filters")}):w&&e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-teal-600 to-teal-700 text-white rounded-lg hover:from-teal-700 hover:to-teal-800 transition-all duration-300 font-medium shadow-md hover:shadow-lg",disabled:l,children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),s("contact_table.add_first_contact_button")]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:s("contact_table.contact")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:s("contact_table.position")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:s("contact_table.email")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:s("contact_table.phone")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:s("contact_table.status")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:s("contact_table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t.is_primary?"bg-gradient-to-br from-yellow-400 to-yellow-600":"bg-gradient-to-br from-teal-500 to-teal-700"}`,children:e.jsx(h,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[t.name,t.is_primary&&e.jsx(m,{className:"w-3 h-3 text-yellow-500 inline-block ml-1"})]}),t.department&&e.jsx("div",{className:"text-xs text-gray-500",children:t.department})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.position||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 truncate max-w-xs",children:t.email||s("contact_table.no_email")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.phone||s("contact_table.no_phone")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.is_primary?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),s("contact_table.primary")]}):e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s("contact_table.secondary")}),t.is_active===!1&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),s("contact_table.inactive")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T(t.id),className:`p-1.5 rounded-lg ${t.is_primary?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:t.is_primary?s("contact_table.primary_contact"):s("contact_table.set_as_primary"),disabled:l,children:e.jsx(m,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(t),className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",title:s("contact_table.edit_contact"),disabled:l,children:e.jsx(O,{className:"w-4 h-4"})})]}),L&&e.jsx("button",{onClick:()=>E(t.id),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:s("contact_table.delete_contact"),disabled:l,children:e.jsx(F,{className:"w-4 h-4"})})]})})]},t.id))})]})})});return e.jsxs("div",{className:"relative",children:[A&&e.jsx("div",{className:"mb-6 animate-fade-in-down",children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(C,{className:"w-5 h-5 text-green-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:A})}),e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{onClick:()=>D(""),className:"text-green-600 hover:text-green-800",children:e.jsx(_,{className:"w-4 h-4"})})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s("contact_table.contact_persons")}),e.jsx("p",{className:"text-gray-600 mt-1",children:s("contact_table.manage_contacts_description")})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:s("contact_table.search_contacts"),value:r,onChange:t=>b(t.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 w-48 sm:w-64",disabled:l})]}),o.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>B("grid"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${S==="grid"?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:l,children:s("contact_table.grid_view")}),e.jsx("button",{onClick:()=>B("list"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${S==="list"?"bg-white text-teal-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:l,children:s("contact_table.list_view")})]})}),w&&e.jsx("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-teal-600 to-teal-700 text-white rounded-lg hover:from-teal-700 hover:to-teal-800 transition-all duration-300 font-medium shadow-md hover:shadow-lg",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:s("contact_table.adding")})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:s("contact_table.add_contact")})]})})]})]}),d.length>0&&e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4",children:[e.jsxs("select",{value:n,onChange:t=>g(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",disabled:l,children:[e.jsx("option",{value:"all",children:s("contact_table.all_status")}),e.jsx("option",{value:"primary",children:s("contact_table.primary_only")}),e.jsx("option",{value:"secondary",children:s("contact_table.secondary_only")}),e.jsx("option",{value:"active",children:s("contact_table.active")}),e.jsx("option",{value:"inactive",children:s("contact_table.inactive")})]}),e.jsxs("select",{value:z,onChange:t=>U(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",disabled:l,children:[e.jsx("option",{value:"name_asc",children:s("contact_table.sort_name_asc")}),e.jsx("option",{value:"name_desc",children:s("contact_table.sort_name_desc")}),e.jsx("option",{value:"date_asc",children:s("contact_table.sort_date_asc")}),e.jsx("option",{value:"date_desc",children:s("contact_table.sort_date_desc")}),e.jsx("option",{value:"position",children:s("contact_table.sort_position")})]}),(r||n!=="all")&&e.jsxs("button",{onClick:()=>{b(""),g("all"),f("all")},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),s("contact_table.clear_filters")]})]}),P&&d.length===0?e.jsxs("div",{className:"flex flex-col justify-center items-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-14 w-14 border-b-2 border-teal-600 mb-4"}),e.jsx("span",{className:"text-gray-600",children:s("contact_table.loading_contacts")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:hidden",children:e.jsx(te,{})}),e.jsx("div",{className:"hidden sm:block",children:S==="grid"?e.jsx(se,{}):e.jsx(ae,{})}),d.length>0&&e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:s("contact_table.contact_statistics")}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 p-5 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium text-blue-700 mb-2",children:s("contact_table.total_contacts")}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:d.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 p-5 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:s("contact_table.primary_contacts")}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:d.filter(t=>t.is_primary).length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 p-5 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium text-purple-700 mb-2",children:s("contact_table.active_contacts")}),e.jsx("p",{className:"text-3xl font-bold text-purple-900",children:d.filter(t=>t.is_active!==!1).length})]})]})]})]}),e.jsx(X,{isOpen:Q,onClose:()=>p(!1),companyId:u,mode:"add",onSuccess:G}),e.jsx(X,{isOpen:W,onClose:()=>V(!1),companyId:u,contact:Y,mode:"edit",onSuccess:G})]})};export{De as default};
