import{a as T,r as f,u as E,j as e,c as C}from"./app-BTbkV42h.js";import{H as M}from"./HeaderLayout-BOd0q3W-.js";import{P as S}from"./PrimaryButton-tLhKuWAj.js";import{M as L}from"./ModalAdd-B8tK-ZdA.js";import{T as A}from"./TableLayout-C2tjGemz.js";import{n as i}from"./index-CsoFOmIB.js";import{u as D}from"./useTranslation-CATg2OkV.js";import"./transition-MPasdNlU.js";import"./settings-CdYEu26S.js";import"./createLucideIcon-DHxmSlVR.js";import"./send-stj9b7Y9.js";import"./globe-CiSLK2lF.js";import"./chevron-down-BBjuMcoq.js";import"./check-CMDYYhgh.js";import"./user-DWczQdUG.js";import"./file-text-DZzzDjT5.js";import"./x-bUU7PHNQ.js";function X({auth_permissions:n}){const{templates:h}=T().props,[g,s]=f.useState(!1),[r,d]=f.useState(null),{t:l}=D(),{data:c,setData:o,post:j,put:y,processing:m,errors:a,reset:u}=E({name:"",subject:"",content:""});n.can_read;const N=n.can_create===1,p=n.can_update===1,x=n.can_delete===1,b=(t=null)=>{t?(d(t.id),o({name:t.name,subject:t.subject,content:t.content})):(d(null),u()),s(!0)},v=t=>{t.preventDefault(),r?y(route("email.update",r),{onSuccess:()=>{i.success("Template berhasil diperbarui!"),s(!1)}}):j(route("email.store"),{onSuccess:()=>{i.success("Template berhasil ditambahkan!"),u(),s(!1)}})},w=t=>{confirm("Apakah Anda yakin ingin menghapus template ini?")&&C.delete(route("email.destroy",t),{onSuccess:()=>i.success("Template berhasil dihapus"),onError:()=>i.error("Gagal menghapus template")})},k=[{key:"name",label:l("emails.table.name")||"Name"},{key:"subject",label:l("emails.table.subject")||"Subject"}];return e.jsxs(M,{title:"Email Management",children:[e.jsxs("div",{className:"px-4 sm:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:l("emails.title")||"Email Templates"}),N&&e.jsxs(S,{onClick:()=>b(),className:"w-full sm:w-auto px-5 py-2.5 text-white text-sm font-medium rounded-lg hover:bg-[#004d47] transition-all duration-200 flex items-center justify-center gap-2 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:l("emails.button_add")||"Add New Template"})]})]}),e.jsx(A,{data:h,columns:k,onEdit:p?t=>b(t):null,onDelete:x?t=>w(t.id):null,showAction:p||x})]}),e.jsx(L,{isOpen:g,onClose:()=>s(!1),title:r?"Edit Template Email":"Tambah Template Email",subtitle:"Kelola konten email otomatis dengan tag dinamis seperti {name}",footer:e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium flex-1",children:"Batal"}),e.jsxs("button",{onClick:v,disabled:m,className:"px-6 py-3 bg-[#005954] text-white rounded-xl hover:bg-[#004d47] transition-colors font-medium flex-1 disabled:opacity-50 flex items-center justify-center gap-2",children:[m?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:r?"Update Template":"Simpan Template"})]})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wider",children:"Nama Internal"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent bg-gray-50/50 transition-all text-sm",value:c.name,onChange:t=>o("name",t.target.value),placeholder:"Misal: Welcome User"}),a.name&&e.jsxs("p",{className:"text-red-500 text-xs mt-1.5 italic flex items-center gap-1",children:[e.jsx("span",{className:"not-italic",children:"⚠️"})," ",a.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wider",children:"Subject Email"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent bg-gray-50/50 transition-all text-sm",value:c.subject,onChange:t=>o("subject",t.target.value),placeholder:"Subject yang dilihat penerima"}),a.subject&&e.jsxs("p",{className:"text-red-500 text-xs mt-1.5 italic flex items-center gap-1",children:[e.jsx("span",{className:"not-italic",children:"⚠️"})," ",a.subject]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Konten Email (HTML)"}),e.jsxs("span",{className:"text-[10px] text-gray-400 font-mono bg-gray-100 px-2 py-1 rounded",children:["Placeholder: ","{name}"]})]}),e.jsx("textarea",{rows:"8",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent bg-gray-50/50 transition-all text-sm font-mono leading-relaxed",value:c.content,onChange:t=>o("content",t.target.value),placeholder:"<html>...</html>"}),a.content&&e.jsxs("p",{className:"text-red-500 text-xs mt-1.5 italic flex items-center gap-1",children:[e.jsx("span",{className:"not-italic",children:"⚠️"})," ",a.content]})]})]})})]})}export{X as default};
