import{r as c,j as e,a as S,u as U}from"./app--V8YQuQk.js";import{L as d,I as b}from"./Label-DCRH8hT7.js";import{c as k,B as h,t as R}from"./index-Dt_dz-fy.js";import{C as O}from"./chevron-down-DnOCgVxl.js";import{L as w}from"./loader-circle-DdQx-sZ8.js";import{c as I}from"./createLucideIcon-D7A-7CJ7.js";const E=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],F=I("image",E),m=c.createContext();function v({value:s,onValueChange:a,children:n}){const[l,o]=c.useState(!1);return e.jsx(m.Provider,{value:{value:s,onValueChange:a,open:l,setOpen:o},children:e.jsx("div",{className:"relative w-full",children:n})})}const N=c.forwardRef(({className:s,children:a,...n},l)=>{const{open:o,setOpen:u}=c.useContext(m);return e.jsxs("button",{ref:l,type:"button",onClick:()=>u(!o),className:k("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm shadow-sm","focus:outline-none focus:ring-2 focus:ring-primary",s),...n,children:[a,e.jsx(O,{className:"h-4 w-4 opacity-50"})]})});function y({placeholder:s}){const{value:a}=c.useContext(m);return e.jsx("span",{className:"truncate",children:a||e.jsx("span",{className:"text-muted-foreground",children:s})})}function _({children:s}){const{open:a,setOpen:n}=c.useContext(m);return a?e.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",onMouseLeave:()=>n(!1),children:e.jsx("div",{className:"max-h-60 overflow-auto py-1",children:s})}):null}function x({value:s,children:a}){const{onValueChange:n,setOpen:l}=c.useContext(m);return e.jsx("div",{onClick:()=>{n(s),l(!1)},className:"cursor-pointer px-3 py-2 text-sm hover:bg-muted",children:a})}function G(){const{config:s}=S().props,[a,n]=c.useState(null),{data:l,setData:o,post:u,processing:r,errors:p}=U({company_name:s?.company_name??"",address:s?.address??"",default_language:s?.default_language??"Indonesia",allow_language_change:s?.allow_language_change==1||s?.allow_language_change===!0,logo:null,doc_logo:null});c.useEffect(()=>{s&&o({company_name:s.company_name??"",address:s.address??"",default_language:s.default_language??"Indonesia",allow_language_change:s.allow_language_change==1||s.allow_language_change===!0})},[s]);const i=l.logo?URL.createObjectURL(l.logo):s?.logo_url??(s?.logo_path?`/storage/${s.logo_path}`:null),g=l.doc_logo?URL.createObjectURL(l.doc_logo):s?.doc_logo_url??(s?.doc_logo_path?`/storage/${s.doc_logo_path}`:null);if(!s)return e.jsxs("div",{className:"flex items-center justify-center h-48",children:[e.jsx(w,{className:"animate-spin text-red-700"}),e.jsx("span",{className:"ml-2",children:"Loading settings..."})]});const f=()=>{u("/setting/general/store",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{R.success("Settings updated"),o(t=>({...t,logo:null,doc_logo:null}))}})},j=t=>{o(a==="topbar"?"logo":"doc_logo",t),n(null)};return e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 px-4 sm:px-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-red-700 mb-6 uppercase tracking-wider",children:"General Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 w-full max-w-4xl mx-auto",children:[e.jsx(d,{htmlFor:"company_name",children:"Company Name*"}),e.jsx(b,{id:"company_name",value:l.company_name,onChange:t=>o("company_name",t.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2 w-full max-w-4xl mx-auto",children:[e.jsx(d,{htmlFor:"address",children:"Address*"}),e.jsx(b,{id:"address",value:l.address,onChange:t=>o("address",t.target.value),className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-green-50/50 p-4 rounded-lg space-y-3 w-full",children:[e.jsx(d,{className:"font-semibold",children:"Default Language"}),e.jsxs(v,{value:l.default_language,onValueChange:t=>o("default_language",t),children:[e.jsx(N,{className:"bg-white",children:e.jsx(y,{placeholder:"Select Language"})}),e.jsxs(_,{children:[e.jsx(x,{value:"English",children:"English"}),e.jsx(x,{value:"Indonesia",children:"Indonesia"})]})]})]}),e.jsxs("div",{className:"bg-green-50/50 p-4 rounded-lg space-y-3 w-full",children:[e.jsx(d,{className:"font-semibold",children:"Allow User To Change Language"}),e.jsxs(v,{value:l.allow_language_change?"Yes":"No",onValueChange:t=>o("allow_language_change",t==="Yes"),children:[e.jsx(N,{className:"bg-white",children:e.jsx(y,{})}),e.jsxs(_,{children:[e.jsx(x,{value:"Yes",children:"Yes"}),e.jsx(x,{value:"No",children:"No"})]})]})]})]}),e.jsxs("div",{className:"bg-green-50/50 p-6 rounded-lg w-full max-w-4xl mx-auto",children:[e.jsx(d,{className:"font-bold mb-4 block",children:"Logo Assets"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(L,{title:"Topbar Logo",url:i,onAction:()=>n("topbar")}),e.jsx(L,{title:"Document Logo",url:g,onAction:()=>n("document")})]})]})]}),e.jsx("div",{className:"mt-8 flex flex-col sm:flex-row justify-end gap-2 w-full max-w-4xl mx-auto",children:e.jsx(h,{onClick:f,disabled:r,className:"bg-teal-800 hover:bg-teal-900 text-white px-8 w-full sm:w-auto",children:r?e.jsx(w,{className:"animate-spin mr-2"}):"Save Settings"})})]}),a&&e.jsx(P,{open:!!a,onClose:()=>n(null),onSave:j,initialPreview:a==="topbar"?i:g})]})}function L({title:s,url:a,onAction:n}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"font-semibold text-sm",children:s}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 bg-white h-48 flex items-center justify-center rounded-lg overflow-hidden",children:a?e.jsx("img",{src:a,alt:"Logo",className:"max-h-full max-w-full object-contain p-2"}):e.jsx(F,{className:"w-12 h-12 text-gray-300"})}),e.jsx(h,{onClick:n,variant:a?"outline":"default",className:`w-full ${a?"":"bg-cyan-600 hover:bg-cyan-700 text-white"}`,children:a?"Change Logo":"Upload Logo"})]})}function P({open:s,onClose:a,onSave:n,initialPreview:l=null}){const[o,u]=c.useState(null),[r,p]=c.useState(l),[i,g]=c.useState(!1),f=j=>{const t=j.target.files[0];if(t){u(t),i&&r&&URL.revokeObjectURL(r);const C=URL.createObjectURL(t);p(C),g(!0)}};return c.useEffect(()=>()=>{i&&r&&URL.revokeObjectURL(r)},[]),c.useEffect(()=>{l&&(i&&r&&URL.revokeObjectURL(r),p(l),g(!1))},[l]),s?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl p-6 space-y-4 shadow-2xl",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Upload New Logo"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Select Image File"}),e.jsx(b,{type:"file",accept:"image/*",onChange:f,className:"cursor-pointer"})]}),r&&e.jsxs("div",{className:"border rounded-lg p-4 flex flex-col items-center justify-center bg-gray-50 space-y-2",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Preview"}),e.jsx("img",{src:r,alt:"Preview",className:"max-h-40 object-contain rounded shadow-sm"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(h,{variant:"ghost",onClick:a,children:"Cancel"}),e.jsx(h,{disabled:!o,onClick:()=>n(o),className:"bg-cyan-600 hover:bg-cyan-700 text-white px-6",children:"Confirm"})]})]})}):null}export{G};
