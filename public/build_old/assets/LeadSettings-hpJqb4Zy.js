import{a as M,r as d,u as v,j as e,c as A}from"./app-D-CXuYp-.js";import{S as w}from"./switch-B7clG62D.js";import{T as S,a as C,b as i,c as l,d as k,e as t}from"./Table-CVqFnP0M.js";import{B as j}from"./Button-CKm56AAs.js";import{t as n}from"./index-2VGEpQq_.js";import{S as R}from"./SimpleModal-Bh1mFJKt.js";import{P as q}from"./plus-9mmXNL9j.js";import{S as I}from"./square-pen-BuP-lLgl.js";import{T as U}from"./trash-2-C428PtZi.js";import{L as F}from"./loader-circle-Cmn6e3Cc.js";function ae(){const{config:x,statuses:g}=M().props,[u,H]=d.useState(!1),[L,o]=d.useState(!1),[b,O]=d.useState(null),{data:p,setData:m,post:B,put:T,delete:E,processing:N,reset:P,errors:z}=v({name:"",note:"",color:"",color_name:""}),G=s=>{O(s),m({name:s.name,note:s.note||"",color:s.color,color_name:s.color_name}),o(!0)},$=s=>{s.preventDefault(),b?T(`/setting/lead-status/update/${b.id}`,{onSuccess:()=>{n.success("Status updated successfully"),o(!1)}}):B("/setting/lead-status/store",{onSuccess:()=>{n.success("Status added successfully"),o(!1),P()}})},D=s=>{confirm("Are you sure you want to delete this status?")&&E(`/setting/lead-status/destroy/${s}`,{onSuccess:()=>n.success("Status deleted successfully"),onError:()=>n.error("Failed to delete status")})},y=s=>s===!0||s===1||s==="1"||s==="true",[a,f]=d.useState({lead_user_base_visibility:!1,lead_default_filter_by_login:!1});d.useEffect(()=>{x&&f({lead_user_base_visibility:y(x.lead_user_base_visibility),lead_default_filter_by_login:y(x.lead_default_filter_by_login)})},[x]);const{processing:V}=v(),_=(s,r)=>{const h=!r;f(c=>({...c,[s]:h})),A.post("/setting/general/store",{[s]:h},{preserveScroll:!0,onSuccess:()=>n.success("Settings updated"),onError:()=>{f(c=>({...c,[s]:r})),n.error("Failed to update")}})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-700 mb-6 uppercase tracking-wider",children:"Lead Settings"}),e.jsxs(j,{onClick:()=>o(!0),className:"bg-teal-800 hover:bg-teal-900 text-white shadow-md flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"})," Add Status"]})]}),e.jsx("div",{className:"-mx-4 sm:mx-0 px-4 sm:px-0 overflow-x-auto",children:e.jsx("div",{className:"min-w-[720px]",children:e.jsx("div",{className:"border border-teal-900 rounded-lg overflow-hidden bg-white shadow-sm",children:e.jsxs(S,{children:[e.jsx(C,{className:"bg-teal-900",children:e.jsxs(i,{className:"hover:bg-teal-900 border-none",children:[e.jsx(l,{className:"text-white text-center w-16 font-bold",children:"No"}),e.jsx(l,{className:"text-white font-bold",children:"Status"}),e.jsx(l,{className:"text-white font-bold",children:"Note"}),e.jsx(l,{className:"text-white font-bold",children:"Color"}),e.jsx(l,{className:"text-white font-bold",children:"Created By"}),e.jsx(l,{className:"text-white text-center w-24 font-bold",children:"Action"})]})}),e.jsx(k,{children:g?.length>0?g.map((s,r)=>e.jsxs(i,{className:"border-b",children:[e.jsx(t,{className:"text-center",children:r+1}),e.jsx(t,{className:"font-bold",children:s.name}),e.jsx(t,{className:"text-sm text-gray-600",children:s.note}),e.jsx(t,{className:"text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),s.color_name]})}),e.jsx(t,{className:"text-sm text-gray-600",children:s.creator?.name||"System"}),e.jsx(t,{children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-blue-600 cursor-pointer hover:scale-110 transition-transform",onClick:()=>G(s)}),e.jsx(U,{className:"w-4 h-4 text-red-600 cursor-pointer hover:scale-110 transition-transform",onClick:()=>D(s.id)})]})})]},s.id)):e.jsx(i,{children:e.jsx(t,{colSpan:4,className:"text-center py-10 text-gray-400 italic",children:"No status data available."})})})]})})})})]}),e.jsx(R,{isOpen:L,onClose:()=>o(!1),title:b?"Edit Lead Status":"Create New Lead Status",children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status Name"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-teal-500 focus:border-teal-500",value:p.name,onChange:s=>m("name",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Note"}),e.jsx("textarea",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-teal-500 focus:border-teal-500",rows:"2",value:p.note,onChange:s=>m("note",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Color"}),e.jsxs("select",{required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-teal-500 focus:border-teal-500",value:p.color_name,onChange:s=>{const r=s.target.value,h={Orange:"#F97316",Blue:"#3B82F6",Green:"#22C55E",Gray:"#6B7280"};m(c=>({...c,color_name:r,color:h[r]||""}))},children:[e.jsx("option",{value:"",children:"-- Choose Color --"}),e.jsx("option",{value:"Orange",children:"Orange"}),e.jsx("option",{value:"Blue",children:"Blue"}),e.jsx("option",{value:"Green",children:"Green"}),e.jsx("option",{value:"Gray",children:"Gray"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(j,{type:"submit",className:"bg-teal-900 text-white",disabled:N,children:N?e.jsx(F,{className:"w-4 h-4 animate-spin"}):"Save Changes"})]})]})}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"Lead Restrictions"}),e.jsx("div",{className:"-mx-4 sm:mx-0 px-4 sm:px-0 overflow-x-auto",children:e.jsx("div",{className:"min-w-[720px]",children:e.jsx("div",{className:"border border-teal-900 rounded-lg overflow-hidden bg-white shadow-sm",children:e.jsxs(S,{children:[e.jsx(C,{className:"bg-teal-900",children:e.jsxs(i,{className:"hover:bg-teal-900 border-none",children:[e.jsx(l,{className:"text-white font-bold w-48 text-center border-r border-teal-800",children:"Field"}),e.jsx(l,{className:"text-white font-bold w-32 text-center border-r border-teal-800",children:"Setting"}),e.jsx(l,{className:"text-white font-bold text-center border-r border-teal-800",children:"Description"}),e.jsx(l,{className:"text-white font-bold w-64 text-center",children:"Note"})]})}),e.jsxs(k,{children:[e.jsxs(i,{className:"border-b",children:[e.jsx(t,{className:"font-medium px-4 text-center border-r",children:"User-Base Visibility"}),e.jsx(t,{className:"text-center py-6 border-r",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(w,{checked:a.lead_user_base_visibility,onCheckedChange:()=>_("lead_user_base_visibility",a.lead_user_base_visibility),disabled:u},`vis-${a.lead_user_base_visibility}`),e.jsx("span",{className:`text-[10px] font-black uppercase ${a.lead_user_base_visibility?"text-green-600":"text-red-600"}`,children:a.lead_user_base_visibility?"ON":"OFF"})]})}),e.jsxs(t,{className:"px-4 text-sm border-r",children:["Restrict users to see only Leads they"," ",e.jsx("span",{className:"font-bold text-red-700",children:"created"})," ","or are"," ",e.jsx("span",{className:"font-bold text-red-700",children:"assigned to"}),"."]}),e.jsx(t,{className:"px-4 text-sm bg-gray-50/50",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-red-700 uppercase text-[10px]",children:"ON"})," ","= User sees only their Leads"]}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-red-700 uppercase text-[10px]",children:"OFF"})," ","= User sees all accessible Leads"]})]})})]}),e.jsxs(i,{children:[e.jsx(t,{className:"font-medium px-4 text-center border-r",children:"Default Filter by Login"}),e.jsx(t,{className:"text-center py-6 border-r",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(w,{checked:a.lead_default_filter_by_login,onCheckedChange:()=>_("lead_default_filter_by_login",a.lead_default_filter_by_login),disabled:u},`fil-${a.lead_default_filter_by_login}`),e.jsx("span",{className:`text-[10px] font-black uppercase ${a.lead_default_filter_by_login?"text-green-600":"text-red-600"}`,children:a.lead_default_filter_by_login?"ON":"OFF"})]})}),e.jsx(t,{className:"px-4 text-sm border-r",children:"Automatically filter Lead table to show only data related to the logged-in user."}),e.jsxs(t,{className:"px-4 text-sm bg-gray-50/50 italic text-gray-600",children:["If"," ",e.jsx("span",{className:"font-bold text-red-700 uppercase text-[10px]",children:"OFF"}),", table shows all visible Leads initially; user can still filter manually."]})]})]})]})})})})]}),u&&e.jsxs("div",{className:"fixed bottom-6 right-6 bg-teal-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 animate-bounce z-50",children:[e.jsx(F,{className:"w-5 h-5 animate-spin text-teal-300"}),e.jsx("span",{className:"font-bold text-sm tracking-widest uppercase",children:"Syncing..."})]})]})}export{ae as L};
