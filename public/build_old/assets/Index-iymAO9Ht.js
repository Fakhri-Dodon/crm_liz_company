import{r as o,u as G,b as Y,j as e,c as z,a as oe,H as de}from"./app--V8YQuQk.js";import{H as ce}from"./HeaderLayout-Bk7u9NLn.js";import{T as ie}from"./TableLayout-BTyK602-.js";import{F as J}from"./file-text-BkpdNTL0.js";import{X as me}from"./x-DGqtnagE.js";import{L as B}from"./loader-circle-DdQx-sZ8.js";import{U as ue}from"./users-Ct2E2Ljn.js";import{C as V}from"./chevron-down-DnOCgVxl.js";import{C as K}from"./calendar-Bfq9qOyj.js";import{C as xe}from"./clock-mQHhekFu.js";import{c as pe}from"./createLucideIcon-D7A-7CJ7.js";import{D as ge}from"./DeleteModal-DHZPJn7_.js";import{P as he}from"./plus-D5prKAx_.js";import{S as be}from"./search-D65wTQHs.js";import{F as fe}from"./funnel-CHJrTea-.js";import{R as ye}from"./refresh-cw-LPNXZfv2.js";import"./transition-D2W53CQ5.js";import"./useTranslation-DGCn9e9S.js";import"./index-DvGSOaWZ.js";import"./settings-B2fgqRwV.js";import"./send-BzvzPsAY.js";import"./globe-DUm1N8J0.js";import"./check-BtXJC3Kt.js";import"./user-D9rdox91.js";import"./triangle-alert-tJvvQB1h.js";const je=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ve=pe("message-square",je),X=({show:u,onClose:k,projectId:g,companies:w,quotations:P,statusOptions:I,isEdit:d=!1,title:_="Add Project"})=>{const[f,b]=o.useState(!1),[y,E]=o.useState([]),[Q,$]=o.useState(null),[L,S]=o.useState(!1),{data:i,setData:m,post:H,put:j,processing:l,errors:n,reset:C}=G({quotation_id:"",company_id:"",project_description:"",start_date:"",deadline:"",note:"",status:"in_progress"});o.useEffect(()=>{if(u)if(w&&w.length>0){const s=w.map(a=>({id:a.id,name:a.name||a.full_display||a.display_name,display_name:a.display_name||a.name,full_display:a.full_display||a.display_name||a.name,client_code:a.client_code,city:a.city,has_lead:a.has_lead}));E(s),console.log("Clients loaded from props:",s.length)}else F()},[u,w]),o.useEffect(()=>{u&&d&&g&&T()},[u,d,g]),o.useEffect(()=>{u&&!d&&D()},[u,d]);const F=async()=>{S(!0);try{const s=await Y.get("/api/clients");console.log("Clients API Response:",s.data),s.data.success?(E(s.data.data),s.data.data&&s.data.data.length>0&&(console.log("Sample clients:"),s.data.data.slice(0,3).forEach((a,v)=>{console.log(`Client ${v+1}:`,{id:a.id,name:a.name,full_display:a.full_display,lead_company_name:a.lead_company_name,client_code:a.client_code})}))):console.error("Failed to fetch clients:",s.data.message)}catch(s){console.error("Error fetching clients:",s),console.error("Error response:",s.response?.data)}finally{S(!1)}},T=async()=>{b(!0);try{const a=(await Y.get(`/projects/${g}/edit`)).data;$(a);const v={quotation_id:a.quotation_id||"",company_id:a.company_id||"",project_description:a.project_description||"",start_date:a.start_date||"",deadline:a.deadline||"",note:a.note||"",status:a.status||"in_progress"};m(v),console.log("Project data loaded:",{company_id:a.company_id,company_name:a.company?.name,company_full_display:a.company?.full_display})}catch(s){console.error("Error fetching project data:",s),s.response?.status===404&&(alert("Project not found. It may have been deleted."),h())}finally{b(!1)}},D=()=>{C({quotation_id:"",company_id:"",project_description:"",start_date:"",deadline:"",note:"",status:"in_progress"}),$(null)},q=I?.filter(s=>["in_progress","completed","pending","cancelled"].includes(s.value))||[],R=s=>{s.preventDefault(),d&&g?j(route("projects.update",g),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),D(),k(),z.reload({only:["projects","summary","filters"],preserveScroll:!0})},onError:a=>{console.error("Update errors:",a)}}):H(route("projects.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{D(),C(),k(),z.reload({only:["projects","summary","filters"],preserveScroll:!0})},onError:a=>{console.error("Store errors:",a)}})},h=()=>{D(),C(),k()};return u?e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-[#005954]/10 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-[#005954]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:_}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:d?"Update project details":"Create a new project"})]})]}),e.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",disabled:l||f,children:e.jsx(me,{className:"w-5 h-5"})})]}),f&&d?e.jsxs("div",{className:"p-12 flex flex-col items-center justify-center",children:[e.jsx(B,{className:"w-8 h-8 text-[#005954] animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading project data..."})]}):e.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Project Description *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:i.project_description,onChange:s=>m("project_description",s.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent min-h-[100px] resize-none transition-colors ${n.project_description?"border-red-300":"border-gray-300"}`,maxLength:250,required:!0,placeholder:"Describe the project scope and objectives...",disabled:l}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.project_description?e.jsx("p",{className:"text-sm text-red-600",children:n.project_description}):e.jsx("div",{className:"text-xs text-gray-400",children:"Brief and descriptive (max 250 characters)"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[i.project_description?.length||0,"/250"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Client *"]}),e.jsx("div",{className:"relative",children:L&&y.length===0?e.jsxs("div",{className:"flex items-center justify-center py-3 border border-gray-300 rounded-xl",children:[e.jsx(B,{className:"w-4 h-4 animate-spin text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading clients..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:i.company_id,onChange:s=>m("company_id",s.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent appearance-none transition-colors ${n.company_id?"border-red-300":"border-gray-300"}`,required:!0,disabled:l||L,children:[e.jsx("option",{value:"",className:"text-gray-400",children:"Select a client"}),y.map(s=>e.jsx("option",{value:s.id,children:s.full_display||s.display_name||s.name},s.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(V,{className:"w-4 h-4"})})]})}),n.company_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.company_id}),y.length>0&&e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[y.length," clients available"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Quotation *"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:i.quotation_id,onChange:s=>m("quotation_id",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent appearance-none transition-colors",required:!0,disabled:l,children:[e.jsx("option",{value:"",className:"text-gray-400",children:"Select a quotation"}),P&&P.map(s=>e.jsx("option",{value:s.id,children:s.display_name||s.name||s.number},s.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx(V,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Start Date *"]}),e.jsx("input",{type:"date",value:i.start_date,onChange:s=>m("start_date",s.target.value),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent transition-colors ${n.start_date?"border-red-300":"border-gray-300"}`,required:!0,disabled:l}),n.start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.start_date})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"Deadline *"]}),e.jsx("input",{type:"date",value:i.deadline,onChange:s=>m("deadline",s.target.value),min:i.start_date,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent transition-colors ${n.deadline?"border-red-300":"border-gray-300"}`,required:!0,disabled:l}),n.deadline&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.deadline})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.map(s=>{const v={in_progress:"bg-blue-50 text-blue-700 border-blue-200",completed:"bg-green-50 text-green-700 border-green-200",pending:"bg-yellow-50 text-yellow-700 border-yellow-200",cancelled:"bg-red-50 text-red-700 border-red-200"}[s.value]||"bg-gray-50 text-gray-700 border-gray-200";return e.jsx("button",{type:"button",onClick:()=>m("status",s.value),className:`p-3 border rounded-lg text-sm font-medium transition-all ${i.status===s.value?`${v} ring-2 ring-offset-1 ring-[#005954]`:`${v} hover:opacity-90`}`,disabled:l,children:s.label},s.value)})}),n.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.status})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Note (Optional)"]}),e.jsx("textarea",{value:i.note,onChange:s=>m("note",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#005954] focus:border-transparent min-h-[100px] resize-none transition-colors",maxLength:250,placeholder:"Additional notes or requirements...",disabled:l}),e.jsxs("div",{className:"text-right text-xs text-gray-500 mt-2",children:[i.note?.length||0,"/250 characters"]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-6 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:h,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium flex-1",disabled:l||f,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-[#005954] text-white rounded-xl hover:bg-[#004d47] transition-colors font-medium flex-1 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md",disabled:l||f||y.length===0&&L,children:l||f?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),f?"Loading...":"Processing..."]}):d?"Update Project":"Create Project"})]})]})]})})}):null};function Be({projects:u,summary:k,filters:g,years:w,companies:P,quotations:I,statusOptions:d,auth_permissions:_}){const{props:f}=oe(),b=f.flash||{},[y,E]=o.useState(!1),[Q,$]=o.useState(!1),[L,S]=o.useState(!1),[i,m]=o.useState(null),[H,j]=o.useState(null),[l,n]=o.useState({search:g?.search||"",status:g?.status||"all",month:g?.month||"",year:g?.year||""}),[C,F]=o.useState(null),T=o.useRef({});_.can_read;const D=_.can_create===1,q=_.can_update===1,R=_.can_delete===1,{data:h,setData:s,get:a,reset:v}=G({search:l.search,status:l.status,month:l.month,year:l.year}),N={in_progress:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},completed:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},pending:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},cancelled:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"}};o.useEffect(()=>{const t=r=>{Object.values(T.current).every(x=>x&&!x.contains(r.target))&&F(null)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),o.useEffect(()=>{if(b.success||b.error){const t=b.success||b.error,r=b.success?"success":"error";A(t,r)}},[b]);const A=(t,r="success")=>{const c=document.createElement("div");c.className=`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg transform transition-all duration-300 ${r==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,c.innerHTML=`
            <div class="flex items-center">
                <span>${t}</span>
                <button onclick="this.parentElement.parentElement.remove()" class="ml-4">
                    ✕
                </button>
            </div>
        `,document.body.appendChild(c),setTimeout(()=>{c.parentElement&&c.remove()},3e3)},U=(t,r)=>{n(c=>({...c,[t]:r})),s(t,r)},W=()=>{a(route("projects.index"),{preserveState:!0,preserveScroll:!0,data:{search:h.search,status:h.status!=="all"?h.status:"",month:h.month,year:h.year}})},Z=()=>{n({search:"",status:"all",month:"",year:""}),s({search:"",status:"all",month:"",year:""}),a(route("projects.index"),{preserveState:!0,preserveScroll:!0})},ee=t=>{console.log("Editing project ID:",t.id),m(t.id),j(t),$(!0)},te=async(t,r)=>{try{F(null),await z.put(route("projects.status.update",t),{status:r},{preserveScroll:!0,onSuccess:()=>{console.log("Status updated successfully")},onError:c=>{console.error("Status update error:",c),A("Failed to update status!","error")}})}catch(c){console.error("Error updating status:",c),A("Error updating status!","error")}},se=t=>{m(t.id),j(t),S(!0)},ae=()=>{i&&z.delete(route("projects.destroy",i),{preserveScroll:!0,onSuccess:()=>{S(!1),m(null),j(null),A("Project deleted successfully!","success")},onError:()=>{A("Failed to delete project!","error")}})},re=[{value:"",label:"All Months"},{value:"1",label:"Jan"},{value:"2",label:"Feb"},{value:"3",label:"Mar"},{value:"4",label:"Apr"},{value:"5",label:"May"},{value:"6",label:"Jun"},{value:"7",label:"Jul"},{value:"8",label:"Aug"},{value:"9",label:"Sep"},{value:"10",label:"Oct"},{value:"11",label:"Nov"},{value:"12",label:"Dec"}],le=["in_progress","completed","pending","cancelled"],ne=({project:t})=>{const r=C===t.id;if(!q){const p=d?.find(O=>O.value===t.status)?.label||t.status,M=N[t.status]||N.pending;return e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${M.bg} ${M.text} ${M.border} border`,children:p})}const c=d?.find(p=>p.value===t.status),x=N[t.status]||N.pending;return e.jsxs("div",{className:"relative inline-block",ref:p=>T.current[t.id]=p,children:[e.jsxs("button",{type:"button",onClick:()=>F(r?null:t.id),className:`px-3 py-1.5 rounded text-sm font-medium ${x.bg} ${x.text} border ${x.border} hover:opacity-90 transition-colors`,children:[c?.label||t.status,e.jsx("span",{className:"ml-1",children:"▼"})]}),r&&e.jsx("div",{className:"absolute z-10 mt-1 bg-white border border-gray-300 rounded-md shadow-lg min-w-[140px]",children:e.jsx("div",{className:"py-1",children:d?.map(p=>{const M=N[p.value]||N.pending,O=t.status===p.value;return e.jsx("button",{type:"button",onClick:()=>te(t.id,p.value),className:`block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 transition-colors ${O?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${M.bg}`}),p.label]})},p.value)})})})]})};return e.jsx(ce,{children:e.jsxs("div",{className:"px-4 md:px-8 py-6",children:[e.jsx(de,{title:"Project Management"}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"PROJECT"})}),D&&e.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-3 bg-[#005954] text-white rounded-lg hover:bg-[#004d47] flex items-center gap-2 transition-colors shadow-sm hover:shadow-md w-full sm:w-auto justify-center",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Add Project"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8",children:le.map(t=>{const r=N[t],c=d?.find(x=>x.value===t)?.label||t.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ");return e.jsx("div",{className:`rounded-xl p-5 shadow-sm border ${r.border} ${r.bg} transition-transform hover:scale-[1.02] hover:shadow-md`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${r.text} uppercase tracking-wide`,children:c}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-gray-900 mt-2",children:k[t]||0}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Total Project"})]})})},t)})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Projects"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by project description, company, or note...",value:l.search,onChange:t=>U("search",t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005954] focus:border-transparent transition-colors"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:flex lg:space-x-4 gap-4",children:[e.jsxs("div",{className:"lg:w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:t=>U("status",t.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005954] focus:border-transparent bg-white text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),d?.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{className:"lg:w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("select",{value:l.month,onChange:t=>U("month",t.target.value),className:"w-full pl-9 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005954] focus:border-transparent bg-white text-sm",children:re.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"lg:w-32",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsxs("select",{value:l.year,onChange:t=>U("year",t.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005954] focus:border-transparent bg-white text-sm",children:[e.jsx("option",{value:"",children:"All Years"}),(w||[]).map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:[e.jsxs("button",{onClick:W,className:"px-4 py-2.5 bg-[#005954] text-white rounded-lg hover:bg-[#004d47] flex items-center gap-2 transition-colors justify-center text-sm font-medium",children:[e.jsx(fe,{className:"w-4 h-4"}),"Apply"]}),e.jsxs("button",{onClick:Z,className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 justify-center text-sm font-medium",children:[e.jsx(ye,{className:"w-4 h-4"}),"Reset"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx(ie,{columns:[{key:"project_description",label:"Description",render:(t,r)=>e.jsxs("div",{className:"min-w-[200px] max-w-[300px]",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:t||"-"}),r.note&&e.jsx("div",{className:"text-xs text-gray-500 truncate mt-1",children:r.note})]})},{key:"client",label:"Client",render:(t,r)=>e.jsx("div",{className:"min-w-[180px]",children:r.company?.lead?.company_name?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.company.lead.company_name}),r.company?.client_code&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Code: ",r.company.client_code]})]}):r.company?.client_code?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.company.client_code}),e.jsx("div",{className:"text-xs text-gray-400 italic",children:"No company name"})]}):e.jsx("div",{className:"text-gray-400 italic",children:"N/A"})})},{key:"start_date",label:"Start Date",render:t=>t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-"},{key:"deadline",label:"Deadline",render:t=>t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-"},{key:"status",label:"Status",render:(t,r)=>e.jsx(ne,{project:r}),className:"min-w-[140px]"},{key:"quotation",label:"Quotation",render:(t,r)=>e.jsx("div",{className:"min-w-[120px]",children:r.quotation?.quotation_number?e.jsx("span",{className:"text-sm text-gray-700",children:r.quotation.quotation_number}):e.jsx("span",{className:"text-sm text-gray-400",children:"No quotation"})})}],data:u.data||[],onEdit:q?ee:null,onDelete:R?se:null,showAction:q||R,pagination:{currentPage:u.current_page,totalPages:u.last_page,totalItems:u.total,itemsPerPage:u.per_page,onPageChange:t=>a(route("projects.index",{...h,page:t}),{preserveScroll:!0})}})}),e.jsx(X,{show:y,onClose:()=>E(!1),companies:P||[],quotations:I||[],statusOptions:d||[],title:"Add Project"}),i&&e.jsxs(e.Fragment,{children:[e.jsx(X,{show:Q,onClose:()=>{$(!1),m(null),j(null)},projectId:i,companies:P||[],quotations:I||[],statusOptions:d||[],isEdit:!0,title:"Edit Project"}),e.jsx(ge,{show:L,onClose:()=>{S(!1),m(null),j(null)},onConfirm:ae,title:"Delete Project",message:`Are you sure you want to delete project "${H?.project_description}"? This action cannot be undone.`})]})]})})}export{Be as default};
