import{r as N,j as e}from"./app--V8YQuQk.js";import{B as _}from"./building-2-USKoNIue.js";import{M as k}from"./map-pin-DXTDSR7Y.js";import{G as T}from"./globe-DUm1N8J0.js";import{M as P}from"./mail-D6ZCm5oy.js";import{P as D}from"./phone-CEvMLKm6.js";import{I as M}from"./info-OEJ7xNNZ.js";import"./createLucideIcon-D7A-7CJ7.js";const E=({company:t,activeTab:d,data:s,statistics:o})=>{const[i,c]=N.useState(null),g=(()=>{switch(d){case"profile":return[{label:"Total Kontak",value:s.contacts?.length||0,color:"bg-blue-500"},{label:"Tahun Aktif",value:t.client_since?new Date().getFullYear()-new Date(t.client_since).getFullYear():0,color:"bg-green-500"},{label:"Status",value:t.is_active?"Aktif":"Non-Aktif",color:t.is_active?"bg-yellow-500":"bg-gray-500"},{label:"Tipe Klien",value:t.client_type?.name||"N/A",color:"bg-red-500"}];case"quotation":return[{label:"Total Quotation",value:o.total_quotations||0,color:"bg-blue-500"},{label:"Diterima",value:o.accepted_quotations||0,color:"bg-green-500"},{label:"Kadaluarsa",value:o.expired_quotations||0,color:"bg-yellow-500"},{label:"Dibatalkan",value:o.cancelled_quotations||0,color:"bg-red-500"}];case"invoice":return[{label:"Total Invoice",value:o.total_invoices||0,color:"bg-blue-500"},{label:"Dibayar",value:o.paid_invoices||0,color:"bg-green-500"},{label:"Pending",value:o.pending_invoices||0,color:"bg-yellow-500"},{label:"Jatuh Tempo",value:o.overdue_invoices||0,color:"bg-red-500"}];case"payment":const l=s.payments?.length||0,r=s.payments?.filter(a=>a.method==="bank_transfer").length||0,n=s.payments?.filter(a=>a.method==="cash").length||0,h=s.payments?.filter(a=>a.method==="check").length||0;return[{label:"Total Pembayaran",value:l,color:"bg-blue-500"},{label:"Transfer Bank",value:r,color:"bg-green-500"},{label:"Tunai",value:n,color:"bg-yellow-500"},{label:"Cek",value:h,color:"bg-red-500"}];case"project":const b=s.projects?.length||0,f=s.projects?.filter(a=>a.status==="completed").length||0,v=s.projects?.filter(a=>a.status==="in_progress").length||0,p=s.projects?.filter(a=>a.status==="delayed").length||0;return[{label:"Total Proyek",value:b,color:"bg-blue-500"},{label:"Selesai",value:f,color:"bg-green-500"},{label:"Dalam Proses",value:v,color:"bg-yellow-500"},{label:"Terlambat",value:p,color:"bg-red-500"}];case"contact":const j=s.contacts?.filter(a=>a.is_primary).length||0,w=s.contacts?.length||0,y=s.contacts?.filter(a=>a.is_active).length||0;return[{label:"Total Kontak",value:w,color:"bg-blue-500"},{label:"Kontak Utama",value:j,color:"bg-green-500"},{label:"Aktif",value:y,color:"bg-yellow-500"},{label:"Management",value:s.contacts?.filter(a=>a.position?.toLowerCase().includes("manager")).length||0,color:"bg-red-500"}];default:return[{label:"Total",value:"0",color:"bg-blue-500"},{label:"Aktif",value:"0",color:"bg-green-500"},{label:"Pending",value:"0",color:"bg-yellow-500"},{label:"Non-Aktif",value:"0",color:"bg-red-500"}]}})(),u=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),x=s.invoices?.filter(l=>l.status!=="paid").reduce((l,r)=>l+(r.amount_due||0),0)||0,m=({text:l,maxLength:r=20,className:n=""})=>l?l.length<=r?e.jsx("span",{className:n,children:l}):e.jsx("div",{className:"relative inline-block",children:e.jsxs("span",{className:`${n} truncate max-w-[150px] sm:max-w-[200px] cursor-help`,onMouseEnter:()=>c(l),onMouseLeave:()=>c(null),children:[l.substring(0,r),"..."]})}):null;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 lg:p-6",children:[i&&e.jsx("div",{className:"fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg",children:i}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between mb-6 lg:mb-8 gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.client_code,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl object-cover shadow-md mx-auto sm:mx-0"}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-[#054748] to-[#0a5d5e] rounded-xl flex items-center justify-center shadow-md mx-auto sm:mx-0",children:e.jsx(_,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:e.jsx(m,{text:t.lead?.company_name||t.company_name||"-",maxLength:25})}),e.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:flex-wrap gap-2 sm:gap-3 text-sm text-gray-600",children:[(t.city||t.province)&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(k,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(m,{text:`${t.city||""}${t.province?`, ${t.province}`:""}${t.country?`, ${t.country}`:""}`,maxLength:30})]}),t.website&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(T,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(m,{text:t.website,maxLength:25})]}),t.primary_contact?.email&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(P,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(m,{text:t.primary_contact.email,maxLength:25})]}),t.primary_contact?.phone&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(D,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(m,{text:t.primary_contact.phone,maxLength:20})]})]})]})]}),e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Piutang"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("button",{className:"text-2xl sm:text-3xl font-bold text-red-600 cursor-pointer transition-all duration-200 hover:bg-gray-100 rounded px-2 py-1 flex items-center gap-2",onClick:()=>c(i==="piutang"?null:"piutang"),title:u(x),children:[u(x),e.jsx("span",{className:"ml-1 text-xs text-gray-400",children:i==="piutang"?"▲":"▼"})]}),i==="piutang"&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4 text-left",children:[e.jsx("div",{className:"mb-2 font-semibold text-gray-800",children:"Detail Piutang"}),s.invoices?.filter(l=>l.status!=="paid").length>0?e.jsx("ul",{className:"text-sm text-gray-700 max-h-40 overflow-y-auto",children:s.invoices.filter(l=>l.status!=="paid").map((l,r)=>e.jsxs("li",{className:"mb-1 flex justify-between",children:[e.jsx("span",{children:l.invoice_number||"-"}),e.jsx("span",{children:u(l.amount_due||0)})]},l.id||r))}):e.jsx("div",{className:"text-xs text-gray-500",children:"Tidak ada invoice outstanding."})]})]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:[s.invoices?.filter(l=>l.status!=="paid").length||0," invoice belum dibayar"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:g.map((l,r)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 border border-gray-200 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-1 h-8 sm:h-10 ${l.color} rounded-full mr-3 flex-shrink-0`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 truncate",children:l.value}),typeof l.value=="string"&&l.value.includes("Rp")&&e.jsx(M,{className:"w-4 h-4 text-gray-400 ml-2 cursor-help flex-shrink-0",onMouseEnter:()=>{if(l.value.includes("Rp")){const n=l.value.match(/\d+/)?.[0];n&&c(u(parseFloat(n)))}},onMouseLeave:()=>c(null)})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 truncate",children:l.label})]})]})},r))})]})};export{E as default};
