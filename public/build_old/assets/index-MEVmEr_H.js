var py={4729:((i,r,t)=>{var e,n,o;(function(s){n=[t(5706),t(4193)],e=s,o=typeof e=="function"?e.apply(r,n):e,o!==void 0&&(i.exports=o)})(function(s,u){var f=Array.prototype.slice;function c(G,W,U){return U.length<=4?G.call(W,U[0],U[1],U[2],U[3]):G.apply(W,U)}function h(G,W){return f.call(G,W)}function g(G,W){return G==null?!1:(s.isArray(W)||(W=h(arguments,1)),s.all(W,function(U){return U in G}))}var m=(function(){var G=!1,W=-1;function U(){W++,G=!0,s.defer(function(){G=!1})}return function(){return G||U(),W}})();function y(){this.registeredObjects=[],this.cidIndexes=[]}y.prototype={isRegistered:function(G){return G&&G.cid?this.registeredObjects[G.cid]:s.contains(this.registeredObjects,G)},register:function(G){return this.isRegistered(G)?!1:(G&&G.cid?(this.registeredObjects[G.cid]=G,this.cidIndexes.push(G.cid)):this.registeredObjects.push(G),!0)},unregister:function(G){if(this.isRegistered(G)){if(G&&G.cid)delete this.registeredObjects[G.cid],this.cidIndexes.splice(s.indexOf(this.cidIndexes,G.cid),1);else{var W=s.indexOf(this.registeredObjects,G);this.registeredObjects.splice(W,1)}return!0}return!1},get:function(){return s.map(this.cidIndexes,function(G){return this.registeredObjects[G]},this).concat(this.registeredObjects)}};function w(G,W,U,D){for(var Y=0,K=W.length,ct;Y<K;Y++)if(ct=W[Y],!!ct){if(G==="on"){if(!D.objectRegistry.register(ct))continue}else if(!D.objectRegistry.unregister(ct))continue;s.isFunction(ct[G])&&ct[G]("all",U,D)}}function C(G,W){var U=W.type,D=W.undoTypes,Y=!D[U]||D[U][G];s.isFunction(Y)&&Y(W.object,W.before,W.after,W.options)}function x(G,W,U,D,Y){if(!(U.isCurrentlyUndoRedoing||G==="undo"&&U.pointer===-1||G==="redo"&&U.pointer===U.length-1)){U.isCurrentlyUndoRedoing=!0;var K,ct,M=G==="undo";for(Y?ct=M&&U.pointer===U.length-1||!M&&U.pointer===-1?s.clone(U.models):f.apply(U.models,M?[0,U.pointer]:[U.pointer,U.length-1]):(K=U.at(M?U.pointer:U.pointer+1),ct=D?U.where({magicFusionIndex:K.get("magicFusionIndex")}):[K]),U.pointer+=(M?-1:1)*ct.length;K=M?ct.pop():ct.shift();)K[G]();U.isCurrentlyUndoRedoing=!1,W.trigger(G,W)}}function E(G,W){var U=G.condition,D=typeof U;return D==="function"?!!c(U,G,W):D==="boolean"?U:!0}function N(G,W,U,D){if(G.track&&!G.isCurrentlyUndoRedoing&&W in D&&E(D[W],U)){var Y=c(D[W].on,D[W],U),K;if(g(Y,"object","before","after")){if(Y.type=W,Y.magicFusionIndex=m(),Y.undoTypes=D,G.pointer<G.length-1)for(var K=G.length-G.pointer-1;K--;)G.pop();G.pointer=G.length,G.add(Y),G.length>G.maximumStackLength&&(G.shift(),G.pointer--)}}}var L={add:{undo:function(G,W,U,D){G.remove(U,D)},redo:function(G,W,U,D){D.index&&(D.at=D.index),G.add(U,D)},on:function(G,W,U){return{object:W,before:void 0,after:G,options:s.clone(U)}}},remove:{undo:function(G,W,U,D){"index"in D&&(D.at=D.index),G.add(W,D)},redo:function(G,W,U,D){G.remove(W,D)},on:function(G,W,U){return{object:W,before:G,after:void 0,options:s.clone(U)}}},change:{undo:function(G,W,U,D){s.isEmpty(W)?s.each(s.keys(U),G.unset,G):(G.set(W),D&&D.unsetData&&D.unsetData.before&&D.unsetData.before.length&&s.each(D.unsetData.before,G.unset,G))},redo:function(G,W,U,D){s.isEmpty(U)?s.each(s.keys(W),G.unset,G):(G.set(U),D&&D.unsetData&&D.unsetData.after&&D.unsetData.after.length&&s.each(D.unsetData.after,G.unset,G))},on:function(G,W){var U=G.changedAttributes(),D=s.keys(U),Y=s.pick(G.previousAttributes(),D),K=s.keys(Y),ct=(W||(W={})).unsetData={after:[],before:[]};return D.length!=K.length&&(D.length>K.length?s.each(D,function(M){M in Y||ct.before.push(M)},this):s.each(K,function(M){M in U||ct.after.push(M)})),{object:G,before:Y,after:U,options:s.clone(W)}}},reset:{undo:function(G,W,U){G.reset(W)},redo:function(G,W,U){G.reset(U)},on:function(G,W){return{object:G,before:W.previousModels,after:s.clone(G.models)}}}};function H(){}H.prototype=L;function rt(G,W,U,D){if(typeof W=="object")return s.each(W,function(Y,K){G===2?rt(G,Y,U,D):rt(G,K,Y,U)});switch(G){case 0:g(U,"undo","redo","on")&&s.all(s.pick(U,"undo","redo","on"),s.isFunction)&&(D[W]=U);break;case 1:D[W]&&s.isObject(U)&&(D[W]=s.extend({},D[W],U));break;case 2:delete D[W];break}return this}var nt=u.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(G){C("undo",this.attributes)},redo:function(G){C("redo",this.attributes)}}),vt=u.Collection.extend({model:nt,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(G){this.maximumStackLength=G}}),et=u.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(G){this.stack=new vt,this.objectRegistry=new y,this.undoTypes=new H,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(W,U){this.stack.setMaxLength(U)},this),G&&G.track&&this.startTracking(),G&&G.register&&(s.isArray(G.register)||s.isArguments(G.register)?c(this.register,this,G.register):this.register(G.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(G){N(this.stack,G,h(arguments,1),this.undoTypes)},register:function(){w("on",arguments,this._addToStack,this)},unregister:function(){w("off",arguments,this._addToStack,this)},unregisterAll:function(){c(this.unregister,this,this.objectRegistry.get())},undo:function(G){x("undo",this,this.stack,G)},undoAll:function(){x("undo",this,this.stack,!1,!0)},redo:function(G){x("redo",this,this.stack,G)},redoAll:function(){x("redo",this,this.stack,!1,!0)},isAvailable:function(G){var W=this.stack,U=W.length;switch(G){case"undo":return U>0&&W.pointer>-1;case"redo":return U>0&&W.pointer<U-1;default:return!1}},merge:function(G){for(var W=s.isArray(G)?G:h(arguments),U;U=W.pop();)U instanceof et&&U.stack instanceof vt&&(U.stack=this.stack)},addUndoType:function(G,W){rt(0,G,W,this.undoTypes)},changeUndoType:function(G,W){rt(1,G,W,this.undoTypes)},removeUndoType:function(G){rt(2,G,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return s.extend(et,{defaults:function(G){s.extend(et.prototype.defaults,G)},addUndoType:function(G,W){rt(0,G,W,L)},changeUndoType:function(G,W){rt(1,G,W,L)},removeUndoType:function(G){rt(2,G,void 0,L)}}),u.UndoManager=et})}),4193:((i,r,t)=>{var e,n;(function(o){var s=typeof self=="object"&&self.self===self&&self||typeof t.g=="object"&&t.g.global===t.g&&t.g;e=[t(5706),t(7774),r],n=(function(u,f,c){s.Backbone=o(s,c,u,f)}).apply(r,e),n!==void 0&&(i.exports=n)})(function(o,s,u,f){var c=o.Backbone,h=Array.prototype.slice;s.VERSION="1.4.1",s.$=f,s.noConflict=function(){return o.Backbone=c,this},s.emulateHTTP=!1,s.emulateJSON=!1;var g=s.Events={},m=/\s+/,y,w=function(T,j,z,it,_t){var q=0,ht;if(z&&typeof z=="object")for(it!==void 0&&("context"in _t)&&_t.context===void 0&&(_t.context=it),ht=u.keys(z);q<ht.length;q++)j=w(T,j,ht[q],z[ht[q]],_t);else if(z&&m.test(z))for(ht=z.split(m);q<ht.length;q++)j=T(j,ht[q],it,_t);else j=T(j,z,it,_t);return j};g.on=function(T,j,z){if(this._events=w(C,this._events||{},T,j,{context:z,ctx:this,listening:y}),y){var it=this._listeners||(this._listeners={});it[y.id]=y,y.interop=!1}return this},g.listenTo=function(T,j,z){if(!T)return this;var it=T._listenId||(T._listenId=u.uniqueId("l")),_t=this._listeningTo||(this._listeningTo={}),q=y=_t[it];q||(this._listenId||(this._listenId=u.uniqueId("l")),q=y=_t[it]=new rt(this,T));var ht=x(T,j,z,this);if(y=void 0,ht)throw ht;return q.interop&&q.on(j,z),this};var C=function(T,j,z,it){if(z){var _t=T[j]||(T[j]=[]),q=it.context,ht=it.ctx,st=it.listening;st&&st.count++,_t.push({callback:z,context:q,ctx:q||ht,listening:st})}return T},x=function(T,j,z,it){try{T.on(j,z,it)}catch(_t){return _t}};g.off=function(T,j,z){return this._events?(this._events=w(E,this._events,T,j,{context:z,listeners:this._listeners}),this):this},g.stopListening=function(T,j,z){var it=this._listeningTo;if(!it)return this;for(var _t=T?[T._listenId]:u.keys(it),q=0;q<_t.length;q++){var ht=it[_t[q]];if(!ht)break;ht.obj.off(j,z,this),ht.interop&&ht.off(j,z)}return u.isEmpty(it)&&(this._listeningTo=void 0),this};var E=function(T,j,z,it){if(T){var _t=it.context,q=it.listeners,ht=0,st;if(!j&&!_t&&!z){for(st=u.keys(q);ht<st.length;ht++)q[st[ht]].cleanup();return}for(st=j?[j]:u.keys(T);ht<st.length;ht++){j=st[ht];var ie=T[j];if(!ie)break;for(var _e=[],me=0;me<ie.length;me++){var B=ie[me];if(z&&z!==B.callback&&z!==B.callback._callback||_t&&_t!==B.context)_e.push(B);else{var ot=B.listening;ot&&ot.off(j,z)}}_e.length?T[j]=_e:delete T[j]}return T}};g.once=function(T,j,z){var it=w(N,{},T,j,this.off.bind(this));return typeof T=="string"&&z==null&&(j=void 0),this.on(it,j,z)},g.listenToOnce=function(T,j,z){var it=w(N,{},j,z,this.stopListening.bind(this,T));return this.listenTo(T,it)};var N=function(T,j,z,it){if(z){var _t=T[j]=u.once(function(){it(j,_t),z.apply(this,arguments)});_t._callback=z}return T};g.trigger=function(T){if(!this._events)return this;for(var j=Math.max(0,arguments.length-1),z=Array(j),it=0;it<j;it++)z[it]=arguments[it+1];return w(L,this._events,T,void 0,z),this};var L=function(T,j,z,it){if(T){var _t=T[j],q=T.all;_t&&q&&(q=q.slice()),_t&&H(_t,it),q&&H(q,[j].concat(it))}return T},H=function(T,j){var z,it=-1,_t=T.length,q=j[0],ht=j[1],st=j[2];switch(j.length){case 0:for(;++it<_t;)(z=T[it]).callback.call(z.ctx);return;case 1:for(;++it<_t;)(z=T[it]).callback.call(z.ctx,q);return;case 2:for(;++it<_t;)(z=T[it]).callback.call(z.ctx,q,ht);return;case 3:for(;++it<_t;)(z=T[it]).callback.call(z.ctx,q,ht,st);return;default:for(;++it<_t;)(z=T[it]).callback.apply(z.ctx,j);return}},rt=function(T,j){this.id=T._listenId,this.listener=T,this.obj=j,this.interop=!0,this.count=0,this._events=void 0};rt.prototype.on=g.on,rt.prototype.off=function(T,j){var z;this.interop?(this._events=w(E,this._events,T,j,{context:void 0,listeners:void 0}),z=!this._events):(this.count--,z=this.count===0),z&&this.cleanup()},rt.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},g.bind=g.on,g.unbind=g.off,u.extend(s,g);var nt=s.Model=function(T,j){var z=T||{};j||(j={}),this.preinitialize.apply(this,arguments),this.cid=u.uniqueId(this.cidPrefix),this.attributes={},j.collection&&(this.collection=j.collection),j.parse&&(z=this.parse(z,j)||{});var it=u.result(this,"defaults");z=u.defaults(u.extend({},it,z),it),this.set(z,j),this.changed={},this.initialize.apply(this,arguments)};u.extend(nt.prototype,g,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(T){return u.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(T){return this.attributes[T]},escape:function(T){return u.escape(this.get(T))},has:function(T){return this.get(T)!=null},matches:function(T){return!!u.iteratee(T,this)(this.attributes)},set:function(T,j,z){if(T==null)return this;var it;if(typeof T=="object"?(it=T,z=j):(it={})[T]=j,z||(z={}),!this._validate(it,z))return!1;var _t=z.unset,q=z.silent,ht=[],st=this._changing;this._changing=!0,st||(this._previousAttributes=u.clone(this.attributes),this.changed={});var ie=this.attributes,_e=this.changed,me=this._previousAttributes;for(var B in it)j=it[B],u.isEqual(ie[B],j)||ht.push(B),u.isEqual(me[B],j)?delete _e[B]:_e[B]=j,_t?delete ie[B]:ie[B]=j;if(this.idAttribute in it){var ot=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,ot,z)}if(!q){ht.length&&(this._pending=z);for(var R=0;R<ht.length;R++)this.trigger("change:"+ht[R],this,ie[ht[R]],z)}if(st)return this;if(!q)for(;this._pending;)z=this._pending,this._pending=!1,this.trigger("change",this,z);return this._pending=!1,this._changing=!1,this},unset:function(T,j){return this.set(T,void 0,u.extend({},j,{unset:!0}))},clear:function(T){var j={};for(var z in this.attributes)j[z]=void 0;return this.set(j,u.extend({},T,{unset:!0}))},hasChanged:function(T){return T==null?!u.isEmpty(this.changed):u.has(this.changed,T)},changedAttributes:function(T){if(!T)return this.hasChanged()?u.clone(this.changed):!1;var j=this._changing?this._previousAttributes:this.attributes,z={},it;for(var _t in T){var q=T[_t];u.isEqual(j[_t],q)||(z[_t]=q,it=!0)}return it?z:!1},previous:function(T){return T==null||!this._previousAttributes?null:this._previousAttributes[T]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(T){T=u.extend({parse:!0},T);var j=this,z=T.success;return T.success=function(it){var _t=T.parse?j.parse(it,T):it;if(!j.set(_t,T))return!1;z&&z.call(T.context,j,it,T),j.trigger("sync",j,it,T)},Rt(this,T),this.sync("read",this,T)},save:function(T,j,z){var it;T==null||typeof T=="object"?(it=T,z=j):(it={})[T]=j,z=u.extend({validate:!0,parse:!0},z);var _t=z.wait;if(it&&!_t){if(!this.set(it,z))return!1}else if(!this._validate(it,z))return!1;var q=this,ht=z.success,st=this.attributes;z.success=function(me){q.attributes=st;var B=z.parse?q.parse(me,z):me;if(_t&&(B=u.extend({},it,B)),B&&!q.set(B,z))return!1;ht&&ht.call(z.context,q,me,z),q.trigger("sync",q,me,z)},Rt(this,z),it&&_t&&(this.attributes=u.extend({},st,it));var ie=this.isNew()?"create":z.patch?"patch":"update";ie==="patch"&&!z.attrs&&(z.attrs=it);var _e=this.sync(ie,this,z);return this.attributes=st,_e},destroy:function(T){T=T?u.clone(T):{};var j=this,z=T.success,it=T.wait,_t=function(){j.stopListening(),j.trigger("destroy",j,j.collection,T)};T.success=function(ht){it&&_t(),z&&z.call(T.context,j,ht,T),j.isNew()||j.trigger("sync",j,ht,T)};var q=!1;return this.isNew()?u.defer(T.success):(Rt(this,T),q=this.sync("delete",this,T)),it||_t(),q},url:function(){var T=u.result(this,"urlRoot")||u.result(this.collection,"url")||Vt();if(this.isNew())return T;var j=this.get(this.idAttribute);return T.replace(/[^\/]$/,"$&/")+encodeURIComponent(j)},parse:function(T,j){return T},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(T){return this._validate({},u.extend({},T,{validate:!0}))},_validate:function(T,j){if(!j.validate||!this.validate)return!0;T=u.extend({},this.attributes,T);var z=this.validationError=this.validate(T,j)||null;return z?(this.trigger("invalid",this,z,u.extend(j,{validationError:z})),!1):!0}});var vt=s.Collection=function(T,j){j||(j={}),this.preinitialize.apply(this,arguments),j.model&&(this.model=j.model),j.comparator!==void 0&&(this.comparator=j.comparator),this._reset(),this.initialize.apply(this,arguments),T&&this.reset(T,u.extend({silent:!0},j))},et={add:!0,remove:!0,merge:!0},G={add:!0,remove:!1},W=function(T,j,z){z=Math.min(Math.max(z,0),T.length);var it=Array(T.length-z),_t=j.length,q;for(q=0;q<it.length;q++)it[q]=T[q+z];for(q=0;q<_t;q++)T[q+z]=j[q];for(q=0;q<it.length;q++)T[q+_t+z]=it[q]};u.extend(vt.prototype,g,{model:nt,preinitialize:function(){},initialize:function(){},toJSON:function(T){return this.map(function(j){return j.toJSON(T)})},sync:function(){return s.sync.apply(this,arguments)},add:function(T,j){return this.set(T,u.extend({merge:!1},j,G))},remove:function(T,j){j=u.extend({},j);var z=!u.isArray(T);T=z?[T]:T.slice();var it=this._removeModels(T,j);return!j.silent&&it.length&&(j.changes={added:[],merged:[],removed:it},this.trigger("update",this,j)),z?it[0]:it},set:function(T,j){if(T!=null){j=u.extend({},et,j),j.parse&&!this._isModel(T)&&(T=this.parse(T,j)||[]);var z=!u.isArray(T);T=z?[T]:T.slice();var it=j.at;it!=null&&(it=+it),it>this.length&&(it=this.length),it<0&&(it+=this.length+1);var _t=[],q=[],ht=[],st=[],ie={},_e=j.add,me=j.merge,B=j.remove,ot=!1,R=this.comparator&&it==null&&j.sort!==!1,Et=u.isString(this.comparator)?this.comparator:null,pt,It;for(It=0;It<T.length;It++){pt=T[It];var Jt=this.get(pt);if(Jt){if(me&&pt!==Jt){var Zt=this._isModel(pt)?pt.attributes:pt;j.parse&&(Zt=Jt.parse(Zt,j)),Jt.set(Zt,j),ht.push(Jt),R&&!ot&&(ot=Jt.hasChanged(Et))}ie[Jt.cid]||(ie[Jt.cid]=!0,_t.push(Jt)),T[It]=Jt}else _e&&(pt=T[It]=this._prepareModel(pt,j),pt&&(q.push(pt),this._addReference(pt,j),ie[pt.cid]=!0,_t.push(pt)))}if(B){for(It=0;It<this.length;It++)pt=this.models[It],ie[pt.cid]||st.push(pt);st.length&&this._removeModels(st,j)}var Gt=!1,ae=!R&&_e&&B;if(_t.length&&ae?(Gt=this.length!==_t.length||u.some(this.models,function(Se,Ae){return Se!==_t[Ae]}),this.models.length=0,W(this.models,_t,0),this.length=this.models.length):q.length&&(R&&(ot=!0),W(this.models,q,it??this.length),this.length=this.models.length),ot&&this.sort({silent:!0}),!j.silent){for(It=0;It<q.length;It++)it!=null&&(j.index=it+It),pt=q[It],pt.trigger("add",pt,this,j);(ot||Gt)&&this.trigger("sort",this,j),(q.length||st.length||ht.length)&&(j.changes={added:q,removed:st,merged:ht},this.trigger("update",this,j))}return z?T[0]:T}},reset:function(T,j){j=j?u.clone(j):{};for(var z=0;z<this.models.length;z++)this._removeReference(this.models[z],j);return j.previousModels=this.models,this._reset(),T=this.add(T,u.extend({silent:!0},j)),j.silent||this.trigger("reset",this,j),T},push:function(T,j){return this.add(T,u.extend({at:this.length},j))},pop:function(T){var j=this.at(this.length-1);return this.remove(j,T)},unshift:function(T,j){return this.add(T,u.extend({at:0},j))},shift:function(T){var j=this.at(0);return this.remove(j,T)},slice:function(){return h.apply(this.models,arguments)},get:function(T){if(T!=null)return this._byId[T]||this._byId[this.modelId(this._isModel(T)?T.attributes:T,T.idAttribute)]||T.cid&&this._byId[T.cid]},has:function(T){return this.get(T)!=null},at:function(T){return T<0&&(T+=this.length),this.models[T]},where:function(T,j){return this[j?"find":"filter"](T)},findWhere:function(T){return this.where(T,!0)},sort:function(T){var j=this.comparator;if(!j)throw new Error("Cannot sort a set without a comparator");T||(T={});var z=j.length;return u.isFunction(j)&&(j=j.bind(this)),z===1||u.isString(j)?this.models=this.sortBy(j):this.models.sort(j),T.silent||this.trigger("sort",this,T),this},pluck:function(T){return this.map(T+"")},fetch:function(T){T=u.extend({parse:!0},T);var j=T.success,z=this;return T.success=function(it){var _t=T.reset?"reset":"set";z[_t](it,T),j&&j.call(T.context,z,it,T),z.trigger("sync",z,it,T)},Rt(this,T),this.sync("read",this,T)},create:function(T,j){j=j?u.clone(j):{};var z=j.wait;if(T=this._prepareModel(T,j),!T)return!1;z||this.add(T,j);var it=this,_t=j.success;return j.success=function(q,ht,st){z&&it.add(q,st),_t&&_t.call(st.context,q,ht,st)},T.save(null,j),T},parse:function(T,j){return T},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(T,j){return T[j||this.model.prototype.idAttribute||"id"]},values:function(){return new D(this,Y)},keys:function(){return new D(this,K)},entries:function(){return new D(this,ct)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(T,j){if(this._isModel(T))return T.collection||(T.collection=this),T;j=j?u.clone(j):{},j.collection=this;var z;return this.model.prototype?z=new this.model(T,j):z=this.model(T,j),z.validationError?(this.trigger("invalid",this,z.validationError,j),!1):z},_removeModels:function(T,j){for(var z=[],it=0;it<T.length;it++){var _t=this.get(T[it]);if(_t){var q=this.indexOf(_t);this.models.splice(q,1),this.length--,delete this._byId[_t.cid];var ht=this.modelId(_t.attributes,_t.idAttribute);ht!=null&&delete this._byId[ht],j.silent||(j.index=q,_t.trigger("remove",_t,this,j)),z.push(_t),this._removeReference(_t,j)}}return z},_isModel:function(T){return T instanceof nt},_addReference:function(T,j){this._byId[T.cid]=T;var z=this.modelId(T.attributes,T.idAttribute);z!=null&&(this._byId[z]=T),T.on("all",this._onModelEvent,this)},_removeReference:function(T,j){delete this._byId[T.cid];var z=this.modelId(T.attributes,T.idAttribute);z!=null&&delete this._byId[z],this===T.collection&&delete T.collection,T.off("all",this._onModelEvent,this)},_onModelEvent:function(T,j,z,it){if(j){if((T==="add"||T==="remove")&&z!==this)return;if(T==="destroy"&&this.remove(j,it),T==="changeId"){var _t=this.modelId(j.previousAttributes(),j.idAttribute),q=this.modelId(j.attributes,j.idAttribute);_t!=null&&delete this._byId[_t],q!=null&&(this._byId[q]=j)}}this.trigger.apply(this,arguments)}});var U=typeof Symbol=="function"&&Symbol.iterator;U&&(vt.prototype[U]=vt.prototype.values);var D=function(T,j){this._collection=T,this._kind=j,this._index=0},Y=1,K=2,ct=3;U&&(D.prototype[U]=function(){return this}),D.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var T=this._collection.at(this._index);this._index++;var j;if(this._kind===Y)j=T;else{var z=this._collection.modelId(T.attributes,T.idAttribute);this._kind===K?j=z:j=[z,T]}return{value:j,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var M=s.View=function(T){this.cid=u.uniqueId("view"),this.preinitialize.apply(this,arguments),u.extend(this,u.pick(T,gt)),this._ensureElement(),this.initialize.apply(this,arguments)},wt=/^(\S+)\s*(.*)$/,gt=["model","collection","el","id","attributes","className","tagName","events"];u.extend(M.prototype,g,{tagName:"div",$:function(T){return this.$el.find(T)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(T){return this.undelegateEvents(),this._setElement(T),this.delegateEvents(),this},_setElement:function(T){this.$el=T instanceof s.$?T:s.$(T),this.el=this.$el[0]},delegateEvents:function(T){if(T||(T=u.result(this,"events")),!T)return this;this.undelegateEvents();for(var j in T){var z=T[j];if(u.isFunction(z)||(z=this[z]),!!z){var it=j.match(wt);this.delegate(it[1],it[2],z.bind(this))}}return this},delegate:function(T,j,z){return this.$el.on(T+".delegateEvents"+this.cid,j,z),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(T,j,z){return this.$el.off(T+".delegateEvents"+this.cid,j,z),this},_createElement:function(T){return document.createElement(T)},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"));else{var T=u.extend({},u.result(this,"attributes"));this.id&&(T.id=u.result(this,"id")),this.className&&(T.class=u.result(this,"className")),this.setElement(this._createElement(u.result(this,"tagName"))),this._setAttributes(T)}},_setAttributes:function(T){this.$el.attr(T)}});var At=function(T,j,z,it){switch(j){case 1:return function(){return T[z](this[it])};case 2:return function(_t){return T[z](this[it],_t)};case 3:return function(_t,q){return T[z](this[it],oe(_t,this),q)};case 4:return function(_t,q,ht){return T[z](this[it],oe(_t,this),q,ht)};default:return function(){var _t=h.call(arguments);return _t.unshift(this[it]),T[z].apply(T,_t)}}},Qt=function(T,j,z,it){u.each(z,function(_t,q){j[q]&&(T.prototype[q]=At(j,_t,q,it))})},oe=function(T,j){return u.isFunction(T)?T:u.isObject(T)&&!j._isModel(T)?yt(T):u.isString(T)?function(z){return z.get(T)}:T},yt=function(T){var j=u.matches(T);return function(z){return j(z.attributes)}},Ct={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},bt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u.each([[vt,Ct,"models"],[nt,bt,"attributes"]],function(T){var j=T[0],z=T[1],it=T[2];j.mixin=function(_t){var q=u.reduce(u.functions(_t),function(ht,st){return ht[st]=0,ht},{});Qt(j,_t,q,it)},Qt(j,u,z,it)}),s.sync=function(T,j,z){var it=Lt[T];u.defaults(z||(z={}),{emulateHTTP:s.emulateHTTP,emulateJSON:s.emulateJSON});var _t={type:it,dataType:"json"};if(z.url||(_t.url=u.result(j,"url")||Vt()),z.data==null&&j&&(T==="create"||T==="update"||T==="patch")&&(_t.contentType="application/json",_t.data=JSON.stringify(z.attrs||j.toJSON(z))),z.emulateJSON&&(_t.contentType="application/x-www-form-urlencoded",_t.data=_t.data?{model:_t.data}:{}),z.emulateHTTP&&(it==="PUT"||it==="DELETE"||it==="PATCH")){_t.type="POST",z.emulateJSON&&(_t.data._method=it);var q=z.beforeSend;z.beforeSend=function(ie){if(ie.setRequestHeader("X-HTTP-Method-Override",it),q)return q.apply(this,arguments)}}_t.type!=="GET"&&!z.emulateJSON&&(_t.processData=!1);var ht=z.error;z.error=function(ie,_e,me){z.textStatus=_e,z.errorThrown=me,ht&&ht.call(z.context,ie,_e,me)};var st=z.xhr=s.ajax(u.extend(_t,z));return j.trigger("request",j,st,z),st};var Lt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var zt=s.Router=function(T){T||(T={}),this.preinitialize.apply(this,arguments),T.routes&&(this.routes=T.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Dt=/\((.*?)\)/g,Ut=/(\(\?)?:\w+/g,Yt=/\*\w+/g,se=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(zt.prototype,g,{preinitialize:function(){},initialize:function(){},route:function(T,j,z){u.isRegExp(T)||(T=this._routeToRegExp(T)),u.isFunction(j)&&(z=j,j=""),z||(z=this[j]);var it=this;return s.history.route(T,function(_t){var q=it._extractParameters(T,_t);it.execute(z,q,j)!==!1&&(it.trigger.apply(it,["route:"+j].concat(q)),it.trigger("route",j,q),s.history.trigger("route",it,j,q))}),this},execute:function(T,j,z){T&&T.apply(this,j)},navigate:function(T,j){return s.history.navigate(T,j),this},_bindRoutes:function(){if(this.routes){this.routes=u.result(this,"routes");for(var T,j=u.keys(this.routes);(T=j.pop())!=null;)this.route(T,this.routes[T])}},_routeToRegExp:function(T){return T=T.replace(se,"\\$&").replace(Dt,"(?:$1)?").replace(Ut,function(j,z){return z?j:"([^/?]+)"}).replace(Yt,"([^?]*?)"),new RegExp("^"+T+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(T,j){var z=T.exec(j).slice(1);return u.map(z,function(it,_t){return _t===z.length-1?it||null:it?decodeURIComponent(it):null})}});var Xt=s.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ee=/^[#\/]|\s+$/g,xe=/^\/+|\/+$/g,ue=/#.*$/;Xt.started=!1,u.extend(Xt.prototype,g,{interval:50,atRoot:function(){var T=this.location.pathname.replace(/[^\/]$/,"$&/");return T===this.root&&!this.getSearch()},matchRoot:function(){var T=this.decodeFragment(this.location.pathname),j=T.slice(0,this.root.length-1)+"/";return j===this.root},decodeFragment:function(T){return decodeURI(T.replace(/%25/g,"%2525"))},getSearch:function(){var T=this.location.href.replace(/#.*/,"").match(/\?.+/);return T?T[0]:""},getHash:function(T){var j=(T||this).location.href.match(/#(.*)$/);return j?j[1]:""},getPath:function(){var T=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return T.charAt(0)==="/"?T.slice(1):T},getFragment:function(T){return T==null&&(this._usePushState||!this._wantsHashChange?T=this.getPath():T=this.getHash()),T.replace(ee,"")},start:function(T){if(Xt.started)throw new Error("Backbone.history has already been started");if(Xt.started=!0,this.options=u.extend({root:"/"},this.options,T),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(xe,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var j=this.root.slice(0,-1)||"/";return this.location.replace(j+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var z=document.body,it=z.insertBefore(this.iframe,z.firstChild).contentWindow;it.document.open(),it.document.close(),it.location.hash="#"+this.fragment}var _t=window.addEventListener||function(q,ht){return attachEvent("on"+q,ht)};if(this._usePushState?_t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?_t("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var T=window.removeEventListener||function(j,z){return detachEvent("on"+j,z)};this._usePushState?T("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&T("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Xt.started=!1},route:function(T,j){this.handlers.unshift({route:T,callback:j})},checkUrl:function(T){var j=this.getFragment();if(j===this.fragment&&this.iframe&&(j=this.getHash(this.iframe.contentWindow)),j===this.fragment)return!1;this.iframe&&this.navigate(j),this.loadUrl()},loadUrl:function(T){return this.matchRoot()?(T=this.fragment=this.getFragment(T),u.some(this.handlers,function(j){if(j.route.test(T))return j.callback(T),!0})):!1},navigate:function(T,j){if(!Xt.started)return!1;(!j||j===!0)&&(j={trigger:!!j}),T=this.getFragment(T||"");var z=this.root;(T===""||T.charAt(0)==="?")&&(z=z.slice(0,-1)||"/");var it=z+T;T=T.replace(ue,"");var _t=this.decodeFragment(T);if(this.fragment!==_t){if(this.fragment=_t,this._usePushState)this.history[j.replace?"replaceState":"pushState"]({},document.title,it);else if(this._wantsHashChange){if(this._updateHash(this.location,T,j.replace),this.iframe&&T!==this.getHash(this.iframe.contentWindow)){var q=this.iframe.contentWindow;j.replace||(q.document.open(),q.document.close()),this._updateHash(q.location,T,j.replace)}}else return this.location.assign(it);if(j.trigger)return this.loadUrl(T)}},_updateHash:function(T,j,z){if(z){var it=T.href.replace(/(javascript:|#).*$/,"");T.replace(it+"#"+j)}else T.hash="#"+j}}),s.history=new Xt;var mt=function(T,j){var z=this,it;return T&&u.has(T,"constructor")?it=T.constructor:it=function(){return z.apply(this,arguments)},u.extend(it,z,j),it.prototype=u.create(z.prototype,T),it.prototype.constructor=it,it.__super__=z.prototype,it};nt.extend=vt.extend=zt.extend=M.extend=Xt.extend=mt;var Vt=function(){throw new Error('A "url" property or function must be specified')},Rt=function(T,j){var z=j.error;j.error=function(it){z&&z.call(j.context,T,it,j),T.trigger("error",T,it,j)}};return s})}),3640:((i,r,t)=>{(function(e){e(t(4408))})(function(e){e.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,s){return/^[;{}]$/.test(s)}}),e.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,s,u,f){return this.jsonMode?/^[\[,{]$/.test(s)||/^}/.test(u):s==";"&&f.lexical&&f.lexical.type==")"?!1:/^[;{}]$/.test(s)&&!/^;/.test(u)}});var n=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;e.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(o,s,u,f){var c=!1;return this.configuration=="html"&&(c=f.context?n.test(f.context.tagName):!1),!c&&(o=="tag"&&/>$/.test(s)&&f.context||/^</.test(u))}}),e.defineExtension("commentRange",function(o,s,u){var f=this,c=e.innerMode(f.getMode(),f.getTokenAt(s).state).mode;f.operation(function(){if(o)f.replaceRange(c.commentEnd,u),f.replaceRange(c.commentStart,s),s.line==u.line&&s.ch==u.ch&&f.setCursor(s.line,s.ch+c.commentStart.length);else{var h=f.getRange(s,u),g=h.indexOf(c.commentStart),m=h.lastIndexOf(c.commentEnd);g>-1&&m>-1&&m>g&&(h=h.substr(0,g)+h.substring(g+c.commentStart.length,m)+h.substr(m+c.commentEnd.length)),f.replaceRange(h,s,u)}})}),e.defineExtension("autoIndentRange",function(o,s){var u=this;this.operation(function(){for(var f=o.line;f<=s.line;f++)u.indentLine(f,"smart")})}),e.defineExtension("autoFormatRange",function(o,s){var u=this,f=u.getMode(),c=u.getRange(o,s).split(`
`),h=e.copyState(f,u.getTokenAt(o).state),g=u.getOption("tabSize"),m="",y=0,w=o.ch===0;function C(){m+=`
`,w=!0,++y}for(var x=0;x<c.length;++x){for(var E=new e.StringStream(c[x],g);!E.eol();){var N=e.innerMode(f,h),L=f.token(E,h),H=E.current();E.start=E.pos,(!w||/\S/.test(H))&&(m+=H,w=!1),!w&&N.mode.newlineAfterToken&&N.mode.newlineAfterToken(L,H,E.string.slice(E.pos)||c[x+1]||"",N.state)&&C()}!E.pos&&f.blankLine&&f.blankLine(h),!w&&x<c.length-1&&C()}u.operation(function(){u.replaceRange(m,o,s);for(var rt=o.line+1,nt=o.line+y;rt<=nt;++rt)u.indentLine(rt,"smart");u.setSelection(o,u.getCursor(!1))})})})}),4408:(function(i){(function(r,t){i.exports=t()})(this,(function(){var r=navigator.userAgent,t=navigator.platform,e=/gecko\/\d/i.test(r),n=/MSIE \d/.test(r),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),s=/Edge\/(\d+)/.exec(r),u=n||o||s,f=u&&(n?document.documentMode||6:+(s||o)[1]),c=!s&&/WebKit\//.test(r),h=c&&/Qt\/\d+\.\d+/.test(r),g=!s&&/Chrome\//.test(r),m=/Opera\//.test(r),y=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),C=/PhantomJS/.test(r),x=y&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),E=/Android/.test(r),N=x||E||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),L=x||/Mac/.test(t),H=/\bCrOS\b/.test(r),rt=/win/i.test(t),nt=m&&r.match(/Version\/(\d*\.\d*)/);nt&&(nt=Number(nt[1])),nt&&nt>=15&&(m=!1,c=!0);var vt=L&&(h||m&&(nt==null||nt<12.11)),et=e||u&&f>=9;function G(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var W=function(a,l){var p=a.className,d=G(l).exec(p);if(d){var v=p.slice(d.index+d[0].length);a.className=p.slice(0,d.index)+(v?d[1]+v:"")}};function U(a){for(var l=a.childNodes.length;l>0;--l)a.removeChild(a.firstChild);return a}function D(a,l){return U(a).appendChild(l)}function Y(a,l,p,d){var v=document.createElement(a);if(p&&(v.className=p),d&&(v.style.cssText=d),typeof l=="string")v.appendChild(document.createTextNode(l));else if(l)for(var _=0;_<l.length;++_)v.appendChild(l[_]);return v}function K(a,l,p,d){var v=Y(a,l,p,d);return v.setAttribute("role","presentation"),v}var ct;document.createRange?ct=function(a,l,p,d){var v=document.createRange();return v.setEnd(d||a,p),v.setStart(a,l),v}:ct=function(a,l,p){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch{return d}return d.collapse(!0),d.moveEnd("character",p),d.moveStart("character",l),d};function M(a,l){if(l.nodeType==3&&(l=l.parentNode),a.contains)return a.contains(l);do if(l.nodeType==11&&(l=l.host),l==a)return!0;while(l=l.parentNode)}function wt(){var a;try{a=document.activeElement}catch{a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function gt(a,l){var p=a.className;G(l).test(p)||(a.className+=(p?" ":"")+l)}function At(a,l){for(var p=a.split(" "),d=0;d<p.length;d++)p[d]&&!G(p[d]).test(l)&&(l+=" "+p[d]);return l}var Qt=function(a){a.select()};x?Qt=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:u&&(Qt=function(a){try{a.select()}catch{}});function oe(a){var l=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,l)}}function yt(a,l,p){l||(l={});for(var d in a)a.hasOwnProperty(d)&&(p!==!1||!l.hasOwnProperty(d))&&(l[d]=a[d]);return l}function Ct(a,l,p,d,v){l==null&&(l=a.search(/[^\s\u00a0]/),l==-1&&(l=a.length));for(var _=d||0,b=v||0;;){var S=a.indexOf("	",_);if(S<0||S>=l)return b+(l-_);b+=S-_,b+=p-b%p,_=S+1}}var bt=function(){this.id=null,this.f=null,this.time=0,this.handler=oe(this.onTimeout,this)};bt.prototype.onTimeout=function(a){a.id=0,a.time<=+new Date?a.f():setTimeout(a.handler,a.time-+new Date)},bt.prototype.set=function(a,l){this.f=l;var p=+new Date+a;(!this.id||p<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=p)};function Lt(a,l){for(var p=0;p<a.length;++p)if(a[p]==l)return p;return-1}var zt=50,Dt={toString:function(){return"CodeMirror.Pass"}},Ut={scroll:!1},Yt={origin:"*mouse"},se={origin:"+move"};function Xt(a,l,p){for(var d=0,v=0;;){var _=a.indexOf("	",d);_==-1&&(_=a.length);var b=_-d;if(_==a.length||v+b>=l)return d+Math.min(b,l-v);if(v+=_-d,v+=p-v%p,d=_+1,v>=l)return d}}var ee=[""];function xe(a){for(;ee.length<=a;)ee.push(ue(ee)+" ");return ee[a]}function ue(a){return a[a.length-1]}function mt(a,l){for(var p=[],d=0;d<a.length;d++)p[d]=l(a[d],d);return p}function Vt(a,l,p){for(var d=0,v=p(l);d<a.length&&p(a[d])<=v;)d++;a.splice(d,0,l)}function Rt(){}function T(a,l){var p;return Object.create?p=Object.create(a):(Rt.prototype=a,p=new Rt),l&&yt(l,p),p}var j=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function z(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||j.test(a))}function it(a,l){return l?l.source.indexOf("\\w")>-1&&z(a)?!0:l.test(a):z(a)}function _t(a){for(var l in a)if(a.hasOwnProperty(l)&&a[l])return!1;return!0}var q=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ht(a){return a.charCodeAt(0)>=768&&q.test(a)}function st(a,l,p){for(;(p<0?l>0:l<a.length)&&ht(a.charAt(l));)l+=p;return l}function ie(a,l,p){for(var d=l>p?-1:1;;){if(l==p)return l;var v=(l+p)/2,_=d<0?Math.ceil(v):Math.floor(v);if(_==l)return a(_)?l:p;a(_)?p=_:l=_+d}}function _e(a,l,p,d){if(!a)return d(l,p,"ltr",0);for(var v=!1,_=0;_<a.length;++_){var b=a[_];(b.from<p&&b.to>l||l==p&&b.to==l)&&(d(Math.max(b.from,l),Math.min(b.to,p),b.level==1?"rtl":"ltr",_),v=!0)}v||d(l,p,"ltr")}var me=null;function B(a,l,p){var d;me=null;for(var v=0;v<a.length;++v){var _=a[v];if(_.from<l&&_.to>l)return v;_.to==l&&(_.from!=_.to&&p=="before"?d=v:me=v),_.from==l&&(_.from!=_.to&&p!="before"?d=v:me=v)}return d??me}var ot=(function(){var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",l="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function p(A){return A<=247?a.charAt(A):1424<=A&&A<=1524?"R":1536<=A&&A<=1785?l.charAt(A-1536):1774<=A&&A<=2220?"r":8192<=A&&A<=8203?"w":A==8204?"b":"L"}var d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,v=/[stwN]/,_=/[LRr]/,b=/[Lb1n]/,S=/[1n]/;function O(A,$,Z){this.level=A,this.from=$,this.to=Z}return function(A,$){var Z=$=="ltr"?"L":"R";if(A.length==0||$=="ltr"&&!d.test(A))return!1;for(var ft=A.length,at=[],St=0;St<ft;++St)at.push(p(A.charCodeAt(St)));for(var kt=0,Nt=Z;kt<ft;++kt){var $t=at[kt];$t=="m"?at[kt]=Nt:Nt=$t}for(var te=0,qt=Z;te<ft;++te){var ne=at[te];ne=="1"&&qt=="r"?at[te]="n":_.test(ne)&&(qt=ne,ne=="r"&&(at[te]="R"))}for(var he=1,de=at[0];he<ft-1;++he){var Oe=at[he];Oe=="+"&&de=="1"&&at[he+1]=="1"?at[he]="1":Oe==","&&de==at[he+1]&&(de=="1"||de=="n")&&(at[he]=de),de=Oe}for(var Ue=0;Ue<ft;++Ue){var Sr=at[Ue];if(Sr==",")at[Ue]="N";else if(Sr=="%"){var Ze=void 0;for(Ze=Ue+1;Ze<ft&&at[Ze]=="%";++Ze);for(var fn=Ue&&at[Ue-1]=="!"||Ze<ft&&at[Ze]=="1"?"1":"N",$r=Ue;$r<Ze;++$r)at[$r]=fn;Ue=Ze-1}}for(var cr=0,qr=Z;cr<ft;++cr){var Pr=at[cr];qr=="L"&&Pr=="1"?at[cr]="L":_.test(Pr)&&(qr=Pr)}for(var mr=0;mr<ft;++mr)if(v.test(at[mr])){var fr=void 0;for(fr=mr+1;fr<ft&&v.test(at[fr]);++fr);for(var tr=(mr?at[mr-1]:Z)=="L",Yr=(fr<ft?at[fr]:Z)=="L",Xi=tr==Yr?tr?"L":"R":Z,Yo=mr;Yo<fr;++Yo)at[Yo]=Xi;mr=fr-1}for(var Ir=[],io,xr=0;xr<ft;)if(b.test(at[xr])){var bc=xr;for(++xr;xr<ft&&b.test(at[xr]);++xr);Ir.push(new O(0,bc,xr))}else{var wo=xr,hi=Ir.length,vi=$=="rtl"?1:0;for(++xr;xr<ft&&at[xr]!="L";++xr);for(var Hr=wo;Hr<xr;)if(S.test(at[Hr])){wo<Hr&&(Ir.splice(hi,0,new O(1,wo,Hr)),hi+=vi);var Ji=Hr;for(++Hr;Hr<xr&&S.test(at[Hr]);++Hr);Ir.splice(hi,0,new O(2,Ji,Hr)),hi+=vi,wo=Hr}else++Hr;wo<xr&&Ir.splice(hi,0,new O(1,wo,xr))}return $=="ltr"&&(Ir[0].level==1&&(io=A.match(/^\s+/))&&(Ir[0].from=io[0].length,Ir.unshift(new O(0,0,io[0].length))),ue(Ir).level==1&&(io=A.match(/\s+$/))&&(ue(Ir).to-=io[0].length,Ir.push(new O(0,ft-io[0].length,ft)))),$=="rtl"?Ir.reverse():Ir}})();function R(a,l){var p=a.order;return p==null&&(p=a.order=ot(a.text,l)),p}var Et=[],pt=function(a,l,p){if(a.addEventListener)a.addEventListener(l,p,!1);else if(a.attachEvent)a.attachEvent("on"+l,p);else{var d=a._handlers||(a._handlers={});d[l]=(d[l]||Et).concat(p)}};function It(a,l){return a._handlers&&a._handlers[l]||Et}function Jt(a,l,p){if(a.removeEventListener)a.removeEventListener(l,p,!1);else if(a.detachEvent)a.detachEvent("on"+l,p);else{var d=a._handlers,v=d&&d[l];if(v){var _=Lt(v,p);_>-1&&(d[l]=v.slice(0,_).concat(v.slice(_+1)))}}}function Zt(a,l){var p=It(a,l);if(p.length)for(var d=Array.prototype.slice.call(arguments,2),v=0;v<p.length;++v)p[v].apply(null,d)}function Gt(a,l,p){return typeof l=="string"&&(l={type:l,preventDefault:function(){this.defaultPrevented=!0}}),Zt(a,p||l.type,a,l),pr(l)||l.codemirrorIgnore}function ae(a){var l=a._handlers&&a._handlers.cursorActivity;if(l)for(var p=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<l.length;++d)Lt(p,l[d])==-1&&p.push(l[d])}function Se(a,l){return It(a,l).length>0}function Ae(a){a.prototype.on=function(l,p){pt(this,l,p)},a.prototype.off=function(l,p){Jt(this,l,p)}}function Te(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Je(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function pr(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==!1}function F(a){Te(a),Je(a)}function Q(a){return a.target||a.srcElement}function lt(a){var l=a.which;return l==null&&(a.button&1?l=1:a.button&2?l=3:a.button&4&&(l=2)),L&&a.ctrlKey&&l==1&&(l=3),l}var Pt=(function(){if(u&&f<9)return!1;var a=Y("div");return"draggable"in a||"dragDrop"in a})(),Wt;function fe(a){if(Wt==null){var l=Y("span","​");D(a,Y("span",[l,document.createTextNode("x")])),a.firstChild.offsetHeight!=0&&(Wt=l.offsetWidth<=1&&l.offsetHeight>2&&!(u&&f<8))}var p=Wt?Y("span","​"):Y("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return p.setAttribute("cm-text",""),p}var ye;function Be(a){if(ye!=null)return ye;var l=D(a,document.createTextNode("AخA")),p=ct(l,0,1).getBoundingClientRect(),d=ct(l,1,2).getBoundingClientRect();return U(a),!p||p.left==p.right?!1:ye=d.right-p.right<3}var rr=`

b`.split(/\n/).length!=3?function(a){for(var l=0,p=[],d=a.length;l<=d;){var v=a.indexOf(`
`,l);v==-1&&(v=a.length);var _=a.slice(l,a.charAt(v-1)=="\r"?v-1:v),b=_.indexOf("\r");b!=-1?(p.push(_.slice(0,b)),l+=b+1):(p.push(_),l=v+1)}return p}:function(a){return a.split(/\r\n?|\n/)},We=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch{return!1}}:function(a){var l;try{l=a.ownerDocument.selection.createRange()}catch{}return!l||l.parentElement()!=a?!1:l.compareEndPoints("StartToEnd",l)!=0},bn=(function(){var a=Y("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),typeof a.oncopy=="function")})(),ze=null;function jr(a){if(ze!=null)return ze;var l=D(a,Y("span","x")),p=l.getBoundingClientRect(),d=ct(l,0,1).getBoundingClientRect();return ze=Math.abs(p.left-d.left)>1}var nn={},Le={};function nr(a,l){arguments.length>2&&(l.dependencies=Array.prototype.slice.call(arguments,2)),nn[a]=l}function ke(a,l){Le[a]=l}function Mr(a){if(typeof a=="string"&&Le.hasOwnProperty(a))a=Le[a];else if(a&&typeof a.name=="string"&&Le.hasOwnProperty(a.name)){var l=Le[a.name];typeof l=="string"&&(l={name:l}),a=T(l,a),a.name=l.name}else{if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return Mr("application/xml");if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return Mr("application/json")}return typeof a=="string"?{name:a}:a||{name:"null"}}function ve(a,l){l=Mr(l);var p=nn[l.name];if(!p)return ve(a,"text/plain");var d=p(a,l);if(on.hasOwnProperty(l.name)){var v=on[l.name];for(var _ in v)v.hasOwnProperty(_)&&(d.hasOwnProperty(_)&&(d["_"+_]=d[_]),d[_]=v[_])}if(d.name=l.name,l.helperType&&(d.helperType=l.helperType),l.modeProps)for(var b in l.modeProps)d[b]=l.modeProps[b];return d}var on={};function Br(a,l){var p=on.hasOwnProperty(a)?on[a]:on[a]={};yt(l,p)}function ar(a,l){if(l===!0)return l;if(a.copyState)return a.copyState(l);var p={};for(var d in l){var v=l[d];v instanceof Array&&(v=v.concat([])),p[d]=v}return p}function sr(a,l){for(var p;a.innerMode&&(p=a.innerMode(l),!(!p||p.mode==a));)l=p.state,a=p.mode;return p||{mode:a,state:l}}function Rr(a,l,p){return a.startState?a.startState(l,p):!0}var Ie=function(a,l,p){this.pos=this.start=0,this.string=a,this.tabSize=l||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=p};Ie.prototype.eol=function(){return this.pos>=this.string.length},Ie.prototype.sol=function(){return this.pos==this.lineStart},Ie.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ie.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ie.prototype.eat=function(a){var l=this.string.charAt(this.pos),p;if(typeof a=="string"?p=l==a:p=l&&(a.test?a.test(l):a(l)),p)return++this.pos,l},Ie.prototype.eatWhile=function(a){for(var l=this.pos;this.eat(a););return this.pos>l},Ie.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},Ie.prototype.skipToEnd=function(){this.pos=this.string.length},Ie.prototype.skipTo=function(a){var l=this.string.indexOf(a,this.pos);if(l>-1)return this.pos=l,!0},Ie.prototype.backUp=function(a){this.pos-=a},Ie.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ct(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ct(this.string,this.lineStart,this.tabSize):0)},Ie.prototype.indentation=function(){return Ct(this.string,null,this.tabSize)-(this.lineStart?Ct(this.string,this.lineStart,this.tabSize):0)},Ie.prototype.match=function(a,l,p){if(typeof a=="string"){var d=function(b){return p?b.toLowerCase():b},v=this.string.substr(this.pos,a.length);if(d(v)==d(a))return l!==!1&&(this.pos+=a.length),!0}else{var _=this.string.slice(this.pos).match(a);return _&&_.index>0?null:(_&&l!==!1&&(this.pos+=_[0].length),_)}},Ie.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ie.prototype.hideFirstChars=function(a,l){this.lineStart+=a;try{return l()}finally{this.lineStart-=a}},Ie.prototype.lookAhead=function(a){var l=this.lineOracle;return l&&l.lookAhead(a)},Ie.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};function re(a,l){if(l-=a.first,l<0||l>=a.size)throw new Error("There is no line "+(l+a.first)+" in the document.");for(var p=a;!p.lines;)for(var d=0;;++d){var v=p.children[d],_=v.chunkSize();if(l<_){p=v;break}l-=_}return p.lines[l]}function yr(a,l,p){var d=[],v=l.line;return a.iter(l.line,p.line+1,function(_){var b=_.text;v==p.line&&(b=b.slice(0,p.ch)),v==l.line&&(b=b.slice(l.ch)),d.push(b),++v}),d}function $e(a,l,p){var d=[];return a.iter(l,p,function(v){d.push(v.text)}),d}function _r(a,l){var p=l-a.height;if(p)for(var d=a;d;d=d.parent)d.height+=p}function Ee(a){if(a.parent==null)return null;for(var l=a.parent,p=Lt(l.lines,a),d=l.parent;d;l=d,d=d.parent)for(var v=0;d.children[v]!=l;++v)p+=d.children[v].chunkSize();return p+l.first}function Ne(a,l){var p=a.first;t:do{for(var d=0;d<a.children.length;++d){var v=a.children[d],_=v.height;if(l<_){a=v;continue t}l-=_,p+=v.chunkSize()}return p}while(!a.lines);for(var b=0;b<a.lines.length;++b){var S=a.lines[b],O=S.height;if(l<O)break;l-=O}return p+b}function an(a,l){return l>=a.first&&l<a.first+a.size}function Cn(a,l){return String(a.lineNumberFormatter(l+a.firstLineNumber))}function Mt(a,l,p){if(p===void 0&&(p=null),!(this instanceof Mt))return new Mt(a,l,p);this.line=a,this.ch=l,this.sticky=p}function pe(a,l){return a.line-l.line||a.ch-l.ch}function Sn(a,l){return a.sticky==l.sticky&&pe(a,l)==0}function I(a){return Mt(a.line,a.ch)}function X(a,l){return pe(a,l)<0?l:a}function xt(a,l){return pe(a,l)<0?a:l}function jt(a,l){return Math.max(a.first,Math.min(l,a.first+a.size-1))}function Ft(a,l){if(l.line<a.first)return Mt(a.first,0);var p=a.first+a.size-1;return l.line>p?Mt(p,re(a,p).text.length):Ce(l,re(a,l.line).text.length)}function Ce(a,l){var p=a.ch;return p==null||p>l?Mt(a.line,l):p<0?Mt(a.line,0):a}function Pe(a,l){for(var p=[],d=0;d<l.length;d++)p[d]=Ft(a,l[d]);return p}var Ke=function(a,l){this.state=a,this.lookAhead=l},Re=function(a,l,p,d){this.state=l,this.doc=a,this.line=p,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};Re.prototype.lookAhead=function(a){var l=this.doc.getLine(this.line+a);return l!=null&&a>this.maxLookAhead&&(this.maxLookAhead=a),l},Re.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var l=this.baseTokens[this.baseTokenPos+1];return{type:l&&l.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},Re.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Re.fromSaved=function(a,l,p){return l instanceof Ke?new Re(a,ar(a.mode,l.state),p,l.lookAhead):new Re(a,ar(a.mode,l),p)},Re.prototype.save=function(a){var l=a!==!1?ar(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ke(l,this.maxLookAhead):l};function sn(a,l,p,d){var v=[a.state.modeGen],_={};no(a,l.text,a.doc.mode,p,function(A,$){return v.push(A,$)},_,d);for(var b=p.state,S=function(A){p.baseTokens=v;var $=a.state.overlays[A],Z=1,ft=0;p.state=!0,no(a,l.text,$.mode,p,function(at,St){for(var kt=Z;ft<at;){var Nt=v[Z];Nt>at&&v.splice(Z,1,at,v[Z+1],Nt),Z+=2,ft=Math.min(at,Nt)}if(St)if($.opaque)v.splice(kt,Z-kt,at,"overlay "+St),Z=kt+2;else for(;kt<Z;kt+=2){var $t=v[kt+1];v[kt+1]=($t?$t+" ":"")+"overlay "+St}},_),p.state=b,p.baseTokens=null,p.baseTokenPos=1},O=0;O<a.state.overlays.length;++O)S(O);return{styles:v,classes:_.bgClass||_.textClass?_:null}}function Ao(a,l,p){if(!l.styles||l.styles[0]!=a.state.modeGen){var d=lo(a,Ee(l)),v=l.text.length>a.options.maxHighlightLength&&ar(a.doc.mode,d.state),_=sn(a,l,d);v&&(d.state=v),l.stateAfter=d.save(!v),l.styles=_.styles,_.classes?l.styleClasses=_.classes:l.styleClasses&&(l.styleClasses=null),p===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return l.styles}function lo(a,l,p){var d=a.doc,v=a.display;if(!d.mode.startState)return new Re(d,!0,l);var _=Kn(a,l,p),b=_>d.first&&re(d,_-1).stateAfter,S=b?Re.fromSaved(d,b,_):new Re(d,Rr(d.mode),_);return d.iter(_,l,function(O){uo(a,O.text,S);var A=S.line;O.stateAfter=A==l-1||A%5==0||A>=v.viewFrom&&A<v.viewTo?S.save():null,S.nextLine()}),p&&(d.modeFrontier=S.line),S}function uo(a,l,p,d){var v=a.doc.mode,_=new Ie(l,a.options.tabSize,p);for(_.start=_.pos=d||0,l==""&&co(v,p.state);!_.eol();)ni(v,_,p.state),_.start=_.pos}function co(a,l){if(a.blankLine)return a.blankLine(l);if(a.innerMode){var p=sr(a,l);if(p.mode.blankLine)return p.mode.blankLine(p.state)}}function ni(a,l,p,d){for(var v=0;v<10;v++){d&&(d[0]=sr(a,p).mode);var _=a.token(l,p);if(l.pos>l.start)return _}throw new Error("Mode "+a.name+" failed to advance stream.")}var ko=function(a,l,p){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=l||null,this.state=p};function Mo(a,l,p,d){var v=a.doc,_=v.mode,b;l=Ft(v,l);var S=re(v,l.line),O=lo(a,l.line,p),A=new Ie(S.text,a.options.tabSize,O),$;for(d&&($=[]);(d||A.pos<l.ch)&&!A.eol();)A.start=A.pos,b=ni(_,A,O.state),d&&$.push(new ko(A,b,ar(v.mode,O.state)));return d?$:new ko(A,b,O.state)}function fo(a,l){if(a)for(;;){var p=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!p)break;a=a.slice(0,p.index)+a.slice(p.index+p[0].length);var d=p[1]?"bgClass":"textClass";l[d]==null?l[d]=p[2]:new RegExp("(?:^|\\s)"+p[2]+"(?:$|\\s)").test(l[d])||(l[d]+=" "+p[2])}return a}function no(a,l,p,d,v,_,b){var S=p.flattenSpans;S==null&&(S=a.options.flattenSpans);var O=0,A=null,$=new Ie(l,a.options.tabSize,d),Z,ft=a.options.addModeClass&&[null];for(l==""&&fo(co(p,d.state),_);!$.eol();){if($.pos>a.options.maxHighlightLength?(S=!1,b&&uo(a,l,d,$.pos),$.pos=l.length,Z=null):Z=fo(ni(p,$,d.state,ft),_),ft){var at=ft[0].name;at&&(Z="m-"+(Z?at+" "+Z:at))}if(!S||A!=Z){for(;O<$.start;)O=Math.min($.start,O+5e3),v(O,A);A=Z}$.start=$.pos}for(;O<$.pos;){var St=Math.min($.pos,O+5e3);v(St,A),O=St}}function Kn(a,l,p){for(var d,v,_=a.doc,b=p?-1:l-(a.doc.mode.innerMode?1e3:100),S=l;S>b;--S){if(S<=_.first)return _.first;var O=re(_,S-1),A=O.stateAfter;if(A&&(!p||S+(A instanceof Ke?A.lookAhead:0)<=_.modeFrontier))return S;var $=Ct(O.text,null,a.options.tabSize);(v==null||d>$)&&(v=S-1,d=$)}return v}function Do(a,l){if(a.modeFrontier=Math.min(a.modeFrontier,l),!(a.highlightFrontier<l-10)){for(var p=a.first,d=l-1;d>p;d--){var v=re(a,d).stateAfter;if(v&&(!(v instanceof Ke)||d+v.lookAhead<l)){p=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,p)}}var lr=!1,hr=!1;function oi(){lr=!0}function xn(){hr=!0}function Gn(a,l,p){this.marker=a,this.from=l,this.to=p}function Vr(a,l){if(a)for(var p=0;p<a.length;++p){var d=a[p];if(d.marker==l)return d}}function vr(a,l){for(var p,d=0;d<a.length;++d)a[d]!=l&&(p||(p=[])).push(a[d]);return p}function ki(a,l,p){var d=p&&window.WeakSet&&(p.markedSpans||(p.markedSpans=new WeakSet));d&&d.has(a.markedSpans)?a.markedSpans.push(l):(a.markedSpans=a.markedSpans?a.markedSpans.concat([l]):[l],d&&d.add(a.markedSpans)),l.marker.attachLine(a)}function $n(a,l,p){var d;if(a)for(var v=0;v<a.length;++v){var _=a[v],b=_.marker,S=_.from==null||(b.inclusiveLeft?_.from<=l:_.from<l);if(S||_.from==l&&b.type=="bookmark"&&(!p||!_.marker.insertLeft)){var O=_.to==null||(b.inclusiveRight?_.to>=l:_.to>l);(d||(d=[])).push(new Gn(b,_.from,O?null:_.to))}}return d}function On(a,l,p){var d;if(a)for(var v=0;v<a.length;++v){var _=a[v],b=_.marker,S=_.to==null||(b.inclusiveRight?_.to>=l:_.to>l);if(S||_.from==l&&b.type=="bookmark"&&(!p||_.marker.insertLeft)){var O=_.from==null||(b.inclusiveLeft?_.from<=l:_.from<l);(d||(d=[])).push(new Gn(b,O?null:_.from-l,_.to==null?null:_.to-l))}}return d}function po(a,l){if(l.full)return null;var p=an(a,l.from.line)&&re(a,l.from.line).markedSpans,d=an(a,l.to.line)&&re(a,l.to.line).markedSpans;if(!p&&!d)return null;var v=l.from.ch,_=l.to.ch,b=pe(l.from,l.to)==0,S=$n(p,v,b),O=On(d,_,b),A=l.text.length==1,$=ue(l.text).length+(A?v:0);if(S)for(var Z=0;Z<S.length;++Z){var ft=S[Z];if(ft.to==null){var at=Vr(O,ft.marker);at?A&&(ft.to=at.to==null?null:at.to+$):ft.to=v}}if(O)for(var St=0;St<O.length;++St){var kt=O[St];if(kt.to!=null&&(kt.to+=$),kt.from==null){var Nt=Vr(S,kt.marker);Nt||(kt.from=$,A&&(S||(S=[])).push(kt))}else kt.from+=$,A&&(S||(S=[])).push(kt)}S&&(S=Tn(S)),O&&O!=S&&(O=Tn(O));var $t=[S];if(!A){var te=l.text.length-2,qt;if(te>0&&S)for(var ne=0;ne<S.length;++ne)S[ne].to==null&&(qt||(qt=[])).push(new Gn(S[ne].marker,null,null));for(var he=0;he<te;++he)$t.push(qt);$t.push(O)}return $t}function Tn(a){for(var l=0;l<a.length;++l){var p=a[l];p.from!=null&&p.from==p.to&&p.marker.clearWhenEmpty!==!1&&a.splice(l--,1)}return a.length?a:null}function Pn(a,l,p){var d=null;if(a.iter(l.line,p.line+1,function(at){if(at.markedSpans)for(var St=0;St<at.markedSpans.length;++St){var kt=at.markedSpans[St].marker;kt.readOnly&&(!d||Lt(d,kt)==-1)&&(d||(d=[])).push(kt)}}),!d)return null;for(var v=[{from:l,to:p}],_=0;_<d.length;++_)for(var b=d[_],S=b.find(0),O=0;O<v.length;++O){var A=v[O];if(!(pe(A.to,S.from)<0||pe(A.from,S.to)>0)){var $=[O,1],Z=pe(A.from,S.from),ft=pe(A.to,S.to);(Z<0||!b.inclusiveLeft&&!Z)&&$.push({from:A.from,to:S.from}),(ft>0||!b.inclusiveRight&&!ft)&&$.push({from:S.to,to:A.to}),v.splice.apply(v,$),O+=$.length-3}}return v}function ii(a){var l=a.markedSpans;if(l){for(var p=0;p<l.length;++p)l[p].marker.detachLine(a);a.markedSpans=null}}function Lo(a,l){if(l){for(var p=0;p<l.length;++p)l[p].marker.attachLine(a);a.markedSpans=l}}function ho(a){return a.inclusiveLeft?-1:0}function Rn(a){return a.inclusiveRight?1:0}function vo(a,l){var p=a.lines.length-l.lines.length;if(p!=0)return p;var d=a.find(),v=l.find(),_=pe(d.from,v.from)||ho(a)-ho(l);if(_)return-_;var b=pe(d.to,v.to)||Rn(a)-Rn(l);return b||l.id-a.id}function qn(a,l){var p=hr&&a.markedSpans,d;if(p)for(var v=void 0,_=0;_<p.length;++_)v=p[_],v.marker.collapsed&&(l?v.from:v.to)==null&&(!d||vo(d,v.marker)<0)&&(d=v.marker);return d}function ce(a){return qn(a,!0)}function le(a){return qn(a,!1)}function Me(a,l){var p=hr&&a.markedSpans,d;if(p)for(var v=0;v<p.length;++v){var _=p[v];_.marker.collapsed&&(_.from==null||_.from<l)&&(_.to==null||_.to>l)&&(!d||vo(d,_.marker)<0)&&(d=_.marker)}return d}function ge(a,l,p,d,v){var _=re(a,l),b=hr&&_.markedSpans;if(b)for(var S=0;S<b.length;++S){var O=b[S];if(O.marker.collapsed){var A=O.marker.find(0),$=pe(A.from,p)||ho(O.marker)-ho(v),Z=pe(A.to,d)||Rn(O.marker)-Rn(v);if(!($>=0&&Z<=0||$<=0&&Z>=0)&&($<=0&&(O.marker.inclusiveRight&&v.inclusiveLeft?pe(A.to,p)>=0:pe(A.to,p)>0)||$>=0&&(O.marker.inclusiveRight&&v.inclusiveLeft?pe(A.from,d)<=0:pe(A.from,d)<0)))return!0}}}function qe(a){for(var l;l=ce(a);)a=l.find(-1,!0).line;return a}function ur(a){for(var l;l=le(a);)a=l.find(1,!0).line;return a}function Fr(a){for(var l,p;l=le(a);)a=l.find(1,!0).line,(p||(p=[])).push(a);return p}function Vn(a,l){var p=re(a,l),d=qe(p);return p==d?l:Ee(d)}function Wr(a,l){if(l>a.lastLine())return l;var p=re(a,l),d;if(!zr(a,p))return l;for(;d=le(p);)p=d.find(1,!0).line;return Ee(p)+1}function zr(a,l){var p=hr&&l.markedSpans;if(p){for(var d=void 0,v=0;v<p.length;++v)if(d=p[v],!!d.marker.collapsed){if(d.from==null)return!0;if(!d.marker.widgetNode&&d.from==0&&d.marker.inclusiveLeft&&ln(a,l,d))return!0}}}function ln(a,l,p){if(p.to==null){var d=p.marker.find(1,!0);return ln(a,d.line,Vr(d.line.markedSpans,p.marker))}if(p.marker.inclusiveRight&&p.to==l.text.length)return!0;for(var v=void 0,_=0;_<l.markedSpans.length;++_)if(v=l.markedSpans[_],v.marker.collapsed&&!v.marker.widgetNode&&v.from==p.to&&(v.to==null||v.to!=p.from)&&(v.marker.inclusiveLeft||p.marker.inclusiveRight)&&ln(a,l,v))return!0}function Fn(a){a=qe(a);for(var l=0,p=a.parent,d=0;d<p.lines.length;++d){var v=p.lines[d];if(v==a)break;l+=v.height}for(var _=p.parent;_;p=_,_=p.parent)for(var b=0;b<_.children.length;++b){var S=_.children[b];if(S==p)break;l+=S.height}return l}function go(a){if(a.height==0)return 0;for(var l=a.text.length,p,d=a;p=ce(d);){var v=p.find(0,!0);d=v.from.line,l+=v.from.ch-v.to.ch}for(d=a;p=le(d);){var _=p.find(0,!0);l-=d.text.length-_.from.ch,d=_.to.line,l+=d.text.length-_.to.ch}return l}function Io(a){var l=a.display,p=a.doc;l.maxLine=re(p,p.first),l.maxLineLength=go(l.maxLine),l.maxLineChanged=!0,p.iter(function(d){var v=go(d);v>l.maxLineLength&&(l.maxLineLength=v,l.maxLine=d)})}var wr=function(a,l,p){this.text=a,Lo(this,l),this.height=p?p(this):1};wr.prototype.lineNo=function(){return Ee(this)},Ae(wr);function Ms(a,l,p,d){a.text=l,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),a.order!=null&&(a.order=null),ii(a),Lo(a,p);var v=d?d(a):1;v!=a.height&&_r(a,v)}function Mi(a){a.parent=null,ii(a)}var Ds={},Ea={};function Aa(a,l){if(!a||/^\s*$/.test(a))return null;var p=l.addModeClass?Ea:Ds;return p[a]||(p[a]=a.replace(/\S+/g,"cm-$&"))}function Di(a,l){var p=K("span",null,null,c?"padding-right: .1px":null),d={pre:K("pre",[p],"CodeMirror-line"),content:p,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};l.measure={};for(var v=0;v<=(l.rest?l.rest.length:0);v++){var _=v?l.rest[v-1]:l.line,b=void 0;d.pos=0,d.addToken=Is,Be(a.display.measure)&&(b=R(_,a.doc.direction))&&(d.addToken=js(d.addToken,b)),d.map=[];var S=l!=a.display.externalMeasured&&Ee(_);Rs(_,d,Ao(a,_,S)),_.styleClasses&&(_.styleClasses.bgClass&&(d.bgClass=At(_.styleClasses.bgClass,d.bgClass||"")),_.styleClasses.textClass&&(d.textClass=At(_.styleClasses.textClass,d.textClass||""))),d.map.length==0&&d.map.push(0,0,d.content.appendChild(fe(a.display.measure))),v==0?(l.measure.map=d.map,l.measure.cache={}):((l.measure.maps||(l.measure.maps=[])).push(d.map),(l.measure.caches||(l.measure.caches=[])).push({}))}if(c){var O=d.content.lastChild;(/\bcm-tab\b/.test(O.className)||O.querySelector&&O.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return Zt(a,"renderLine",a,l.line,d.pre),d.pre.className&&(d.textClass=At(d.pre.className,d.textClass||"")),d}function Ls(a){var l=Y("span","•","cm-invalidchar");return l.title="\\u"+a.charCodeAt(0).toString(16),l.setAttribute("aria-label",l.title),l}function Is(a,l,p,d,v,_,b){if(l){var S=a.splitSpaces?Li(l,a.trailingSpace):l,O=a.cm.state.specialChars,A=!1,$;if(!O.test(l))a.col+=l.length,$=document.createTextNode(S),a.map.push(a.pos,a.pos+l.length,$),u&&f<9&&(A=!0),a.pos+=l.length;else{$=document.createDocumentFragment();for(var Z=0;;){O.lastIndex=Z;var ft=O.exec(l),at=ft?ft.index-Z:l.length-Z;if(at){var St=document.createTextNode(S.slice(Z,Z+at));u&&f<9?$.appendChild(Y("span",[St])):$.appendChild(St),a.map.push(a.pos,a.pos+at,St),a.col+=at,a.pos+=at}if(!ft)break;Z+=at+1;var kt=void 0;if(ft[0]=="	"){var Nt=a.cm.options.tabSize,$t=Nt-a.col%Nt;kt=$.appendChild(Y("span",xe($t),"cm-tab")),kt.setAttribute("role","presentation"),kt.setAttribute("cm-text","	"),a.col+=$t}else ft[0]=="\r"||ft[0]==`
`?(kt=$.appendChild(Y("span",ft[0]=="\r"?"␍":"␤","cm-invalidchar")),kt.setAttribute("cm-text",ft[0]),a.col+=1):(kt=a.cm.options.specialCharPlaceholder(ft[0]),kt.setAttribute("cm-text",ft[0]),u&&f<9?$.appendChild(Y("span",[kt])):$.appendChild(kt),a.col+=1);a.map.push(a.pos,a.pos+1,kt),a.pos++}}if(a.trailingSpace=S.charCodeAt(l.length-1)==32,p||d||v||A||_||b){var te=p||"";d&&(te+=d),v&&(te+=v);var qt=Y("span",[$],te,_);if(b)for(var ne in b)b.hasOwnProperty(ne)&&ne!="style"&&ne!="class"&&qt.setAttribute(ne,b[ne]);return a.content.appendChild(qt)}a.content.appendChild($)}}function Li(a,l){if(a.length>1&&!/  /.test(a))return a;for(var p=l,d="",v=0;v<a.length;v++){var _=a.charAt(v);_==" "&&p&&(v==a.length-1||a.charCodeAt(v+1)==32)&&(_=" "),d+=_,p=_==" "}return d}function js(a,l){return function(p,d,v,_,b,S,O){v=v?v+" cm-force-border":"cm-force-border";for(var A=p.pos,$=A+d.length;;){for(var Z=void 0,ft=0;ft<l.length&&(Z=l[ft],!(Z.to>A&&Z.from<=A));ft++);if(Z.to>=$)return a(p,d,v,_,b,S,O);a(p,d.slice(0,Z.to-A),v,_,null,S,O),_=null,d=d.slice(Z.to-A),A=Z.to}}}function ka(a,l,p,d){var v=!d&&p.widgetNode;v&&a.map.push(a.pos,a.pos+l,v),!d&&a.cm.display.input.needsContentAttribute&&(v||(v=a.content.appendChild(document.createElement("span"))),v.setAttribute("cm-marker",p.id)),v&&(a.cm.display.input.setUneditable(v),a.content.appendChild(v)),a.pos+=l,a.trailingSpace=!1}function Rs(a,l,p){var d=a.markedSpans,v=a.text,_=0;if(!d){for(var b=1;b<p.length;b+=2)l.addToken(l,v.slice(_,_=p[b]),Aa(p[b+1],l.cm.options));return}for(var S=v.length,O=0,A=1,$="",Z,ft,at=0,St,kt,Nt,$t,te;;){if(at==O){St=kt=Nt=ft="",te=null,$t=null,at=1/0;for(var qt=[],ne=void 0,he=0;he<d.length;++he){var de=d[he],Oe=de.marker;if(Oe.type=="bookmark"&&de.from==O&&Oe.widgetNode)qt.push(Oe);else if(de.from<=O&&(de.to==null||de.to>O||Oe.collapsed&&de.to==O&&de.from==O)){if(de.to!=null&&de.to!=O&&at>de.to&&(at=de.to,kt=""),Oe.className&&(St+=" "+Oe.className),Oe.css&&(ft=(ft?ft+";":"")+Oe.css),Oe.startStyle&&de.from==O&&(Nt+=" "+Oe.startStyle),Oe.endStyle&&de.to==at&&(ne||(ne=[])).push(Oe.endStyle,de.to),Oe.title&&((te||(te={})).title=Oe.title),Oe.attributes)for(var Ue in Oe.attributes)(te||(te={}))[Ue]=Oe.attributes[Ue];Oe.collapsed&&(!$t||vo($t.marker,Oe)<0)&&($t=de)}else de.from>O&&at>de.from&&(at=de.from)}if(ne)for(var Sr=0;Sr<ne.length;Sr+=2)ne[Sr+1]==at&&(kt+=" "+ne[Sr]);if(!$t||$t.from==O)for(var Ze=0;Ze<qt.length;++Ze)ka(l,0,qt[Ze]);if($t&&($t.from||0)==O){if(ka(l,($t.to==null?S+1:$t.to)-O,$t.marker,$t.from==null),$t.to==null)return;$t.to==O&&($t=!1)}}if(O>=S)break;for(var fn=Math.min(S,at);;){if($){var $r=O+$.length;if(!$t){var cr=$r>fn?$.slice(0,fn-O):$;l.addToken(l,cr,Z?Z+St:St,Nt,O+cr.length==at?kt:"",ft,te)}if($r>=fn){$=$.slice(fn-O),O=fn;break}O=$r,Nt=""}$=v.slice(_,_=p[A++]),Z=Aa(p[A++],l.cm.options)}}}function Ma(a,l,p){this.line=l,this.rest=Fr(l),this.size=this.rest?Ee(ue(this.rest))-p+1:1,this.node=this.text=null,this.hidden=zr(a,l)}function Ii(a,l,p){for(var d=[],v,_=l;_<p;_=v){var b=new Ma(a.doc,re(a.doc,_),_);v=_+b.size,d.push(b)}return d}var mo=null;function Vs(a){mo?mo.ops.push(a):a.ownsGroup=mo={ops:[a],delayedCallbacks:[]}}function Bu(a){var l=a.delayedCallbacks,p=0;do{for(;p<l.length;p++)l[p].call(null);for(var d=0;d<a.ops.length;d++){var v=a.ops[d];if(v.cursorActivityHandlers)for(;v.cursorActivityCalled<v.cursorActivityHandlers.length;)v.cursorActivityHandlers[v.cursorActivityCalled++].call(null,v.cm)}}while(p<l.length)}function Da(a,l){var p=a.ownsGroup;if(p)try{Bu(p)}finally{mo=null,l(p)}}var jo=null;function Qe(a,l){var p=It(a,l);if(p.length){var d=Array.prototype.slice.call(arguments,2),v;mo?v=mo.delayedCallbacks:jo?v=jo:(v=jo=[],setTimeout(Ro,0));for(var _=function(S){v.push(function(){return p[S].apply(null,d)})},b=0;b<p.length;++b)_(b)}}function Ro(){var a=jo;jo=null;for(var l=0;l<a.length;++l)a[l]()}function oo(a,l,p,d){for(var v=0;v<l.changes.length;v++){var _=l.changes[v];_=="text"?Ia(a,l):_=="gutter"?Fo(a,l,p,d):_=="class"?ji(a,l):_=="widget"&&Ns(a,l,d)}l.changes=null}function Vo(a){return a.node==a.text&&(a.node=Y("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),u&&f<8&&(a.node.style.zIndex=2)),a.node}function Fs(a,l){var p=l.bgClass?l.bgClass+" "+(l.line.bgClass||""):l.line.bgClass;if(p&&(p+=" CodeMirror-linebackground"),l.background)p?l.background.className=p:(l.background.parentNode.removeChild(l.background),l.background=null);else if(p){var d=Vo(l);l.background=d.insertBefore(Y("div",null,p),d.firstChild),a.display.input.setUneditable(l.background)}}function La(a,l){var p=a.display.externalMeasured;return p&&p.line==l.line?(a.display.externalMeasured=null,l.measure=p.measure,p.built):Di(a,l)}function Ia(a,l){var p=l.text.className,d=La(a,l);l.text==l.node&&(l.node=d.pre),l.text.parentNode.replaceChild(d.pre,l.text),l.text=d.pre,d.bgClass!=l.bgClass||d.textClass!=l.textClass?(l.bgClass=d.bgClass,l.textClass=d.textClass,ji(a,l)):p&&(l.text.className=p)}function ji(a,l){Fs(a,l),l.line.wrapClass?Vo(l).className=l.line.wrapClass:l.node!=l.text&&(l.node.className="");var p=l.textClass?l.textClass+" "+(l.line.textClass||""):l.line.textClass;l.text.className=p||""}function Fo(a,l,p,d){if(l.gutter&&(l.node.removeChild(l.gutter),l.gutter=null),l.gutterBackground&&(l.node.removeChild(l.gutterBackground),l.gutterBackground=null),l.line.gutterClass){var v=Vo(l);l.gutterBackground=Y("div",null,"CodeMirror-gutter-background "+l.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),a.display.input.setUneditable(l.gutterBackground),v.insertBefore(l.gutterBackground,l.text)}var _=l.line.gutterMarkers;if(a.options.lineNumbers||_){var b=Vo(l),S=l.gutter=Y("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(S.setAttribute("aria-hidden","true"),a.display.input.setUneditable(S),b.insertBefore(S,l.text),l.line.gutterClass&&(S.className+=" "+l.line.gutterClass),a.options.lineNumbers&&(!_||!_["CodeMirror-linenumbers"])&&(l.lineNumber=S.appendChild(Y("div",Cn(a.options,p),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),_)for(var O=0;O<a.display.gutterSpecs.length;++O){var A=a.display.gutterSpecs[O].className,$=_.hasOwnProperty(A)&&_[A];$&&S.appendChild(Y("div",[$],"CodeMirror-gutter-elt","left: "+d.gutterLeft[A]+"px; width: "+d.gutterWidth[A]+"px"))}}}function Ns(a,l,p){l.alignable&&(l.alignable=null);for(var d=G("CodeMirror-linewidget"),v=l.node.firstChild,_=void 0;v;v=_)_=v.nextSibling,d.test(v.className)&&l.node.removeChild(v);No(a,l,p)}function Hs(a,l,p,d){var v=La(a,l);return l.text=l.node=v.pre,v.bgClass&&(l.bgClass=v.bgClass),v.textClass&&(l.textClass=v.textClass),ji(a,l),Fo(a,l,p,d),No(a,l,d),l.node}function No(a,l,p){if(ja(a,l.line,l,p,!0),l.rest)for(var d=0;d<l.rest.length;d++)ja(a,l.rest[d],l,p,!1)}function ja(a,l,p,d,v){if(l.widgets)for(var _=Vo(p),b=0,S=l.widgets;b<S.length;++b){var O=S[b],A=Y("div",[O.node],"CodeMirror-linewidget"+(O.className?" "+O.className:""));O.handleMouseEvents||A.setAttribute("cm-ignore-events","true"),Us(O,A,p,d),a.display.input.setUneditable(A),v&&O.above?_.insertBefore(A,p.gutter||p.text):_.appendChild(A),Qe(O,"redraw")}}function Us(a,l,p,d){if(a.noHScroll){(p.alignable||(p.alignable=[])).push(l);var v=d.wrapperWidth;l.style.left=d.fixedPos+"px",a.coverGutter||(v-=d.gutterTotalWidth,l.style.paddingLeft=d.gutterTotalWidth+"px"),l.style.width=v+"px"}a.coverGutter&&(l.style.zIndex=5,l.style.position="relative",a.noHScroll||(l.style.marginLeft=-d.gutterTotalWidth+"px"))}function Ho(a){if(a.height!=null)return a.height;var l=a.doc.cm;if(!l)return 0;if(!M(document.body,a.node)){var p="position: relative;";a.coverGutter&&(p+="margin-left: -"+l.display.gutters.offsetWidth+"px;"),a.noHScroll&&(p+="width: "+l.display.wrapper.clientWidth+"px;"),D(l.display.measure,Y("div",[a.node],null,p))}return a.height=a.node.parentNode.offsetHeight}function Nn(a,l){for(var p=Q(l);p!=a.wrapper;p=p.parentNode)if(!p||p.nodeType==1&&p.getAttribute("cm-ignore-events")=="true"||p.parentNode==a.sizer&&p!=a.mover)return!0}function Uo(a){return a.lineSpace.offsetTop}function ai(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Bs(a){if(a.cachedPaddingH)return a.cachedPaddingH;var l=D(a.measure,Y("pre","x","CodeMirror-line-like")),p=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,d={left:parseInt(p.paddingLeft),right:parseInt(p.paddingRight)};return!isNaN(d.left)&&!isNaN(d.right)&&(a.cachedPaddingH=d),d}function un(a){return zt-a.display.nativeBarWidth}function yo(a){return a.display.scroller.clientWidth-un(a)-a.display.barWidth}function P(a){return a.display.scroller.clientHeight-un(a)-a.display.barHeight}function V(a,l,p){var d=a.options.lineWrapping,v=d&&yo(a);if(!l.measure.heights||d&&l.measure.width!=v){var _=l.measure.heights=[];if(d){l.measure.width=v;for(var b=l.text.firstChild.getClientRects(),S=0;S<b.length-1;S++){var O=b[S],A=b[S+1];Math.abs(O.bottom-A.bottom)>2&&_.push((O.bottom+A.top)/2-p.top)}}_.push(p.bottom-p.top)}}function J(a,l,p){if(a.line==l)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==l)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var v=0;v<a.rest.length;v++)if(Ee(a.rest[v])>p)return{map:a.measure.maps[v],cache:a.measure.caches[v],before:!0}}function tt(a,l){l=qe(l);var p=Ee(l),d=a.display.externalMeasured=new Ma(a.doc,l,p);d.lineN=p;var v=d.built=Di(a,d);return d.text=v.pre,D(a.display.lineMeasure,v.pre),d}function dt(a,l,p,d){return Bt(a,Tt(a,l),p,d)}function ut(a,l){if(l>=a.display.viewFrom&&l<a.display.viewTo)return a.display.view[ui(a,l)];var p=a.display.externalMeasured;if(p&&l>=p.lineN&&l<p.lineN+p.size)return p}function Tt(a,l){var p=Ee(l),d=ut(a,p);d&&!d.text?d=null:d&&d.changes&&(oo(a,d,p,$u(a)),a.curOp.forceUpdate=!0),d||(d=tt(a,l));var v=J(d,l,p);return{line:l,view:d,rect:null,map:v.map,cache:v.cache,before:v.before,hasHeights:!1}}function Bt(a,l,p,d,v){l.before&&(p=-1);var _=p+(d||""),b;return l.cache.hasOwnProperty(_)?b=l.cache[_]:(l.rect||(l.rect=l.view.text.getBoundingClientRect()),l.hasHeights||(V(a,l.view,l.rect),l.hasHeights=!0),b=Dr(a,l,p,d),b.bogus||(l.cache[_]=b)),{left:b.left,right:b.right,top:v?b.rtop:b.top,bottom:v?b.rbottom:b.bottom}}var be={left:0,right:0,top:0,bottom:0};function we(a,l,p){for(var d,v,_,b,S,O,A=0;A<a.length;A+=3)if(S=a[A],O=a[A+1],l<S?(v=0,_=1,b="left"):l<O?(v=l-S,_=v+1):(A==a.length-3||l==O&&a[A+3]>l)&&(_=O-S,v=_-1,l>=O&&(b="right")),v!=null){if(d=a[A+2],S==O&&p==(d.insertLeft?"left":"right")&&(b=p),p=="left"&&v==0)for(;A&&a[A-2]==a[A-3]&&a[A-1].insertLeft;)d=a[(A-=3)+2],b="left";if(p=="right"&&v==O-S)for(;A<a.length-3&&a[A+3]==a[A+4]&&!a[A+5].insertLeft;)d=a[(A+=3)+2],b="right";break}return{node:d,start:v,end:_,collapse:b,coverStart:S,coverEnd:O}}function gr(a,l){var p=be;if(l=="left")for(var d=0;d<a.length&&(p=a[d]).left==p.right;d++);else for(var v=a.length-1;v>=0&&(p=a[v]).left==p.right;v--);return p}function Dr(a,l,p,d){var v=we(l.map,p,d),_=v.node,b=v.start,S=v.end,O=v.collapse,A;if(_.nodeType==3){for(var $=0;$<4;$++){for(;b&&ht(l.line.text.charAt(v.coverStart+b));)--b;for(;v.coverStart+S<v.coverEnd&&ht(l.line.text.charAt(v.coverStart+S));)++S;if(u&&f<9&&b==0&&S==v.coverEnd-v.coverStart?A=_.parentNode.getBoundingClientRect():A=gr(ct(_,b,S).getClientRects(),d),A.left||A.right||b==0)break;S=b,b=b-1,O="right"}u&&f<11&&(A=Ws(a.display.measure,A))}else{b>0&&(O=d="right");var Z;a.options.lineWrapping&&(Z=_.getClientRects()).length>1?A=Z[d=="right"?Z.length-1:0]:A=_.getBoundingClientRect()}if(u&&f<9&&!b&&(!A||!A.left&&!A.right)){var ft=_.parentNode.getClientRects()[0];ft?A={left:ft.left,right:ft.left+Vi(a.display),top:ft.top,bottom:ft.bottom}:A=be}for(var at=A.top-l.rect.top,St=A.bottom-l.rect.top,kt=(at+St)/2,Nt=l.view.measure.heights,$t=0;$t<Nt.length-1&&!(kt<Nt[$t]);$t++);var te=$t?Nt[$t-1]:0,qt=Nt[$t],ne={left:(O=="right"?A.right:A.left)-l.rect.left,right:(O=="left"?A.left:A.right)-l.rect.left,top:te,bottom:qt};return!A.left&&!A.right&&(ne.bogus=!0),a.options.singleCursorHeightPerLine||(ne.rtop=at,ne.rbottom=St),ne}function Ws(a,l){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!jr(a))return l;var p=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:l.left*p,right:l.right*p,top:l.top*d,bottom:l.bottom*d}}function Ra(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var l=0;l<a.rest.length;l++)a.measure.caches[l]={}}function fd(a){a.display.externalMeasure=null,U(a.display.lineMeasure);for(var l=0;l<a.display.view.length;l++)Ra(a.display.view[l])}function Va(a){fd(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function dd(){return g&&E?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pd(){return g&&E?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wu(a){var l=0;if(a.widgets)for(var p=0;p<a.widgets.length;++p)a.widgets[p].above&&(l+=Ho(a.widgets[p]));return l}function zs(a,l,p,d,v){if(!v){var _=Wu(l);p.top+=_,p.bottom+=_}if(d=="line")return p;d||(d="local");var b=Fn(l);if(d=="local"?b+=Uo(a.display):b-=a.display.viewOffset,d=="page"||d=="window"){var S=a.display.lineSpace.getBoundingClientRect();b+=S.top+(d=="window"?0:pd());var O=S.left+(d=="window"?0:dd());p.left+=O,p.right+=O}return p.top+=b,p.bottom+=b,p}function hd(a,l,p){if(p=="div")return l;var d=l.left,v=l.top;if(p=="page")d-=dd(),v-=pd();else if(p=="local"||!p){var _=a.display.sizer.getBoundingClientRect();d+=_.left,v+=_.top}var b=a.display.lineSpace.getBoundingClientRect();return{left:d-b.left,top:v-b.top}}function Ks(a,l,p,d,v){return d||(d=re(a.doc,l.line)),zs(a,d,dt(a,d,l.ch,v),p)}function Yn(a,l,p,d,v,_){d=d||re(a.doc,l.line),v||(v=Tt(a,d));function b(St,kt){var Nt=Bt(a,v,St,kt?"right":"left",_);return kt?Nt.left=Nt.right:Nt.right=Nt.left,zs(a,d,Nt,p)}var S=R(d,a.doc.direction),O=l.ch,A=l.sticky;if(O>=d.text.length?(O=d.text.length,A="before"):O<=0&&(O=0,A="after"),!S)return b(A=="before"?O-1:O,A=="before");function $(St,kt,Nt){var $t=S[kt],te=$t.level==1;return b(Nt?St-1:St,te!=Nt)}var Z=B(S,O,A),ft=me,at=$(O,Z,A=="before");return ft!=null&&(at.other=$(O,ft,A!="before")),at}function vd(a,l){var p=0;l=Ft(a.doc,l),a.options.lineWrapping||(p=Vi(a.display)*l.ch);var d=re(a.doc,l.line),v=Fn(d)+Uo(a.display);return{left:p,right:p,top:v,bottom:v+d.height}}function zu(a,l,p,d,v){var _=Mt(a,l,p);return _.xRel=v,d&&(_.outside=d),_}function Ku(a,l,p){var d=a.doc;if(p+=a.display.viewOffset,p<0)return zu(d.first,0,null,-1,-1);var v=Ne(d,p),_=d.first+d.size-1;if(v>_)return zu(d.first+d.size-1,re(d,_).text.length,null,1,1);l<0&&(l=0);for(var b=re(d,v);;){var S=Xg(a,b,v,l,p),O=Me(b,S.ch+(S.xRel>0||S.outside>0?1:0));if(!O)return S;var A=O.find(1);if(A.line==v)return A;b=re(d,v=A.line)}}function gd(a,l,p,d){d-=Wu(l);var v=l.text.length,_=ie(function(b){return Bt(a,p,b-1).bottom<=d},v,0);return v=ie(function(b){return Bt(a,p,b).top>d},_,v),{begin:_,end:v}}function md(a,l,p,d){p||(p=Tt(a,l));var v=zs(a,l,Bt(a,p,d),"line").top;return gd(a,l,p,v)}function Gu(a,l,p,d){return a.bottom<=p?!1:a.top>p?!0:(d?a.left:a.right)>l}function Xg(a,l,p,d,v){v-=Fn(l);var _=Tt(a,l),b=Wu(l),S=0,O=l.text.length,A=!0,$=R(l,a.doc.direction);if($){var Z=(a.options.lineWrapping?Zg:Jg)(a,l,p,_,$,d,v);A=Z.level!=1,S=A?Z.from:Z.to-1,O=A?Z.to:Z.from-1}var ft=null,at=null,St=ie(function(he){var de=Bt(a,_,he);return de.top+=b,de.bottom+=b,Gu(de,d,v,!1)?(de.top<=v&&de.left<=d&&(ft=he,at=de),!0):!1},S,O),kt,Nt,$t=!1;if(at){var te=d-at.left<at.right-d,qt=te==A;St=ft+(qt?0:1),Nt=qt?"after":"before",kt=te?at.left:at.right}else{!A&&(St==O||St==S)&&St++,Nt=St==0?"after":St==l.text.length?"before":Bt(a,_,St-(A?1:0)).bottom+b<=v==A?"after":"before";var ne=Yn(a,Mt(p,St,Nt),"line",l,_);kt=ne.left,$t=v<ne.top?-1:v>=ne.bottom?1:0}return St=st(l.text,St,1),zu(p,St,Nt,$t,d-kt)}function Jg(a,l,p,d,v,_,b){var S=ie(function(Z){var ft=v[Z],at=ft.level!=1;return Gu(Yn(a,Mt(p,at?ft.to:ft.from,at?"before":"after"),"line",l,d),_,b,!0)},0,v.length-1),O=v[S];if(S>0){var A=O.level!=1,$=Yn(a,Mt(p,A?O.from:O.to,A?"after":"before"),"line",l,d);Gu($,_,b,!0)&&$.top>b&&(O=v[S-1])}return O}function Zg(a,l,p,d,v,_,b){var S=gd(a,l,d,b),O=S.begin,A=S.end;/\s/.test(l.text.charAt(A-1))&&A--;for(var $=null,Z=null,ft=0;ft<v.length;ft++){var at=v[ft];if(!(at.from>=A||at.to<=O)){var St=at.level!=1,kt=Bt(a,d,St?Math.min(A,at.to)-1:Math.max(O,at.from)).right,Nt=kt<_?_-kt+1e9:kt-_;(!$||Z>Nt)&&($=at,Z=Nt)}}return $||($=v[v.length-1]),$.from<O&&($={from:O,to:$.to,level:$.level}),$.to>A&&($={from:$.from,to:A,level:$.level}),$}var si;function Ri(a){if(a.cachedTextHeight!=null)return a.cachedTextHeight;if(si==null){si=Y("pre",null,"CodeMirror-line-like");for(var l=0;l<49;++l)si.appendChild(document.createTextNode("x")),si.appendChild(Y("br"));si.appendChild(document.createTextNode("x"))}D(a.measure,si);var p=si.offsetHeight/50;return p>3&&(a.cachedTextHeight=p),U(a.measure),p||1}function Vi(a){if(a.cachedCharWidth!=null)return a.cachedCharWidth;var l=Y("span","xxxxxxxxxx"),p=Y("pre",[l],"CodeMirror-line-like");D(a.measure,p);var d=l.getBoundingClientRect(),v=(d.right-d.left)/10;return v>2&&(a.cachedCharWidth=v),v||10}function $u(a){for(var l=a.display,p={},d={},v=l.gutters.clientLeft,_=l.gutters.firstChild,b=0;_;_=_.nextSibling,++b){var S=a.display.gutterSpecs[b].className;p[S]=_.offsetLeft+_.clientLeft+v,d[S]=_.clientWidth}return{fixedPos:qu(l),gutterTotalWidth:l.gutters.offsetWidth,gutterLeft:p,gutterWidth:d,wrapperWidth:l.wrapper.clientWidth}}function qu(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function yd(a){var l=Ri(a.display),p=a.options.lineWrapping,d=p&&Math.max(5,a.display.scroller.clientWidth/Vi(a.display)-3);return function(v){if(zr(a.doc,v))return 0;var _=0;if(v.widgets)for(var b=0;b<v.widgets.length;b++)v.widgets[b].height&&(_+=v.widgets[b].height);return p?_+(Math.ceil(v.text.length/d)||1)*l:_+l}}function Yu(a){var l=a.doc,p=yd(a);l.iter(function(d){var v=p(d);v!=d.height&&_r(d,v)})}function li(a,l,p,d){var v=a.display;if(!p&&Q(l).getAttribute("cm-not-content")=="true")return null;var _,b,S=v.lineSpace.getBoundingClientRect();try{_=l.clientX-S.left,b=l.clientY-S.top}catch{return null}var O=Ku(a,_,b),A;if(d&&O.xRel>0&&(A=re(a.doc,O.line).text).length==O.ch){var $=Ct(A,A.length,a.options.tabSize)-A.length;O=Mt(O.line,Math.max(0,Math.round((_-Bs(a.display).left)/Vi(a.display))-$))}return O}function ui(a,l){if(l>=a.display.viewTo||(l-=a.display.viewFrom,l<0))return null;for(var p=a.display.view,d=0;d<p.length;d++)if(l-=p[d].size,l<0)return d}function Kr(a,l,p,d){l==null&&(l=a.doc.first),p==null&&(p=a.doc.first+a.doc.size),d||(d=0);var v=a.display;if(d&&p<v.viewTo&&(v.updateLineNumbers==null||v.updateLineNumbers>l)&&(v.updateLineNumbers=l),a.curOp.viewChanged=!0,l>=v.viewTo)hr&&Vn(a.doc,l)<v.viewTo&&Wo(a);else if(p<=v.viewFrom)hr&&Wr(a.doc,p+d)>v.viewFrom?Wo(a):(v.viewFrom+=d,v.viewTo+=d);else if(l<=v.viewFrom&&p>=v.viewTo)Wo(a);else if(l<=v.viewFrom){var _=Gs(a,p,p+d,1);_?(v.view=v.view.slice(_.index),v.viewFrom=_.lineN,v.viewTo+=d):Wo(a)}else if(p>=v.viewTo){var b=Gs(a,l,l,-1);b?(v.view=v.view.slice(0,b.index),v.viewTo=b.lineN):Wo(a)}else{var S=Gs(a,l,l,-1),O=Gs(a,p,p+d,1);S&&O?(v.view=v.view.slice(0,S.index).concat(Ii(a,S.lineN,O.lineN)).concat(v.view.slice(O.index)),v.viewTo+=d):Wo(a)}var A=v.externalMeasured;A&&(p<A.lineN?A.lineN+=d:l<A.lineN+A.size&&(v.externalMeasured=null))}function Bo(a,l,p){a.curOp.viewChanged=!0;var d=a.display,v=a.display.externalMeasured;if(v&&l>=v.lineN&&l<v.lineN+v.size&&(d.externalMeasured=null),!(l<d.viewFrom||l>=d.viewTo)){var _=d.view[ui(a,l)];if(_.node!=null){var b=_.changes||(_.changes=[]);Lt(b,p)==-1&&b.push(p)}}}function Wo(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function Gs(a,l,p,d){var v=ui(a,l),_,b=a.display.view;if(!hr||p==a.doc.first+a.doc.size)return{index:v,lineN:p};for(var S=a.display.viewFrom,O=0;O<v;O++)S+=b[O].size;if(S!=l){if(d>0){if(v==b.length-1)return null;_=S+b[v].size-l,v++}else _=S-l;l+=_,p+=_}for(;Vn(a.doc,p)!=p;){if(v==(d<0?0:b.length-1))return null;p+=d*b[v-(d<0?1:0)].size,v+=d}return{index:v,lineN:p}}function Qg(a,l,p){var d=a.display,v=d.view;v.length==0||l>=d.viewTo||p<=d.viewFrom?(d.view=Ii(a,l,p),d.viewFrom=l):(d.viewFrom>l?d.view=Ii(a,l,d.viewFrom).concat(d.view):d.viewFrom<l&&(d.view=d.view.slice(ui(a,l))),d.viewFrom=l,d.viewTo<p?d.view=d.view.concat(Ii(a,d.viewTo,p)):d.viewTo>p&&(d.view=d.view.slice(0,ui(a,p)))),d.viewTo=p}function _d(a){for(var l=a.display.view,p=0,d=0;d<l.length;d++){var v=l[d];!v.hidden&&(!v.node||v.changes)&&++p}return p}function Fa(a){a.display.input.showSelection(a.display.input.prepareSelection())}function wd(a,l){l===void 0&&(l=!0);for(var p=a.doc,d={},v=d.cursors=document.createDocumentFragment(),_=d.selection=document.createDocumentFragment(),b=0;b<p.sel.ranges.length;b++)if(!(!l&&b==p.sel.primIndex)){var S=p.sel.ranges[b];if(!(S.from().line>=a.display.viewTo||S.to().line<a.display.viewFrom)){var O=S.empty();(O||a.options.showCursorWhenSelecting)&&bd(a,S.head,v),O||tm(a,S,_)}}return d}function bd(a,l,p){var d=Yn(a,l,"div",null,null,!a.options.singleCursorHeightPerLine),v=p.appendChild(Y("div"," ","CodeMirror-cursor"));if(v.style.left=d.left+"px",v.style.top=d.top+"px",v.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(a.getWrapperElement().className)){var _=Ks(a,l,"div",null,null);_.right-_.left>0&&(v.style.width=_.right-_.left+"px")}if(d.other){var b=p.appendChild(Y("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));b.style.display="",b.style.left=d.other.left+"px",b.style.top=d.other.top+"px",b.style.height=(d.other.bottom-d.other.top)*.85+"px"}}function $s(a,l){return a.top-l.top||a.left-l.left}function tm(a,l,p){var d=a.display,v=a.doc,_=document.createDocumentFragment(),b=Bs(a.display),S=b.left,O=Math.max(d.sizerWidth,yo(a)-d.sizer.offsetLeft)-b.right,A=v.direction=="ltr";function $(qt,ne,he,de){ne<0&&(ne=0),ne=Math.round(ne),de=Math.round(de),_.appendChild(Y("div",null,"CodeMirror-selected","position: absolute; left: "+qt+`px;
                             top: `+ne+"px; width: "+(he??O-qt)+`px;
                             height: `+(de-ne)+"px"))}function Z(qt,ne,he){var de=re(v,qt),Oe=de.text.length,Ue,Sr;function Ze(cr,qr){return Ks(a,Mt(qt,cr),"div",de,qr)}function fn(cr,qr,Pr){var mr=md(a,de,null,cr),fr=qr=="ltr"==(Pr=="after")?"left":"right",tr=Pr=="after"?mr.begin:mr.end-(/\s/.test(de.text.charAt(mr.end-1))?2:1);return Ze(tr,fr)[fr]}var $r=R(de,v.direction);return _e($r,ne||0,he??Oe,function(cr,qr,Pr,mr){var fr=Pr=="ltr",tr=Ze(cr,fr?"left":"right"),Yr=Ze(qr-1,fr?"right":"left"),Xi=ne==null&&cr==0,Yo=he==null&&qr==Oe,Ir=mr==0,io=!$r||mr==$r.length-1;if(Yr.top-tr.top<=3){var xr=(A?Xi:Yo)&&Ir,bc=(A?Yo:Xi)&&io,wo=xr?S:(fr?tr:Yr).left,hi=bc?O:(fr?Yr:tr).right;$(wo,tr.top,hi-wo,tr.bottom)}else{var vi,Hr,Ji,Cc;fr?(vi=A&&Xi&&Ir?S:tr.left,Hr=A?O:fn(cr,Pr,"before"),Ji=A?S:fn(qr,Pr,"after"),Cc=A&&Yo&&io?O:Yr.right):(vi=A?fn(cr,Pr,"before"):S,Hr=!A&&Xi&&Ir?O:tr.right,Ji=!A&&Yo&&io?S:Yr.left,Cc=A?fn(qr,Pr,"after"):O),$(vi,tr.top,Hr-vi,tr.bottom),tr.bottom<Yr.top&&$(S,tr.bottom,null,Yr.top),$(Ji,Yr.top,Cc-Ji,Yr.bottom)}(!Ue||$s(tr,Ue)<0)&&(Ue=tr),$s(Yr,Ue)<0&&(Ue=Yr),(!Sr||$s(tr,Sr)<0)&&(Sr=tr),$s(Yr,Sr)<0&&(Sr=Yr)}),{start:Ue,end:Sr}}var ft=l.from(),at=l.to();if(ft.line==at.line)Z(ft.line,ft.ch,at.ch);else{var St=re(v,ft.line),kt=re(v,at.line),Nt=qe(St)==qe(kt),$t=Z(ft.line,ft.ch,Nt?St.text.length+1:null).end,te=Z(at.line,Nt?0:null,at.ch).start;Nt&&($t.top<te.top-2?($($t.right,$t.top,null,$t.bottom),$(S,te.top,te.left,te.bottom)):$($t.right,$t.top,te.left-$t.right,$t.bottom)),$t.bottom<te.top&&$(S,$t.bottom,null,te.top)}p.appendChild(_)}function Xu(a){if(a.state.focused){var l=a.display;clearInterval(l.blinker);var p=!0;l.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?l.blinker=setInterval(function(){a.hasFocus()||Fi(a),l.cursorDiv.style.visibility=(p=!p)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(l.cursorDiv.style.visibility="hidden")}}function Cd(a){a.hasFocus()||(a.display.input.focus(),a.state.focused||Zu(a))}function Ju(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,a.state.focused&&Fi(a))},100)}function Zu(a,l){a.state.delayingBlurEvent&&!a.state.draggingText&&(a.state.delayingBlurEvent=!1),a.options.readOnly!="nocursor"&&(a.state.focused||(Zt(a,"focus",a,l),a.state.focused=!0,gt(a.display.wrapper,"CodeMirror-focused"),!a.curOp&&a.display.selForContextMenu!=a.doc.sel&&(a.display.input.reset(),c&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Xu(a))}function Fi(a,l){a.state.delayingBlurEvent||(a.state.focused&&(Zt(a,"blur",a,l),a.state.focused=!1,W(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function qs(a){for(var l=a.display,p=l.lineDiv.offsetTop,d=Math.max(0,l.scroller.getBoundingClientRect().top),v=l.lineDiv.getBoundingClientRect().top,_=0,b=0;b<l.view.length;b++){var S=l.view[b],O=a.options.lineWrapping,A=void 0,$=0;if(!S.hidden){if(v+=S.line.height,u&&f<8){var Z=S.node.offsetTop+S.node.offsetHeight;A=Z-p,p=Z}else{var ft=S.node.getBoundingClientRect();A=ft.bottom-ft.top,!O&&S.text.firstChild&&($=S.text.firstChild.getBoundingClientRect().right-ft.left-1)}var at=S.line.height-A;if((at>.005||at<-.005)&&(v<d&&(_-=at),_r(S.line,A),Sd(S.line),S.rest))for(var St=0;St<S.rest.length;St++)Sd(S.rest[St]);if($>a.display.sizerWidth){var kt=Math.ceil($/Vi(a.display));kt>a.display.maxLineLength&&(a.display.maxLineLength=kt,a.display.maxLine=S.line,a.display.maxLineChanged=!0)}}}Math.abs(_)>2&&(l.scroller.scrollTop+=_)}function Sd(a){if(a.widgets)for(var l=0;l<a.widgets.length;++l){var p=a.widgets[l],d=p.node.parentNode;d&&(p.height=d.offsetHeight)}}function Ys(a,l,p){var d=p&&p.top!=null?Math.max(0,p.top):a.scroller.scrollTop;d=Math.floor(d-Uo(a));var v=p&&p.bottom!=null?p.bottom:d+a.wrapper.clientHeight,_=Ne(l,d),b=Ne(l,v);if(p&&p.ensure){var S=p.ensure.from.line,O=p.ensure.to.line;S<_?(_=S,b=Ne(l,Fn(re(l,S))+a.wrapper.clientHeight)):Math.min(O,l.lastLine())>=b&&(_=Ne(l,Fn(re(l,O))-a.wrapper.clientHeight),b=O)}return{from:_,to:Math.max(b,_+1)}}function em(a,l){if(!Gt(a,"scrollCursorIntoView")){var p=a.display,d=p.sizer.getBoundingClientRect(),v=null;if(l.top+d.top<0?v=!0:l.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(v=!1),v!=null&&!C){var _=Y("div","​",null,`position: absolute;
                         top: `+(l.top-p.viewOffset-Uo(a.display))+`px;
                         height: `+(l.bottom-l.top+un(a)+p.barHeight)+`px;
                         left: `+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;");a.display.lineSpace.appendChild(_),_.scrollIntoView(v),a.display.lineSpace.removeChild(_)}}}function rm(a,l,p,d){d==null&&(d=0);var v;!a.options.lineWrapping&&l==p&&(p=l.sticky=="before"?Mt(l.line,l.ch+1,"before"):l,l=l.ch?Mt(l.line,l.sticky=="before"?l.ch-1:l.ch,"after"):l);for(var _=0;_<5;_++){var b=!1,S=Yn(a,l),O=!p||p==l?S:Yn(a,p);v={left:Math.min(S.left,O.left),top:Math.min(S.top,O.top)-d,right:Math.max(S.left,O.left),bottom:Math.max(S.bottom,O.bottom)+d};var A=Qu(a,v),$=a.doc.scrollTop,Z=a.doc.scrollLeft;if(A.scrollTop!=null&&(Ha(a,A.scrollTop),Math.abs(a.doc.scrollTop-$)>1&&(b=!0)),A.scrollLeft!=null&&(ci(a,A.scrollLeft),Math.abs(a.doc.scrollLeft-Z)>1&&(b=!0)),!b)break}return v}function nm(a,l){var p=Qu(a,l);p.scrollTop!=null&&Ha(a,p.scrollTop),p.scrollLeft!=null&&ci(a,p.scrollLeft)}function Qu(a,l){var p=a.display,d=Ri(a.display);l.top<0&&(l.top=0);var v=a.curOp&&a.curOp.scrollTop!=null?a.curOp.scrollTop:p.scroller.scrollTop,_=P(a),b={};l.bottom-l.top>_&&(l.bottom=l.top+_);var S=a.doc.height+ai(p),O=l.top<d,A=l.bottom>S-d;if(l.top<v)b.scrollTop=O?0:l.top;else if(l.bottom>v+_){var $=Math.min(l.top,(A?S:l.bottom)-_);$!=v&&(b.scrollTop=$)}var Z=a.options.fixedGutter?0:p.gutters.offsetWidth,ft=a.curOp&&a.curOp.scrollLeft!=null?a.curOp.scrollLeft:p.scroller.scrollLeft-Z,at=yo(a)-p.gutters.offsetWidth,St=l.right-l.left>at;return St&&(l.right=l.left+at),l.left<10?b.scrollLeft=0:l.left<ft?b.scrollLeft=Math.max(0,l.left+Z-(St?0:10)):l.right>at+ft-3&&(b.scrollLeft=l.right+(St?0:10)-at),b}function tc(a,l){l!=null&&(Xs(a),a.curOp.scrollTop=(a.curOp.scrollTop==null?a.doc.scrollTop:a.curOp.scrollTop)+l)}function Ni(a){Xs(a);var l=a.getCursor();a.curOp.scrollToPos={from:l,to:l,margin:a.options.cursorScrollMargin}}function Na(a,l,p){(l!=null||p!=null)&&Xs(a),l!=null&&(a.curOp.scrollLeft=l),p!=null&&(a.curOp.scrollTop=p)}function om(a,l){Xs(a),a.curOp.scrollToPos=l}function Xs(a){var l=a.curOp.scrollToPos;if(l){a.curOp.scrollToPos=null;var p=vd(a,l.from),d=vd(a,l.to);xd(a,p,d,l.margin)}}function xd(a,l,p,d){var v=Qu(a,{left:Math.min(l.left,p.left),top:Math.min(l.top,p.top)-d,right:Math.max(l.right,p.right),bottom:Math.max(l.bottom,p.bottom)+d});Na(a,v.scrollLeft,v.scrollTop)}function Ha(a,l){Math.abs(a.doc.scrollTop-l)<2||(e||rc(a,{top:l}),Od(a,l,!0),e&&rc(a),Wa(a,100))}function Od(a,l,p){l=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,l)),!(a.display.scroller.scrollTop==l&&!p)&&(a.doc.scrollTop=l,a.display.scrollbars.setScrollTop(l),a.display.scroller.scrollTop!=l&&(a.display.scroller.scrollTop=l))}function ci(a,l,p,d){l=Math.max(0,Math.min(l,a.display.scroller.scrollWidth-a.display.scroller.clientWidth)),!((p?l==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-l)<2)&&!d)&&(a.doc.scrollLeft=l,kd(a),a.display.scroller.scrollLeft!=l&&(a.display.scroller.scrollLeft=l),a.display.scrollbars.setScrollLeft(l))}function Ua(a){var l=a.display,p=l.gutters.offsetWidth,d=Math.round(a.doc.height+ai(a.display));return{clientHeight:l.scroller.clientHeight,viewHeight:l.wrapper.clientHeight,scrollWidth:l.scroller.scrollWidth,clientWidth:l.scroller.clientWidth,viewWidth:l.wrapper.clientWidth,barLeft:a.options.fixedGutter?p:0,docHeight:d,scrollHeight:d+un(a)+l.barHeight,nativeBarWidth:l.nativeBarWidth,gutterWidth:p}}var fi=function(a,l,p){this.cm=p;var d=this.vert=Y("div",[Y("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),v=this.horiz=Y("div",[Y("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=v.tabIndex=-1,a(d),a(v),pt(d,"scroll",function(){d.clientHeight&&l(d.scrollTop,"vertical")}),pt(v,"scroll",function(){v.clientWidth&&l(v.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};fi.prototype.update=function(a){var l=a.scrollWidth>a.clientWidth+1,p=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(p){this.vert.style.display="block",this.vert.style.bottom=l?d+"px":"0";var v=a.viewHeight-(l?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+v)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(l){this.horiz.style.display="block",this.horiz.style.right=p?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var _=a.viewWidth-a.barLeft-(p?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+_)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(d==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:p?d:0,bottom:l?d:0}},fi.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},fi.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},fi.prototype.zeroWidthHack=function(){var a=L&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new bt,this.disableVert=new bt},fi.prototype.enableZeroWidthBar=function(a,l,p){a.style.pointerEvents="auto";function d(){var v=a.getBoundingClientRect(),_=p=="vert"?document.elementFromPoint(v.right-1,(v.top+v.bottom)/2):document.elementFromPoint((v.right+v.left)/2,v.bottom-1);_!=a?a.style.pointerEvents="none":l.set(1e3,d)}l.set(1e3,d)},fi.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var Ba=function(){};Ba.prototype.update=function(){return{bottom:0,right:0}},Ba.prototype.setScrollLeft=function(){},Ba.prototype.setScrollTop=function(){},Ba.prototype.clear=function(){};function Hi(a,l){l||(l=Ua(a));var p=a.display.barWidth,d=a.display.barHeight;Td(a,l);for(var v=0;v<4&&p!=a.display.barWidth||d!=a.display.barHeight;v++)p!=a.display.barWidth&&a.options.lineWrapping&&qs(a),Td(a,Ua(a)),p=a.display.barWidth,d=a.display.barHeight}function Td(a,l){var p=a.display,d=p.scrollbars.update(l);p.sizer.style.paddingRight=(p.barWidth=d.right)+"px",p.sizer.style.paddingBottom=(p.barHeight=d.bottom)+"px",p.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(p.scrollbarFiller.style.display="block",p.scrollbarFiller.style.height=d.bottom+"px",p.scrollbarFiller.style.width=d.right+"px"):p.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(p.gutterFiller.style.display="block",p.gutterFiller.style.height=d.bottom+"px",p.gutterFiller.style.width=l.gutterWidth+"px"):p.gutterFiller.style.display=""}var Pd={native:fi,null:Ba};function Ed(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&W(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new Pd[a.options.scrollbarStyle](function(l){a.display.wrapper.insertBefore(l,a.display.scrollbarFiller),pt(l,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),l.setAttribute("cm-not-content","true")},function(l,p){p=="horizontal"?ci(a,l):Ha(a,l)},a),a.display.scrollbars.addClass&&gt(a.display.wrapper,a.display.scrollbars.addClass)}var im=0;function di(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++im,markArrays:null},Vs(a.curOp)}function pi(a){var l=a.curOp;l&&Da(l,function(p){for(var d=0;d<p.ops.length;d++)p.ops[d].cm.curOp=null;am(p)})}function am(a){for(var l=a.ops,p=0;p<l.length;p++)sm(l[p]);for(var d=0;d<l.length;d++)lm(l[d]);for(var v=0;v<l.length;v++)um(l[v]);for(var _=0;_<l.length;_++)cm(l[_]);for(var b=0;b<l.length;b++)fm(l[b])}function sm(a){var l=a.cm,p=l.display;pm(l),a.updateMaxLine&&Io(l),a.mustUpdate=a.viewChanged||a.forceUpdate||a.scrollTop!=null||a.scrollToPos&&(a.scrollToPos.from.line<p.viewFrom||a.scrollToPos.to.line>=p.viewTo)||p.maxLineChanged&&l.options.lineWrapping,a.update=a.mustUpdate&&new Js(l,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function lm(a){a.updatedDisplay=a.mustUpdate&&ec(a.cm,a.update)}function um(a){var l=a.cm,p=l.display;a.updatedDisplay&&qs(l),a.barMeasure=Ua(l),p.maxLineChanged&&!l.options.lineWrapping&&(a.adjustWidthTo=dt(l,p.maxLine,p.maxLine.text.length).left+3,l.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(p.scroller.clientWidth,p.sizer.offsetLeft+a.adjustWidthTo+un(l)+l.display.barWidth),a.maxScrollLeft=Math.max(0,p.sizer.offsetLeft+a.adjustWidthTo-yo(l))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=p.input.prepareSelection())}function cm(a){var l=a.cm;a.adjustWidthTo!=null&&(l.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<l.doc.scrollLeft&&ci(l,Math.min(l.display.scroller.scrollLeft,a.maxScrollLeft),!0),l.display.maxLineChanged=!1);var p=a.focus&&a.focus==wt();a.preparedSelection&&l.display.input.showSelection(a.preparedSelection,p),(a.updatedDisplay||a.startHeight!=l.doc.height)&&Hi(l,a.barMeasure),a.updatedDisplay&&oc(l,a.barMeasure),a.selectionChanged&&Xu(l),l.state.focused&&a.updateInput&&l.display.input.reset(a.typing),p&&Cd(a.cm)}function fm(a){var l=a.cm,p=l.display,d=l.doc;if(a.updatedDisplay&&Ad(l,a.update),p.wheelStartX!=null&&(a.scrollTop!=null||a.scrollLeft!=null||a.scrollToPos)&&(p.wheelStartX=p.wheelStartY=null),a.scrollTop!=null&&Od(l,a.scrollTop,a.forceScroll),a.scrollLeft!=null&&ci(l,a.scrollLeft,!0,!0),a.scrollToPos){var v=rm(l,Ft(d,a.scrollToPos.from),Ft(d,a.scrollToPos.to),a.scrollToPos.margin);em(l,v)}var _=a.maybeHiddenMarkers,b=a.maybeUnhiddenMarkers;if(_)for(var S=0;S<_.length;++S)_[S].lines.length||Zt(_[S],"hide");if(b)for(var O=0;O<b.length;++O)b[O].lines.length&&Zt(b[O],"unhide");p.wrapper.offsetHeight&&(d.scrollTop=l.display.scroller.scrollTop),a.changeObjs&&Zt(l,"changes",l,a.changeObjs),a.update&&a.update.finish()}function cn(a,l){if(a.curOp)return l();di(a);try{return l()}finally{pi(a)}}function br(a,l){return function(){if(a.curOp)return l.apply(a,arguments);di(a);try{return l.apply(a,arguments)}finally{pi(a)}}}function Nr(a){return function(){if(this.curOp)return a.apply(this,arguments);di(this);try{return a.apply(this,arguments)}finally{pi(this)}}}function Cr(a){return function(){var l=this.cm;if(!l||l.curOp)return a.apply(this,arguments);di(l);try{return a.apply(this,arguments)}finally{pi(l)}}}function Wa(a,l){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(l,oe(dm,a))}function dm(a){var l=a.doc;if(!(l.highlightFrontier>=a.display.viewTo)){var p=+new Date+a.options.workTime,d=lo(a,l.highlightFrontier),v=[];l.iter(d.line,Math.min(l.first+l.size,a.display.viewTo+500),function(_){if(d.line>=a.display.viewFrom){var b=_.styles,S=_.text.length>a.options.maxHighlightLength?ar(l.mode,d.state):null,O=sn(a,_,d,!0);S&&(d.state=S),_.styles=O.styles;var A=_.styleClasses,$=O.classes;$?_.styleClasses=$:A&&(_.styleClasses=null);for(var Z=!b||b.length!=_.styles.length||A!=$&&(!A||!$||A.bgClass!=$.bgClass||A.textClass!=$.textClass),ft=0;!Z&&ft<b.length;++ft)Z=b[ft]!=_.styles[ft];Z&&v.push(d.line),_.stateAfter=d.save(),d.nextLine()}else _.text.length<=a.options.maxHighlightLength&&uo(a,_.text,d),_.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>p)return Wa(a,a.options.workDelay),!0}),l.highlightFrontier=d.line,l.modeFrontier=Math.max(l.modeFrontier,d.line),v.length&&cn(a,function(){for(var _=0;_<v.length;_++)Bo(a,v[_],"text")})}}var Js=function(a,l,p){var d=a.display;this.viewport=l,this.visible=Ys(d,a.doc,l),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=yo(a),this.force=p,this.dims=$u(a),this.events=[]};Js.prototype.signal=function(a,l){Se(a,l)&&this.events.push(arguments)},Js.prototype.finish=function(){for(var a=0;a<this.events.length;a++)Zt.apply(null,this.events[a])};function pm(a){var l=a.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=un(a)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=un(a)+"px",l.scrollbarsClipped=!0)}function hm(a){if(a.hasFocus())return null;var l=wt();if(!l||!M(a.display.lineDiv,l))return null;var p={activeElt:l};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&M(a.display.lineDiv,d.anchorNode)&&(p.anchorNode=d.anchorNode,p.anchorOffset=d.anchorOffset,p.focusNode=d.focusNode,p.focusOffset=d.focusOffset)}return p}function vm(a){if(!(!a||!a.activeElt||a.activeElt==wt())&&(a.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(a.activeElt.nodeName)&&a.anchorNode&&M(document.body,a.anchorNode)&&M(document.body,a.focusNode))){var l=window.getSelection(),p=document.createRange();p.setEnd(a.anchorNode,a.anchorOffset),p.collapse(!1),l.removeAllRanges(),l.addRange(p),l.extend(a.focusNode,a.focusOffset)}}function ec(a,l){var p=a.display,d=a.doc;if(l.editorIsHidden)return Wo(a),!1;if(!l.force&&l.visible.from>=p.viewFrom&&l.visible.to<=p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo)&&p.renderedView==p.view&&_d(a)==0)return!1;Md(a)&&(Wo(a),l.dims=$u(a));var v=d.first+d.size,_=Math.max(l.visible.from-a.options.viewportMargin,d.first),b=Math.min(v,l.visible.to+a.options.viewportMargin);p.viewFrom<_&&_-p.viewFrom<20&&(_=Math.max(d.first,p.viewFrom)),p.viewTo>b&&p.viewTo-b<20&&(b=Math.min(v,p.viewTo)),hr&&(_=Vn(a.doc,_),b=Wr(a.doc,b));var S=_!=p.viewFrom||b!=p.viewTo||p.lastWrapHeight!=l.wrapperHeight||p.lastWrapWidth!=l.wrapperWidth;Qg(a,_,b),p.viewOffset=Fn(re(a.doc,p.viewFrom)),a.display.mover.style.top=p.viewOffset+"px";var O=_d(a);if(!S&&O==0&&!l.force&&p.renderedView==p.view&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo))return!1;var A=hm(a);return O>4&&(p.lineDiv.style.display="none"),gm(a,p.updateLineNumbers,l.dims),O>4&&(p.lineDiv.style.display=""),p.renderedView=p.view,vm(A),U(p.cursorDiv),U(p.selectionDiv),p.gutters.style.height=p.sizer.style.minHeight=0,S&&(p.lastWrapHeight=l.wrapperHeight,p.lastWrapWidth=l.wrapperWidth,Wa(a,400)),p.updateLineNumbers=null,!0}function Ad(a,l){for(var p=l.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||l.oldDisplayWidth==yo(a)){if(p&&p.top!=null&&(p={top:Math.min(a.doc.height+ai(a.display)-P(a),p.top)}),l.visible=Ys(a.display,a.doc,p),l.visible.from>=a.display.viewFrom&&l.visible.to<=a.display.viewTo)break}else d&&(l.visible=Ys(a.display,a.doc,p));if(!ec(a,l))break;qs(a);var v=Ua(a);Fa(a),Hi(a,v),oc(a,v),l.force=!1}l.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(l.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function rc(a,l){var p=new Js(a,l);if(ec(a,p)){qs(a),Ad(a,p);var d=Ua(a);Fa(a),Hi(a,d),oc(a,d),p.finish()}}function gm(a,l,p){var d=a.display,v=a.options.lineNumbers,_=d.lineDiv,b=_.firstChild;function S(St){var kt=St.nextSibling;return c&&L&&a.display.currentWheelTarget==St?St.style.display="none":St.parentNode.removeChild(St),kt}for(var O=d.view,A=d.viewFrom,$=0;$<O.length;$++){var Z=O[$];if(!Z.hidden)if(!Z.node||Z.node.parentNode!=_){var ft=Hs(a,Z,A,p);_.insertBefore(ft,b)}else{for(;b!=Z.node;)b=S(b);var at=v&&l!=null&&l<=A&&Z.lineNumber;Z.changes&&(Lt(Z.changes,"gutter")>-1&&(at=!1),oo(a,Z,A,p)),at&&(U(Z.lineNumber),Z.lineNumber.appendChild(document.createTextNode(Cn(a.options,A)))),b=Z.node.nextSibling}A+=Z.size}for(;b;)b=S(b)}function nc(a){var l=a.gutters.offsetWidth;a.sizer.style.marginLeft=l+"px",Qe(a,"gutterChanged",a)}function oc(a,l){a.display.sizer.style.minHeight=l.docHeight+"px",a.display.heightForcer.style.top=l.docHeight+"px",a.display.gutters.style.height=l.docHeight+a.display.barHeight+un(a)+"px"}function kd(a){var l=a.display,p=l.view;if(!(!l.alignWidgets&&(!l.gutters.firstChild||!a.options.fixedGutter))){for(var d=qu(l)-l.scroller.scrollLeft+a.doc.scrollLeft,v=l.gutters.offsetWidth,_=d+"px",b=0;b<p.length;b++)if(!p[b].hidden){a.options.fixedGutter&&(p[b].gutter&&(p[b].gutter.style.left=_),p[b].gutterBackground&&(p[b].gutterBackground.style.left=_));var S=p[b].alignable;if(S)for(var O=0;O<S.length;O++)S[O].style.left=_}a.options.fixedGutter&&(l.gutters.style.left=d+v+"px")}}function Md(a){if(!a.options.lineNumbers)return!1;var l=a.doc,p=Cn(a.options,l.first+l.size-1),d=a.display;if(p.length!=d.lineNumChars){var v=d.measure.appendChild(Y("div",[Y("div",p)],"CodeMirror-linenumber CodeMirror-gutter-elt")),_=v.firstChild.offsetWidth,b=v.offsetWidth-_;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(_,d.lineGutter.offsetWidth-b)+1,d.lineNumWidth=d.lineNumInnerWidth+b,d.lineNumChars=d.lineNumInnerWidth?p.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",nc(a.display),!0}return!1}function ic(a,l){for(var p=[],d=!1,v=0;v<a.length;v++){var _=a[v],b=null;if(typeof _!="string"&&(b=_.style,_=_.className),_=="CodeMirror-linenumbers")if(l)d=!0;else continue;p.push({className:_,style:b})}return l&&!d&&p.push({className:"CodeMirror-linenumbers",style:null}),p}function Dd(a){var l=a.gutters,p=a.gutterSpecs;U(l),a.lineGutter=null;for(var d=0;d<p.length;++d){var v=p[d],_=v.className,b=v.style,S=l.appendChild(Y("div",null,"CodeMirror-gutter "+_));b&&(S.style.cssText=b),_=="CodeMirror-linenumbers"&&(a.lineGutter=S,S.style.width=(a.lineNumWidth||1)+"px")}l.style.display=p.length?"":"none",nc(a)}function za(a){Dd(a.display),Kr(a),kd(a)}function mm(a,l,p,d){var v=this;this.input=p,v.scrollbarFiller=Y("div",null,"CodeMirror-scrollbar-filler"),v.scrollbarFiller.setAttribute("cm-not-content","true"),v.gutterFiller=Y("div",null,"CodeMirror-gutter-filler"),v.gutterFiller.setAttribute("cm-not-content","true"),v.lineDiv=K("div",null,"CodeMirror-code"),v.selectionDiv=Y("div",null,null,"position: relative; z-index: 1"),v.cursorDiv=Y("div",null,"CodeMirror-cursors"),v.measure=Y("div",null,"CodeMirror-measure"),v.lineMeasure=Y("div",null,"CodeMirror-measure"),v.lineSpace=K("div",[v.measure,v.lineMeasure,v.selectionDiv,v.cursorDiv,v.lineDiv],null,"position: relative; outline: none");var _=K("div",[v.lineSpace],"CodeMirror-lines");v.mover=Y("div",[_],null,"position: relative"),v.sizer=Y("div",[v.mover],"CodeMirror-sizer"),v.sizerWidth=null,v.heightForcer=Y("div",null,null,"position: absolute; height: "+zt+"px; width: 1px;"),v.gutters=Y("div",null,"CodeMirror-gutters"),v.lineGutter=null,v.scroller=Y("div",[v.sizer,v.heightForcer,v.gutters],"CodeMirror-scroll"),v.scroller.setAttribute("tabIndex","-1"),v.wrapper=Y("div",[v.scrollbarFiller,v.gutterFiller,v.scroller],"CodeMirror"),v.wrapper.setAttribute("translate","no"),u&&f<8&&(v.gutters.style.zIndex=-1,v.scroller.style.paddingRight=0),!c&&!(e&&N)&&(v.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(v.wrapper):a(v.wrapper)),v.viewFrom=v.viewTo=l.first,v.reportedViewFrom=v.reportedViewTo=l.first,v.view=[],v.renderedView=null,v.externalMeasured=null,v.viewOffset=0,v.lastWrapHeight=v.lastWrapWidth=0,v.updateLineNumbers=null,v.nativeBarWidth=v.barHeight=v.barWidth=0,v.scrollbarsClipped=!1,v.lineNumWidth=v.lineNumInnerWidth=v.lineNumChars=null,v.alignWidgets=!1,v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.maxLine=null,v.maxLineLength=0,v.maxLineChanged=!1,v.wheelDX=v.wheelDY=v.wheelStartX=v.wheelStartY=null,v.shift=!1,v.selForContextMenu=null,v.activeTouch=null,v.gutterSpecs=ic(d.gutters,d.lineNumbers),Dd(v),p.init(v)}var Zs=0,En=null;u?En=-.53:e?En=15:g?En=-.7:y&&(En=-.3333333333333333);function Ld(a){var l=a.wheelDeltaX,p=a.wheelDeltaY;return l==null&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(l=a.detail),p==null&&a.detail&&a.axis==a.VERTICAL_AXIS?p=a.detail:p==null&&(p=a.wheelDelta),{x:l,y:p}}function ym(a){var l=Ld(a);return l.x*=En,l.y*=En,l}function Id(a,l){var p=Ld(l),d=p.x,v=p.y,_=a.display,b=_.scroller,S=b.scrollWidth>b.clientWidth,O=b.scrollHeight>b.clientHeight;if(d&&S||v&&O){if(v&&L&&c){t:for(var A=l.target,$=_.view;A!=b;A=A.parentNode)for(var Z=0;Z<$.length;Z++)if($[Z].node==A){a.display.currentWheelTarget=A;break t}}if(d&&!e&&!m&&En!=null){v&&O&&Ha(a,Math.max(0,b.scrollTop+v*En)),ci(a,Math.max(0,b.scrollLeft+d*En)),(!v||v&&O)&&Te(l),_.wheelStartX=null;return}if(v&&En!=null){var ft=v*En,at=a.doc.scrollTop,St=at+_.wrapper.clientHeight;ft<0?at=Math.max(0,at+ft-50):St=Math.min(a.doc.height,St+ft+50),rc(a,{top:at,bottom:St})}Zs<20&&(_.wheelStartX==null?(_.wheelStartX=b.scrollLeft,_.wheelStartY=b.scrollTop,_.wheelDX=d,_.wheelDY=v,setTimeout(function(){if(_.wheelStartX!=null){var kt=b.scrollLeft-_.wheelStartX,Nt=b.scrollTop-_.wheelStartY,$t=Nt&&_.wheelDY&&Nt/_.wheelDY||kt&&_.wheelDX&&kt/_.wheelDX;_.wheelStartX=_.wheelStartY=null,$t&&(En=(En*Zs+$t)/(Zs+1),++Zs)}},200)):(_.wheelDX+=d,_.wheelDY+=v))}}var An=function(a,l){this.ranges=a,this.primIndex=l};An.prototype.primary=function(){return this.ranges[this.primIndex]},An.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var l=0;l<this.ranges.length;l++){var p=this.ranges[l],d=a.ranges[l];if(!Sn(p.anchor,d.anchor)||!Sn(p.head,d.head))return!1}return!0},An.prototype.deepCopy=function(){for(var a=[],l=0;l<this.ranges.length;l++)a[l]=new Ve(I(this.ranges[l].anchor),I(this.ranges[l].head));return new An(a,this.primIndex)},An.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},An.prototype.contains=function(a,l){l||(l=a);for(var p=0;p<this.ranges.length;p++){var d=this.ranges[p];if(pe(l,d.from())>=0&&pe(a,d.to())<=0)return p}return-1};var Ve=function(a,l){this.anchor=a,this.head=l};Ve.prototype.from=function(){return xt(this.anchor,this.head)},Ve.prototype.to=function(){return X(this.anchor,this.head)},Ve.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Xn(a,l,p){var d=a&&a.options.selectionsMayTouch,v=l[p];l.sort(function(ft,at){return pe(ft.from(),at.from())}),p=Lt(l,v);for(var _=1;_<l.length;_++){var b=l[_],S=l[_-1],O=pe(S.to(),b.from());if(d&&!b.empty()?O>0:O>=0){var A=xt(S.from(),b.from()),$=X(S.to(),b.to()),Z=S.empty()?b.from()==b.head:S.from()==S.head;_<=p&&--p,l.splice(--_,2,new Ve(Z?$:A,Z?A:$))}}return new An(l,p)}function zo(a,l){return new An([new Ve(a,l||a)],0)}function Ko(a){return a.text?Mt(a.from.line+a.text.length-1,ue(a.text).length+(a.text.length==1?a.from.ch:0)):a.to}function jd(a,l){if(pe(a,l.from)<0)return a;if(pe(a,l.to)<=0)return Ko(l);var p=a.line+l.text.length-(l.to.line-l.from.line)-1,d=a.ch;return a.line==l.to.line&&(d+=Ko(l).ch-l.to.ch),Mt(p,d)}function ac(a,l){for(var p=[],d=0;d<a.sel.ranges.length;d++){var v=a.sel.ranges[d];p.push(new Ve(jd(v.anchor,l),jd(v.head,l)))}return Xn(a.cm,p,a.sel.primIndex)}function Rd(a,l,p){return a.line==l.line?Mt(p.line,a.ch-l.ch+p.ch):Mt(p.line+(a.line-l.line),a.ch)}function _m(a,l,p){for(var d=[],v=Mt(a.first,0),_=v,b=0;b<l.length;b++){var S=l[b],O=Rd(S.from,v,_),A=Rd(Ko(S),v,_);if(v=S.to,_=A,p=="around"){var $=a.sel.ranges[b],Z=pe($.head,$.anchor)<0;d[b]=new Ve(Z?A:O,Z?O:A)}else d[b]=new Ve(O,O)}return new An(d,a.sel.primIndex)}function sc(a){a.doc.mode=ve(a.options,a.doc.modeOption),Ka(a)}function Ka(a){a.doc.iter(function(l){l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,Wa(a,100),a.state.modeGen++,a.curOp&&Kr(a)}function Vd(a,l){return l.from.ch==0&&l.to.ch==0&&ue(l.text)==""&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function lc(a,l,p,d){function v(te){return p?p[te]:null}function _(te,qt,ne){Ms(te,qt,ne,d),Qe(te,"change",te,l)}function b(te,qt){for(var ne=[],he=te;he<qt;++he)ne.push(new wr(A[he],v(he),d));return ne}var S=l.from,O=l.to,A=l.text,$=re(a,S.line),Z=re(a,O.line),ft=ue(A),at=v(A.length-1),St=O.line-S.line;if(l.full)a.insert(0,b(0,A.length)),a.remove(A.length,a.size-A.length);else if(Vd(a,l)){var kt=b(0,A.length-1);_(Z,Z.text,at),St&&a.remove(S.line,St),kt.length&&a.insert(S.line,kt)}else if($==Z)if(A.length==1)_($,$.text.slice(0,S.ch)+ft+$.text.slice(O.ch),at);else{var Nt=b(1,A.length-1);Nt.push(new wr(ft+$.text.slice(O.ch),at,d)),_($,$.text.slice(0,S.ch)+A[0],v(0)),a.insert(S.line+1,Nt)}else if(A.length==1)_($,$.text.slice(0,S.ch)+A[0]+Z.text.slice(O.ch),v(0)),a.remove(S.line+1,St);else{_($,$.text.slice(0,S.ch)+A[0],v(0)),_(Z,ft+Z.text.slice(O.ch),at);var $t=b(1,A.length-1);St>1&&a.remove(S.line+1,St-1),a.insert(S.line+1,$t)}Qe(a,"change",a,l)}function Go(a,l,p){function d(v,_,b){if(v.linked)for(var S=0;S<v.linked.length;++S){var O=v.linked[S];if(O.doc!=_){var A=b&&O.sharedHist;p&&!A||(l(O.doc,A),d(O.doc,v,A))}}}d(a,null,!0)}function Fd(a,l){if(l.cm)throw new Error("This document is already in use.");a.doc=l,l.cm=a,Yu(a),sc(a),Nd(a),a.options.direction=l.direction,a.options.lineWrapping||Io(a),a.options.mode=l.modeOption,Kr(a)}function Nd(a){(a.doc.direction=="rtl"?gt:W)(a.display.lineDiv,"CodeMirror-rtl")}function wm(a){cn(a,function(){Nd(a),Kr(a)})}function Qs(a){this.done=[],this.undone=[],this.undoDepth=a?a.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a?a.maxGeneration:1}function uc(a,l){var p={from:I(l.from),to:Ko(l),text:yr(a,l.from,l.to)};return Bd(a,p,l.from.line,l.to.line+1),Go(a,function(d){return Bd(d,p,l.from.line,l.to.line+1)},!0),p}function Hd(a){for(;a.length;){var l=ue(a);if(l.ranges)a.pop();else break}}function bm(a,l){if(l)return Hd(a.done),ue(a.done);if(a.done.length&&!ue(a.done).ranges)return ue(a.done);if(a.done.length>1&&!a.done[a.done.length-2].ranges)return a.done.pop(),ue(a.done)}function Ud(a,l,p,d){var v=a.history;v.undone.length=0;var _=+new Date,b,S;if((v.lastOp==d||v.lastOrigin==l.origin&&l.origin&&(l.origin.charAt(0)=="+"&&v.lastModTime>_-(a.cm?a.cm.options.historyEventDelay:500)||l.origin.charAt(0)=="*"))&&(b=bm(v,v.lastOp==d)))S=ue(b.changes),pe(l.from,l.to)==0&&pe(l.from,S.to)==0?S.to=Ko(l):b.changes.push(uc(a,l));else{var O=ue(v.done);for((!O||!O.ranges)&&tl(a.sel,v.done),b={changes:[uc(a,l)],generation:v.generation},v.done.push(b);v.done.length>v.undoDepth;)v.done.shift(),v.done[0].ranges||v.done.shift()}v.done.push(p),v.generation=++v.maxGeneration,v.lastModTime=v.lastSelTime=_,v.lastOp=v.lastSelOp=d,v.lastOrigin=v.lastSelOrigin=l.origin,S||Zt(a,"historyAdded")}function Cm(a,l,p,d){var v=l.charAt(0);return v=="*"||v=="+"&&p.ranges.length==d.ranges.length&&p.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function Sm(a,l,p,d){var v=a.history,_=d&&d.origin;p==v.lastSelOp||_&&v.lastSelOrigin==_&&(v.lastModTime==v.lastSelTime&&v.lastOrigin==_||Cm(a,_,ue(v.done),l))?v.done[v.done.length-1]=l:tl(l,v.done),v.lastSelTime=+new Date,v.lastSelOrigin=_,v.lastSelOp=p,d&&d.clearRedo!==!1&&Hd(v.undone)}function tl(a,l){var p=ue(l);p&&p.ranges&&p.equals(a)||l.push(a)}function Bd(a,l,p,d){var v=l["spans_"+a.id],_=0;a.iter(Math.max(a.first,p),Math.min(a.first+a.size,d),function(b){b.markedSpans&&((v||(v=l["spans_"+a.id]={}))[_]=b.markedSpans),++_})}function xm(a){if(!a)return null;for(var l,p=0;p<a.length;++p)a[p].marker.explicitlyCleared?l||(l=a.slice(0,p)):l&&l.push(a[p]);return l?l.length?l:null:a}function Om(a,l){var p=l["spans_"+a.id];if(!p)return null;for(var d=[],v=0;v<l.text.length;++v)d.push(xm(p[v]));return d}function Wd(a,l){var p=Om(a,l),d=po(a,l);if(!p)return d;if(!d)return p;for(var v=0;v<p.length;++v){var _=p[v],b=d[v];if(_&&b)t:for(var S=0;S<b.length;++S){for(var O=b[S],A=0;A<_.length;++A)if(_[A].marker==O.marker)continue t;_.push(O)}else b&&(p[v]=b)}return p}function Ui(a,l,p){for(var d=[],v=0;v<a.length;++v){var _=a[v];if(_.ranges){d.push(p?An.prototype.deepCopy.call(_):_);continue}var b=_.changes,S=[];d.push({changes:S});for(var O=0;O<b.length;++O){var A=b[O],$=void 0;if(S.push({from:A.from,to:A.to,text:A.text}),l)for(var Z in A)($=Z.match(/^spans_(\d+)$/))&&Lt(l,Number($[1]))>-1&&(ue(S)[Z]=A[Z],delete A[Z])}}return d}function cc(a,l,p,d){if(d){var v=a.anchor;if(p){var _=pe(l,v)<0;_!=pe(p,v)<0?(v=l,l=p):_!=pe(l,p)<0&&(l=p)}return new Ve(v,l)}else return new Ve(p||l,l)}function el(a,l,p,d,v){v==null&&(v=a.cm&&(a.cm.display.shift||a.extend)),Lr(a,new An([cc(a.sel.primary(),l,p,v)],0),d)}function zd(a,l,p){for(var d=[],v=a.cm&&(a.cm.display.shift||a.extend),_=0;_<a.sel.ranges.length;_++)d[_]=cc(a.sel.ranges[_],l[_],null,v);var b=Xn(a.cm,d,a.sel.primIndex);Lr(a,b,p)}function fc(a,l,p,d){var v=a.sel.ranges.slice(0);v[l]=p,Lr(a,Xn(a.cm,v,a.sel.primIndex),d)}function Kd(a,l,p,d){Lr(a,zo(l,p),d)}function Tm(a,l,p){var d={ranges:l.ranges,update:function(v){this.ranges=[];for(var _=0;_<v.length;_++)this.ranges[_]=new Ve(Ft(a,v[_].anchor),Ft(a,v[_].head))},origin:p&&p.origin};return Zt(a,"beforeSelectionChange",a,d),a.cm&&Zt(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=l.ranges?Xn(a.cm,d.ranges,d.ranges.length-1):l}function Gd(a,l,p){var d=a.history.done,v=ue(d);v&&v.ranges?(d[d.length-1]=l,rl(a,l,p)):Lr(a,l,p)}function Lr(a,l,p){rl(a,l,p),Sm(a,a.sel,a.cm?a.cm.curOp.id:NaN,p)}function rl(a,l,p){(Se(a,"beforeSelectionChange")||a.cm&&Se(a.cm,"beforeSelectionChange"))&&(l=Tm(a,l,p));var d=p&&p.bias||(pe(l.primary().head,a.sel.primary().head)<0?-1:1);$d(a,Yd(a,l,d,!0)),!(p&&p.scroll===!1)&&a.cm&&a.cm.getOption("readOnly")!="nocursor"&&Ni(a.cm)}function $d(a,l){l.equals(a.sel)||(a.sel=l,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,ae(a.cm)),Qe(a,"cursorActivity",a))}function qd(a){$d(a,Yd(a,a.sel,null,!1))}function Yd(a,l,p,d){for(var v,_=0;_<l.ranges.length;_++){var b=l.ranges[_],S=l.ranges.length==a.sel.ranges.length&&a.sel.ranges[_],O=nl(a,b.anchor,S&&S.anchor,p,d),A=nl(a,b.head,S&&S.head,p,d);(v||O!=b.anchor||A!=b.head)&&(v||(v=l.ranges.slice(0,_)),v[_]=new Ve(O,A))}return v?Xn(a.cm,v,l.primIndex):l}function Bi(a,l,p,d,v){var _=re(a,l.line);if(_.markedSpans)for(var b=0;b<_.markedSpans.length;++b){var S=_.markedSpans[b],O=S.marker,A="selectLeft"in O?!O.selectLeft:O.inclusiveLeft,$="selectRight"in O?!O.selectRight:O.inclusiveRight;if((S.from==null||(A?S.from<=l.ch:S.from<l.ch))&&(S.to==null||($?S.to>=l.ch:S.to>l.ch))){if(v&&(Zt(O,"beforeCursorEnter"),O.explicitlyCleared))if(_.markedSpans){--b;continue}else break;if(!O.atomic)continue;if(p){var Z=O.find(d<0?1:-1),ft=void 0;if((d<0?$:A)&&(Z=Xd(a,Z,-d,Z&&Z.line==l.line?_:null)),Z&&Z.line==l.line&&(ft=pe(Z,p))&&(d<0?ft<0:ft>0))return Bi(a,Z,l,d,v)}var at=O.find(d<0?-1:1);return(d<0?A:$)&&(at=Xd(a,at,d,at.line==l.line?_:null)),at?Bi(a,at,l,d,v):null}}return l}function nl(a,l,p,d,v){var _=d||1,b=Bi(a,l,p,_,v)||!v&&Bi(a,l,p,_,!0)||Bi(a,l,p,-_,v)||!v&&Bi(a,l,p,-_,!0);return b||(a.cantEdit=!0,Mt(a.first,0))}function Xd(a,l,p,d){return p<0&&l.ch==0?l.line>a.first?Ft(a,Mt(l.line-1)):null:p>0&&l.ch==(d||re(a,l.line)).text.length?l.line<a.first+a.size-1?Mt(l.line+1,0):null:new Mt(l.line,l.ch+p)}function Jd(a){a.setSelection(Mt(a.firstLine(),0),Mt(a.lastLine()),Ut)}function Zd(a,l,p){var d={canceled:!1,from:l.from,to:l.to,text:l.text,origin:l.origin,cancel:function(){return d.canceled=!0}};return p&&(d.update=function(v,_,b,S){v&&(d.from=Ft(a,v)),_&&(d.to=Ft(a,_)),b&&(d.text=b),S!==void 0&&(d.origin=S)}),Zt(a,"beforeChange",a,d),a.cm&&Zt(a.cm,"beforeChange",a.cm,d),d.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Wi(a,l,p){if(a.cm){if(!a.cm.curOp)return br(a.cm,Wi)(a,l,p);if(a.cm.state.suppressEdits)return}if(!((Se(a,"beforeChange")||a.cm&&Se(a.cm,"beforeChange"))&&(l=Zd(a,l,!0),!l))){var d=lr&&!p&&Pn(a,l.from,l.to);if(d)for(var v=d.length-1;v>=0;--v)Qd(a,{from:d[v].from,to:d[v].to,text:v?[""]:l.text,origin:l.origin});else Qd(a,l)}}function Qd(a,l){if(!(l.text.length==1&&l.text[0]==""&&pe(l.from,l.to)==0)){var p=ac(a,l);Ud(a,l,p,a.cm?a.cm.curOp.id:NaN),Ga(a,l,p,po(a,l));var d=[];Go(a,function(v,_){!_&&Lt(d,v.history)==-1&&(np(v.history,l),d.push(v.history)),Ga(v,l,null,po(v,l))})}}function ol(a,l,p){var d=a.cm&&a.cm.state.suppressEdits;if(!(d&&!p)){for(var v=a.history,_,b=a.sel,S=l=="undo"?v.done:v.undone,O=l=="undo"?v.undone:v.done,A=0;A<S.length&&(_=S[A],!(p?_.ranges&&!_.equals(a.sel):!_.ranges));A++);if(A!=S.length){for(v.lastOrigin=v.lastSelOrigin=null;;)if(_=S.pop(),_.ranges){if(tl(_,O),p&&!_.equals(a.sel)){Lr(a,_,{clearRedo:!1});return}b=_}else if(d){S.push(_);return}else break;var $=[];tl(b,O),O.push({changes:$,generation:v.generation}),v.generation=_.generation||++v.maxGeneration;for(var Z=Se(a,"beforeChange")||a.cm&&Se(a.cm,"beforeChange"),ft=function(kt){var Nt=_.changes[kt];if(Nt.origin=l,Z&&!Zd(a,Nt,!1))return S.length=0,{};$.push(uc(a,Nt));var $t=kt?ac(a,Nt):ue(S);Ga(a,Nt,$t,Wd(a,Nt)),!kt&&a.cm&&a.cm.scrollIntoView({from:Nt.from,to:Ko(Nt)});var te=[];Go(a,function(qt,ne){!ne&&Lt(te,qt.history)==-1&&(np(qt.history,Nt),te.push(qt.history)),Ga(qt,Nt,null,Wd(qt,Nt))})},at=_.changes.length-1;at>=0;--at){var St=ft(at);if(St)return St.v}}}}function tp(a,l){if(l!=0&&(a.first+=l,a.sel=new An(mt(a.sel.ranges,function(v){return new Ve(Mt(v.anchor.line+l,v.anchor.ch),Mt(v.head.line+l,v.head.ch))}),a.sel.primIndex),a.cm)){Kr(a.cm,a.first,a.first-l,l);for(var p=a.cm.display,d=p.viewFrom;d<p.viewTo;d++)Bo(a.cm,d,"gutter")}}function Ga(a,l,p,d){if(a.cm&&!a.cm.curOp)return br(a.cm,Ga)(a,l,p,d);if(l.to.line<a.first){tp(a,l.text.length-1-(l.to.line-l.from.line));return}if(!(l.from.line>a.lastLine())){if(l.from.line<a.first){var v=l.text.length-1-(a.first-l.from.line);tp(a,v),l={from:Mt(a.first,0),to:Mt(l.to.line+v,l.to.ch),text:[ue(l.text)],origin:l.origin}}var _=a.lastLine();l.to.line>_&&(l={from:l.from,to:Mt(_,re(a,_).text.length),text:[l.text[0]],origin:l.origin}),l.removed=yr(a,l.from,l.to),p||(p=ac(a,l)),a.cm?Pm(a.cm,l,d):lc(a,l,d),rl(a,p,Ut),a.cantEdit&&nl(a,Mt(a.firstLine(),0))&&(a.cantEdit=!1)}}function Pm(a,l,p){var d=a.doc,v=a.display,_=l.from,b=l.to,S=!1,O=_.line;a.options.lineWrapping||(O=Ee(qe(re(d,_.line))),d.iter(O,b.line+1,function(at){if(at==v.maxLine)return S=!0,!0})),d.sel.contains(l.from,l.to)>-1&&ae(a),lc(d,l,p,yd(a)),a.options.lineWrapping||(d.iter(O,_.line+l.text.length,function(at){var St=go(at);St>v.maxLineLength&&(v.maxLine=at,v.maxLineLength=St,v.maxLineChanged=!0,S=!1)}),S&&(a.curOp.updateMaxLine=!0)),Do(d,_.line),Wa(a,400);var A=l.text.length-(b.line-_.line)-1;l.full?Kr(a):_.line==b.line&&l.text.length==1&&!Vd(a.doc,l)?Bo(a,_.line,"text"):Kr(a,_.line,b.line+1,A);var $=Se(a,"changes"),Z=Se(a,"change");if(Z||$){var ft={from:_,to:b,text:l.text,removed:l.removed,origin:l.origin};Z&&Qe(a,"change",a,ft),$&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(ft)}a.display.selForContextMenu=null}function zi(a,l,p,d,v){var _;d||(d=p),pe(d,p)<0&&(_=[d,p],p=_[0],d=_[1]),typeof l=="string"&&(l=a.splitLines(l)),Wi(a,{from:p,to:d,text:l,origin:v})}function ep(a,l,p,d){p<a.line?a.line+=d:l<a.line&&(a.line=l,a.ch=0)}function rp(a,l,p,d){for(var v=0;v<a.length;++v){var _=a[v],b=!0;if(_.ranges){_.copied||(_=a[v]=_.deepCopy(),_.copied=!0);for(var S=0;S<_.ranges.length;S++)ep(_.ranges[S].anchor,l,p,d),ep(_.ranges[S].head,l,p,d);continue}for(var O=0;O<_.changes.length;++O){var A=_.changes[O];if(p<A.from.line)A.from=Mt(A.from.line+d,A.from.ch),A.to=Mt(A.to.line+d,A.to.ch);else if(l<=A.to.line){b=!1;break}}b||(a.splice(0,v+1),v=0)}}function np(a,l){var p=l.from.line,d=l.to.line,v=l.text.length-(d-p)-1;rp(a.done,p,d,v),rp(a.undone,p,d,v)}function $a(a,l,p,d){var v=l,_=l;return typeof l=="number"?_=re(a,jt(a,l)):v=Ee(l),v==null?null:(d(_,v)&&a.cm&&Bo(a.cm,v,p),_)}function qa(a){this.lines=a,this.parent=null;for(var l=0,p=0;p<a.length;++p)a[p].parent=this,l+=a[p].height;this.height=l}qa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,l){for(var p=a,d=a+l;p<d;++p){var v=this.lines[p];this.height-=v.height,Mi(v),Qe(v,"delete")}this.lines.splice(a,l)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,l,p){this.height+=p,this.lines=this.lines.slice(0,a).concat(l).concat(this.lines.slice(a));for(var d=0;d<l.length;++d)l[d].parent=this},iterN:function(a,l,p){for(var d=a+l;a<d;++a)if(p(this.lines[a]))return!0}};function Ya(a){this.children=a;for(var l=0,p=0,d=0;d<a.length;++d){var v=a[d];l+=v.chunkSize(),p+=v.height,v.parent=this}this.size=l,this.height=p,this.parent=null}Ya.prototype={chunkSize:function(){return this.size},removeInner:function(a,l){this.size-=l;for(var p=0;p<this.children.length;++p){var d=this.children[p],v=d.chunkSize();if(a<v){var _=Math.min(l,v-a),b=d.height;if(d.removeInner(a,_),this.height-=b-d.height,v==_&&(this.children.splice(p--,1),d.parent=null),(l-=_)==0)break;a=0}else a-=v}if(this.size-l<25&&(this.children.length>1||!(this.children[0]instanceof qa))){var S=[];this.collapse(S),this.children=[new qa(S)],this.children[0].parent=this}},collapse:function(a){for(var l=0;l<this.children.length;++l)this.children[l].collapse(a)},insertInner:function(a,l,p){this.size+=l.length,this.height+=p;for(var d=0;d<this.children.length;++d){var v=this.children[d],_=v.chunkSize();if(a<=_){if(v.insertInner(a,l,p),v.lines&&v.lines.length>50){for(var b=v.lines.length%25+25,S=b;S<v.lines.length;){var O=new qa(v.lines.slice(S,S+=25));v.height-=O.height,this.children.splice(++d,0,O),O.parent=this}v.lines=v.lines.slice(0,b),this.maybeSpill()}break}a-=_}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var l=a.children.splice(a.children.length-5,5),p=new Ya(l);if(a.parent){a.size-=p.size,a.height-=p.height;var v=Lt(a.parent.children,a);a.parent.children.splice(v+1,0,p)}else{var d=new Ya(a.children);d.parent=a,a.children=[d,p],a=d}p.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,l,p){for(var d=0;d<this.children.length;++d){var v=this.children[d],_=v.chunkSize();if(a<_){var b=Math.min(l,_-a);if(v.iterN(a,b,p))return!0;if((l-=b)==0)break;a=0}else a-=_}}};var Xa=function(a,l,p){if(p)for(var d in p)p.hasOwnProperty(d)&&(this[d]=p[d]);this.doc=a,this.node=l};Xa.prototype.clear=function(){var a=this.doc.cm,l=this.line.widgets,p=this.line,d=Ee(p);if(!(d==null||!l)){for(var v=0;v<l.length;++v)l[v]==this&&l.splice(v--,1);l.length||(p.widgets=null);var _=Ho(this);_r(p,Math.max(0,p.height-_)),a&&(cn(a,function(){op(a,p,-_),Bo(a,d,"widget")}),Qe(a,"lineWidgetCleared",a,this,d))}},Xa.prototype.changed=function(){var a=this,l=this.height,p=this.doc.cm,d=this.line;this.height=null;var v=Ho(this)-l;v&&(zr(this.doc,d)||_r(d,d.height+v),p&&cn(p,function(){p.curOp.forceUpdate=!0,op(p,d,v),Qe(p,"lineWidgetChanged",p,a,Ee(d))}))},Ae(Xa);function op(a,l,p){Fn(l)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&tc(a,p)}function Em(a,l,p,d){var v=new Xa(a,p,d),_=a.cm;return _&&v.noHScroll&&(_.display.alignWidgets=!0),$a(a,l,"widget",function(b){var S=b.widgets||(b.widgets=[]);if(v.insertAt==null?S.push(v):S.splice(Math.min(S.length,Math.max(0,v.insertAt)),0,v),v.line=b,_&&!zr(a,b)){var O=Fn(b)<a.scrollTop;_r(b,b.height+Ho(v)),O&&tc(_,v.height),_.curOp.forceUpdate=!0}return!0}),_&&Qe(_,"lineWidgetAdded",_,v,typeof l=="number"?l:Ee(l)),v}var ip=0,$o=function(a,l){this.lines=[],this.type=l,this.doc=a,this.id=++ip};$o.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,l=a&&!a.curOp;if(l&&di(a),Se(this,"clear")){var p=this.find();p&&Qe(this,"clear",p.from,p.to)}for(var d=null,v=null,_=0;_<this.lines.length;++_){var b=this.lines[_],S=Vr(b.markedSpans,this);a&&!this.collapsed?Bo(a,Ee(b),"text"):a&&(S.to!=null&&(v=Ee(b)),S.from!=null&&(d=Ee(b))),b.markedSpans=vr(b.markedSpans,S),S.from==null&&this.collapsed&&!zr(this.doc,b)&&a&&_r(b,Ri(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var O=0;O<this.lines.length;++O){var A=qe(this.lines[O]),$=go(A);$>a.display.maxLineLength&&(a.display.maxLine=A,a.display.maxLineLength=$,a.display.maxLineChanged=!0)}d!=null&&a&&this.collapsed&&Kr(a,d,v+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&qd(a.doc)),a&&Qe(a,"markerCleared",a,this,d,v),l&&pi(a),this.parent&&this.parent.clear()}},$o.prototype.find=function(a,l){a==null&&this.type=="bookmark"&&(a=1);for(var p,d,v=0;v<this.lines.length;++v){var _=this.lines[v],b=Vr(_.markedSpans,this);if(b.from!=null&&(p=Mt(l?_:Ee(_),b.from),a==-1))return p;if(b.to!=null&&(d=Mt(l?_:Ee(_),b.to),a==1))return d}return p&&{from:p,to:d}},$o.prototype.changed=function(){var a=this,l=this.find(-1,!0),p=this,d=this.doc.cm;!l||!d||cn(d,function(){var v=l.line,_=Ee(l.line),b=ut(d,_);if(b&&(Ra(b),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!zr(p.doc,v)&&p.height!=null){var S=p.height;p.height=null;var O=Ho(p)-S;O&&_r(v,v.height+O)}Qe(d,"markerChanged",d,a)})},$o.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(!l.maybeHiddenMarkers||Lt(l.maybeHiddenMarkers,this)==-1)&&(l.maybeUnhiddenMarkers||(l.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},$o.prototype.detachLine=function(a){if(this.lines.splice(Lt(this.lines,a),1),!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(l.maybeHiddenMarkers||(l.maybeHiddenMarkers=[])).push(this)}},Ae($o);function Ki(a,l,p,d,v){if(d&&d.shared)return Am(a,l,p,d,v);if(a.cm&&!a.cm.curOp)return br(a.cm,Ki)(a,l,p,d,v);var _=new $o(a,v),b=pe(l,p);if(d&&yt(d,_,!1),b>0||b==0&&_.clearWhenEmpty!==!1)return _;if(_.replacedWith&&(_.collapsed=!0,_.widgetNode=K("span",[_.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||_.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(_.widgetNode.insertLeft=!0)),_.collapsed){if(ge(a,l.line,l,p,_)||l.line!=p.line&&ge(a,p.line,l,p,_))throw new Error("Inserting collapsed marker partially overlapping an existing one");xn()}_.addToHistory&&Ud(a,{from:l,to:p,origin:"markText"},a.sel,NaN);var S=l.line,O=a.cm,A;if(a.iter(S,p.line+1,function(Z){O&&_.collapsed&&!O.options.lineWrapping&&qe(Z)==O.display.maxLine&&(A=!0),_.collapsed&&S!=l.line&&_r(Z,0),ki(Z,new Gn(_,S==l.line?l.ch:null,S==p.line?p.ch:null),a.cm&&a.cm.curOp),++S}),_.collapsed&&a.iter(l.line,p.line+1,function(Z){zr(a,Z)&&_r(Z,0)}),_.clearOnEnter&&pt(_,"beforeCursorEnter",function(){return _.clear()}),_.readOnly&&(oi(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),_.collapsed&&(_.id=++ip,_.atomic=!0),O){if(A&&(O.curOp.updateMaxLine=!0),_.collapsed)Kr(O,l.line,p.line+1);else if(_.className||_.startStyle||_.endStyle||_.css||_.attributes||_.title)for(var $=l.line;$<=p.line;$++)Bo(O,$,"text");_.atomic&&qd(O.doc),Qe(O,"markerAdded",O,_)}return _}var Ja=function(a,l){this.markers=a,this.primary=l;for(var p=0;p<a.length;++p)a[p].parent=this};Ja.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Qe(this,"clear")}},Ja.prototype.find=function(a,l){return this.primary.find(a,l)},Ae(Ja);function Am(a,l,p,d,v){d=yt(d),d.shared=!1;var _=[Ki(a,l,p,d,v)],b=_[0],S=d.widgetNode;return Go(a,function(O){S&&(d.widgetNode=S.cloneNode(!0)),_.push(Ki(O,Ft(O,l),Ft(O,p),d,v));for(var A=0;A<O.linked.length;++A)if(O.linked[A].isParent)return;b=ue(_)}),new Ja(_,b)}function ap(a){return a.findMarks(Mt(a.first,0),a.clipPos(Mt(a.lastLine())),function(l){return l.parent})}function km(a,l){for(var p=0;p<l.length;p++){var d=l[p],v=d.find(),_=a.clipPos(v.from),b=a.clipPos(v.to);if(pe(_,b)){var S=Ki(a,_,b,d.primary,d.primary.type);d.markers.push(S),S.parent=d}}}function Mm(a){for(var l=function(d){var v=a[d],_=[v.primary.doc];Go(v.primary.doc,function(O){return _.push(O)});for(var b=0;b<v.markers.length;b++){var S=v.markers[b];Lt(_,S.doc)==-1&&(S.parent=null,v.markers.splice(b--,1))}},p=0;p<a.length;p++)l(p)}var Dm=0,Gr=function(a,l,p,d,v){if(!(this instanceof Gr))return new Gr(a,l,p,d,v);p==null&&(p=0),Ya.call(this,[new qa([new wr("",null)])]),this.first=p,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=p;var _=Mt(p,0);this.sel=zo(_),this.history=new Qs(null),this.id=++Dm,this.modeOption=l,this.lineSep=d,this.direction=v=="rtl"?"rtl":"ltr",this.extend=!1,typeof a=="string"&&(a=this.splitLines(a)),lc(this,{from:_,to:_,text:a}),Lr(this,zo(_),Ut)};Gr.prototype=T(Ya.prototype,{constructor:Gr,iter:function(a,l,p){p?this.iterN(a-this.first,l-a,p):this.iterN(this.first,this.first+this.size,a)},insert:function(a,l){for(var p=0,d=0;d<l.length;++d)p+=l[d].height;this.insertInner(a-this.first,l,p)},remove:function(a,l){this.removeInner(a-this.first,l)},getValue:function(a){var l=$e(this,this.first,this.first+this.size);return a===!1?l:l.join(a||this.lineSeparator())},setValue:Cr(function(a){var l=Mt(this.first,0),p=this.first+this.size-1;Wi(this,{from:l,to:Mt(p,re(this,p).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&Na(this.cm,0,0),Lr(this,zo(l),Ut)}),replaceRange:function(a,l,p,d){l=Ft(this,l),p=p?Ft(this,p):l,zi(this,a,l,p,d)},getRange:function(a,l,p){var d=yr(this,Ft(this,a),Ft(this,l));return p===!1?d:p===""?d.join(""):d.join(p||this.lineSeparator())},getLine:function(a){var l=this.getLineHandle(a);return l&&l.text},getLineHandle:function(a){if(an(this,a))return re(this,a)},getLineNumber:function(a){return Ee(a)},getLineHandleVisualStart:function(a){return typeof a=="number"&&(a=re(this,a)),qe(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Ft(this,a)},getCursor:function(a){var l=this.sel.primary(),p;return a==null||a=="head"?p=l.head:a=="anchor"?p=l.anchor:a=="end"||a=="to"||a===!1?p=l.to():p=l.from(),p},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Cr(function(a,l,p){Kd(this,Ft(this,typeof a=="number"?Mt(a,l||0):a),null,p)}),setSelection:Cr(function(a,l,p){Kd(this,Ft(this,a),Ft(this,l||a),p)}),extendSelection:Cr(function(a,l,p){el(this,Ft(this,a),l&&Ft(this,l),p)}),extendSelections:Cr(function(a,l){zd(this,Pe(this,a),l)}),extendSelectionsBy:Cr(function(a,l){var p=mt(this.sel.ranges,a);zd(this,Pe(this,p),l)}),setSelections:Cr(function(a,l,p){if(a.length){for(var d=[],v=0;v<a.length;v++)d[v]=new Ve(Ft(this,a[v].anchor),Ft(this,a[v].head||a[v].anchor));l==null&&(l=Math.min(a.length-1,this.sel.primIndex)),Lr(this,Xn(this.cm,d,l),p)}}),addSelection:Cr(function(a,l,p){var d=this.sel.ranges.slice(0);d.push(new Ve(Ft(this,a),Ft(this,l||a))),Lr(this,Xn(this.cm,d,d.length-1),p)}),getSelection:function(a){for(var l=this.sel.ranges,p,d=0;d<l.length;d++){var v=yr(this,l[d].from(),l[d].to());p=p?p.concat(v):v}return a===!1?p:p.join(a||this.lineSeparator())},getSelections:function(a){for(var l=[],p=this.sel.ranges,d=0;d<p.length;d++){var v=yr(this,p[d].from(),p[d].to());a!==!1&&(v=v.join(a||this.lineSeparator())),l[d]=v}return l},replaceSelection:function(a,l,p){for(var d=[],v=0;v<this.sel.ranges.length;v++)d[v]=a;this.replaceSelections(d,l,p||"+input")},replaceSelections:Cr(function(a,l,p){for(var d=[],v=this.sel,_=0;_<v.ranges.length;_++){var b=v.ranges[_];d[_]={from:b.from(),to:b.to(),text:this.splitLines(a[_]),origin:p}}for(var S=l&&l!="end"&&_m(this,d,l),O=d.length-1;O>=0;O--)Wi(this,d[O]);S?Gd(this,S):this.cm&&Ni(this.cm)}),undo:Cr(function(){ol(this,"undo")}),redo:Cr(function(){ol(this,"redo")}),undoSelection:Cr(function(){ol(this,"undo",!0)}),redoSelection:Cr(function(){ol(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,l=0,p=0,d=0;d<a.done.length;d++)a.done[d].ranges||++l;for(var v=0;v<a.undone.length;v++)a.undone[v].ranges||++p;return{undo:l,redo:p}},clearHistory:function(){var a=this;this.history=new Qs(this.history),Go(this,function(l){return l.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Ui(this.history.done),undone:Ui(this.history.undone)}},setHistory:function(a){var l=this.history=new Qs(this.history);l.done=Ui(a.done.slice(0),null,!0),l.undone=Ui(a.undone.slice(0),null,!0)},setGutterMarker:Cr(function(a,l,p){return $a(this,a,"gutter",function(d){var v=d.gutterMarkers||(d.gutterMarkers={});return v[l]=p,!p&&_t(v)&&(d.gutterMarkers=null),!0})}),clearGutter:Cr(function(a){var l=this;this.iter(function(p){p.gutterMarkers&&p.gutterMarkers[a]&&$a(l,p,"gutter",function(){return p.gutterMarkers[a]=null,_t(p.gutterMarkers)&&(p.gutterMarkers=null),!0})})}),lineInfo:function(a){var l;if(typeof a=="number"){if(!an(this,a)||(l=a,a=re(this,a),!a))return null}else if(l=Ee(a),l==null)return null;return{line:l,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:Cr(function(a,l,p){return $a(this,a,l=="gutter"?"gutter":"class",function(d){var v=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass";if(!d[v])d[v]=p;else{if(G(p).test(d[v]))return!1;d[v]+=" "+p}return!0})}),removeLineClass:Cr(function(a,l,p){return $a(this,a,l=="gutter"?"gutter":"class",function(d){var v=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass",_=d[v];if(_)if(p==null)d[v]=null;else{var b=_.match(G(p));if(!b)return!1;var S=b.index+b[0].length;d[v]=_.slice(0,b.index)+(!b.index||S==_.length?"":" ")+_.slice(S)||null}else return!1;return!0})}),addLineWidget:Cr(function(a,l,p){return Em(this,a,l,p)}),removeLineWidget:function(a){a.clear()},markText:function(a,l,p){return Ki(this,Ft(this,a),Ft(this,l),p,p&&p.type||"range")},setBookmark:function(a,l){var p={replacedWith:l&&(l.nodeType==null?l.widget:l),insertLeft:l&&l.insertLeft,clearWhenEmpty:!1,shared:l&&l.shared,handleMouseEvents:l&&l.handleMouseEvents};return a=Ft(this,a),Ki(this,a,a,p,"bookmark")},findMarksAt:function(a){a=Ft(this,a);var l=[],p=re(this,a.line).markedSpans;if(p)for(var d=0;d<p.length;++d){var v=p[d];(v.from==null||v.from<=a.ch)&&(v.to==null||v.to>=a.ch)&&l.push(v.marker.parent||v.marker)}return l},findMarks:function(a,l,p){a=Ft(this,a),l=Ft(this,l);var d=[],v=a.line;return this.iter(a.line,l.line+1,function(_){var b=_.markedSpans;if(b)for(var S=0;S<b.length;S++){var O=b[S];!(O.to!=null&&v==a.line&&a.ch>=O.to||O.from==null&&v!=a.line||O.from!=null&&v==l.line&&O.from>=l.ch)&&(!p||p(O.marker))&&d.push(O.marker.parent||O.marker)}++v}),d},getAllMarks:function(){var a=[];return this.iter(function(l){var p=l.markedSpans;if(p)for(var d=0;d<p.length;++d)p[d].from!=null&&a.push(p[d].marker)}),a},posFromIndex:function(a){var l,p=this.first,d=this.lineSeparator().length;return this.iter(function(v){var _=v.text.length+d;if(_>a)return l=a,!0;a-=_,++p}),Ft(this,Mt(p,l))},indexFromPos:function(a){a=Ft(this,a);var l=a.ch;if(a.line<this.first||a.ch<0)return 0;var p=this.lineSeparator().length;return this.iter(this.first,a.line,function(d){l+=d.text.length+p}),l},copy:function(a){var l=new Gr($e(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return l.scrollTop=this.scrollTop,l.scrollLeft=this.scrollLeft,l.sel=this.sel,l.extend=!1,a&&(l.history.undoDepth=this.history.undoDepth,l.setHistory(this.getHistory())),l},linkedDoc:function(a){a||(a={});var l=this.first,p=this.first+this.size;a.from!=null&&a.from>l&&(l=a.from),a.to!=null&&a.to<p&&(p=a.to);var d=new Gr($e(this,l,p),a.mode||this.modeOption,l,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],km(d,ap(this)),d},unlinkDoc:function(a){if(a instanceof Ye&&(a=a.doc),this.linked)for(var l=0;l<this.linked.length;++l){var p=this.linked[l];if(p.doc==a){this.linked.splice(l,1),a.unlinkDoc(this),Mm(ap(this));break}}if(a.history==this.history){var d=[a.id];Go(a,function(v){return d.push(v.id)},!0),a.history=new Qs(null),a.history.done=Ui(this.history.done,d),a.history.undone=Ui(this.history.undone,d)}},iterLinkedDocs:function(a){Go(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):rr(a)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Cr(function(a){a!="rtl"&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(l){return l.order=null}),this.cm&&wm(this.cm))})}),Gr.prototype.eachLine=Gr.prototype.iter;var sp=0;function Lm(a){var l=this;if(lp(l),!(Gt(l,a)||Nn(l.display,a))){Te(a),u&&(sp=+new Date);var p=li(l,a,!0),d=a.dataTransfer.files;if(!(!p||l.isReadOnly()))if(d&&d.length&&window.FileReader&&window.File)for(var v=d.length,_=Array(v),b=0,S=function(){++b==v&&br(l,function(){p=Ft(l.doc,p);var at={from:p,to:p,text:l.doc.splitLines(_.filter(function(St){return St!=null}).join(l.doc.lineSeparator())),origin:"paste"};Wi(l.doc,at),Gd(l.doc,zo(Ft(l.doc,p),Ft(l.doc,Ko(at))))})()},O=function(at,St){if(l.options.allowDropFileTypes&&Lt(l.options.allowDropFileTypes,at.type)==-1){S();return}var kt=new FileReader;kt.onerror=function(){return S()},kt.onload=function(){var Nt=kt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Nt)){S();return}_[St]=Nt,S()},kt.readAsText(at)},A=0;A<d.length;A++)O(d[A],A);else{if(l.state.draggingText&&l.doc.sel.contains(p)>-1){l.state.draggingText(a),setTimeout(function(){return l.display.input.focus()},20);return}try{var $=a.dataTransfer.getData("Text");if($){var Z;if(l.state.draggingText&&!l.state.draggingText.copy&&(Z=l.listSelections()),rl(l.doc,zo(p,p)),Z)for(var ft=0;ft<Z.length;++ft)zi(l.doc,"",Z[ft].anchor,Z[ft].head,"drag");l.replaceSelection($,"around","paste"),l.display.input.focus()}}catch{}}}}function Im(a,l){if(u&&(!a.state.draggingText||+new Date-sp<100)){F(l);return}if(!(Gt(a,l)||Nn(a.display,l))&&(l.dataTransfer.setData("Text",a.getSelection()),l.dataTransfer.effectAllowed="copyMove",l.dataTransfer.setDragImage&&!y)){var p=Y("img",null,null,"position: fixed; left: 0; top: 0;");p.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",m&&(p.width=p.height=1,a.display.wrapper.appendChild(p),p._top=p.offsetTop),l.dataTransfer.setDragImage(p,0,0),m&&p.parentNode.removeChild(p)}}function jm(a,l){var p=li(a,l);if(p){var d=document.createDocumentFragment();bd(a,p,d),a.display.dragCursor||(a.display.dragCursor=Y("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),D(a.display.dragCursor,d)}}function lp(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function up(a){if(document.getElementsByClassName){for(var l=document.getElementsByClassName("CodeMirror"),p=[],d=0;d<l.length;d++){var v=l[d].CodeMirror;v&&p.push(v)}p.length&&p[0].operation(function(){for(var _=0;_<p.length;_++)a(p[_])})}}var cp=!1;function Rm(){cp||(Vm(),cp=!0)}function Vm(){var a;pt(window,"resize",function(){a==null&&(a=setTimeout(function(){a=null,up(Fm)},100))}),pt(window,"blur",function(){return up(Fi)})}function Fm(a){var l=a.display;l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.scrollbarsClipped=!1,a.setSize()}for(var qo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Za=0;Za<10;Za++)qo[Za+48]=qo[Za+96]=String(Za);for(var il=65;il<=90;il++)qo[il]=String.fromCharCode(il);for(var Qa=1;Qa<=12;Qa++)qo[Qa+111]=qo[Qa+63235]="F"+Qa;var _o={};_o.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},_o.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},_o.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},_o.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},_o.default=L?_o.macDefault:_o.pcDefault;function Nm(a){var l=a.split(/-(?!$)/);a=l[l.length-1];for(var p,d,v,_,b=0;b<l.length-1;b++){var S=l[b];if(/^(cmd|meta|m)$/i.test(S))_=!0;else if(/^a(lt)?$/i.test(S))p=!0;else if(/^(c|ctrl|control)$/i.test(S))d=!0;else if(/^s(hift)?$/i.test(S))v=!0;else throw new Error("Unrecognized modifier name: "+S)}return p&&(a="Alt-"+a),d&&(a="Ctrl-"+a),_&&(a="Cmd-"+a),v&&(a="Shift-"+a),a}function Hm(a){var l={};for(var p in a)if(a.hasOwnProperty(p)){var d=a[p];if(/^(name|fallthrough|(de|at)tach)$/.test(p))continue;if(d=="..."){delete a[p];continue}for(var v=mt(p.split(" "),Nm),_=0;_<v.length;_++){var b=void 0,S=void 0;_==v.length-1?(S=v.join(" "),b=d):(S=v.slice(0,_+1).join(" "),b="...");var O=l[S];if(!O)l[S]=b;else if(O!=b)throw new Error("Inconsistent bindings for "+S)}delete a[p]}for(var A in l)a[A]=l[A];return a}function Gi(a,l,p,d){l=al(l);var v=l.call?l.call(a,d):l[a];if(v===!1)return"nothing";if(v==="...")return"multi";if(v!=null&&p(v))return"handled";if(l.fallthrough){if(Object.prototype.toString.call(l.fallthrough)!="[object Array]")return Gi(a,l.fallthrough,p,d);for(var _=0;_<l.fallthrough.length;_++){var b=Gi(a,l.fallthrough[_],p,d);if(b)return b}}}function fp(a){var l=typeof a=="string"?a:qo[a.keyCode];return l=="Ctrl"||l=="Alt"||l=="Shift"||l=="Mod"}function dp(a,l,p){var d=a;return l.altKey&&d!="Alt"&&(a="Alt-"+a),(vt?l.metaKey:l.ctrlKey)&&d!="Ctrl"&&(a="Ctrl-"+a),(vt?l.ctrlKey:l.metaKey)&&d!="Mod"&&(a="Cmd-"+a),!p&&l.shiftKey&&d!="Shift"&&(a="Shift-"+a),a}function pp(a,l){if(m&&a.keyCode==34&&a.char)return!1;var p=qo[a.keyCode];return p==null||a.altGraphKey?!1:(a.keyCode==3&&a.code&&(p=a.code),dp(p,a,l))}function al(a){return typeof a=="string"?_o[a]:a}function $i(a,l){for(var p=a.doc.sel.ranges,d=[],v=0;v<p.length;v++){for(var _=l(p[v]);d.length&&pe(_.from,ue(d).to)<=0;){var b=d.pop();if(pe(b.from,_.from)<0){_.from=b.from;break}}d.push(_)}cn(a,function(){for(var S=d.length-1;S>=0;S--)zi(a.doc,"",d[S].from,d[S].to,"+delete");Ni(a)})}function dc(a,l,p){var d=st(a.text,l+p,p);return d<0||d>a.text.length?null:d}function pc(a,l,p){var d=dc(a,l.ch,p);return d==null?null:new Mt(l.line,d,p<0?"after":"before")}function hc(a,l,p,d,v){if(a){l.doc.direction=="rtl"&&(v=-v);var _=R(p,l.doc.direction);if(_){var b=v<0?ue(_):_[0],S=v<0==(b.level==1),O=S?"after":"before",A;if(b.level>0||l.doc.direction=="rtl"){var $=Tt(l,p);A=v<0?p.text.length-1:0;var Z=Bt(l,$,A).top;A=ie(function(ft){return Bt(l,$,ft).top==Z},v<0==(b.level==1)?b.from:b.to-1,A),O=="before"&&(A=dc(p,A,1))}else A=v<0?b.to:b.from;return new Mt(d,A,O)}}return new Mt(d,v<0?p.text.length:0,v<0?"before":"after")}function Um(a,l,p,d){var v=R(l,a.doc.direction);if(!v)return pc(l,p,d);p.ch>=l.text.length?(p.ch=l.text.length,p.sticky="before"):p.ch<=0&&(p.ch=0,p.sticky="after");var _=B(v,p.ch,p.sticky),b=v[_];if(a.doc.direction=="ltr"&&b.level%2==0&&(d>0?b.to>p.ch:b.from<p.ch))return pc(l,p,d);var S=function($t,te){return dc(l,$t instanceof Mt?$t.ch:$t,te)},O,A=function($t){return a.options.lineWrapping?(O=O||Tt(a,l),md(a,l,O,$t)):{begin:0,end:l.text.length}},$=A(p.sticky=="before"?S(p,-1):p.ch);if(a.doc.direction=="rtl"||b.level==1){var Z=b.level==1==d<0,ft=S(p,Z?1:-1);if(ft!=null&&(Z?ft<=b.to&&ft<=$.end:ft>=b.from&&ft>=$.begin)){var at=Z?"before":"after";return new Mt(p.line,ft,at)}}var St=function($t,te,qt){for(var ne=function(Ue,Sr){return Sr?new Mt(p.line,S(Ue,1),"before"):new Mt(p.line,Ue,"after")};$t>=0&&$t<v.length;$t+=te){var he=v[$t],de=te>0==(he.level!=1),Oe=de?qt.begin:S(qt.end,-1);if(he.from<=Oe&&Oe<he.to||(Oe=de?he.from:S(he.to,-1),qt.begin<=Oe&&Oe<qt.end))return ne(Oe,de)}},kt=St(_+d,d,$);if(kt)return kt;var Nt=d>0?$.end:S($.begin,-1);return Nt!=null&&!(d>0&&Nt==l.text.length)&&(kt=St(d>0?0:v.length-1,d,A(Nt)),kt)?kt:null}var ts={selectAll:Jd,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Ut)},killLine:function(a){return $i(a,function(l){if(l.empty()){var p=re(a.doc,l.head.line).text.length;return l.head.ch==p&&l.head.line<a.lastLine()?{from:l.head,to:Mt(l.head.line+1,0)}:{from:l.head,to:Mt(l.head.line,p)}}else return{from:l.from(),to:l.to()}})},deleteLine:function(a){return $i(a,function(l){return{from:Mt(l.from().line,0),to:Ft(a.doc,Mt(l.to().line+1,0))}})},delLineLeft:function(a){return $i(a,function(l){return{from:Mt(l.from().line,0),to:l.from()}})},delWrappedLineLeft:function(a){return $i(a,function(l){var p=a.charCoords(l.head,"div").top+5,d=a.coordsChar({left:0,top:p},"div");return{from:d,to:l.from()}})},delWrappedLineRight:function(a){return $i(a,function(l){var p=a.charCoords(l.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:p},"div");return{from:l.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(Mt(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(Mt(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(l){return hp(a,l.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(l){return vp(a,l.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(l){return Bm(a,l.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(l){var p=a.cursorCoords(l.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:p},"div")},se)},goLineLeft:function(a){return a.extendSelectionsBy(function(l){var p=a.cursorCoords(l.head,"div").top+5;return a.coordsChar({left:0,top:p},"div")},se)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(l){var p=a.cursorCoords(l.head,"div").top+5,d=a.coordsChar({left:0,top:p},"div");return d.ch<a.getLine(d.line).search(/\S/)?vp(a,l.head):d},se)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"codepoint")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var l=[],p=a.listSelections(),d=a.options.tabSize,v=0;v<p.length;v++){var _=p[v].from(),b=Ct(a.getLine(_.line),_.ch,d);l.push(xe(d-b%d))}a.replaceSelections(l)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return cn(a,function(){for(var l=a.listSelections(),p=[],d=0;d<l.length;d++)if(l[d].empty()){var v=l[d].head,_=re(a.doc,v.line).text;if(_){if(v.ch==_.length&&(v=new Mt(v.line,v.ch-1)),v.ch>0)v=new Mt(v.line,v.ch+1),a.replaceRange(_.charAt(v.ch-1)+_.charAt(v.ch-2),Mt(v.line,v.ch-2),v,"+transpose");else if(v.line>a.doc.first){var b=re(a.doc,v.line-1).text;b&&(v=new Mt(v.line,1),a.replaceRange(_.charAt(0)+a.doc.lineSeparator()+b.charAt(b.length-1),Mt(v.line-1,b.length-1),v,"+transpose"))}}p.push(new Ve(v,v))}a.setSelections(p)})},newlineAndIndent:function(a){return cn(a,function(){for(var l=a.listSelections(),p=l.length-1;p>=0;p--)a.replaceRange(a.doc.lineSeparator(),l[p].anchor,l[p].head,"+input");l=a.listSelections();for(var d=0;d<l.length;d++)a.indentLine(l[d].from().line,null,!0);Ni(a)})},openLine:function(a){return a.replaceSelection(`
`,"start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function hp(a,l){var p=re(a.doc,l),d=qe(p);return d!=p&&(l=Ee(d)),hc(!0,a,d,l,1)}function Bm(a,l){var p=re(a.doc,l),d=ur(p);return d!=p&&(l=Ee(d)),hc(!0,a,p,l,-1)}function vp(a,l){var p=hp(a,l.line),d=re(a.doc,p.line),v=R(d,a.doc.direction);if(!v||v[0].level==0){var _=Math.max(p.ch,d.text.search(/\S/)),b=l.line==p.line&&l.ch<=_&&l.ch;return Mt(p.line,b?0:_,p.sticky)}return p}function sl(a,l,p){if(typeof l=="string"&&(l=ts[l],!l))return!1;a.display.input.ensurePolled();var d=a.display.shift,v=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),p&&(a.display.shift=!1),v=l(a)!=Dt}finally{a.display.shift=d,a.state.suppressEdits=!1}return v}function Wm(a,l,p){for(var d=0;d<a.state.keyMaps.length;d++){var v=Gi(l,a.state.keyMaps[d],p,a);if(v)return v}return a.options.extraKeys&&Gi(l,a.options.extraKeys,p,a)||Gi(l,a.options.keyMap,p,a)}var zm=new bt;function es(a,l,p,d){var v=a.state.keySeq;if(v){if(fp(l))return"handled";if(/\'$/.test(l)?a.state.keySeq=null:zm.set(50,function(){a.state.keySeq==v&&(a.state.keySeq=null,a.display.input.reset())}),gp(a,v+" "+l,p,d))return!0}return gp(a,l,p,d)}function gp(a,l,p,d){var v=Wm(a,l,d);return v=="multi"&&(a.state.keySeq=l),v=="handled"&&Qe(a,"keyHandled",a,l,p),(v=="handled"||v=="multi")&&(Te(p),Xu(a)),!!v}function mp(a,l){var p=pp(l,!0);return p?l.shiftKey&&!a.state.keySeq?es(a,"Shift-"+p,l,function(d){return sl(a,d,!0)})||es(a,p,l,function(d){if(typeof d=="string"?/^go[A-Z]/.test(d):d.motion)return sl(a,d)}):es(a,p,l,function(d){return sl(a,d)}):!1}function Km(a,l,p){return es(a,"'"+p+"'",l,function(d){return sl(a,d,!0)})}var vc=null;function yp(a){var l=this;if(!(a.target&&a.target!=l.display.input.getField())&&(l.curOp.focus=wt(),!Gt(l,a))){u&&f<11&&a.keyCode==27&&(a.returnValue=!1);var p=a.keyCode;l.display.shift=p==16||a.shiftKey;var d=mp(l,a);m&&(vc=d?p:null,!d&&p==88&&!bn&&(L?a.metaKey:a.ctrlKey)&&l.replaceSelection("",null,"cut")),e&&!L&&!d&&p==46&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut"),p==18&&!/\bCodeMirror-crosshair\b/.test(l.display.lineDiv.className)&&Gm(l)}}function Gm(a){var l=a.display.lineDiv;gt(l,"CodeMirror-crosshair");function p(d){(d.keyCode==18||!d.altKey)&&(W(l,"CodeMirror-crosshair"),Jt(document,"keyup",p),Jt(document,"mouseover",p))}pt(document,"keyup",p),pt(document,"mouseover",p)}function _p(a){a.keyCode==16&&(this.doc.sel.shift=!1),Gt(this,a)}function wp(a){var l=this;if(!(a.target&&a.target!=l.display.input.getField())&&!(Nn(l.display,a)||Gt(l,a)||a.ctrlKey&&!a.altKey||L&&a.metaKey)){var p=a.keyCode,d=a.charCode;if(m&&p==vc){vc=null,Te(a);return}if(!(m&&(!a.which||a.which<10)&&mp(l,a))){var v=String.fromCharCode(d??p);v!="\b"&&(Km(l,a,v)||l.display.input.onKeyPress(a))}}}var $m=400,gc=function(a,l,p){this.time=a,this.pos=l,this.button=p};gc.prototype.compare=function(a,l,p){return this.time+$m>a&&pe(l,this.pos)==0&&p==this.button};var rs,ns;function qm(a,l){var p=+new Date;return ns&&ns.compare(p,a,l)?(rs=ns=null,"triple"):rs&&rs.compare(p,a,l)?(ns=new gc(p,a,l),rs=null,"double"):(rs=new gc(p,a,l),ns=null,"single")}function bp(a){var l=this,p=l.display;if(!(Gt(l,a)||p.activeTouch&&p.input.supportsTouch())){if(p.input.ensurePolled(),p.shift=a.shiftKey,Nn(p,a)){c||(p.scroller.draggable=!1,setTimeout(function(){return p.scroller.draggable=!0},100));return}if(!mc(l,a)){var d=li(l,a),v=lt(a),_=d?qm(d,v):"single";window.focus(),v==1&&l.state.selectingText&&l.state.selectingText(a),!(d&&Ym(l,v,d,_,a))&&(v==1?d?Jm(l,d,_,a):Q(a)==p.scroller&&Te(a):v==2?(d&&el(l.doc,d),setTimeout(function(){return p.input.focus()},20)):v==3&&(et?l.display.input.onContextMenu(a):Ju(l)))}}}function Ym(a,l,p,d,v){var _="Click";return d=="double"?_="Double"+_:d=="triple"&&(_="Triple"+_),_=(l==1?"Left":l==2?"Middle":"Right")+_,es(a,dp(_,v),v,function(b){if(typeof b=="string"&&(b=ts[b]),!b)return!1;var S=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),S=b(a,p)!=Dt}finally{a.state.suppressEdits=!1}return S})}function Xm(a,l,p){var d=a.getOption("configureMouse"),v=d?d(a,l,p):{};if(v.unit==null){var _=H?p.shiftKey&&p.metaKey:p.altKey;v.unit=_?"rectangle":l=="single"?"char":l=="double"?"word":"line"}return(v.extend==null||a.doc.extend)&&(v.extend=a.doc.extend||p.shiftKey),v.addNew==null&&(v.addNew=L?p.metaKey:p.ctrlKey),v.moveOnDrag==null&&(v.moveOnDrag=!(L?p.altKey:p.ctrlKey)),v}function Jm(a,l,p,d){u?setTimeout(oe(Cd,a),0):a.curOp.focus=wt();var v=Xm(a,p,d),_=a.doc.sel,b;a.options.dragDrop&&Pt&&!a.isReadOnly()&&p=="single"&&(b=_.contains(l))>-1&&(pe((b=_.ranges[b]).from(),l)<0||l.xRel>0)&&(pe(b.to(),l)>0||l.xRel<0)?Zm(a,d,l,v):Qm(a,d,l,v)}function Zm(a,l,p,d){var v=a.display,_=!1,b=br(a,function(A){c&&(v.scroller.draggable=!1),a.state.draggingText=!1,a.state.delayingBlurEvent&&(a.hasFocus()?a.state.delayingBlurEvent=!1:Ju(a)),Jt(v.wrapper.ownerDocument,"mouseup",b),Jt(v.wrapper.ownerDocument,"mousemove",S),Jt(v.scroller,"dragstart",O),Jt(v.scroller,"drop",b),_||(Te(A),d.addNew||el(a.doc,p,null,null,d.extend),c&&!y||u&&f==9?setTimeout(function(){v.wrapper.ownerDocument.body.focus({preventScroll:!0}),v.input.focus()},20):v.input.focus())}),S=function(A){_=_||Math.abs(l.clientX-A.clientX)+Math.abs(l.clientY-A.clientY)>=10},O=function(){return _=!0};c&&(v.scroller.draggable=!0),a.state.draggingText=b,b.copy=!d.moveOnDrag,pt(v.wrapper.ownerDocument,"mouseup",b),pt(v.wrapper.ownerDocument,"mousemove",S),pt(v.scroller,"dragstart",O),pt(v.scroller,"drop",b),a.state.delayingBlurEvent=!0,setTimeout(function(){return v.input.focus()},20),v.scroller.dragDrop&&v.scroller.dragDrop()}function Cp(a,l,p){if(p=="char")return new Ve(l,l);if(p=="word")return a.findWordAt(l);if(p=="line")return new Ve(Mt(l.line,0),Ft(a.doc,Mt(l.line+1,0)));var d=p(a,l);return new Ve(d.from,d.to)}function Qm(a,l,p,d){u&&Ju(a);var v=a.display,_=a.doc;Te(l);var b,S,O=_.sel,A=O.ranges;if(d.addNew&&!d.extend?(S=_.sel.contains(p),S>-1?b=A[S]:b=new Ve(p,p)):(b=_.sel.primary(),S=_.sel.primIndex),d.unit=="rectangle")d.addNew||(b=new Ve(p,p)),p=li(a,l,!0,!0),S=-1;else{var $=Cp(a,p,d.unit);d.extend?b=cc(b,$.anchor,$.head,d.extend):b=$}d.addNew?S==-1?(S=A.length,Lr(_,Xn(a,A.concat([b]),S),{scroll:!1,origin:"*mouse"})):A.length>1&&A[S].empty()&&d.unit=="char"&&!d.extend?(Lr(_,Xn(a,A.slice(0,S).concat(A.slice(S+1)),0),{scroll:!1,origin:"*mouse"}),O=_.sel):fc(_,S,b,Yt):(S=0,Lr(_,new An([b],0),Yt),O=_.sel);var Z=p;function ft(qt){if(pe(Z,qt)!=0)if(Z=qt,d.unit=="rectangle"){for(var ne=[],he=a.options.tabSize,de=Ct(re(_,p.line).text,p.ch,he),Oe=Ct(re(_,qt.line).text,qt.ch,he),Ue=Math.min(de,Oe),Sr=Math.max(de,Oe),Ze=Math.min(p.line,qt.line),fn=Math.min(a.lastLine(),Math.max(p.line,qt.line));Ze<=fn;Ze++){var $r=re(_,Ze).text,cr=Xt($r,Ue,he);Ue==Sr?ne.push(new Ve(Mt(Ze,cr),Mt(Ze,cr))):$r.length>cr&&ne.push(new Ve(Mt(Ze,cr),Mt(Ze,Xt($r,Sr,he))))}ne.length||ne.push(new Ve(p,p)),Lr(_,Xn(a,O.ranges.slice(0,S).concat(ne),S),{origin:"*mouse",scroll:!1}),a.scrollIntoView(qt)}else{var qr=b,Pr=Cp(a,qt,d.unit),mr=qr.anchor,fr;pe(Pr.anchor,mr)>0?(fr=Pr.head,mr=xt(qr.from(),Pr.anchor)):(fr=Pr.anchor,mr=X(qr.to(),Pr.head));var tr=O.ranges.slice(0);tr[S]=ty(a,new Ve(Ft(_,mr),fr)),Lr(_,Xn(a,tr,S),Yt)}}var at=v.wrapper.getBoundingClientRect(),St=0;function kt(qt){var ne=++St,he=li(a,qt,!0,d.unit=="rectangle");if(he)if(pe(he,Z)!=0){a.curOp.focus=wt(),ft(he);var de=Ys(v,_);(he.line>=de.to||he.line<de.from)&&setTimeout(br(a,function(){St==ne&&kt(qt)}),150)}else{var Oe=qt.clientY<at.top?-20:qt.clientY>at.bottom?20:0;Oe&&setTimeout(br(a,function(){St==ne&&(v.scroller.scrollTop+=Oe,kt(qt))}),50)}}function Nt(qt){a.state.selectingText=!1,St=1/0,qt&&(Te(qt),v.input.focus()),Jt(v.wrapper.ownerDocument,"mousemove",$t),Jt(v.wrapper.ownerDocument,"mouseup",te),_.history.lastSelOrigin=null}var $t=br(a,function(qt){qt.buttons===0||!lt(qt)?Nt(qt):kt(qt)}),te=br(a,Nt);a.state.selectingText=te,pt(v.wrapper.ownerDocument,"mousemove",$t),pt(v.wrapper.ownerDocument,"mouseup",te)}function ty(a,l){var p=l.anchor,d=l.head,v=re(a.doc,p.line);if(pe(p,d)==0&&p.sticky==d.sticky)return l;var _=R(v);if(!_)return l;var b=B(_,p.ch,p.sticky),S=_[b];if(S.from!=p.ch&&S.to!=p.ch)return l;var O=b+(S.from==p.ch==(S.level!=1)?0:1);if(O==0||O==_.length)return l;var A;if(d.line!=p.line)A=(d.line-p.line)*(a.doc.direction=="ltr"?1:-1)>0;else{var $=B(_,d.ch,d.sticky),Z=$-b||(d.ch-p.ch)*(S.level==1?-1:1);$==O-1||$==O?A=Z<0:A=Z>0}var ft=_[O+(A?-1:0)],at=A==(ft.level==1),St=at?ft.from:ft.to,kt=at?"after":"before";return p.ch==St&&p.sticky==kt?l:new Ve(new Mt(p.line,St,kt),d)}function Sp(a,l,p,d){var v,_;if(l.touches)v=l.touches[0].clientX,_=l.touches[0].clientY;else try{v=l.clientX,_=l.clientY}catch{return!1}if(v>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Te(l);var b=a.display,S=b.lineDiv.getBoundingClientRect();if(_>S.bottom||!Se(a,p))return pr(l);_-=S.top-b.viewOffset;for(var O=0;O<a.display.gutterSpecs.length;++O){var A=b.gutters.childNodes[O];if(A&&A.getBoundingClientRect().right>=v){var $=Ne(a.doc,_),Z=a.display.gutterSpecs[O];return Zt(a,p,a,$,Z.className,l),pr(l)}}}function mc(a,l){return Sp(a,l,"gutterClick",!0)}function xp(a,l){Nn(a.display,l)||ey(a,l)||Gt(a,l,"contextmenu")||et||a.display.input.onContextMenu(l)}function ey(a,l){return Se(a,"gutterContextMenu")?Sp(a,l,"gutterContextMenu",!1):!1}function Op(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Va(a)}var qi={toString:function(){return"CodeMirror.Init"}},Tp={},ll={};function ry(a){var l=a.optionHandlers;function p(d,v,_,b){a.defaults[d]=v,_&&(l[d]=b?function(S,O,A){A!=qi&&_(S,O,A)}:_)}a.defineOption=p,a.Init=qi,p("value","",function(d,v){return d.setValue(v)},!0),p("mode",null,function(d,v){d.doc.modeOption=v,sc(d)},!0),p("indentUnit",2,sc,!0),p("indentWithTabs",!1),p("smartIndent",!0),p("tabSize",4,function(d){Ka(d),Va(d),Kr(d)},!0),p("lineSeparator",null,function(d,v){if(d.doc.lineSep=v,!!v){var _=[],b=d.doc.first;d.doc.iter(function(O){for(var A=0;;){var $=O.text.indexOf(v,A);if($==-1)break;A=$+v.length,_.push(Mt(b,$))}b++});for(var S=_.length-1;S>=0;S--)zi(d.doc,v,_[S],Mt(_[S].line,_[S].ch+v.length))}}),p("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(d,v,_){d.state.specialChars=new RegExp(v.source+(v.test("	")?"":"|	"),"g"),_!=qi&&d.refresh()}),p("specialCharPlaceholder",Ls,function(d){return d.refresh()},!0),p("electricChars",!0),p("inputStyle",N?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),p("spellcheck",!1,function(d,v){return d.getInputField().spellcheck=v},!0),p("autocorrect",!1,function(d,v){return d.getInputField().autocorrect=v},!0),p("autocapitalize",!1,function(d,v){return d.getInputField().autocapitalize=v},!0),p("rtlMoveVisually",!rt),p("wholeLineUpdateBefore",!0),p("theme","default",function(d){Op(d),za(d)},!0),p("keyMap","default",function(d,v,_){var b=al(v),S=_!=qi&&al(_);S&&S.detach&&S.detach(d,b),b.attach&&b.attach(d,S||null)}),p("extraKeys",null),p("configureMouse",null),p("lineWrapping",!1,oy,!0),p("gutters",[],function(d,v){d.display.gutterSpecs=ic(v,d.options.lineNumbers),za(d)},!0),p("fixedGutter",!0,function(d,v){d.display.gutters.style.left=v?qu(d.display)+"px":"0",d.refresh()},!0),p("coverGutterNextToScrollbar",!1,function(d){return Hi(d)},!0),p("scrollbarStyle","native",function(d){Ed(d),Hi(d),d.display.scrollbars.setScrollTop(d.doc.scrollTop),d.display.scrollbars.setScrollLeft(d.doc.scrollLeft)},!0),p("lineNumbers",!1,function(d,v){d.display.gutterSpecs=ic(d.options.gutters,v),za(d)},!0),p("firstLineNumber",1,za,!0),p("lineNumberFormatter",function(d){return d},za,!0),p("showCursorWhenSelecting",!1,Fa,!0),p("resetSelectionOnContextMenu",!0),p("lineWiseCopyCut",!0),p("pasteLinesPerSelection",!0),p("selectionsMayTouch",!1),p("readOnly",!1,function(d,v){v=="nocursor"&&(Fi(d),d.display.input.blur()),d.display.input.readOnlyChanged(v)}),p("screenReaderLabel",null,function(d,v){v=v===""?null:v,d.display.input.screenReaderLabelChanged(v)}),p("disableInput",!1,function(d,v){v||d.display.input.reset()},!0),p("dragDrop",!0,ny),p("allowDropFileTypes",null),p("cursorBlinkRate",530),p("cursorScrollMargin",0),p("cursorHeight",1,Fa,!0),p("singleCursorHeightPerLine",!0,Fa,!0),p("workTime",100),p("workDelay",100),p("flattenSpans",!0,Ka,!0),p("addModeClass",!1,Ka,!0),p("pollInterval",100),p("undoDepth",200,function(d,v){return d.doc.history.undoDepth=v}),p("historyEventDelay",1250),p("viewportMargin",10,function(d){return d.refresh()},!0),p("maxHighlightLength",1e4,Ka,!0),p("moveInputWithCursor",!0,function(d,v){v||d.display.input.resetPosition()}),p("tabindex",null,function(d,v){return d.display.input.getField().tabIndex=v||""}),p("autofocus",null),p("direction","ltr",function(d,v){return d.doc.setDirection(v)},!0),p("phrases",null)}function ny(a,l,p){var d=p&&p!=qi;if(!l!=!d){var v=a.display.dragFunctions,_=l?pt:Jt;_(a.display.scroller,"dragstart",v.start),_(a.display.scroller,"dragenter",v.enter),_(a.display.scroller,"dragover",v.over),_(a.display.scroller,"dragleave",v.leave),_(a.display.scroller,"drop",v.drop)}}function oy(a){a.options.lineWrapping?(gt(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(W(a.display.wrapper,"CodeMirror-wrap"),Io(a)),Yu(a),Kr(a),Va(a),setTimeout(function(){return Hi(a)},100)}function Ye(a,l){var p=this;if(!(this instanceof Ye))return new Ye(a,l);this.options=l=l?yt(l):{},yt(Tp,l,!1);var d=l.value;typeof d=="string"?d=new Gr(d,l.mode,null,l.lineSeparator,l.direction):l.mode&&(d.modeOption=l.mode),this.doc=d;var v=new Ye.inputStyles[l.inputStyle](this),_=this.display=new mm(a,d,v,l);_.wrapper.CodeMirror=this,Op(this),l.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ed(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new bt,keySeq:null,specialChars:null},l.autofocus&&!N&&_.input.focus(),u&&f<11&&setTimeout(function(){return p.display.input.reset(!0)},20),iy(this),Rm(),di(this),this.curOp.forceUpdate=!0,Fd(this,d),l.autofocus&&!N||this.hasFocus()?setTimeout(function(){p.hasFocus()&&!p.state.focused&&Zu(p)},20):Fi(this);for(var b in ll)ll.hasOwnProperty(b)&&ll[b](this,l[b],qi);Md(this),l.finishInit&&l.finishInit(this);for(var S=0;S<yc.length;++S)yc[S](this);pi(this),c&&l.lineWrapping&&getComputedStyle(_.lineDiv).textRendering=="optimizelegibility"&&(_.lineDiv.style.textRendering="auto")}Ye.defaults=Tp,Ye.optionHandlers=ll;function iy(a){var l=a.display;pt(l.scroller,"mousedown",br(a,bp)),u&&f<11?pt(l.scroller,"dblclick",br(a,function(O){if(!Gt(a,O)){var A=li(a,O);if(!(!A||mc(a,O)||Nn(a.display,O))){Te(O);var $=a.findWordAt(A);el(a.doc,$.anchor,$.head)}}})):pt(l.scroller,"dblclick",function(O){return Gt(a,O)||Te(O)}),pt(l.scroller,"contextmenu",function(O){return xp(a,O)}),pt(l.input.getField(),"contextmenu",function(O){l.scroller.contains(O.target)||xp(a,O)});var p,d={end:0};function v(){l.activeTouch&&(p=setTimeout(function(){return l.activeTouch=null},1e3),d=l.activeTouch,d.end=+new Date)}function _(O){if(O.touches.length!=1)return!1;var A=O.touches[0];return A.radiusX<=1&&A.radiusY<=1}function b(O,A){if(A.left==null)return!0;var $=A.left-O.left,Z=A.top-O.top;return $*$+Z*Z>400}pt(l.scroller,"touchstart",function(O){if(!Gt(a,O)&&!_(O)&&!mc(a,O)){l.input.ensurePolled(),clearTimeout(p);var A=+new Date;l.activeTouch={start:A,moved:!1,prev:A-d.end<=300?d:null},O.touches.length==1&&(l.activeTouch.left=O.touches[0].pageX,l.activeTouch.top=O.touches[0].pageY)}}),pt(l.scroller,"touchmove",function(){l.activeTouch&&(l.activeTouch.moved=!0)}),pt(l.scroller,"touchend",function(O){var A=l.activeTouch;if(A&&!Nn(l,O)&&A.left!=null&&!A.moved&&new Date-A.start<300){var $=a.coordsChar(l.activeTouch,"page"),Z;!A.prev||b(A,A.prev)?Z=new Ve($,$):!A.prev.prev||b(A,A.prev.prev)?Z=a.findWordAt($):Z=new Ve(Mt($.line,0),Ft(a.doc,Mt($.line+1,0))),a.setSelection(Z.anchor,Z.head),a.focus(),Te(O)}v()}),pt(l.scroller,"touchcancel",v),pt(l.scroller,"scroll",function(){l.scroller.clientHeight&&(Ha(a,l.scroller.scrollTop),ci(a,l.scroller.scrollLeft,!0),Zt(a,"scroll",a))}),pt(l.scroller,"mousewheel",function(O){return Id(a,O)}),pt(l.scroller,"DOMMouseScroll",function(O){return Id(a,O)}),pt(l.wrapper,"scroll",function(){return l.wrapper.scrollTop=l.wrapper.scrollLeft=0}),l.dragFunctions={enter:function(O){Gt(a,O)||F(O)},over:function(O){Gt(a,O)||(jm(a,O),F(O))},start:function(O){return Im(a,O)},drop:br(a,Lm),leave:function(O){Gt(a,O)||lp(a)}};var S=l.input.getField();pt(S,"keyup",function(O){return _p.call(a,O)}),pt(S,"keydown",br(a,yp)),pt(S,"keypress",br(a,wp)),pt(S,"focus",function(O){return Zu(a,O)}),pt(S,"blur",function(O){return Fi(a,O)})}var yc=[];Ye.defineInitHook=function(a){return yc.push(a)};function os(a,l,p,d){var v=a.doc,_;p==null&&(p="add"),p=="smart"&&(v.mode.indent?_=lo(a,l).state:p="prev");var b=a.options.tabSize,S=re(v,l),O=Ct(S.text,null,b);S.stateAfter&&(S.stateAfter=null);var A=S.text.match(/^\s*/)[0],$;if(!d&&!/\S/.test(S.text))$=0,p="not";else if(p=="smart"&&($=v.mode.indent(_,S.text.slice(A.length),S.text),$==Dt||$>150)){if(!d)return;p="prev"}p=="prev"?l>v.first?$=Ct(re(v,l-1).text,null,b):$=0:p=="add"?$=O+a.options.indentUnit:p=="subtract"?$=O-a.options.indentUnit:typeof p=="number"&&($=O+p),$=Math.max(0,$);var Z="",ft=0;if(a.options.indentWithTabs)for(var at=Math.floor($/b);at;--at)ft+=b,Z+="	";if(ft<$&&(Z+=xe($-ft)),Z!=A)return zi(v,Z,Mt(l,0),Mt(l,A.length),"+input"),S.stateAfter=null,!0;for(var St=0;St<v.sel.ranges.length;St++){var kt=v.sel.ranges[St];if(kt.head.line==l&&kt.head.ch<A.length){var Nt=Mt(l,A.length);fc(v,St,new Ve(Nt,Nt));break}}}var Jn=null;function ul(a){Jn=a}function _c(a,l,p,d,v){var _=a.doc;a.display.shift=!1,d||(d=_.sel);var b=+new Date-200,S=v=="paste"||a.state.pasteIncoming>b,O=rr(l),A=null;if(S&&d.ranges.length>1)if(Jn&&Jn.text.join(`
`)==l){if(d.ranges.length%Jn.text.length==0){A=[];for(var $=0;$<Jn.text.length;$++)A.push(_.splitLines(Jn.text[$]))}}else O.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(A=mt(O,function($t){return[$t]}));for(var Z=a.curOp.updateInput,ft=d.ranges.length-1;ft>=0;ft--){var at=d.ranges[ft],St=at.from(),kt=at.to();at.empty()&&(p&&p>0?St=Mt(St.line,St.ch-p):a.state.overwrite&&!S?kt=Mt(kt.line,Math.min(re(_,kt.line).text.length,kt.ch+ue(O).length)):S&&Jn&&Jn.lineWise&&Jn.text.join(`
`)==O.join(`
`)&&(St=kt=Mt(St.line,0)));var Nt={from:St,to:kt,text:A?A[ft%A.length]:O,origin:v||(S?"paste":a.state.cutIncoming>b?"cut":"+input")};Wi(a.doc,Nt),Qe(a,"inputRead",a,Nt)}l&&!S&&Ep(a,l),Ni(a),a.curOp.updateInput<2&&(a.curOp.updateInput=Z),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function Pp(a,l){var p=a.clipboardData&&a.clipboardData.getData("Text");if(p)return a.preventDefault(),!l.isReadOnly()&&!l.options.disableInput&&cn(l,function(){return _c(l,p,0,null,"paste")}),!0}function Ep(a,l){if(!(!a.options.electricChars||!a.options.smartIndent))for(var p=a.doc.sel,d=p.ranges.length-1;d>=0;d--){var v=p.ranges[d];if(!(v.head.ch>100||d&&p.ranges[d-1].head.line==v.head.line)){var _=a.getModeAt(v.head),b=!1;if(_.electricChars){for(var S=0;S<_.electricChars.length;S++)if(l.indexOf(_.electricChars.charAt(S))>-1){b=os(a,v.head.line,"smart");break}}else _.electricInput&&_.electricInput.test(re(a.doc,v.head.line).text.slice(0,v.head.ch))&&(b=os(a,v.head.line,"smart"));b&&Qe(a,"electricInput",a,v.head.line)}}}function Ap(a){for(var l=[],p=[],d=0;d<a.doc.sel.ranges.length;d++){var v=a.doc.sel.ranges[d].head.line,_={anchor:Mt(v,0),head:Mt(v+1,0)};p.push(_),l.push(a.getRange(_.anchor,_.head))}return{text:l,ranges:p}}function kp(a,l,p,d){a.setAttribute("autocorrect",p?"":"off"),a.setAttribute("autocapitalize",d?"":"off"),a.setAttribute("spellcheck",!!l)}function Mp(){var a=Y("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),l=Y("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?a.style.width="1000px":a.setAttribute("wrap","off"),x&&(a.style.border="1px solid black"),kp(a),l}function ay(a){var l=a.optionHandlers,p=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(d,v){var _=this.options,b=_[d];_[d]==v&&d!="mode"||(_[d]=v,l.hasOwnProperty(d)&&br(this,l[d])(this,v,b),Zt(this,"optionChange",this,d))},getOption:function(d){return this.options[d]},getDoc:function(){return this.doc},addKeyMap:function(d,v){this.state.keyMaps[v?"push":"unshift"](al(d))},removeKeyMap:function(d){for(var v=this.state.keyMaps,_=0;_<v.length;++_)if(v[_]==d||v[_].name==d)return v.splice(_,1),!0},addOverlay:Nr(function(d,v){var _=d.token?d:a.getMode(this.options,d);if(_.startState)throw new Error("Overlays may not be stateful.");Vt(this.state.overlays,{mode:_,modeSpec:d,opaque:v&&v.opaque,priority:v&&v.priority||0},function(b){return b.priority}),this.state.modeGen++,Kr(this)}),removeOverlay:Nr(function(d){for(var v=this.state.overlays,_=0;_<v.length;++_){var b=v[_].modeSpec;if(b==d||typeof d=="string"&&b.name==d){v.splice(_,1),this.state.modeGen++,Kr(this);return}}}),indentLine:Nr(function(d,v,_){typeof v!="string"&&typeof v!="number"&&(v==null?v=this.options.smartIndent?"smart":"prev":v=v?"add":"subtract"),an(this.doc,d)&&os(this,d,v,_)}),indentSelection:Nr(function(d){for(var v=this.doc.sel.ranges,_=-1,b=0;b<v.length;b++){var S=v[b];if(S.empty())S.head.line>_&&(os(this,S.head.line,d,!0),_=S.head.line,b==this.doc.sel.primIndex&&Ni(this));else{var O=S.from(),A=S.to(),$=Math.max(_,O.line);_=Math.min(this.lastLine(),A.line-(A.ch?0:1))+1;for(var Z=$;Z<_;++Z)os(this,Z,d);var ft=this.doc.sel.ranges;O.ch==0&&v.length==ft.length&&ft[b].from().ch>0&&fc(this.doc,b,new Ve(O,ft[b].to()),Ut)}}}),getTokenAt:function(d,v){return Mo(this,d,v)},getLineTokens:function(d,v){return Mo(this,Mt(d),v,!0)},getTokenTypeAt:function(d){d=Ft(this.doc,d);var v=Ao(this,re(this.doc,d.line)),_=0,b=(v.length-1)/2,S=d.ch,O;if(S==0)O=v[2];else for(;;){var A=_+b>>1;if((A?v[A*2-1]:0)>=S)b=A;else if(v[A*2+1]<S)_=A+1;else{O=v[A*2+2];break}}var $=O?O.indexOf("overlay "):-1;return $<0?O:$==0?null:O.slice(0,$-1)},getModeAt:function(d){var v=this.doc.mode;return v.innerMode?a.innerMode(v,this.getTokenAt(d).state).mode:v},getHelper:function(d,v){return this.getHelpers(d,v)[0]},getHelpers:function(d,v){var _=[];if(!p.hasOwnProperty(v))return _;var b=p[v],S=this.getModeAt(d);if(typeof S[v]=="string")b[S[v]]&&_.push(b[S[v]]);else if(S[v])for(var O=0;O<S[v].length;O++){var A=b[S[v][O]];A&&_.push(A)}else S.helperType&&b[S.helperType]?_.push(b[S.helperType]):b[S.name]&&_.push(b[S.name]);for(var $=0;$<b._global.length;$++){var Z=b._global[$];Z.pred(S,this)&&Lt(_,Z.val)==-1&&_.push(Z.val)}return _},getStateAfter:function(d,v){var _=this.doc;return d=jt(_,d??_.first+_.size-1),lo(this,d+1,v).state},cursorCoords:function(d,v){var _,b=this.doc.sel.primary();return d==null?_=b.head:typeof d=="object"?_=Ft(this.doc,d):_=d?b.from():b.to(),Yn(this,_,v||"page")},charCoords:function(d,v){return Ks(this,Ft(this.doc,d),v||"page")},coordsChar:function(d,v){return d=hd(this,d,v||"page"),Ku(this,d.left,d.top)},lineAtHeight:function(d,v){return d=hd(this,{top:d,left:0},v||"page").top,Ne(this.doc,d+this.display.viewOffset)},heightAtLine:function(d,v,_){var b=!1,S;if(typeof d=="number"){var O=this.doc.first+this.doc.size-1;d<this.doc.first?d=this.doc.first:d>O&&(d=O,b=!0),S=re(this.doc,d)}else S=d;return zs(this,S,{top:0,left:0},v||"page",_||b).top+(b?this.doc.height-Fn(S):0)},defaultTextHeight:function(){return Ri(this.display)},defaultCharWidth:function(){return Vi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(d,v,_,b,S){var O=this.display;d=Yn(this,Ft(this.doc,d));var A=d.bottom,$=d.left;if(v.style.position="absolute",v.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(v),O.sizer.appendChild(v),b=="over")A=d.top;else if(b=="above"||b=="near"){var Z=Math.max(O.wrapper.clientHeight,this.doc.height),ft=Math.max(O.sizer.clientWidth,O.lineSpace.clientWidth);(b=="above"||d.bottom+v.offsetHeight>Z)&&d.top>v.offsetHeight?A=d.top-v.offsetHeight:d.bottom+v.offsetHeight<=Z&&(A=d.bottom),$+v.offsetWidth>ft&&($=ft-v.offsetWidth)}v.style.top=A+"px",v.style.left=v.style.right="",S=="right"?($=O.sizer.clientWidth-v.offsetWidth,v.style.right="0px"):(S=="left"?$=0:S=="middle"&&($=(O.sizer.clientWidth-v.offsetWidth)/2),v.style.left=$+"px"),_&&nm(this,{left:$,top:A,right:$+v.offsetWidth,bottom:A+v.offsetHeight})},triggerOnKeyDown:Nr(yp),triggerOnKeyPress:Nr(wp),triggerOnKeyUp:_p,triggerOnMouseDown:Nr(bp),execCommand:function(d){if(ts.hasOwnProperty(d))return ts[d].call(null,this)},triggerElectric:Nr(function(d){Ep(this,d)}),findPosH:function(d,v,_,b){var S=1;v<0&&(S=-1,v=-v);for(var O=Ft(this.doc,d),A=0;A<v&&(O=wc(this.doc,O,S,_,b),!O.hitSide);++A);return O},moveH:Nr(function(d,v){var _=this;this.extendSelectionsBy(function(b){return _.display.shift||_.doc.extend||b.empty()?wc(_.doc,b.head,d,v,_.options.rtlMoveVisually):d<0?b.from():b.to()},se)}),deleteH:Nr(function(d,v){var _=this.doc.sel,b=this.doc;_.somethingSelected()?b.replaceSelection("",null,"+delete"):$i(this,function(S){var O=wc(b,S.head,d,v,!1);return d<0?{from:O,to:S.head}:{from:S.head,to:O}})}),findPosV:function(d,v,_,b){var S=1,O=b;v<0&&(S=-1,v=-v);for(var A=Ft(this.doc,d),$=0;$<v;++$){var Z=Yn(this,A,"div");if(O==null?O=Z.left:Z.left=O,A=Dp(this,Z,S,_),A.hitSide)break}return A},moveV:Nr(function(d,v){var _=this,b=this.doc,S=[],O=!this.display.shift&&!b.extend&&b.sel.somethingSelected();if(b.extendSelectionsBy(function($){if(O)return d<0?$.from():$.to();var Z=Yn(_,$.head,"div");$.goalColumn!=null&&(Z.left=$.goalColumn),S.push(Z.left);var ft=Dp(_,Z,d,v);return v=="page"&&$==b.sel.primary()&&tc(_,Ks(_,ft,"div").top-Z.top),ft},se),S.length)for(var A=0;A<b.sel.ranges.length;A++)b.sel.ranges[A].goalColumn=S[A]}),findWordAt:function(d){var v=this.doc,_=re(v,d.line).text,b=d.ch,S=d.ch;if(_){var O=this.getHelper(d,"wordChars");(d.sticky=="before"||S==_.length)&&b?--b:++S;for(var A=_.charAt(b),$=it(A,O)?function(Z){return it(Z,O)}:/\s/.test(A)?function(Z){return/\s/.test(Z)}:function(Z){return!/\s/.test(Z)&&!it(Z)};b>0&&$(_.charAt(b-1));)--b;for(;S<_.length&&$(_.charAt(S));)++S}return new Ve(Mt(d.line,b),Mt(d.line,S))},toggleOverwrite:function(d){d!=null&&d==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?gt(this.display.cursorDiv,"CodeMirror-overwrite"):W(this.display.cursorDiv,"CodeMirror-overwrite"),Zt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==wt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Nr(function(d,v){Na(this,d,v)}),getScrollInfo:function(){var d=this.display.scroller;return{left:d.scrollLeft,top:d.scrollTop,height:d.scrollHeight-un(this)-this.display.barHeight,width:d.scrollWidth-un(this)-this.display.barWidth,clientHeight:P(this),clientWidth:yo(this)}},scrollIntoView:Nr(function(d,v){d==null?(d={from:this.doc.sel.primary().head,to:null},v==null&&(v=this.options.cursorScrollMargin)):typeof d=="number"?d={from:Mt(d,0),to:null}:d.from==null&&(d={from:d,to:null}),d.to||(d.to=d.from),d.margin=v||0,d.from.line!=null?om(this,d):xd(this,d.from,d.to,d.margin)}),setSize:Nr(function(d,v){var _=this,b=function(O){return typeof O=="number"||/^\d+$/.test(String(O))?O+"px":O};d!=null&&(this.display.wrapper.style.width=b(d)),v!=null&&(this.display.wrapper.style.height=b(v)),this.options.lineWrapping&&fd(this);var S=this.display.viewFrom;this.doc.iter(S,this.display.viewTo,function(O){if(O.widgets){for(var A=0;A<O.widgets.length;A++)if(O.widgets[A].noHScroll){Bo(_,S,"widget");break}}++S}),this.curOp.forceUpdate=!0,Zt(this,"refresh",this)}),operation:function(d){return cn(this,d)},startOperation:function(){return di(this)},endOperation:function(){return pi(this)},refresh:Nr(function(){var d=this.display.cachedTextHeight;Kr(this),this.curOp.forceUpdate=!0,Va(this),Na(this,this.doc.scrollLeft,this.doc.scrollTop),nc(this.display),(d==null||Math.abs(d-Ri(this.display))>.5||this.options.lineWrapping)&&Yu(this),Zt(this,"refresh",this)}),swapDoc:Nr(function(d){var v=this.doc;return v.cm=null,this.state.selectingText&&this.state.selectingText(),Fd(this,d),Va(this),this.display.input.reset(),Na(this,d.scrollLeft,d.scrollTop),this.curOp.forceScroll=!0,Qe(this,"swapDoc",this,v),v}),phrase:function(d){var v=this.options.phrases;return v&&Object.prototype.hasOwnProperty.call(v,d)?v[d]:d},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ae(a),a.registerHelper=function(d,v,_){p.hasOwnProperty(d)||(p[d]=a[d]={_global:[]}),p[d][v]=_},a.registerGlobalHelper=function(d,v,_,b){a.registerHelper(d,v,b),p[d]._global.push({pred:_,val:b})}}function wc(a,l,p,d,v){var _=l,b=p,S=re(a,l.line),O=v&&a.direction=="rtl"?-p:p;function A(){var te=l.line+O;return te<a.first||te>=a.first+a.size?!1:(l=new Mt(te,l.ch,l.sticky),S=re(a,te))}function $(te){var qt;if(d=="codepoint"){var ne=S.text.charCodeAt(l.ch+(p>0?0:-1));if(isNaN(ne))qt=null;else{var he=p>0?ne>=55296&&ne<56320:ne>=56320&&ne<57343;qt=new Mt(l.line,Math.max(0,Math.min(S.text.length,l.ch+p*(he?2:1))),-p)}}else v?qt=Um(a.cm,S,l,p):qt=pc(S,l,p);if(qt==null)if(!te&&A())l=hc(v,a.cm,S,l.line,O);else return!1;else l=qt;return!0}if(d=="char"||d=="codepoint")$();else if(d=="column")$(!0);else if(d=="word"||d=="group")for(var Z=null,ft=d=="group",at=a.cm&&a.cm.getHelper(l,"wordChars"),St=!0;!(p<0&&!$(!St));St=!1){var kt=S.text.charAt(l.ch)||`
`,Nt=it(kt,at)?"w":ft&&kt==`
`?"n":!ft||/\s/.test(kt)?null:"p";if(ft&&!St&&!Nt&&(Nt="s"),Z&&Z!=Nt){p<0&&(p=1,$(),l.sticky="after");break}if(Nt&&(Z=Nt),p>0&&!$(!St))break}var $t=nl(a,l,_,b,!0);return Sn(_,$t)&&($t.hitSide=!0),$t}function Dp(a,l,p,d){var v=a.doc,_=l.left,b;if(d=="page"){var S=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),O=Math.max(S-.5*Ri(a.display),3);b=(p>0?l.bottom:l.top)+p*O}else d=="line"&&(b=p>0?l.bottom+3:l.top-3);for(var A;A=Ku(a,_,b),!!A.outside;){if(p<0?b<=0:b>=v.height){A.hitSide=!0;break}b+=p*5}return A}var Fe=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new bt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Fe.prototype.init=function(a){var l=this,p=this,d=p.cm,v=p.div=a.lineDiv;v.contentEditable=!0,kp(v,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize);function _(S){for(var O=S.target;O;O=O.parentNode){if(O==v)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(O.className))break}return!1}pt(v,"paste",function(S){!_(S)||Gt(d,S)||Pp(S,d)||f<=11&&setTimeout(br(d,function(){return l.updateFromDOM()}),20)}),pt(v,"compositionstart",function(S){l.composing={data:S.data,done:!1}}),pt(v,"compositionupdate",function(S){l.composing||(l.composing={data:S.data,done:!1})}),pt(v,"compositionend",function(S){l.composing&&(S.data!=l.composing.data&&l.readFromDOMSoon(),l.composing.done=!0)}),pt(v,"touchstart",function(){return p.forceCompositionEnd()}),pt(v,"input",function(){l.composing||l.readFromDOMSoon()});function b(S){if(!(!_(S)||Gt(d,S))){if(d.somethingSelected())ul({lineWise:!1,text:d.getSelections()}),S.type=="cut"&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var O=Ap(d);ul({lineWise:!0,text:O.text}),S.type=="cut"&&d.operation(function(){d.setSelections(O.ranges,0,Ut),d.replaceSelection("",null,"cut")})}else return;if(S.clipboardData){S.clipboardData.clearData();var A=Jn.text.join(`
`);if(S.clipboardData.setData("Text",A),S.clipboardData.getData("Text")==A){S.preventDefault();return}}var $=Mp(),Z=$.firstChild;d.display.lineSpace.insertBefore($,d.display.lineSpace.firstChild),Z.value=Jn.text.join(`
`);var ft=wt();Qt(Z),setTimeout(function(){d.display.lineSpace.removeChild($),ft.focus(),ft==v&&p.showPrimarySelection()},50)}}pt(v,"copy",b),pt(v,"cut",b)},Fe.prototype.screenReaderLabelChanged=function(a){a?this.div.setAttribute("aria-label",a):this.div.removeAttribute("aria-label")},Fe.prototype.prepareSelection=function(){var a=wd(this.cm,!1);return a.focus=wt()==this.div,a},Fe.prototype.showSelection=function(a,l){!a||!this.cm.display.view.length||((a.focus||l)&&this.showPrimarySelection(),this.showMultipleSelections(a))},Fe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Fe.prototype.showPrimarySelection=function(){var a=this.getSelection(),l=this.cm,p=l.doc.sel.primary(),d=p.from(),v=p.to();if(l.display.viewTo==l.display.viewFrom||d.line>=l.display.viewTo||v.line<l.display.viewFrom){a.removeAllRanges();return}var _=cl(l,a.anchorNode,a.anchorOffset),b=cl(l,a.focusNode,a.focusOffset);if(!(_&&!_.bad&&b&&!b.bad&&pe(xt(_,b),d)==0&&pe(X(_,b),v)==0)){var S=l.display.view,O=d.line>=l.display.viewFrom&&Lp(l,d)||{node:S[0].measure.map[2],offset:0},A=v.line<l.display.viewTo&&Lp(l,v);if(!A){var $=S[S.length-1].measure,Z=$.maps?$.maps[$.maps.length-1]:$.map;A={node:Z[Z.length-1],offset:Z[Z.length-2]-Z[Z.length-3]}}if(!O||!A){a.removeAllRanges();return}var ft=a.rangeCount&&a.getRangeAt(0),at;try{at=ct(O.node,O.offset,A.offset,A.node)}catch{}at&&(!e&&l.state.focused?(a.collapse(O.node,O.offset),at.collapsed||(a.removeAllRanges(),a.addRange(at))):(a.removeAllRanges(),a.addRange(at)),ft&&a.anchorNode==null?a.addRange(ft):e&&this.startGracePeriod()),this.rememberSelection()}},Fe.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},Fe.prototype.showMultipleSelections=function(a){D(this.cm.display.cursorDiv,a.cursors),D(this.cm.display.selectionDiv,a.selection)},Fe.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},Fe.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var l=a.getRangeAt(0).commonAncestorContainer;return M(this.div,l)},Fe.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||wt()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Fe.prototype.blur=function(){this.div.blur()},Fe.prototype.getField=function(){return this.div},Fe.prototype.supportsTouch=function(){return!0},Fe.prototype.receivedFocus=function(){var a=this,l=this;this.selectionInEditor()?setTimeout(function(){return a.pollSelection()},20):cn(this.cm,function(){return l.cm.curOp.selectionChanged=!0});function p(){l.cm.state.focused&&(l.pollSelection(),l.polling.set(l.cm.options.pollInterval,p))}this.polling.set(this.cm.options.pollInterval,p)},Fe.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},Fe.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var a=this.getSelection(),l=this.cm;if(E&&g&&this.cm.display.gutterSpecs.length&&sy(a.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var p=cl(l,a.anchorNode,a.anchorOffset),d=cl(l,a.focusNode,a.focusOffset);p&&d&&cn(l,function(){Lr(l.doc,zo(p,d),Ut),(p.bad||d.bad)&&(l.curOp.selectionChanged=!0)})}}},Fe.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,l=a.display,p=a.doc.sel.primary(),d=p.from(),v=p.to();if(d.ch==0&&d.line>a.firstLine()&&(d=Mt(d.line-1,re(a.doc,d.line-1).length)),v.ch==re(a.doc,v.line).text.length&&v.line<a.lastLine()&&(v=Mt(v.line+1,0)),d.line<l.viewFrom||v.line>l.viewTo-1)return!1;var _,b,S;d.line==l.viewFrom||(_=ui(a,d.line))==0?(b=Ee(l.view[0].line),S=l.view[0].node):(b=Ee(l.view[_].line),S=l.view[_-1].node.nextSibling);var O=ui(a,v.line),A,$;if(O==l.view.length-1?(A=l.viewTo-1,$=l.lineDiv.lastChild):(A=Ee(l.view[O+1].line)-1,$=l.view[O+1].node.previousSibling),!S)return!1;for(var Z=a.doc.splitLines(ly(a,S,$,b,A)),ft=yr(a.doc,Mt(b,0),Mt(A,re(a.doc,A).text.length));Z.length>1&&ft.length>1;)if(ue(Z)==ue(ft))Z.pop(),ft.pop(),A--;else if(Z[0]==ft[0])Z.shift(),ft.shift(),b++;else break;for(var at=0,St=0,kt=Z[0],Nt=ft[0],$t=Math.min(kt.length,Nt.length);at<$t&&kt.charCodeAt(at)==Nt.charCodeAt(at);)++at;for(var te=ue(Z),qt=ue(ft),ne=Math.min(te.length-(Z.length==1?at:0),qt.length-(ft.length==1?at:0));St<ne&&te.charCodeAt(te.length-St-1)==qt.charCodeAt(qt.length-St-1);)++St;if(Z.length==1&&ft.length==1&&b==d.line)for(;at&&at>d.ch&&te.charCodeAt(te.length-St-1)==qt.charCodeAt(qt.length-St-1);)at--,St++;Z[Z.length-1]=te.slice(0,te.length-St).replace(/^\u200b+/,""),Z[0]=Z[0].slice(at).replace(/\u200b+$/,"");var he=Mt(b,at),de=Mt(A,ft.length?ue(ft).length-St:0);if(Z.length>1||Z[0]||pe(he,de))return zi(a.doc,Z,he,de,"+input"),!0},Fe.prototype.ensurePolled=function(){this.forceCompositionEnd()},Fe.prototype.reset=function(){this.forceCompositionEnd()},Fe.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Fe.prototype.readFromDOMSoon=function(){var a=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))},Fe.prototype.updateFromDOM=function(){var a=this;(this.cm.isReadOnly()||!this.pollContent())&&cn(this.cm,function(){return Kr(a.cm)})},Fe.prototype.setUneditable=function(a){a.contentEditable="false"},Fe.prototype.onKeyPress=function(a){a.charCode==0||this.composing||(a.preventDefault(),this.cm.isReadOnly()||br(this.cm,_c)(this.cm,String.fromCharCode(a.charCode==null?a.keyCode:a.charCode),0))},Fe.prototype.readOnlyChanged=function(a){this.div.contentEditable=String(a!="nocursor")},Fe.prototype.onContextMenu=function(){},Fe.prototype.resetPosition=function(){},Fe.prototype.needsContentAttribute=!0;function Lp(a,l){var p=ut(a,l.line);if(!p||p.hidden)return null;var d=re(a.doc,l.line),v=J(p,d,l.line),_=R(d,a.doc.direction),b="left";if(_){var S=B(_,l.ch);b=S%2?"right":"left"}var O=we(v.map,l.ch,b);return O.offset=O.collapse=="right"?O.end:O.start,O}function sy(a){for(var l=a;l;l=l.parentNode)if(/CodeMirror-gutter-wrapper/.test(l.className))return!0;return!1}function Yi(a,l){return l&&(a.bad=!0),a}function ly(a,l,p,d,v){var _="",b=!1,S=a.doc.lineSeparator(),O=!1;function A(at){return function(St){return St.id==at}}function $(){b&&(_+=S,O&&(_+=S),b=O=!1)}function Z(at){at&&($(),_+=at)}function ft(at){if(at.nodeType==1){var St=at.getAttribute("cm-text");if(St){Z(St);return}var kt=at.getAttribute("cm-marker"),Nt;if(kt){var $t=a.findMarks(Mt(d,0),Mt(v+1,0),A(+kt));$t.length&&(Nt=$t[0].find(0))&&Z(yr(a.doc,Nt.from,Nt.to).join(S));return}if(at.getAttribute("contenteditable")=="false")return;var te=/^(pre|div|p|li|table|br)$/i.test(at.nodeName);if(!/^br$/i.test(at.nodeName)&&at.textContent.length==0)return;te&&$();for(var qt=0;qt<at.childNodes.length;qt++)ft(at.childNodes[qt]);/^(pre|p)$/i.test(at.nodeName)&&(O=!0),te&&(b=!0)}else at.nodeType==3&&Z(at.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ft(l),l!=p;)l=l.nextSibling,O=!1;return _}function cl(a,l,p){var d;if(l==a.display.lineDiv){if(d=a.display.lineDiv.childNodes[p],!d)return Yi(a.clipPos(Mt(a.display.viewTo-1)),!0);l=null,p=0}else for(d=l;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var v=0;v<a.display.view.length;v++){var _=a.display.view[v];if(_.node==d)return uy(_,l,p)}}function uy(a,l,p){var d=a.text.firstChild,v=!1;if(!l||!M(d,l))return Yi(Mt(Ee(a.line),0),!0);if(l==d&&(v=!0,l=d.childNodes[p],p=0,!l)){var _=a.rest?ue(a.rest):a.line;return Yi(Mt(Ee(_),_.text.length),v)}var b=l.nodeType==3?l:null,S=l;for(!b&&l.childNodes.length==1&&l.firstChild.nodeType==3&&(b=l.firstChild,p&&(p=b.nodeValue.length));S.parentNode!=d;)S=S.parentNode;var O=a.measure,A=O.maps;function $(Nt,$t,te){for(var qt=-1;qt<(A?A.length:0);qt++)for(var ne=qt<0?O.map:A[qt],he=0;he<ne.length;he+=3){var de=ne[he+2];if(de==Nt||de==$t){var Oe=Ee(qt<0?a.line:a.rest[qt]),Ue=ne[he]+te;return(te<0||de!=Nt)&&(Ue=ne[he+(te?1:0)]),Mt(Oe,Ue)}}}var Z=$(b,S,p);if(Z)return Yi(Z,v);for(var ft=S.nextSibling,at=b?b.nodeValue.length-p:0;ft;ft=ft.nextSibling){if(Z=$(ft,ft.firstChild,0),Z)return Yi(Mt(Z.line,Z.ch-at),v);at+=ft.textContent.length}for(var St=S.previousSibling,kt=p;St;St=St.previousSibling){if(Z=$(St,St.firstChild,-1),Z)return Yi(Mt(Z.line,Z.ch+kt),v);kt+=St.textContent.length}}var or=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new bt,this.hasSelection=!1,this.composing=null};or.prototype.init=function(a){var l=this,p=this,d=this.cm;this.createField(a);var v=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild),x&&(v.style.width="0px"),pt(v,"input",function(){u&&f>=9&&l.hasSelection&&(l.hasSelection=null),p.poll()}),pt(v,"paste",function(b){Gt(d,b)||Pp(b,d)||(d.state.pasteIncoming=+new Date,p.fastPoll())});function _(b){if(!Gt(d,b)){if(d.somethingSelected())ul({lineWise:!1,text:d.getSelections()});else if(d.options.lineWiseCopyCut){var S=Ap(d);ul({lineWise:!0,text:S.text}),b.type=="cut"?d.setSelections(S.ranges,null,Ut):(p.prevInput="",v.value=S.text.join(`
`),Qt(v))}else return;b.type=="cut"&&(d.state.cutIncoming=+new Date)}}pt(v,"cut",_),pt(v,"copy",_),pt(a.scroller,"paste",function(b){if(!(Nn(a,b)||Gt(d,b))){if(!v.dispatchEvent){d.state.pasteIncoming=+new Date,p.focus();return}var S=new Event("paste");S.clipboardData=b.clipboardData,v.dispatchEvent(S)}}),pt(a.lineSpace,"selectstart",function(b){Nn(a,b)||Te(b)}),pt(v,"compositionstart",function(){var b=d.getCursor("from");p.composing&&p.composing.range.clear(),p.composing={start:b,range:d.markText(b,d.getCursor("to"),{className:"CodeMirror-composing"})}}),pt(v,"compositionend",function(){p.composing&&(p.poll(),p.composing.range.clear(),p.composing=null)})},or.prototype.createField=function(a){this.wrapper=Mp(),this.textarea=this.wrapper.firstChild},or.prototype.screenReaderLabelChanged=function(a){a?this.textarea.setAttribute("aria-label",a):this.textarea.removeAttribute("aria-label")},or.prototype.prepareSelection=function(){var a=this.cm,l=a.display,p=a.doc,d=wd(a);if(a.options.moveInputWithCursor){var v=Yn(a,p.sel.primary().head,"div"),_=l.wrapper.getBoundingClientRect(),b=l.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(l.wrapper.clientHeight-10,v.top+b.top-_.top)),d.teLeft=Math.max(0,Math.min(l.wrapper.clientWidth-10,v.left+b.left-_.left))}return d},or.prototype.showSelection=function(a){var l=this.cm,p=l.display;D(p.cursorDiv,a.cursors),D(p.selectionDiv,a.selection),a.teTop!=null&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},or.prototype.reset=function(a){if(!(this.contextMenuPending||this.composing)){var l=this.cm;if(l.somethingSelected()){this.prevInput="";var p=l.getSelection();this.textarea.value=p,l.state.focused&&Qt(this.textarea),u&&f>=9&&(this.hasSelection=p)}else a||(this.prevInput=this.textarea.value="",u&&f>=9&&(this.hasSelection=null))}},or.prototype.getField=function(){return this.textarea},or.prototype.supportsTouch=function(){return!1},or.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!N||wt()!=this.textarea))try{this.textarea.focus()}catch{}},or.prototype.blur=function(){this.textarea.blur()},or.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},or.prototype.receivedFocus=function(){this.slowPoll()},or.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},or.prototype.fastPoll=function(){var a=!1,l=this;l.pollingFast=!0;function p(){var d=l.poll();!d&&!a?(a=!0,l.polling.set(60,p)):(l.pollingFast=!1,l.slowPoll())}l.polling.set(20,p)},or.prototype.poll=function(){var a=this,l=this.cm,p=this.textarea,d=this.prevInput;if(this.contextMenuPending||!l.state.focused||We(p)&&!d&&!this.composing||l.isReadOnly()||l.options.disableInput||l.state.keySeq)return!1;var v=p.value;if(v==d&&!l.somethingSelected())return!1;if(u&&f>=9&&this.hasSelection===v||L&&/[\uf700-\uf7ff]/.test(v))return l.display.input.reset(),!1;if(l.doc.sel==l.display.selForContextMenu){var _=v.charCodeAt(0);if(_==8203&&!d&&(d="​"),_==8666)return this.reset(),this.cm.execCommand("undo")}for(var b=0,S=Math.min(d.length,v.length);b<S&&d.charCodeAt(b)==v.charCodeAt(b);)++b;return cn(l,function(){_c(l,v.slice(b),d.length-b,null,a.composing?"*compose":null),v.length>1e3||v.indexOf(`
`)>-1?p.value=a.prevInput="":a.prevInput=v,a.composing&&(a.composing.range.clear(),a.composing.range=l.markText(a.composing.start,l.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},or.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},or.prototype.onKeyPress=function(){u&&f>=9&&(this.hasSelection=null),this.fastPoll()},or.prototype.onContextMenu=function(a){var l=this,p=l.cm,d=p.display,v=l.textarea;l.contextMenuPending&&l.contextMenuPending();var _=li(p,a),b=d.scroller.scrollTop;if(!_||m)return;var S=p.options.resetSelectionOnContextMenu;S&&p.doc.sel.contains(_)==-1&&br(p,Lr)(p.doc,zo(_),Ut);var O=v.style.cssText,A=l.wrapper.style.cssText,$=l.wrapper.offsetParent.getBoundingClientRect();l.wrapper.style.cssText="position: static",v.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(a.clientY-$.top-5)+"px; left: "+(a.clientX-$.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Z;c&&(Z=window.scrollY),d.input.focus(),c&&window.scrollTo(null,Z),d.input.reset(),p.somethingSelected()||(v.value=l.prevInput=" "),l.contextMenuPending=at,d.selForContextMenu=p.doc.sel,clearTimeout(d.detectingSelectAll);function ft(){if(v.selectionStart!=null){var kt=p.somethingSelected(),Nt="​"+(kt?v.value:"");v.value="⇚",v.value=Nt,l.prevInput=kt?"":"​",v.selectionStart=1,v.selectionEnd=Nt.length,d.selForContextMenu=p.doc.sel}}function at(){if(l.contextMenuPending==at&&(l.contextMenuPending=!1,l.wrapper.style.cssText=A,v.style.cssText=O,u&&f<9&&d.scrollbars.setScrollTop(d.scroller.scrollTop=b),v.selectionStart!=null)){(!u||u&&f<9)&&ft();var kt=0,Nt=function(){d.selForContextMenu==p.doc.sel&&v.selectionStart==0&&v.selectionEnd>0&&l.prevInput=="​"?br(p,Jd)(p):kt++<10?d.detectingSelectAll=setTimeout(Nt,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(Nt,200)}}if(u&&f>=9&&ft(),et){F(a);var St=function(){Jt(window,"mouseup",St),setTimeout(at,20)};pt(window,"mouseup",St)}else setTimeout(at,50)},or.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled=a=="nocursor",this.textarea.readOnly=!!a},or.prototype.setUneditable=function(){},or.prototype.needsContentAttribute=!1;function cy(a,l){if(l=l?yt(l):{},l.value=a.value,!l.tabindex&&a.tabIndex&&(l.tabindex=a.tabIndex),!l.placeholder&&a.placeholder&&(l.placeholder=a.placeholder),l.autofocus==null){var p=wt();l.autofocus=p==a||a.getAttribute("autofocus")!=null&&p==document.body}function d(){a.value=S.getValue()}var v;if(a.form&&(pt(a.form,"submit",d),!l.leaveSubmitMethodAlone)){var _=a.form;v=_.submit;try{var b=_.submit=function(){d(),_.submit=v,_.submit(),_.submit=b}}catch{}}l.finishInit=function(O){O.save=d,O.getTextArea=function(){return a},O.toTextArea=function(){O.toTextArea=isNaN,d(),a.parentNode.removeChild(O.getWrapperElement()),a.style.display="",a.form&&(Jt(a.form,"submit",d),!l.leaveSubmitMethodAlone&&typeof a.form.submit=="function"&&(a.form.submit=v))}},a.style.display="none";var S=Ye(function(O){return a.parentNode.insertBefore(O,a.nextSibling)},l);return S}function fy(a){a.off=Jt,a.on=pt,a.wheelEventPixels=ym,a.Doc=Gr,a.splitLines=rr,a.countColumn=Ct,a.findColumn=Xt,a.isWordChar=z,a.Pass=Dt,a.signal=Zt,a.Line=wr,a.changeEnd=Ko,a.scrollbarModel=Pd,a.Pos=Mt,a.cmpPos=pe,a.modes=nn,a.mimeModes=Le,a.resolveMode=Mr,a.getMode=ve,a.modeExtensions=on,a.extendMode=Br,a.copyState=ar,a.startState=Rr,a.innerMode=sr,a.commands=ts,a.keyMap=_o,a.keyName=pp,a.isModifierKey=fp,a.lookupKey=Gi,a.normalizeKeyMap=Hm,a.StringStream=Ie,a.SharedTextMarker=Ja,a.TextMarker=$o,a.LineWidget=Xa,a.e_preventDefault=Te,a.e_stopPropagation=Je,a.e_stop=F,a.addClass=gt,a.contains=M,a.rmClass=W,a.keyNames=qo}ry(Ye),ay(Ye);var dy="iter insert remove copy getEditor constructor".split(" ");for(var fl in Gr.prototype)Gr.prototype.hasOwnProperty(fl)&&Lt(dy,fl)<0&&(Ye.prototype[fl]=(function(a){return function(){return a.apply(this.doc,arguments)}})(Gr.prototype[fl]));return Ae(Gr),Ye.inputStyles={textarea:or,contenteditable:Fe},Ye.defineMode=function(a){!Ye.defaults.mode&&a!="null"&&(Ye.defaults.mode=a),nr.apply(this,arguments)},Ye.defineMIME=ke,Ye.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Ye.defineMIME("text/plain","null"),Ye.defineExtension=function(a,l){Ye.prototype[a]=l},Ye.defineDocExtension=function(a,l){Gr.prototype[a]=l},Ye.fromTextArea=cy,fy(Ye),Ye.version="5.63.0",Ye}))}),7389:((i,r,t)=>{(function(e){e(t(4408))})(function(e){e.defineMode("css",function(U,D){var Y=D.inline;D.propertyKeywords||(D=e.resolveMode("text/css"));var K=U.indentUnit,ct=D.tokenHooks,M=D.documentTypes||{},wt=D.mediaTypes||{},gt=D.mediaFeatures||{},At=D.mediaValueKeywords||{},Qt=D.propertyKeywords||{},oe=D.nonStandardPropertyKeywords||{},yt=D.fontProperties||{},Ct=D.counterDescriptors||{},bt=D.colorKeywords||{},Lt=D.valueKeywords||{},zt=D.allowNested,Dt=D.lineComment,Ut=D.supportsAtComponent===!0,Yt=U.highlightNonStandardPropertyKeywords!==!1,se,Xt;function ee(q,ht){return se=ht,q}function xe(q,ht){var st=q.next();if(ct[st]){var ie=ct[st](q,ht);if(ie!==!1)return ie}if(st=="@")return q.eatWhile(/[\w\\\-]/),ee("def",q.current());if(st=="="||(st=="~"||st=="|")&&q.eat("="))return ee(null,"compare");if(st=='"'||st=="'")return ht.tokenize=ue(st),ht.tokenize(q,ht);if(st=="#")return q.eatWhile(/[\w\\\-]/),ee("atom","hash");if(st=="!")return q.match(/^\s*\w*/),ee("keyword","important");if(/\d/.test(st)||st=="."&&q.eat(/\d/))return q.eatWhile(/[\w.%]/),ee("number","unit");if(st==="-"){if(/[\d.]/.test(q.peek()))return q.eatWhile(/[\w.%]/),ee("number","unit");if(q.match(/^-[\w\\\-]*/))return q.eatWhile(/[\w\\\-]/),q.match(/^\s*:/,!1)?ee("variable-2","variable-definition"):ee("variable-2","variable");if(q.match(/^\w+-/))return ee("meta","meta")}else return/[,+>*\/]/.test(st)?ee(null,"select-op"):st=="."&&q.match(/^-?[_a-z][_a-z0-9-]*/i)?ee("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(st)?ee(null,st):q.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(q.current())&&(ht.tokenize=mt),ee("variable callee","variable")):/[\w\\\-]/.test(st)?(q.eatWhile(/[\w\\\-]/),ee("property","word")):ee(null,null)}function ue(q){return function(ht,st){for(var ie=!1,_e;(_e=ht.next())!=null;){if(_e==q&&!ie){q==")"&&ht.backUp(1);break}ie=!ie&&_e=="\\"}return(_e==q||!ie&&q!=")")&&(st.tokenize=null),ee("string","string")}}function mt(q,ht){return q.next(),q.match(/^\s*[\"\')]/,!1)?ht.tokenize=null:ht.tokenize=ue(")"),ee(null,"(")}function Vt(q,ht,st){this.type=q,this.indent=ht,this.prev=st}function Rt(q,ht,st,ie){return q.context=new Vt(st,ht.indentation()+(ie===!1?0:K),q.context),st}function T(q){return q.context.prev&&(q.context=q.context.prev),q.context.type}function j(q,ht,st){return _t[st.context.type](q,ht,st)}function z(q,ht,st,ie){for(var _e=ie||1;_e>0;_e--)st.context=st.context.prev;return j(q,ht,st)}function it(q){var ht=q.current().toLowerCase();Lt.hasOwnProperty(ht)?Xt="atom":bt.hasOwnProperty(ht)?Xt="keyword":Xt="variable"}var _t={};return _t.top=function(q,ht,st){if(q=="{")return Rt(st,ht,"block");if(q=="}"&&st.context.prev)return T(st);if(Ut&&/@component/i.test(q))return Rt(st,ht,"atComponentBlock");if(/^@(-moz-)?document$/i.test(q))return Rt(st,ht,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(q))return Rt(st,ht,"atBlock");if(/^@(font-face|counter-style)/i.test(q))return st.stateArg=q,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(q))return"keyframes";if(q&&q.charAt(0)=="@")return Rt(st,ht,"at");if(q=="hash")Xt="builtin";else if(q=="word")Xt="tag";else{if(q=="variable-definition")return"maybeprop";if(q=="interpolation")return Rt(st,ht,"interpolation");if(q==":")return"pseudo";if(zt&&q=="(")return Rt(st,ht,"parens")}return st.context.type},_t.block=function(q,ht,st){if(q=="word"){var ie=ht.current().toLowerCase();return Qt.hasOwnProperty(ie)?(Xt="property","maybeprop"):oe.hasOwnProperty(ie)?(Xt=Yt?"string-2":"property","maybeprop"):zt?(Xt=ht.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Xt+=" error","maybeprop")}else return q=="meta"?"block":!zt&&(q=="hash"||q=="qualifier")?(Xt="error","block"):_t.top(q,ht,st)},_t.maybeprop=function(q,ht,st){return q==":"?Rt(st,ht,"prop"):j(q,ht,st)},_t.prop=function(q,ht,st){if(q==";")return T(st);if(q=="{"&&zt)return Rt(st,ht,"propBlock");if(q=="}"||q=="{")return z(q,ht,st);if(q=="(")return Rt(st,ht,"parens");if(q=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(ht.current()))Xt+=" error";else if(q=="word")it(ht);else if(q=="interpolation")return Rt(st,ht,"interpolation");return"prop"},_t.propBlock=function(q,ht,st){return q=="}"?T(st):q=="word"?(Xt="property","maybeprop"):st.context.type},_t.parens=function(q,ht,st){return q=="{"||q=="}"?z(q,ht,st):q==")"?T(st):q=="("?Rt(st,ht,"parens"):q=="interpolation"?Rt(st,ht,"interpolation"):(q=="word"&&it(ht),"parens")},_t.pseudo=function(q,ht,st){return q=="meta"?"pseudo":q=="word"?(Xt="variable-3",st.context.type):j(q,ht,st)},_t.documentTypes=function(q,ht,st){return q=="word"&&M.hasOwnProperty(ht.current())?(Xt="tag",st.context.type):_t.atBlock(q,ht,st)},_t.atBlock=function(q,ht,st){if(q=="(")return Rt(st,ht,"atBlock_parens");if(q=="}"||q==";")return z(q,ht,st);if(q=="{")return T(st)&&Rt(st,ht,zt?"block":"top");if(q=="interpolation")return Rt(st,ht,"interpolation");if(q=="word"){var ie=ht.current().toLowerCase();ie=="only"||ie=="not"||ie=="and"||ie=="or"?Xt="keyword":wt.hasOwnProperty(ie)?Xt="attribute":gt.hasOwnProperty(ie)?Xt="property":At.hasOwnProperty(ie)?Xt="keyword":Qt.hasOwnProperty(ie)?Xt="property":oe.hasOwnProperty(ie)?Xt=Yt?"string-2":"property":Lt.hasOwnProperty(ie)?Xt="atom":bt.hasOwnProperty(ie)?Xt="keyword":Xt="error"}return st.context.type},_t.atComponentBlock=function(q,ht,st){return q=="}"?z(q,ht,st):q=="{"?T(st)&&Rt(st,ht,zt?"block":"top",!1):(q=="word"&&(Xt="error"),st.context.type)},_t.atBlock_parens=function(q,ht,st){return q==")"?T(st):q=="{"||q=="}"?z(q,ht,st,2):_t.atBlock(q,ht,st)},_t.restricted_atBlock_before=function(q,ht,st){return q=="{"?Rt(st,ht,"restricted_atBlock"):q=="word"&&st.stateArg=="@counter-style"?(Xt="variable","restricted_atBlock_before"):j(q,ht,st)},_t.restricted_atBlock=function(q,ht,st){return q=="}"?(st.stateArg=null,T(st)):q=="word"?(st.stateArg=="@font-face"&&!yt.hasOwnProperty(ht.current().toLowerCase())||st.stateArg=="@counter-style"&&!Ct.hasOwnProperty(ht.current().toLowerCase())?Xt="error":Xt="property","maybeprop"):"restricted_atBlock"},_t.keyframes=function(q,ht,st){return q=="word"?(Xt="variable","keyframes"):q=="{"?Rt(st,ht,"top"):j(q,ht,st)},_t.at=function(q,ht,st){return q==";"?T(st):q=="{"||q=="}"?z(q,ht,st):(q=="word"?Xt="tag":q=="hash"&&(Xt="builtin"),"at")},_t.interpolation=function(q,ht,st){return q=="}"?T(st):q=="{"||q==";"?z(q,ht,st):(q=="word"?Xt="variable":q!="variable"&&q!="("&&q!=")"&&(Xt="error"),"interpolation")},{startState:function(q){return{tokenize:null,state:Y?"block":"top",stateArg:null,context:new Vt(Y?"block":"top",q||0,null)}},token:function(q,ht){if(!ht.tokenize&&q.eatSpace())return null;var st=(ht.tokenize||xe)(q,ht);return st&&typeof st=="object"&&(se=st[1],st=st[0]),Xt=st,se!="comment"&&(ht.state=_t[ht.state](se,q,ht)),Xt},indent:function(q,ht){var st=q.context,ie=ht&&ht.charAt(0),_e=st.indent;return st.type=="prop"&&(ie=="}"||ie==")")&&(st=st.prev),st.prev&&(ie=="}"&&(st.type=="block"||st.type=="top"||st.type=="interpolation"||st.type=="restricted_atBlock")?(st=st.prev,_e=st.indent):(ie==")"&&(st.type=="parens"||st.type=="atBlock_parens")||ie=="{"&&(st.type=="at"||st.type=="atBlock"))&&(_e=Math.max(0,st.indent-K))),_e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Dt,fold:"brace"}});function n(U){for(var D={},Y=0;Y<U.length;++Y)D[U[Y].toLowerCase()]=!0;return D}var o=["domain","regexp","url","url-prefix"],s=n(o),u=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],f=n(u),c=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],h=n(c),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],m=n(g),y=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],w=n(y),C=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],x=n(C),E=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],N=n(E),L=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],H=n(L),rt=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],nt=n(rt),vt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],et=n(vt),G=o.concat(u).concat(c).concat(g).concat(y).concat(C).concat(rt).concat(vt);e.registerHelper("hintWords","css",G);function W(U,D){for(var Y=!1,K;(K=U.next())!=null;){if(Y&&K=="/"){D.tokenize=null;break}Y=K=="*"}return["comment","comment"]}e.defineMIME("text/css",{documentTypes:s,mediaTypes:f,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:w,nonStandardPropertyKeywords:x,fontProperties:N,counterDescriptors:H,colorKeywords:nt,valueKeywords:et,tokenHooks:{"/":function(U,D){return U.eat("*")?(D.tokenize=W,W(U,D)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:f,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:w,nonStandardPropertyKeywords:x,colorKeywords:nt,valueKeywords:et,fontProperties:N,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(U,D){return U.eat("/")?(U.skipToEnd(),["comment","comment"]):U.eat("*")?(D.tokenize=W,W(U,D)):["operator","operator"]},":":function(U){return U.match(/^\s*\{/,!1)?[null,null]:!1},$:function(U){return U.match(/^[\w-]+/),U.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(U){return U.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:f,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:w,nonStandardPropertyKeywords:x,colorKeywords:nt,valueKeywords:et,fontProperties:N,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(U,D){return U.eat("/")?(U.skipToEnd(),["comment","comment"]):U.eat("*")?(D.tokenize=W,W(U,D)):["operator","operator"]},"@":function(U){return U.eat("{")?[null,"interpolation"]:U.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(U.eatWhile(/[\w\\\-]/),U.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:s,mediaTypes:f,mediaFeatures:h,propertyKeywords:w,nonStandardPropertyKeywords:x,fontProperties:N,counterDescriptors:H,colorKeywords:nt,valueKeywords:et,supportsAtComponent:!0,tokenHooks:{"/":function(U,D){return U.eat("*")?(D.tokenize=W,W(U,D)):!1}},name:"css",helperType:"gss"})})}),8253:((i,r,t)=>{(function(e){e(t(4408),t(9701),t(6061),t(7389))})(function(e){var n={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function o(m,y,w){var C=m.current(),x=C.search(y);return x>-1?m.backUp(C.length-x):C.match(/<\/?$/)&&(m.backUp(C.length),m.match(y,!1)||m.match(C)),w}var s={};function u(m){var y=s[m];return y||(s[m]=new RegExp("\\s+"+m+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function f(m,y){var w=m.match(u(y));return w?/^\s*(.*?)\s*$/.exec(w[2])[1]:""}function c(m,y){return new RegExp((y?"^":"")+"</s*"+m+"s*>","i")}function h(m,y){for(var w in m)for(var C=y[w]||(y[w]=[]),x=m[w],E=x.length-1;E>=0;E--)C.unshift(x[E])}function g(m,y){for(var w=0;w<m.length;w++){var C=m[w];if(!C[0]||C[1].test(f(y,C[0])))return C[2]}}e.defineMode("htmlmixed",function(m,y){var w=e.getMode(m,{name:"xml",htmlMode:!0,multilineTagIndentFactor:y.multilineTagIndentFactor,multilineTagIndentPastTag:y.multilineTagIndentPastTag,allowMissingTagName:y.allowMissingTagName}),C={},x=y&&y.tags,E=y&&y.scriptTypes;if(h(n,C),x&&h(x,C),E)for(var N=E.length-1;N>=0;N--)C.script.unshift(["type",E[N].matches,E[N].mode]);function L(H,rt){var nt=w.token(H,rt.htmlState),vt=/\btag\b/.test(nt),et;if(vt&&!/[<>\s\/]/.test(H.current())&&(et=rt.htmlState.tagName&&rt.htmlState.tagName.toLowerCase())&&C.hasOwnProperty(et))rt.inTag=et+" ";else if(rt.inTag&&vt&&/>$/.test(H.current())){var G=/^([\S]+) (.*)/.exec(rt.inTag);rt.inTag=null;var W=H.current()==">"&&g(C[G[1]],G[2]),U=e.getMode(m,W),D=c(G[1],!0),Y=c(G[1],!1);rt.token=function(K,ct){return K.match(D,!1)?(ct.token=L,ct.localState=ct.localMode=null,null):o(K,Y,ct.localMode.token(K,ct.localState))},rt.localMode=U,rt.localState=e.startState(U,w.indent(rt.htmlState,"",""))}else rt.inTag&&(rt.inTag+=H.current(),H.eol()&&(rt.inTag+=" "));return nt}return{startState:function(){var H=e.startState(w);return{token:L,inTag:null,localMode:null,localState:null,htmlState:H}},copyState:function(H){var rt;return H.localState&&(rt=e.copyState(H.localMode,H.localState)),{token:H.token,inTag:H.inTag,localMode:H.localMode,localState:rt,htmlState:e.copyState(w,H.htmlState)}},token:function(H,rt){return rt.token(H,rt)},indent:function(H,rt,nt){return!H.localMode||/^\s*<\//.test(rt)?w.indent(H.htmlState,rt,nt):H.localMode.indent?H.localMode.indent(H.localState,rt,nt):e.Pass},innerMode:function(H){return{state:H.localState||H.htmlState,mode:H.localMode||w}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")})}),6061:((i,r,t)=>{(function(e){e(t(4408))})(function(e){e.defineMode("javascript",function(n,o){var s=n.indentUnit,u=o.statementIndent,f=o.jsonld,c=o.json||f,h=o.trackScope!==!1,g=o.typescript,m=o.wordCharacters||/[\w$\xa1-\uffff]/,y=(function(){function I(Ke){return{type:Ke,style:"keyword"}}var X=I("keyword a"),xt=I("keyword b"),jt=I("keyword c"),Ft=I("keyword d"),Ce=I("operator"),Pe={type:"atom",style:"atom"};return{if:I("if"),while:X,with:X,else:xt,do:xt,try:xt,finally:xt,return:Ft,break:Ft,continue:Ft,new:I("new"),delete:jt,void:jt,throw:jt,debugger:I("debugger"),var:I("var"),const:I("var"),let:I("var"),function:I("function"),catch:I("catch"),for:I("for"),switch:I("switch"),case:I("case"),default:I("default"),in:Ce,typeof:Ce,instanceof:Ce,true:Pe,false:Pe,null:Pe,undefined:Pe,NaN:Pe,Infinity:Pe,this:I("this"),class:I("class"),super:I("atom"),yield:jt,export:I("export"),import:I("import"),extends:jt,await:jt}})(),w=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function x(I){for(var X=!1,xt,jt=!1;(xt=I.next())!=null;){if(!X){if(xt=="/"&&!jt)return;xt=="["?jt=!0:jt&&xt=="]"&&(jt=!1)}X=!X&&xt=="\\"}}var E,N;function L(I,X,xt){return E=I,N=xt,X}function H(I,X){var xt=I.next();if(xt=='"'||xt=="'")return X.tokenize=rt(xt),X.tokenize(I,X);if(xt=="."&&I.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return L("number","number");if(xt=="."&&I.match(".."))return L("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(xt))return L(xt);if(xt=="="&&I.eat(">"))return L("=>","operator");if(xt=="0"&&I.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return L("number","number");if(/\d/.test(xt))return I.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),L("number","number");if(xt=="/")return I.eat("*")?(X.tokenize=nt,nt(I,X)):I.eat("/")?(I.skipToEnd(),L("comment","comment")):Sn(I,X,1)?(x(I),I.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),L("regexp","string-2")):(I.eat("="),L("operator","operator",I.current()));if(xt=="`")return X.tokenize=vt,vt(I,X);if(xt=="#"&&I.peek()=="!")return I.skipToEnd(),L("meta","meta");if(xt=="#"&&I.eatWhile(m))return L("variable","property");if(xt=="<"&&I.match("!--")||xt=="-"&&I.match("->")&&!/\S/.test(I.string.slice(0,I.start)))return I.skipToEnd(),L("comment","comment");if(w.test(xt))return(xt!=">"||!X.lexical||X.lexical.type!=">")&&(I.eat("=")?(xt=="!"||xt=="=")&&I.eat("="):/[<>*+\-|&?]/.test(xt)&&(I.eat(xt),xt==">"&&I.eat(xt))),xt=="?"&&I.eat(".")?L("."):L("operator","operator",I.current());if(m.test(xt)){I.eatWhile(m);var jt=I.current();if(X.lastType!="."){if(y.propertyIsEnumerable(jt)){var Ft=y[jt];return L(Ft.type,Ft.style,jt)}if(jt=="async"&&I.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return L("async","keyword",jt)}return L("variable","variable",jt)}}function rt(I){return function(X,xt){var jt=!1,Ft;if(f&&X.peek()=="@"&&X.match(C))return xt.tokenize=H,L("jsonld-keyword","meta");for(;(Ft=X.next())!=null&&!(Ft==I&&!jt);)jt=!jt&&Ft=="\\";return jt||(xt.tokenize=H),L("string","string")}}function nt(I,X){for(var xt=!1,jt;jt=I.next();){if(jt=="/"&&xt){X.tokenize=H;break}xt=jt=="*"}return L("comment","comment")}function vt(I,X){for(var xt=!1,jt;(jt=I.next())!=null;){if(!xt&&(jt=="`"||jt=="$"&&I.eat("{"))){X.tokenize=H;break}xt=!xt&&jt=="\\"}return L("quasi","string-2",I.current())}var et="([{}])";function G(I,X){X.fatArrowAt&&(X.fatArrowAt=null);var xt=I.string.indexOf("=>",I.start);if(!(xt<0)){if(g){var jt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(I.string.slice(I.start,xt));jt&&(xt=jt.index)}for(var Ft=0,Ce=!1,Pe=xt-1;Pe>=0;--Pe){var Ke=I.string.charAt(Pe),Re=et.indexOf(Ke);if(Re>=0&&Re<3){if(!Ft){++Pe;break}if(--Ft==0){Ke=="("&&(Ce=!0);break}}else if(Re>=3&&Re<6)++Ft;else if(m.test(Ke))Ce=!0;else if(/["'\/`]/.test(Ke))for(;;--Pe){if(Pe==0)return;var sn=I.string.charAt(Pe-1);if(sn==Ke&&I.string.charAt(Pe-2)!="\\"){Pe--;break}}else if(Ce&&!Ft){++Pe;break}}Ce&&!Ft&&(X.fatArrowAt=Pe)}}var W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function U(I,X,xt,jt,Ft,Ce){this.indented=I,this.column=X,this.type=xt,this.prev=Ft,this.info=Ce,jt!=null&&(this.align=jt)}function D(I,X){if(!h)return!1;for(var xt=I.localVars;xt;xt=xt.next)if(xt.name==X)return!0;for(var jt=I.context;jt;jt=jt.prev)for(var xt=jt.vars;xt;xt=xt.next)if(xt.name==X)return!0}function Y(I,X,xt,jt,Ft){var Ce=I.cc;for(K.state=I,K.stream=Ft,K.marked=null,K.cc=Ce,K.style=X,I.lexical.hasOwnProperty("align")||(I.lexical.align=!0);;){var Pe=Ce.length?Ce.pop():c?ee:se;if(Pe(xt,jt)){for(;Ce.length&&Ce[Ce.length-1].lex;)Ce.pop()();return K.marked?K.marked:xt=="variable"&&D(I,jt)?"variable-2":X}}}var K={state:null,marked:null,cc:null};function ct(){for(var I=arguments.length-1;I>=0;I--)K.cc.push(arguments[I])}function M(){return ct.apply(null,arguments),!0}function wt(I,X){for(var xt=X;xt;xt=xt.next)if(xt.name==I)return!0;return!1}function gt(I){var X=K.state;if(K.marked="def",!!h){if(X.context){if(X.lexical.info=="var"&&X.context&&X.context.block){var xt=At(I,X.context);if(xt!=null){X.context=xt;return}}else if(!wt(I,X.localVars)){X.localVars=new yt(I,X.localVars);return}}o.globalVars&&!wt(I,X.globalVars)&&(X.globalVars=new yt(I,X.globalVars))}}function At(I,X){if(X)if(X.block){var xt=At(I,X.prev);return xt?xt==X.prev?X:new oe(xt,X.vars,!0):null}else return wt(I,X.vars)?X:new oe(X.prev,new yt(I,X.vars),!1);else return null}function Qt(I){return I=="public"||I=="private"||I=="protected"||I=="abstract"||I=="readonly"}function oe(I,X,xt){this.prev=I,this.vars=X,this.block=xt}function yt(I,X){this.name=I,this.next=X}var Ct=new yt("this",new yt("arguments",null));function bt(){K.state.context=new oe(K.state.context,K.state.localVars,!1),K.state.localVars=Ct}function Lt(){K.state.context=new oe(K.state.context,K.state.localVars,!0),K.state.localVars=null}function zt(){K.state.localVars=K.state.context.vars,K.state.context=K.state.context.prev}zt.lex=!0;function Dt(I,X){var xt=function(){var jt=K.state,Ft=jt.indented;if(jt.lexical.type=="stat")Ft=jt.lexical.indented;else for(var Ce=jt.lexical;Ce&&Ce.type==")"&&Ce.align;Ce=Ce.prev)Ft=Ce.indented;jt.lexical=new U(Ft,K.stream.column(),I,null,jt.lexical,X)};return xt.lex=!0,xt}function Ut(){var I=K.state;I.lexical.prev&&(I.lexical.type==")"&&(I.indented=I.lexical.indented),I.lexical=I.lexical.prev)}Ut.lex=!0;function Yt(I){function X(xt){return xt==I?M():I==";"||xt=="}"||xt==")"||xt=="]"?ct():M(X)}return X}function se(I,X){return I=="var"?M(Dt("vardef",X),fe,Yt(";"),Ut):I=="keyword a"?M(Dt("form"),ue,se,Ut):I=="keyword b"?M(Dt("form"),se,Ut):I=="keyword d"?K.stream.match(/^\s*$/,!1)?M():M(Dt("stat"),Vt,Yt(";"),Ut):I=="debugger"?M(Yt(";")):I=="{"?M(Dt("}"),Lt,pt,Ut,zt):I==";"?M():I=="if"?(K.state.lexical.info=="else"&&K.state.cc[K.state.cc.length-1]==Ut&&K.state.cc.pop()(),M(Dt("form"),ue,se,Ut,ze)):I=="function"?M(nr):I=="for"?M(Dt("form"),Lt,jr,se,zt,Ut):I=="class"||g&&X=="interface"?(K.marked="keyword",M(Dt("form",I=="class"?I:X),Br,Ut)):I=="variable"?g&&X=="declare"?(K.marked="keyword",M(se)):g&&(X=="module"||X=="enum"||X=="type")&&K.stream.match(/^\s*\w/,!1)?(K.marked="keyword",X=="enum"?M(Cn):X=="type"?M(Mr,Yt("operator"),ae,Yt(";")):M(Dt("form"),ye,Yt("{"),Dt("}"),pt,Ut,Ut)):g&&X=="namespace"?(K.marked="keyword",M(Dt("form"),ee,se,Ut)):g&&X=="abstract"?(K.marked="keyword",M(se)):M(Dt("stat"),ie):I=="switch"?M(Dt("form"),ue,Yt("{"),Dt("}","switch"),Lt,pt,Ut,Ut,zt):I=="case"?M(ee,Yt(":")):I=="default"?M(Yt(":")):I=="catch"?M(Dt("form"),bt,Xt,se,Ut,zt):I=="export"?M(Dt("stat"),Ie,Ut):I=="import"?M(Dt("stat"),yr,Ut):I=="async"?M(se):X=="@"?M(ee,se):ct(Dt("stat"),ee,Yt(";"),Ut)}function Xt(I){if(I=="(")return M(ve,Yt(")"))}function ee(I,X){return mt(I,X,!1)}function xe(I,X){return mt(I,X,!0)}function ue(I){return I!="("?ct():M(Dt(")"),Vt,Yt(")"),Ut)}function mt(I,X,xt){if(K.state.fatArrowAt==K.stream.start){var jt=xt?_t:it;if(I=="(")return M(bt,Dt(")"),R(ve,")"),Ut,Yt("=>"),jt,zt);if(I=="variable")return ct(bt,ye,Yt("=>"),jt,zt)}var Ft=xt?T:Rt;return W.hasOwnProperty(I)?M(Ft):I=="function"?M(nr,Ft):I=="class"||g&&X=="interface"?(K.marked="keyword",M(Dt("form"),on,Ut)):I=="keyword c"||I=="async"?M(xt?xe:ee):I=="("?M(Dt(")"),Vt,Yt(")"),Ut,Ft):I=="operator"||I=="spread"?M(xt?xe:ee):I=="["?M(Dt("]"),an,Ut,Ft):I=="{"?Et(me,"}",null,Ft):I=="quasi"?ct(j,Ft):I=="new"?M(q(xt)):M()}function Vt(I){return I.match(/[;\}\)\],]/)?ct():ct(ee)}function Rt(I,X){return I==","?M(Vt):T(I,X,!1)}function T(I,X,xt){var jt=xt==!1?Rt:T,Ft=xt==!1?ee:xe;if(I=="=>")return M(bt,xt?_t:it,zt);if(I=="operator")return/\+\+|--/.test(X)||g&&X=="!"?M(jt):g&&X=="<"&&K.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?M(Dt(">"),R(ae,">"),Ut,jt):X=="?"?M(ee,Yt(":"),Ft):M(Ft);if(I=="quasi")return ct(j,jt);if(I!=";"){if(I=="(")return Et(xe,")","call",jt);if(I==".")return M(_e,jt);if(I=="[")return M(Dt("]"),Vt,Yt("]"),Ut,jt);if(g&&X=="as")return K.marked="keyword",M(ae,jt);if(I=="regexp")return K.state.lastType=K.marked="operator",K.stream.backUp(K.stream.pos-K.stream.start-1),M(Ft)}}function j(I,X){return I!="quasi"?ct():X.slice(X.length-2)!="${"?M(j):M(Vt,z)}function z(I){if(I=="}")return K.marked="string-2",K.state.tokenize=vt,M(j)}function it(I){return G(K.stream,K.state),ct(I=="{"?se:ee)}function _t(I){return G(K.stream,K.state),ct(I=="{"?se:xe)}function q(I){return function(X){return X=="."?M(I?st:ht):X=="variable"&&g?M(lt,I?T:Rt):ct(I?xe:ee)}}function ht(I,X){if(X=="target")return K.marked="keyword",M(Rt)}function st(I,X){if(X=="target")return K.marked="keyword",M(T)}function ie(I){return I==":"?M(Ut,se):ct(Rt,Yt(";"),Ut)}function _e(I){if(I=="variable")return K.marked="property",M()}function me(I,X){if(I=="async")return K.marked="property",M(me);if(I=="variable"||K.style=="keyword"){if(K.marked="property",X=="get"||X=="set")return M(B);var xt;return g&&K.state.fatArrowAt==K.stream.start&&(xt=K.stream.match(/^\s*:\s*/,!1))&&(K.state.fatArrowAt=K.stream.pos+xt[0].length),M(ot)}else{if(I=="number"||I=="string")return K.marked=f?"property":K.style+" property",M(ot);if(I=="jsonld-keyword")return M(ot);if(g&&Qt(X))return K.marked="keyword",M(me);if(I=="[")return M(ee,It,Yt("]"),ot);if(I=="spread")return M(xe,ot);if(X=="*")return K.marked="keyword",M(me);if(I==":")return ct(ot)}}function B(I){return I!="variable"?ct(ot):(K.marked="property",M(nr))}function ot(I){if(I==":")return M(xe);if(I=="(")return ct(nr)}function R(I,X,xt){function jt(Ft,Ce){if(xt?xt.indexOf(Ft)>-1:Ft==","){var Pe=K.state.lexical;return Pe.info=="call"&&(Pe.pos=(Pe.pos||0)+1),M(function(Ke,Re){return Ke==X||Re==X?ct():ct(I)},jt)}return Ft==X||Ce==X?M():xt&&xt.indexOf(";")>-1?ct(I):M(Yt(X))}return function(Ft,Ce){return Ft==X||Ce==X?M():ct(I,jt)}}function Et(I,X,xt){for(var jt=3;jt<arguments.length;jt++)K.cc.push(arguments[jt]);return M(Dt(X,xt),R(I,X),Ut)}function pt(I){return I=="}"?M():ct(se,pt)}function It(I,X){if(g){if(I==":")return M(ae);if(X=="?")return M(It)}}function Jt(I,X){if(g&&(I==":"||X=="in"))return M(ae)}function Zt(I){if(g&&I==":")return K.stream.match(/^\s*\w+\s+is\b/,!1)?M(ee,Gt,ae):M(ae)}function Gt(I,X){if(X=="is")return K.marked="keyword",M()}function ae(I,X){if(X=="keyof"||X=="typeof"||X=="infer"||X=="readonly")return K.marked="keyword",M(X=="typeof"?xe:ae);if(I=="variable"||X=="void")return K.marked="type",M(Q);if(X=="|"||X=="&")return M(ae);if(I=="string"||I=="number"||I=="atom")return M(Q);if(I=="[")return M(Dt("]"),R(ae,"]",","),Ut,Q);if(I=="{")return M(Dt("}"),Ae,Ut,Q);if(I=="(")return M(R(F,")"),Se,Q);if(I=="<")return M(R(ae,">"),ae);if(I=="quasi")return ct(Je,Q)}function Se(I){if(I=="=>")return M(ae)}function Ae(I){return I.match(/[\}\)\]]/)?M():I==","||I==";"?M(Ae):ct(Te,Ae)}function Te(I,X){if(I=="variable"||K.style=="keyword")return K.marked="property",M(Te);if(X=="?"||I=="number"||I=="string")return M(Te);if(I==":")return M(ae);if(I=="[")return M(Yt("variable"),Jt,Yt("]"),Te);if(I=="(")return ct(ke,Te);if(!I.match(/[;\}\)\],]/))return M()}function Je(I,X){return I!="quasi"?ct():X.slice(X.length-2)!="${"?M(Je):M(ae,pr)}function pr(I){if(I=="}")return K.marked="string-2",K.state.tokenize=vt,M(Je)}function F(I,X){return I=="variable"&&K.stream.match(/^\s*[?:]/,!1)||X=="?"?M(F):I==":"?M(ae):I=="spread"?M(F):ct(ae)}function Q(I,X){if(X=="<")return M(Dt(">"),R(ae,">"),Ut,Q);if(X=="|"||I=="."||X=="&")return M(ae);if(I=="[")return M(ae,Yt("]"),Q);if(X=="extends"||X=="implements")return K.marked="keyword",M(ae);if(X=="?")return M(ae,Yt(":"),ae)}function lt(I,X){if(X=="<")return M(Dt(">"),R(ae,">"),Ut,Q)}function Pt(){return ct(ae,Wt)}function Wt(I,X){if(X=="=")return M(ae)}function fe(I,X){return X=="enum"?(K.marked="keyword",M(Cn)):ct(ye,It,We,bn)}function ye(I,X){if(g&&Qt(X))return K.marked="keyword",M(ye);if(I=="variable")return gt(X),M();if(I=="spread")return M(ye);if(I=="[")return Et(rr,"]");if(I=="{")return Et(Be,"}")}function Be(I,X){return I=="variable"&&!K.stream.match(/^\s*:/,!1)?(gt(X),M(We)):(I=="variable"&&(K.marked="property"),I=="spread"?M(ye):I=="}"?ct():I=="["?M(ee,Yt("]"),Yt(":"),Be):M(Yt(":"),ye,We))}function rr(){return ct(ye,We)}function We(I,X){if(X=="=")return M(xe)}function bn(I){if(I==",")return M(fe)}function ze(I,X){if(I=="keyword b"&&X=="else")return M(Dt("form","else"),se,Ut)}function jr(I,X){if(X=="await")return M(jr);if(I=="(")return M(Dt(")"),nn,Ut)}function nn(I){return I=="var"?M(fe,Le):I=="variable"?M(Le):ct(Le)}function Le(I,X){return I==")"?M():I==";"?M(Le):X=="in"||X=="of"?(K.marked="keyword",M(ee,Le)):ct(ee,Le)}function nr(I,X){if(X=="*")return K.marked="keyword",M(nr);if(I=="variable")return gt(X),M(nr);if(I=="(")return M(bt,Dt(")"),R(ve,")"),Ut,Zt,se,zt);if(g&&X=="<")return M(Dt(">"),R(Pt,">"),Ut,nr)}function ke(I,X){if(X=="*")return K.marked="keyword",M(ke);if(I=="variable")return gt(X),M(ke);if(I=="(")return M(bt,Dt(")"),R(ve,")"),Ut,Zt,zt);if(g&&X=="<")return M(Dt(">"),R(Pt,">"),Ut,ke)}function Mr(I,X){if(I=="keyword"||I=="variable")return K.marked="type",M(Mr);if(X=="<")return M(Dt(">"),R(Pt,">"),Ut)}function ve(I,X){return X=="@"&&M(ee,ve),I=="spread"?M(ve):g&&Qt(X)?(K.marked="keyword",M(ve)):g&&I=="this"?M(It,We):ct(ye,It,We)}function on(I,X){return I=="variable"?Br(I,X):ar(I,X)}function Br(I,X){if(I=="variable")return gt(X),M(ar)}function ar(I,X){if(X=="<")return M(Dt(">"),R(Pt,">"),Ut,ar);if(X=="extends"||X=="implements"||g&&I==",")return X=="implements"&&(K.marked="keyword"),M(g?ae:ee,ar);if(I=="{")return M(Dt("}"),sr,Ut)}function sr(I,X){if(I=="async"||I=="variable"&&(X=="static"||X=="get"||X=="set"||g&&Qt(X))&&K.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return K.marked="keyword",M(sr);if(I=="variable"||K.style=="keyword")return K.marked="property",M(Rr,sr);if(I=="number"||I=="string")return M(Rr,sr);if(I=="[")return M(ee,It,Yt("]"),Rr,sr);if(X=="*")return K.marked="keyword",M(sr);if(g&&I=="(")return ct(ke,sr);if(I==";"||I==",")return M(sr);if(I=="}")return M();if(X=="@")return M(ee,sr)}function Rr(I,X){if(X=="!"||X=="?")return M(Rr);if(I==":")return M(ae,We);if(X=="=")return M(xe);var xt=K.state.lexical.prev,jt=xt&&xt.info=="interface";return ct(jt?ke:nr)}function Ie(I,X){return X=="*"?(K.marked="keyword",M(Ne,Yt(";"))):X=="default"?(K.marked="keyword",M(ee,Yt(";"))):I=="{"?M(R(re,"}"),Ne,Yt(";")):ct(se)}function re(I,X){if(X=="as")return K.marked="keyword",M(Yt("variable"));if(I=="variable")return ct(xe,re)}function yr(I){return I=="string"?M():I=="("?ct(ee):I=="."?ct(Rt):ct($e,_r,Ne)}function $e(I,X){return I=="{"?Et($e,"}"):(I=="variable"&&gt(X),X=="*"&&(K.marked="keyword"),M(Ee))}function _r(I){if(I==",")return M($e,_r)}function Ee(I,X){if(X=="as")return K.marked="keyword",M($e)}function Ne(I,X){if(X=="from")return K.marked="keyword",M(ee)}function an(I){return I=="]"?M():ct(R(xe,"]"))}function Cn(){return ct(Dt("form"),ye,Yt("{"),Dt("}"),R(Mt,"}"),Ut,Ut)}function Mt(){return ct(ye,We)}function pe(I,X){return I.lastType=="operator"||I.lastType==","||w.test(X.charAt(0))||/[,.]/.test(X.charAt(0))}function Sn(I,X,xt){return X.tokenize==H&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(X.lastType)||X.lastType=="quasi"&&/\{\s*$/.test(I.string.slice(0,I.pos-(xt||0)))}return{startState:function(I){var X={tokenize:H,lastType:"sof",cc:[],lexical:new U((I||0)-s,0,"block",!1),localVars:o.localVars,context:o.localVars&&new oe(null,null,!1),indented:I||0};return o.globalVars&&typeof o.globalVars=="object"&&(X.globalVars=o.globalVars),X},token:function(I,X){if(I.sol()&&(X.lexical.hasOwnProperty("align")||(X.lexical.align=!1),X.indented=I.indentation(),G(I,X)),X.tokenize!=nt&&I.eatSpace())return null;var xt=X.tokenize(I,X);return E=="comment"?xt:(X.lastType=E=="operator"&&(N=="++"||N=="--")?"incdec":E,Y(X,xt,E,N,I))},indent:function(I,X){if(I.tokenize==nt||I.tokenize==vt)return e.Pass;if(I.tokenize!=H)return 0;var xt=X&&X.charAt(0),jt=I.lexical,Ft;if(!/^\s*else\b/.test(X))for(var Ce=I.cc.length-1;Ce>=0;--Ce){var Pe=I.cc[Ce];if(Pe==Ut)jt=jt.prev;else if(Pe!=ze&&Pe!=zt)break}for(;(jt.type=="stat"||jt.type=="form")&&(xt=="}"||(Ft=I.cc[I.cc.length-1])&&(Ft==Rt||Ft==T)&&!/^[,\.=+\-*:?[\(]/.test(X));)jt=jt.prev;u&&jt.type==")"&&jt.prev.type=="stat"&&(jt=jt.prev);var Ke=jt.type,Re=xt==Ke;return Ke=="vardef"?jt.indented+(I.lastType=="operator"||I.lastType==","?jt.info.length+1:0):Ke=="form"&&xt=="{"?jt.indented:Ke=="form"?jt.indented+s:Ke=="stat"?jt.indented+(pe(I,X)?u||s:0):jt.info=="switch"&&!Re&&o.doubleIndentSwitch!=!1?jt.indented+(/^(?:case|default)\b/.test(X)?s:2*s):jt.align?jt.column+(Re?0:1):jt.indented+(Re?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:f,jsonMode:c,expressionAllowed:Sn,skipExpression:function(I){Y(I,"atom","atom","true",new e.StringStream("",2,null))}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}),9701:((i,r,t)=>{(function(e){e(t(4408))})(function(e){var n={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},o={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(s,u){var f=s.indentUnit,c={},h=u.htmlMode?n:o;for(var g in h)c[g]=h[g];for(var g in u)c[g]=u[g];var m,y;function w(M,wt){function gt(oe){return wt.tokenize=oe,oe(M,wt)}var At=M.next();if(At=="<")return M.eat("!")?M.eat("[")?M.match("CDATA[")?gt(E("atom","]]>")):null:M.match("--")?gt(E("comment","-->")):M.match("DOCTYPE",!0,!0)?(M.eatWhile(/[\w\._\-]/),gt(N(1))):null:M.eat("?")?(M.eatWhile(/[\w\._\-]/),wt.tokenize=E("meta","?>"),"meta"):(m=M.eat("/")?"closeTag":"openTag",wt.tokenize=C,"tag bracket");if(At=="&"){var Qt;return M.eat("#")?M.eat("x")?Qt=M.eatWhile(/[a-fA-F\d]/)&&M.eat(";"):Qt=M.eatWhile(/[\d]/)&&M.eat(";"):Qt=M.eatWhile(/[\w\.\-:]/)&&M.eat(";"),Qt?"atom":"error"}else return M.eatWhile(/[^&<]/),null}w.isInText=!0;function C(M,wt){var gt=M.next();if(gt==">"||gt=="/"&&M.eat(">"))return wt.tokenize=w,m=gt==">"?"endTag":"selfcloseTag","tag bracket";if(gt=="=")return m="equals",null;if(gt=="<"){wt.tokenize=w,wt.state=vt,wt.tagName=wt.tagStart=null;var At=wt.tokenize(M,wt);return At?At+" tag error":"tag error"}else return/[\'\"]/.test(gt)?(wt.tokenize=x(gt),wt.stringStartCol=M.column(),wt.tokenize(M,wt)):(M.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function x(M){var wt=function(gt,At){for(;!gt.eol();)if(gt.next()==M){At.tokenize=C;break}return"string"};return wt.isInAttribute=!0,wt}function E(M,wt){return function(gt,At){for(;!gt.eol();){if(gt.match(wt)){At.tokenize=w;break}gt.next()}return M}}function N(M){return function(wt,gt){for(var At;(At=wt.next())!=null;){if(At=="<")return gt.tokenize=N(M+1),gt.tokenize(wt,gt);if(At==">")if(M==1){gt.tokenize=w;break}else return gt.tokenize=N(M-1),gt.tokenize(wt,gt)}return"meta"}}function L(M){return M&&M.toLowerCase()}function H(M,wt,gt){this.prev=M.context,this.tagName=wt||"",this.indent=M.indented,this.startOfLine=gt,(c.doNotIndent.hasOwnProperty(wt)||M.context&&M.context.noIndent)&&(this.noIndent=!0)}function rt(M){M.context&&(M.context=M.context.prev)}function nt(M,wt){for(var gt;;){if(!M.context||(gt=M.context.tagName,!c.contextGrabbers.hasOwnProperty(L(gt))||!c.contextGrabbers[L(gt)].hasOwnProperty(L(wt))))return;rt(M)}}function vt(M,wt,gt){return M=="openTag"?(gt.tagStart=wt.column(),et):M=="closeTag"?G:vt}function et(M,wt,gt){return M=="word"?(gt.tagName=wt.current(),y="tag",D):c.allowMissingTagName&&M=="endTag"?(y="tag bracket",D(M,wt,gt)):(y="error",et)}function G(M,wt,gt){if(M=="word"){var At=wt.current();return gt.context&&gt.context.tagName!=At&&c.implicitlyClosed.hasOwnProperty(L(gt.context.tagName))&&rt(gt),gt.context&&gt.context.tagName==At||c.matchClosing===!1?(y="tag",W):(y="tag error",U)}else return c.allowMissingTagName&&M=="endTag"?(y="tag bracket",W(M,wt,gt)):(y="error",U)}function W(M,wt,gt){return M!="endTag"?(y="error",W):(rt(gt),vt)}function U(M,wt,gt){return y="error",W(M,wt,gt)}function D(M,wt,gt){if(M=="word")return y="attribute",Y;if(M=="endTag"||M=="selfcloseTag"){var At=gt.tagName,Qt=gt.tagStart;return gt.tagName=gt.tagStart=null,M=="selfcloseTag"||c.autoSelfClosers.hasOwnProperty(L(At))?nt(gt,At):(nt(gt,At),gt.context=new H(gt,At,Qt==gt.indented)),vt}return y="error",D}function Y(M,wt,gt){return M=="equals"?K:(c.allowMissing||(y="error"),D(M,wt,gt))}function K(M,wt,gt){return M=="string"?ct:M=="word"&&c.allowUnquoted?(y="string",D):(y="error",D(M,wt,gt))}function ct(M,wt,gt){return M=="string"?ct:D(M,wt,gt)}return{startState:function(M){var wt={tokenize:w,state:vt,indented:M||0,tagName:null,tagStart:null,context:null};return M!=null&&(wt.baseIndent=M),wt},token:function(M,wt){if(!wt.tagName&&M.sol()&&(wt.indented=M.indentation()),M.eatSpace())return null;m=null;var gt=wt.tokenize(M,wt);return(gt||m)&&gt!="comment"&&(y=null,wt.state=wt.state(m||gt,M,wt),y&&(gt=y=="error"?gt+" error":y)),gt},indent:function(M,wt,gt){var At=M.context;if(M.tokenize.isInAttribute)return M.tagStart==M.indented?M.stringStartCol+1:M.indented+f;if(At&&At.noIndent)return e.Pass;if(M.tokenize!=C&&M.tokenize!=w)return gt?gt.match(/^(\s*)/)[0].length:0;if(M.tagName)return c.multilineTagIndentPastTag!==!1?M.tagStart+M.tagName.length+2:M.tagStart+f*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(wt))return 0;var Qt=wt&&/^<(\/)?([\w_:\.-]*)/.exec(wt);if(Qt&&Qt[1])for(;At;)if(At.tagName==Qt[2]){At=At.prev;break}else if(c.implicitlyClosed.hasOwnProperty(L(At.tagName)))At=At.prev;else break;else if(Qt)for(;At;){var oe=c.contextGrabbers[L(At.tagName)];if(oe&&oe.hasOwnProperty(L(Qt[2])))At=At.prev;else break}for(;At&&At.prev&&!At.startOfLine;)At=At.prev;return At?At.indent+f:M.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(M){M.state==K&&(M.state=D)},xmlCurrentTag:function(M){return M.tagName?{name:M.tagName,close:M.type=="closeTag"}:null},xmlCurrentContext:function(M){for(var wt=[],gt=M.context;gt;gt=gt.prev)wt.push(gt.tagName);return wt.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})}),7058:((i,r,t)=>{t.d(r,{A:()=>s});var e=t(9156),n=(function(){var u=function(f,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(h[m]=g[m])},u(f,c)};return function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");u(f,c);function h(){this.constructor=f}f.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}})(),o=(function(u){n(f,u);function f(c,h,g){var m=u.call(this,h,g)||this;return m._module=c,m}return Object.defineProperty(f.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),f})(e.Kx);const s=o}),179:((i,r,t)=>{t.d(r,{A:()=>u,F:()=>o});var e=t(7058),n=(function(){var f=function(c,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])},f(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}})(),o;(function(f){f.Select="select",f.Hover="hover",f.Spacing="spacing",f.Target="target",f.Resize="resize"})(o||(o={}));var s=(function(f){n(c,f);function c(){return f!==null&&f.apply(this,arguments)||this}return c.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(c.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"component",{get:function(){var h,g=this.get("component");return g||((h=this.get("componentView"))===null||h===void 0?void 0:h.model)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"componentView",{get:function(){var h,g=this.get("componentView");return g||((h=this.get("component"))===null||h===void 0?void 0:h.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"el",{get:function(){var h;return(h=this.componentView)===null||h===void 0?void 0:h.el},enumerable:!1,configurable:!0}),c.prototype.getBoxRect=function(h){var g=this,m=g.el,y=g.em,w=y.Canvas.getCanvasView(),C=this.get("boxRect");return C||(m&&w?w.getElBoxRect(m,h):{x:0,y:0,width:0,height:0})},c.prototype.getStyle=function(h){h===void 0&&(h={});var g=h.boxRect||this.getBoxRect(h),m=g.width,y=g.height,w=g.x,C=g.y;return{width:"".concat(m,"px"),height:"".concat(y,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(w,"px ").concat(C,"px")}},c.prototype.isType=function(h){return this.type===h},c})(e.A);const u=s}),1738:((i,r,t)=>{t.d(r,{A:()=>n});var e;(function(o){o.run="command:run",o.runCommand="command:run:",o.runBeforeCommand="command:run:before:",o.abort="command:abort:",o.stop="command:stop",o.stopCommand="command:stop:",o.stopBeforeCommand="command:stop:before:",o.call="command:call",o.callCommand="command:call:"})(e||(e={}));const n=e}),9484:((i,r,t)=>{t.r(r),t.d(r,{default:()=>e});const e={run:function(n){n.Components.clear(),n.Css.clear()}}}),9516:((i,r,t)=>{t.r(r),t.d(r,{default:()=>s});var e=t(5706),n=t(9966),o=t(6294);const s={run:function(u){(0,e.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=u,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(u){this.toggleMove(),this.disableDragger()},onKeyUp:function(u){(0,o.Ch)(u)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(u){this.toggleDragger(1,u)},disableDragger:function(u){this.toggleDragger(0,u)},toggleDragger:function(u,f){var c=this,h=c.canvasModel,g=c.em,m=this.dragger,y=u?"add":"remove";this.getCanvas().classList[y]("".concat(this.ppfx,"is__grabbing")),m||(m=new n.A({getPosition:function(){return{x:h.get("x"),y:h.get("y")}},setPosition:function(w){var C=w.x,x=w.y;h.set({x:C,y:x})},onStart:function(w,C){g.trigger("canvas:move:start",C)},onDrag:function(w,C){g.trigger("canvas:move",C)},onEnd:function(w,C){g.trigger("canvas:move:end",C)}}),this.dragger=m),u?m.start(f):m.stop()},toggleMove:function(u){var f=this.ppfx,c=u?"add":"remove",h=u?"on":"off",g={on:o.on,off:o.AU},m=this.getCanvas(),y=["".concat(f,"is__grab")];!u&&y.push("".concat(f,"is__grabbing")),y.forEach(function(w){return m.classList[c](w)}),g[h](document,"keyup",this.onKeyUp),g[h](m,"mousedown",this.enableDragger),g[h](document,"mouseup",this.disableDragger)}}}),9946:((i,r,t)=>{t.r(r),t.d(r,{default:()=>c,defineCommand:()=>u});var e=t(9156),n=t(1738),o=(function(){var h=function(g,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(y[C]=w[C])},h(g,m)};return function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}})(),s=function(){return s=Object.assign||function(h){for(var g,m=1,y=arguments.length;m<y;m++){g=arguments[m];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(h[w]=g[w])}return h},s.apply(this,arguments)};function u(h){return h}var f=(function(h){o(g,h);function g(m){var y=h.call(this,0)||this;y.config=m||{},y.em=y.config.em||{};var w=y.config.stylePrefix;return y.pfx=w,y.ppfx=y.config.pStylePrefix,y.hoverClass="".concat(w,"hover"),y.badgeClass="".concat(w,"badge"),y.plhClass="".concat(w,"placeholder"),y.freezClass="".concat(y.ppfx,"freezed"),y.canvas=y.em.Canvas,y.init(y.config),y}return g.prototype.onFrameScroll=function(m){},g.prototype.getCanvas=function(){return this.canvas.getElement()},g.prototype.getCanvasBody=function(){return this.canvas.getBody()},g.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},g.prototype.offset=function(m){var y=m.getBoundingClientRect();return{top:y.top+m.ownerDocument.body.scrollTop,left:y.left+m.ownerDocument.body.scrollLeft}},g.prototype.init=function(m){},g.prototype.callRun=function(m,y){y===void 0&&(y={});var w=this.id;if(m.trigger("".concat(n.A.runBeforeCommand).concat(w),{options:y}),y.abort){m.trigger("".concat(n.A.abort).concat(w),{options:y});return}var C=y.sender||m,x=this.run(m,C,y),E={id:w,result:x,options:y},N=s(s({},E),{type:"run"});return this.noStop||(m.Commands.active[w]=x),m.trigger("".concat(n.A.runCommand).concat(w),E),m.trigger("".concat(n.A.callCommand).concat(w),N),m.trigger(n.A.run,E),m.trigger(n.A.call,N),x},g.prototype.callStop=function(m,y){y===void 0&&(y={});var w=this.id,C=y.sender||m;m.trigger("".concat(n.A.stopBeforeCommand).concat(w),{options:y});var x=this.stop(m,C,y),E={id:w,result:x,options:y},N=s(s({},E),{type:"stop"});return delete m.Commands.active[w],m.trigger("".concat(n.A.stopCommand).concat(w),E),m.trigger("".concat(n.A.callCommand).concat(w),N),m.trigger(n.A.stop,E),m.trigger(n.A.call,N),x},g.prototype.stopCommand=function(m){this.em.Commands.stop(this.id,m)},g.prototype.run=function(m,y,w){},g.prototype.stop=function(m,y,w){},g})(e.Kx);const c=f}),7801:((i,r,t)=>{t.r(r),t.d(r,{default:()=>s});var e=t(5706),n=function(u,f,c){if(c||arguments.length===2)for(var h=0,g=f.length,m;h<g;h++)(m||!(h in f))&&(m||(m=Array.prototype.slice.call(f,0,h)),m[h]=f[h]);return u.concat(m||Array.prototype.slice.call(f))},o={run:function(u,f,c){var h=this;c===void 0&&(c={});var g=[],m=c.component||u.getSelectedAll();return m=(0,e.isArray)(m)?n([],m,!0):[m],m.filter(Boolean).forEach(function(y){var w,C;if(!y.get("removable"))return h.em.logWarning("The element is not removable",{component:y});g.push(y);var x=((C=(w=y.delegate)===null||w===void 0?void 0:w.remove)===null||C===void 0?void 0:C.call(w,y))||y;x.remove()}),u.selectRemove(g),g}};const s=o}),4864:((i,r,t)=>{t.r(r),t.d(r,{default:()=>f});var e=t(5706),n=t(9966),o=t(1166),s=function(){return s=Object.assign||function(c){for(var h,g=1,m=arguments.length;g<m;g++){h=arguments[g];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(c[y]=h[y])}return c},s.apply(this,arguments)},u="dmode";const f={run:function(c,h,g){var m=this,y,w;if(g===void 0&&(g={}),(0,e.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget"),!g.target)throw new Error("Target option is required");var C=s({doc:(y=g.target.getEl())===null||y===void 0?void 0:y.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){var E;return(E=m.guidesStatic)!==null&&E!==void 0?E:[]},guidesTarget:function(){var E;return(E=m.guidesTarget)!==null&&E!==void 0?E:[]}},(w=g.dragger)!==null&&w!==void 0?w:{});this.setupGuides(),this.opts=g,this.editor=c,this.em=c.getModel(),this.target=g.target,this.isTran=g.mode=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var x=this.dragger;return x?x.setOptions(C):(x=new n.A(C),this.dragger=x),g.event&&x.start(g.event),this.toggleDrag(!0),this.em.trigger("".concat(u,":start"),this.getEventOpts()),x},getEventOpts:function(){var c,h,g=(h=(c=this.guidesTarget)===null||c===void 0?void 0:c.filter(function(m){return m.active}))!==null&&h!==void 0?h:[];return{mode:this.opts.mode,component:this.target,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic,guidesMatched:this.getGuidesMatched(g),command:this}},stop:function(){this.toggleDrag()},setupGuides:function(){var c;((c=this.guides)!==null&&c!==void 0?c:[]).forEach(function(h){var g,m=h.guide;(g=m?.parentNode)===null||g===void 0||g.removeChild(m)}),this.guides=[]},getGuidesContainer:function(){var c=this,h,g,m,y,w=this.guidesEl;if(!w){var C=this,x=C.editor,E=C.em,N=C.opts,L=(h=x.getConfig().stylePrefix)!==null&&h!==void 0?h:"",H=document.createElement("div"),rt=document.createElement("div"),nt='<div class="'.concat(L,"guide-info__line ").concat(L,`danger-bg">
        <div class="`).concat(L,"guide-info__content ").concat(L,`danger-color"></div>
      </div>`);w=document.createElement("div"),w.className="".concat(L,"guides"),H.className="".concat(L,"guide-info ").concat(L,"guide-info__x"),rt.className="".concat(L,"guide-info ").concat(L,"guide-info__y"),H.innerHTML=nt,rt.innerHTML=nt,w.appendChild(H),w.appendChild(rt),(g=x.Canvas.getGlobalToolsEl())===null||g===void 0||g.appendChild(w),this.guidesEl=w,this.elGuideInfoX=H,this.elGuideInfoY=rt,this.elGuideInfoContentX=(m=H.querySelector(".".concat(L,"guide-info__content")))!==null&&m!==void 0?m:void 0,this.elGuideInfoContentY=(y=rt.querySelector(".".concat(L,"guide-info__content")))!==null&&y!==void 0?y:void 0,E.on("canvas:update frame:scroll",(0,e.debounce)(function(){var vt;c.updateGuides(),N.debug&&((vt=c.guides)===null||vt===void 0||vt.forEach(function(et){return c.renderGuide(et)}))},200))}return w},getGuidesStatic:function(){var c=this,h=[],g=this.target.getEl(),m=g?.parentElement;return m?((0,e.each)(m.children,function(y){return h=h.concat(g!==y?c.getElementGuides(y):[])}),h.concat(this.getElementGuides(m))):[]},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(c){var h=this,g,m,y,w=(g=c??this.guides)!==null&&g!==void 0?g:[];w.forEach(function(C){var x=C.origin,E=m===x?y:h.getElementPos(x);m=x,y=E,(0,e.each)(h.getGuidePosUpdate(C,E),function(N,L){C[L]=N}),C.originRect=E})},getGuidePosUpdate:function(c,h){var g={},m=h.top,y=h.height,w=h.left,C=h.width;switch(c.type){case"t":g.y=m;break;case"b":g.y=m+y;break;case"l":g.x=w;break;case"r":g.x=w+C;break;case"x":g.x=w+C/2;break;case"y":g.y=m+y/2;break}return g},renderGuide:function(c){var h,g;if(!this.opts.skipGuidesRender){var m=(h=c.guide)!==null&&h!==void 0?h:document.createElement("div"),y="px",w=c.active?2:1;if(m.style.cssText="position: absolute; background-color: ".concat(c.active?"green":"red",";"),!m.children.length){var C=document.createElement("div");C.style.cssText="position: absolute; color: red; padding: 5px; top: 0; left: 0;",m.appendChild(C)}return c.y?(m.style.width="100%",m.style.height="".concat(w).concat(y),m.style.top="".concat(c.y).concat(y),m.style.left="0"):(m.style.width="".concat(w).concat(y),m.style.height="100%",m.style.left="".concat(c.x).concat(y),m.style.top="0".concat(y)),!c.guide&&((g=this.guidesContainer)===null||g===void 0||g.appendChild(m)),m}},getElementPos:function(c){return this.editor.Canvas.getElementPos(c,{noScroll:1})},getElementGuides:function(c){var h=this,g=this.opts,m=c,y=this.getElementPos(c),w=(0,o.getComponentModel)(c),C=(0,o.getComponentView)(c),x=y.top,E=y.height,N=y.left,L=y.width,H=[{type:"t",y:x},{type:"b",y:x+E},{type:"l",x:N},{type:"r",x:N+L},{type:"x",x:N+L/2},{type:"y",y:x+E/2}],rt=H.map(function(nt){var vt=g.debug?h.renderGuide(nt):void 0;return s(s({},nt),{component:w,componentView:C,componentEl:m,origin:m,componentElRect:y,originRect:y,guideEl:vt,guide:vt})});return rt.forEach(function(nt){var vt;return(vt=h.guides)===null||vt===void 0?void 0:vt.push(nt)}),rt},getTranslate:function(c,h){h===void 0&&(h="x");var g=0;return(c||"").split(" ").forEach(function(m){var y=m.trim(),w="translate".concat(h.toUpperCase(),"(");y.indexOf(w)===0&&(g=parseFloat(y.replace(w,"")))}),g},setTranslate:function(c,h,g){var m="translate".concat(h.toUpperCase(),"("),y="".concat(m).concat(g,")"),w=(c||"").split(" ").map(function(C){var x=C.trim();return x.indexOf(m)===0&&(C=y),C}).join(" ");return w.indexOf(m)<0&&(w+=" ".concat(y)),w},getPosition:function(){var c=this,h=c.target,g=c.isTran,m=h.getStyle(),y=m.transform,w=m.left,C=m.top,x=0,E=0;return g&&y?(x=this.getTranslate(y),E=this.getTranslate(y,"y")):(x=parseFloat(w??"0"),E=parseFloat(C??"0")),{x,y:E}},setPosition:function(c){var h,g,m=c.x,y=c.y,w=c.end,C=c.position,x=c.width,E=c.height,N=this,L=N.target,H=N.isTran,rt=N.em,nt=N.opts,vt="px",et=!w,G="".concat(parseInt("".concat(m),10)).concat(vt),W="".concat(parseInt("".concat(y),10)).concat(vt),U={};if(H){var D=(g=(h=L.getStyle())===null||h===void 0?void 0:h.transform)!==null&&g!==void 0?g:"";D=this.setTranslate(D,"x",G),D=this.setTranslate(D,"y",W),U={transform:D,__p:et}}else{var Y={position:C,width:x,height:E},K={left:G,top:W,__p:et};(0,e.keys)(Y).forEach(function(ct){var M=Y[ct];M&&(K[ct]=M)}),U=K}nt.addStyle?nt.addStyle({component:L,styles:U,partial:!w}):L.addStyle(U,{avoidStore:!w}),rt.Styles.__emitCmpStyleUpdate(U,{components:rt.getSelected()})},_getDragData:function(){var c=this.target;return{target:c,parent:c.parent(),index:c.index()}},onStart:function(c){var h,g=this,m=g.target,y=g.editor,w=g.isTran,C=g.opts,x=y.Canvas,E=m.getStyle(),N="absolute",L=[N,"relative"];if((h=C.onStart)===null||h===void 0||h.call(C,this._getDragData()),!w){if(E.position!==N){var H=x.offset(m.getEl()),rt=H.left,nt=H.top,vt=H.width,et=H.height,G=m.parent(),W=null;do{var U=G?.getStyle(),D=U?.position;D&&(W=L.indexOf(D)>=0?G:null),G=G?.parent()}while(G&&!W);if(C.center){var Y=x.getMouseRelativeCanvas(c),K=Y.x,ct=Y.y;rt=K,nt=ct}else if(W){var M=x.offset(W.getEl());rt=rt-M.left,nt=nt-M.top}this.setPosition({x:rt,y:nt,width:"".concat(vt,"px"),height:"".concat(et,"px"),position:N})}this.guidesStatic=this.getGuidesStatic()}},onDrag:function(c){var h=this,g,m,y=this,w=y.guidesTarget,C=y.opts;this.updateGuides(w),C.debug&&w?.forEach(function(x){return h.renderGuide(x)}),C.guidesInfo&&this.renderGuideInfo((g=w?.filter(function(x){return x.active}))!==null&&g!==void 0?g:[]),(m=C.onDrag)===null||m===void 0||m.call(C,this._getDragData()),this.opts.event=c,this.em.trigger("".concat(u,":move"),this.getEventOpts())},onEnd:function(c,h,g){var m,y=this,w=y.editor,C=y.opts,x=y.id;(m=C.onEnd)===null||m===void 0||m.call(C,c,g,s(s({event:c},g),this._getDragData())),w.stopCommand("".concat(x)),this.hideGuidesInfo(),this.em.trigger("".concat(u,":end"),this.getEventOpts())},hideGuidesInfo:function(){var c=this;["X","Y"].forEach(function(h){var g=c["elGuideInfo".concat(h)];g&&(g.style.display="none")})},renderGuideInfo:function(c){var h=this;c===void 0&&(c=[]),this.hideGuidesInfo();var g=this.getGuidesMatched(c);g.forEach(function(m){h.opts.skipGuidesRender||h.renderSingleGuideInfo(m),h.em.trigger("".concat(u,":active"),s(s({},h.getEventOpts()),m))})},renderSingleGuideInfo:function(c){var h=c.posFirst,g=c.posSecond,m=c.size,y=c.sizeRaw,w=c.guide,C=c.elGuideInfo,x=c.elGuideInfoCnt,E=(0,e.isUndefined)(w.x)?"y":"x",N=E==="y",L=C.style;L.display="",L[N?"top":"left"]="".concat(h,"px"),L[N?"left":"top"]="".concat(g,"px"),L[N?"width":"height"]="".concat(m,"px"),x.innerHTML="".concat(Math.round(y),"px")},getGuidesMatched:function(c){var h=this;c===void 0&&(c=[]);var g=this.guidesStatic,m=g===void 0?[]:g;return c.map(function(y){var w=y.origin,C=y.x,x=h.getElementPos(w),E=(0,e.isUndefined)(C)?"y":"x",N=E==="y",L=x[N?"left":"top"],H=x.rect[N?"left":"top"],rt=N?L+x.width:L+x.height,nt=N?H+x.rect.width:H+x.rect.height,vt=m.filter(function(zt){var Dt,Ut={l:["r","x"],r:["l","x"],x:["l","r"],t:["b","y"],b:["t","y"],y:["t","b"]};return zt.type===y.type||((Dt=Ut[y.type])===null||Dt===void 0?void 0:Dt.includes(zt.type))}).map(function(zt){var Dt=zt.originRect,Ut=Dt.left,Yt=Dt.width,se=Dt.top,Xt=Dt.height,ee=N?Ut:se,xe=N?Ut+Yt:se+Xt;return{gap:xe<L?L-xe:ee-rt,guide:zt}}).filter(function(zt){return zt.gap>0}).sort(function(zt,Dt){return zt.gap-Dt.gap}).map(function(zt){return zt.guide}).filter(function(zt){switch(y.type){case"l":case"r":case"x":return Math.abs(zt.x-y.x)<1;case"t":case"b":case"y":return Math.abs(zt.y-y.y)<1;default:return!1}}),et=vt[0];if(et){var G=et.originRect,W=G.left,U=G.width,D=G.top,Y=G.height,K=G.rect,ct=N?W<x.left:D<x.top,M=N?W:D,wt=N?K.left:K.top,gt=N?W+U:D+Y,At=N?K.left+K.width:K.top+K.height,Qt=N?y.y:y.x,oe=ct?gt:rt,yt=ct?L-gt:M-rt,Ct=ct?H-At:wt-nt,bt=h["elGuideInfo".concat(E.toUpperCase())],Lt=h["elGuideInfoContent".concat(E.toUpperCase())];return{guide:y,guidesStatic:m,matched:et,posFirst:Qt,posSecond:oe,size:yt,sizeRaw:Ct,elGuideInfo:bt,elGuideInfoCnt:Lt}}else return null}).filter(Boolean)},toggleDrag:function(c){var h=this,g=h.ppfx,m=h.editor,y=c?"add":"remove",w=["".concat(g,"is__grabbing")],C=m.Canvas,x=C.getBody();w.forEach(function(E){return x.classList[y](E)}),C[c?"startAutoscroll":"stopAutoscroll"]()},editor:void 0,em:void 0,opts:void 0,target:void 0}}),6134:((i,r,t)=>{t.r(r),t.d(r,{default:()=>e});const e={run:function(n){if(n.Canvas.hasFocus()){var o=[];n.getSelectedAll().forEach(function(s){var u=s.components(),f=u&&u.filter(function(c){return c.get("selectable")})[0];f&&o.push(f)}),o.length&&n.select(o)}}}}),914:((i,r,t)=>{t.r(r),t.d(r,{default:()=>e});const e={run:function(n,o,s){if(s===void 0&&(s={}),!(!n.Canvas.hasFocus()&&!s.force)){var u=[];n.getSelectedAll().forEach(function(f){for(var c=f.parent();c&&!c.get("selectable");)c=c.parent();c&&u.push(c)}),u.length&&n.select(u)}}}}),5547:((i,r,t)=>{t.r(r),t.d(r,{default:()=>e});const e={run:function(n){if(n.Canvas.hasFocus()){var o=[];n.getSelectedAll().forEach(function(s){var u=s.parent();if(u){var f=u.components().length,c=0,h=0,g;do c++,h=s.index()+c,g=h<=f?u.getChildAt(h):null;while(g&&!g.get("selectable"));o.push(g||s)}}),o.length&&n.select(o)}}}}),8655:((i,r,t)=>{t.r(r),t.d(r,{default:()=>e});const e={run:function(n){if(n.Canvas.hasFocus()){var o=[];n.getSelectedAll().forEach(function(s){var u=s.parent();if(u){var f=0,c=0,h;do f++,c=s.index()-f,h=c>=0?u.getChildAt(c):null;while(h&&!h.get("selectable"));o.push(h||s)}}),o.length&&n.select(o)}}}}),7640:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=t(5706);const n={run:function(o,s,u){u===void 0&&(u={});var f=u.target,c=[];if(!f.get("styles"))return c;var h=f.get("type"),g=o.Pages.getAllWrappers(),m=(0,e.flatten)(g.map(function(w){return w.findType(h)})).length;if(!m){var y=o.CssComposer.getAll();c=y.filter(function(w){return w.get("group")==="cmp:".concat(h)}),y.remove(c)}return c}}}),5837:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=function(o,s,u){if(u||arguments.length===2)for(var f=0,c=s.length,h;f<c;f++)(h||!(f in s))&&(h||(h=Array.prototype.slice.call(s,0,f)),h[f]=s[f]);return o.concat(h||Array.prototype.slice.call(s))};const n={run:function(o){var s=o.getModel(),u=e([],o.getSelectedAll(),!0).map(function(f){var c,h;return((h=(c=f.delegate)===null||c===void 0?void 0:c.copy)===null||h===void 0?void 0:h.call(c,f))||f}).filter(Boolean);u.length&&s.set("clipboard",u)}}}),6477:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=t(6294);const n={run:function(o,s,u){var f=this;u===void 0&&(u={}),s&&s.set&&s.set("active",0);var c=o.getConfig(),h=o.Modal,g=c.stylePrefix;if(this.cm=o.CodeManager||null,!this.editors){var m=this.buildEditor("htmlmixed","hopscotch","HTML"),y=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=m.model,this.cssEditor=y.model;var w=(0,e.a_)("div",{class:"".concat(g,"export-dl")});w.appendChild(m.el),w.appendChild(y.el),this.editors=w}h.open({title:c.textViewCode,content:this.editors}).getModel().once("change:open",function(){return o.stopCommand("".concat(f.id))}),this.htmlEditor.setContent(o.getHtml(u.optsHtml)),this.cssEditor.setContent(o.getCss(u.optsCss))},stop:function(o){var s=o.Modal;s&&s.close()},buildEditor:function(o,s,u){var f=this.em.CodeManager,c=f.createViewer({label:u,codeName:o,theme:s}),h=new f.EditorView({model:c,config:f.getConfig()}).render().el;return{model:c,el:h}}}}),1772:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=t(5706);const n={isEnabled:function(){var o=document;return!!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement)},enable:function(o){var s="";return o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?(s="webkit",o.webkitRequestFullscreen()):o.mozRequestFullScreen?(s="moz",o.mozRequestFullScreen()):o.msRequestFullscreen&&o.msRequestFullscreen(),s},disable:function(){var o=document;this.isEnabled()&&(o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen())},fsChanged:function(o){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(o||"","fullscreenchange"),this.fsChanged))},run:function(o,s,u){u===void 0&&(u={}),this.sender=s;var f=u.target,c=(0,e.isElement)(f)?f:document.querySelector(f),h=this.enable(c||o.getContainer());this.fsChanged=this.fsChanged.bind(this,h),document.addEventListener(h+"fullscreenchange",this.fsChanged)},stop:function(o,s){s&&s.set&&s.set("active",!1),this.disable()}}}),741:((i,r,t)=>{t.r(r),t.d(r,{default:()=>f});var e=t(5706),n=t(7774),o=t(6294),s=t(9317),u=t(1406);const f=(0,e.extend)({},u.default,s.default,{init:function(c){s.default.init.apply(this,arguments),(0,e.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=c,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];s.default.enable.apply(this,c),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var g=this.$wrapper;g.css("cursor","move"),g.on("mousedown",this.initSorter),g.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(c){var h=(0,n.default)(c.target).data("model"),g=h.get("draggable");g&&(this.cacheEl=null,this.startSelectPosition(c.target,this.frameEl.contentDocument),this.sorter.draggable=g,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,o.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(c){var h=c.get("draggable");if(h){this.cacheEl=null;var g=c.view.el;this.startSelectPosition(g,this.frameEl.contentDocument),this.sorter.draggable=h,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(c){this.cacheEl=null;var h=c[c.length-1],g=this.em.getCurrentFrame(),m=h.getEl(g?.model),y=m.ownerDocument,w=c.map(function(C){var x;return(x=C?.view)===null||x===void 0?void 0:x.el});this.startSelectPosition(w,y,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(c,h){},rollback:function(c,h){var g=c.which||c.keyCode;(g==27||h)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,n.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,n.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];s.default.stop.apply(this,c),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var g=this.$wrapper;g.css("cursor","").unbind().removeClass(this.noSelClass)}})}),2924:((i,r,t)=>{t.r(r),t.d(r,{default:()=>o});var e=t(5706),n=t(6294);const o={open:function(s){var u=this,f=this,c=f.editor,h=f.title,g=f.config,m=f.am,y=g.custom;if((0,e.isFunction)(y.open))return y.open(m.__customData());var w=c.Modal;w.open({title:h,content:s}).onceClose(function(){return c.stopCommand(u.id)})},close:function(){var s=this.config.custom;if((0,e.isFunction)(s.close))return s.close(this.am.__customData());var u=this.editor.Modal;u&&u.close()},run:function(s,u,f){f===void 0&&(f={});var c=s.AssetManager,h=c.getConfig(),g=f.types,m=g===void 0?[]:g,y=f.accept,w=f.select;if(this.title=f.modalTitle||s.t("assetManager.modalTitle")||"",this.editor=s,this.config=h,this.am=c,c.setTarget(f.target),c.onClick(f.onClick),c.onDblClick(f.onDblClick),c.onSelect(f.onSelect),c.__behaviour({select:w,types:m,options:f}),h.custom)this.rendered=this.rendered||(0,n.a_)("div"),this.rendered.className="".concat(h.stylePrefix,"custom-wrp"),c.__behaviour({container:this.rendered}),c.__trgCustom();else{if(!this.rendered||m){var C=c.getAll().filter(function(E){return E});m&&m.length&&(C=C.filter(function(E){return m.indexOf(E.get("type"))!==-1})),c.render(C),this.rendered=c.getContainer()}if(y){var x=this.rendered.querySelector("input#".concat(h.stylePrefix,"uploadFile"));x&&x.setAttribute("accept",y)}}return this.open(this.rendered),this},stop:function(s){this.editor=s,this.close(this.rendered)}}}),3963:((i,r,t)=>{t.r(r),t.d(r,{default:()=>o});var e=t(5706),n=t(6294);const o={open:function(){var s=this,u=s.container,f=s.editor,c=s.bm,h=s.config,g=h.custom,m=h.appendTo;if((0,e.isFunction)(g.open))return g.open(c.__customData());if(this.firstRender&&!m){var y="views-container",w=f.Panels,C=w.getPanel(y)||w.addPanel({id:y});C.set("appendContent",u).trigger("change:appendContent"),g||u.appendChild(c.render())}u&&(u.style.display="block")},close:function(){var s=this,u=s.container,f=s.config,c=f.custom;if((0,e.isFunction)(c.close))return c.close(this.bm.__customData());u&&(u.style.display="none")},run:function(s){var u=s.Blocks;this.config=u.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,n.a_)("div"),this.editor=s,this.bm=u;var f=this.container;u.__behaviour({container:f}),this.config.custom&&u.__trgCustom(),this.open()},stop:function(){this.close()}}}),1479:((i,r,t)=>{t.r(r),t.d(r,{default:()=>e});const e={run:function(n){var o=n.LayerManager,s=n.Panels,u=o.getConfig();if(!u.appendTo){if(!this.layers){var f="views-container",c=document.createElement("div"),h=s.getPanel(f)||s.addPanel({id:f});u.custom?o.__trgCustom({container:c}):c.appendChild(o.render()),h.set("appendContent",c).trigger("change:appendContent"),this.layers=c}this.layers.style.display="block"}},stop:function(){var n=this.layers;n&&(n.style.display="none")}}}),3473:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=t(7774);const n={run:function(o,s){if(this.sender=s,!this.$cnt){var u=o.getConfig(),f=o.Panels,c=o.DeviceManager,h=o.SelectorManager,g=o.StyleManager,m="change:appendContent",y=(0,e.default)("<div></div>"),w=(0,e.default)("<div></div>"),C=(0,e.default)("<div></div>"),x=(0,e.default)("<div></div>");if(this.$cnt=y,this.$cntInner=w,w.append(C),w.append(x),y.append(w),c&&u.showDevices){var E=f.addPanel({id:"devices-c"}),N=c.render();E.set("appendContent",N).trigger(m)}var L=h.getConfig();L.custom?h.__trgCustom({container:C.get(0)}):L.appendTo||C.append(h.render([])),this.sm=g;var H=g.getConfig(),rt=H.stylePrefix;this.$header=(0,e.default)('<div class="'.concat(rt,'header">').concat(o.t("styleManager.empty"),"</div>")),y.append(this.$header),H.custom?g.__trgCustom({container:x.get(0)}):H.appendTo||x.append(g.render());var nt="views-container",vt=f.getPanel(nt)||f.addPanel({id:nt});vt.set("appendContent",y).trigger(m);var et=o.getModel();this.listenTo(et,g.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var o=this,s=o.sender,u=o.sm,f=o.$cntInner,c=o.$header;s&&s.get&&!s.get("active")||!u||(u.getSelected()?(f?.show(),c?.hide()):(f?.hide(),c?.show()))},stop:function(){var o,s;(o=this.$cntInner)===null||o===void 0||o.hide(),(s=this.$header)===null||s===void 0||s.hide()}}}),5054:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=t(7774);const n={run:function(o,s){this.sender=s;var u=o.getModel(),f=o.Config,c=f.stylePrefix,h=o.TraitManager,g=h.getConfig(),m;if(!g.appendTo){if(!this.$cn){this.$cn=(0,e.default)("<div></div>"),this.$cn2=(0,e.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,e.default)("<div>").append('<div class="'.concat(g.stylePrefix,'header">').concat(u.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),g.custom?h.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(c,'traits-label">').concat(u.t("traitManager.label"),"</div>")),this.$cn2.append(h.render()));var y=o.Panels;y.getPanel("views-container")?m=y.getPanel("views-container"):m=y.addPanel({id:"views-container"}),m?.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=o.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var o=this.sender;o&&o.get&&!o.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}}),6979:((i,r,t)=>{t.r(r),t.d(r,{default:()=>n});var e=t(5706);const n={run:function(s,u,f){f===void 0&&(f={});var c=s.getModel(),h=c.get("clipboard"),g=s.getSelected();h?.length&&g&&(s.getSelectedAll().forEach(function(m){var y,w,C,x=((w=(y=m.delegate)===null||y===void 0?void 0:y.copy)===null||w===void 0?void 0:w.call(y,m))||m,E=x.collection,N;if(E){var L=x.index()+1,H={at:L,action:f.action||"paste-component"};(0,e.contains)(h,x)&&x.get("copyable")?N=E.add(x.clone(),H):N=o(s,h,x.parent(),H)}else{var rt=(C=c.Pages.getSelected())===null||C===void 0?void 0:C.getMainComponent(),H={at:rt?.components().length||0,action:f.action||"paste-component"};N=o(s,h,rt,H)}N=(0,e.isArray)(N)?N:[N],N.forEach(function(nt){return s.trigger("component:paste",nt)})}),g.emitUpdate())}};function o(s,u,f,c){var h=u.filter(function(m){return m.get("copyable")}),g=h.filter(function(m){return s.Components.canMove(f,m).result});return f.components().add(g.map(function(m){return m.clone()}),c)}}),4457:((i,r,t)=>{t.r(r),t.d(r,{default:()=>s});var e=t(5706),n=function(u,f,c){if(c||arguments.length===2)for(var h=0,g=f.length,m;h<g;h++)(m||!(h in f))&&(m||(m=Array.prototype.slice.call(f,0,h)),m[h]=f[h]);return u.concat(m||Array.prototype.slice.call(f))},o="core:component-outline";const s={getPanels:function(u){return this.panels||(this.panels=u.Panels.getPanels()),this.panels},preventDrag:function(u){u.abort=1},tglEffects:function(u){var f=this.em,c=u?"on":"off";if(f){var h=f.Canvas,g=h.getBody(),m=h.getToolbarEl();m&&(m.style.display=u?"none":"");var y=g.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,e.each)(y,function(w){return w.style.pointerEvents=u?"all":""}),f[c]("run:tlb-move:before",this.preventDrag)}},run:function(u,f){var c=this;this.sender=f,this.selected=n([],u.getSelectedAll(),!0),u.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=u.Commands.isActive(o)),this.shouldRunSwVisibility&&u.stopCommand(o),u.getModel().stopDefault();var h=this.getPanels(u),g=u.Canvas.getElement(),m=u.getEl(),y=u.Config.stylePrefix;if(!this.helper){var w=document.createElement("span");w.className="".concat(y,"off-prv fa fa-eye-slash"),m.appendChild(w),w.onclick=function(){return c.stopCommand()},this.helper=w}this.helper.style.display="inline-block",h.forEach(function(x){return x.set("visible",!1)});var C=g.style;C.width="100%",C.height="100%",C.top="0",C.left="0",C.padding="0",C.margin="0",u.refresh(),this.tglEffects(1)},stop:function(u){var f=this,c=f.sender,h=c===void 0?{}:c,g=f.selected;h.set&&h.set("active",0);var m=this.getPanels(u);this.shouldRunSwVisibility&&(u.runCommand(o),this.shouldRunSwVisibility=!1),u.getModel().runDefault(),m.forEach(function(w){return w.set("visible",!0)});var y=u.Canvas.getElement();y.setAttribute("style",""),g&&u.select(g),delete this.selected,this.helper&&(this.helper.style.display="none"),u.refresh(),this.tglEffects()}}}),5493:((i,r,t)=>{t.r(r),t.d(r,{ConvertUnitsToPx:()=>u,default:()=>f});var e=t(2225),n=t(1166),o=function(){return o=Object.assign||function(c){for(var h,g=1,m=arguments.length;g<m;g++){h=arguments[g];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(c[y]=h[y])}return c},o.apply(this,arguments)},s=function(c,h){var g={};for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&h.indexOf(m)<0&&(g[m]=c[m]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,m=Object.getOwnPropertySymbols(c);y<m.length;y++)h.indexOf(m[y])<0&&Object.prototype.propertyIsEnumerable.call(c,m[y])&&(g[m[y]]=c[m[y]]);return g},u;(function(c){c.pt="pt",c.pc="pc",c.in="in",c.cm="cm",c.mm="mm",c.vw="vw",c.vh="vh",c.vmin="vmin",c.vmax="vmax",c.svw="svw",c.lvw="lvw",c.dvw="dvw",c.svh="svh",c.lvh="lvh",c.dvh="dvh",c.perc="%"})(u||(u={}));const f={run:function(c,h,g){var m=this,y=c.Canvas,w=c.Utils,C=c.em,x=y.getCanvasView(),E=C.config.stylePrefix||"",N="".concat(E,"resizing"),L=g.onStart,H=L===void 0?function(){}:L,rt=g.onMove,nt=rt===void 0?function(){}:rt,vt=g.onEnd,et=vt===void 0?function(){}:vt,G=g.updateTarget,W=G===void 0?function(){}:G,U=g.el,D=g.componentView,Y=g.component,K=g.skipPositionUpdate,ct=s(g,["onStart","onMove","onEnd","updateTarget","el","componentView","component","skipPositionUpdate"]),M=U||D?.el||Y.getEl(),wt={component:Y,el:M},gt,At,Qt=function(Ct,bt,Lt){var zt=Lt.docs;zt&&zt.forEach(function(Dt){var Ut=Dt.body,Yt=Ut.className||"";Ut.className=(Ct=="add"?"".concat(Yt," ").concat(N):Yt.replace(N,"")).trim()})},oe=o(o({appendTo:y.getResizerEl(),prefix:c.getConfig().stylePrefix,posFetcher:x.getElementPos.bind(x),mousePosFetcher:y.getMouseRelativePos.bind(y),docs:[document],updateOnMove:!0,skipUnitAdjustments:!0,onStart:function(Ct,bt){var Lt;H(Ct,bt);var zt=bt.el,Dt=bt.config,Ut=bt.resizer,Yt=Dt.keyHeight,se=Dt.keyWidth,Xt=Dt.currentUnit,ee=Dt.keepAutoHeight,xe=Dt.keepAutoWidth;Qt("add",Ct,bt),gt=C.Styles.getModelToStyle(Y),At=getComputedStyle(zt);var ue=gt.getStyle(),mt=o({},Ut.startDim),Vt=ue[se];Dt.autoWidth=xe&&Vt==="auto",isNaN(parseFloat(Vt))&&(Vt=At[se]);var Rt=ue[Yt];Dt.autoHeight=ee&&Rt==="auto",isNaN(parseFloat(Rt))&&(Rt=At[Yt]);var T=parseFloat(Vt),j=parseFloat(Rt),z=(0,n.getUnitFromValue)(Vt),it=(0,n.getUnitFromValue)(Rt);Xt&&(Dt.unitWidth=z,Dt.unitHeight=it);var _t=o(o({},wt),{event:Ct,rect:mt,model:gt,modelWidth:{value:Vt,property:se,number:T,unit:z},modelHeight:{value:Rt,property:Yt,number:j,unit:it}});c.trigger(e.I.resizeStart,_t),c.trigger(e.I.resize,o(o({},_t),{type:"start"})),(Lt=g.afterStart)===null||Lt===void 0||Lt.call(g)},onMove:function(Ct,bt){nt(Ct,bt);var Lt=bt.resizer,zt=o(o({},wt),{event:Ct,delta:Lt.delta,pointer:Lt.currentPos,rect:Lt.rectDim});c.trigger(e.I.resizeStart,zt),c.trigger(e.I.resize,o(o({},zt),{type:"move"}))},onEnd:function(Ct,bt){var Lt;et(Ct,bt),Qt("remove",Ct,bt);var zt=bt.resizer,Dt=o(o({},wt),{event:Ct,rect:zt.rectDim,moved:zt.moved});c.trigger(e.I.resizeEnd,Dt),c.trigger(e.I.resize,o(o({},wt),{type:"end"})),(Lt=g.afterEnd)===null||Lt===void 0||Lt.call(g)},updateTarget:function(Ct,bt,Lt){var zt;if(W(Ct,bt,Lt),!!gt){var Dt=Lt.store,Ut=Lt.selectedHandler,Yt=Lt.config,se=Lt.resizer,Xt=Lt.event,ee=Yt.keyHeight,xe=Yt.keyWidth,ue=Yt.autoHeight,mt=Yt.autoWidth,Vt=Yt.unitWidth,Rt=Yt.unitHeight,T=["tc","bc"].indexOf(Ut)>=0,j=["cl","cr"].indexOf(Ut)>=0,z=!Dt,it={};if(!T){var _t=((zt=y.getBody())===null||zt===void 0?void 0:zt.offsetWidth)||0,q=bt.w<_t?bt.w:_t;it[xe]=mt?"auto":m.convertPxToUnit({el:M,elComputedStyle:At,valuePx:q,unit:Vt})}j||(it[ee]=ue?"auto":m.convertPxToUnit({el:M,elComputedStyle:At,valuePx:bt.h,unit:Rt,isHeight:!0})),!K&&C.getDragMode(Y)&&(it.top="".concat(bt.t,"px"),it.left="".concat(bt.l,"px"));var ht=!1,st=function(_e){ht=!0;var me=o(o({},_e||it),{__p:z});gt.addStyle(me,{avoidStore:z}),C.Styles.__emitCmpStyleUpdate(me,{components:Y})},ie=o(o({},wt),{rect:bt,partial:z,event:Xt,style:it,updateStyle:st,convertPxToUnit:function(_e){return m.convertPxToUnit(o({el:M,elComputedStyle:At},_e))},delta:se.delta,pointer:se.currentPos});c.trigger(e.I.resizeUpdate,ie),!ht&&st()}}},ct),g.options),yt=this.canvasResizer;return yt||(this.canvasResizer=new w.Resizer(oe),yt=this.canvasResizer),yt.setOptions(oe,!0),yt.blur(),yt.focus(M),yt},stop:function(){var c;(c=this.canvasResizer)===null||c===void 0||c.blur()},convertPxToUnit:function(c){var h=c.el,g=c.valuePx,m=c.unit,y=c.dpi,w=y===void 0?96:y,C=c.roundDecimals,x=C===void 0?3:C,E=c.isHeight,N=c.elComputedStyle,L=h.ownerDocument.defaultView,H=L?.innerWidth||1,rt=window.innerHeight||1,nt=g,vt=m;switch(m){case u.pt:nt=g*(72/w);break;case u.pc:nt=g*(6/w);break;case u.in:nt=g/w;break;case u.cm:nt=g/(w/2.54);break;case u.mm:nt=g/(w/25.4);break;case u.vw:nt=g/H*100;break;case u.vh:nt=g/rt*100;break;case u.vmin:{var et=Math.min(H,rt);nt=g/et*100;break}case u.vmax:{var G=Math.max(H,rt);nt=g/G*100;break}case u.perc:{var W=h.parentElement,U=h.offsetParent,D=N?.position==="absolute"?U:W,Y=D?.offsetWidth||1,K=D?.offsetHeight||1,ct=E?K:Y;nt=g/ct*100;break}case u.svw:case u.lvw:case u.dvw:nt=g/H*100;break;case u.svh:case u.lvh:case u.dvh:nt=g/rt*100;break;default:vt="px"}return"".concat(+nt.toFixed(x)).concat(vt)}}}),9317:((i,r,t)=>{t.r(r),t.d(r,{default:()=>G});var e=t(5706),n=t(179),o=t(9156),s=(function(){var W=function(U,D){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var ct in K)Object.prototype.hasOwnProperty.call(K,ct)&&(Y[ct]=K[ct])},W(U,D)};return function(U,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");W(U,D);function Y(){this.constructor=U}U.prototype=D===null?Object.create(D):(Y.prototype=D.prototype,new Y)}})(),u=(function(W){s(U,W);function U(){return W!==null&&W.apply(this,arguments)||this}return U.prototype.defaults=function(){return{command:"",attributes:{}}},U})(o.Kx);const f=u;var c=(function(){var W=function(U,D){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var ct in K)Object.prototype.hasOwnProperty.call(K,ct)&&(Y[ct]=K[ct])},W(U,D)};return function(U,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");W(U,D);function Y(){this.constructor=U}U.prototype=D===null?Object.create(D):(Y.prototype=D.prototype,new Y)}})(),h=(function(W){c(U,W);function U(){return W!==null&&W.apply(this,arguments)||this}return U})(o.pM);const g=h;h.prototype.model=f;var m=t(2225),y=t(8242),w=(function(){var W=function(U,D){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var ct in K)Object.prototype.hasOwnProperty.call(K,ct)&&(Y[ct]=K[ct])},W(U,D)};return function(U,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");W(U,D);function Y(){this.constructor=U}U.prototype=D===null?Object.create(D):(Y.prototype=D.prototype,new Y)}})(),C=function(){return C=Object.assign||function(W){for(var U,D=1,Y=arguments.length;D<Y;D++){U=arguments[D];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(W[K]=U[K])}return W},C.apply(this,arguments)},x=(function(W){w(U,W);function U(D){var Y=W.call(this,D)||this;return Y.em=D.config.em,Y}return U.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},U.prototype.attributes=function(){return this.model.get("attributes")},U.prototype.handleClick=function(D){D.preventDefault(),D.stopPropagation();var Y=this.em,K=Y.Canvas.getFrameEl().getBoundingClientRect(),ct=K.left,M=K.top,wt=C(C({},D),{clientX:D.clientX-ct,clientY:D.clientY-M});Y.trigger("toolbar:run:before",{event:wt}),this.execCommand(wt)},U.prototype.execCommand=function(D){var Y=this,K=Y.em,ct=Y.model,M={event:D},wt=ct.get("command"),gt=K.Editor;(0,e.isFunction)(wt)&&wt(gt,null,M),(0,e.isString)(wt)&&gt.runCommand(wt,M)},U.prototype.render=function(){var D=this,Y=D.em,K=D.$el,ct=D.model,M=ct.get("id"),wt=ct.get("label"),gt=Y.getConfig().stylePrefix;return K.addClass("".concat(gt,"toolbar-item")),M&&K.addClass("".concat(gt,"toolbar-item__").concat(M)),wt&&K.append(wt),this},U})(o.Ss);const E=x;var N=(function(){var W=function(U,D){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,K){Y.__proto__=K}||function(Y,K){for(var ct in K)Object.prototype.hasOwnProperty.call(K,ct)&&(Y[ct]=K[ct])},W(U,D)};return function(U,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");W(U,D);function Y(){this.constructor=U}U.prototype=D===null?Object.create(D):(Y.prototype=D.prototype,new Y)}})(),L=(function(W){N(U,W);function U(D){var Y=W.call(this,D)||this,K=D.em;return Y.em=K,Y.config={em:K},Y.listenTo(Y.collection,"reset",Y.render),Y}return U.prototype.onRender=function(){var D=this.em.config.stylePrefix;this.el.className="".concat(D,"toolbar-items")},U})(y.A);const H=L;L.prototype.itemView=E;var rt=t(6294),nt=t(1166),vt=function(){return vt=Object.assign||function(W){for(var U,D=1,Y=arguments.length;D<Y;D++){U=arguments[D];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(W[K]=U[K])}return W},vt.apply(this,arguments)},et;const G={activeResizer:!1,init:function(){this.onSelect=(0,e.debounce)(this.onSelect,0),(0,e.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),et=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(W){var U=this,D=this,Y=D.em,K=D.canvas,ct=K.getCanvasView().el,M=Y.getConfig().listenToEl,wt=Y.getContainer().parentNode,gt=W?"on":"off",At={on:rt.on,off:rt.AU},Qt=m.I.update;!M.length&&wt&&M.push(wt);var oe=function(yt,Ct,bt){At[gt](bt,"scroll",U.onCanvasScroll,!0),At[gt](Ct,"mouseover",U.onHover),At[gt](Ct,"mouseleave",U.onOut),At[gt](Ct,"click",U.onClick),At[gt](yt,"scroll",U.onFrameScroll,!0),At[gt](yt,"resize",U.onFrameResize)};At[gt](window,"resize",this.onFrameUpdated),At[gt](M,"scroll",this.onContainerChange),Y[gt]("component:toggled ".concat(Qt," undo redo"),this.onSelect,this),Y[gt]("change:componentHovered",this.onHovered,this),Y[gt]("".concat(m.I.resize," styleable:change ").concat(m.I.input),this.updateGlobalPos,this),Y[gt]("".concat(Qt,":toolbar"),this._upToolbar,this),Y[gt]("frame:updated",this.onFrameUpdated,this),Y[gt]("canvas:updateTools",this.onFrameUpdated,this),Y[gt](Y.Canvas.events.refresh,this.updateAttached,this),Y.Canvas.getFrames().forEach(function(yt){var Ct=yt.view,bt=Ct?.getWindow();bt&&oe(bt,Ct?.getBody(),ct)})},onHover:function(W){W.stopPropagation();var U=this.em,D=W.target,Y=(0,nt.getComponentView)(D),K=Y?.frameView,ct=Y?.model;if(!ct)for(var M=D.parentNode;!ct&&M&&!(0,rt.ZQ)(M);)ct=(0,nt.getComponentModel)(M),M=M.parentNode;this.currentDoc=D.ownerDocument,U.setHovered(ct,{useValid:!0}),K&&U.setCurrentFrame(K)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(W,U){var D=this,Y,K={};U?(Y=U.views)===null||Y===void 0||Y.forEach(function(ct){var M=ct.el,wt=D.getElementPos(M);K={el:M,pos:wt,component:U,view:ct},M.ownerDocument===D.currentDoc&&(D.elHovered=K),D.updateToolsLocal(K)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(ct){var M=ct.view,wt=M&&M.getToolsEl();wt&&D.toggleToolsEl(0,0,{el:wt})}))},onSelect:function(){var W=this.em,U=W.getSelected(),D=W.getCurrentFrame(),Y=U&&U.getView(D?.model),K=Y?.el,ct={};if(K&&(0,rt.zN)(K)){var M=this.getElementPos(K);ct={el:K,pos:M,component:U,view:Y}}this.elSelected=ct,this.updateToolsGlobal(),this.updateLocalPos(ct),this.initResize(U)},updateGlobalPos:function(){var W=this.getElSelected();W.el&&(W.pos=this.getElementPos(W.el),this.updateToolsGlobal())},updateLocalPos:function(W){var U=this.getElHovered();U.el&&(U.pos=this.getElementPos(U.el),this.updateToolsLocal(W))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(W,U,D){D===void 0&&(D={});var Y=D.el||this.canvas.getToolsEl(U);return Y&&(Y.style.display=W?"":"none"),Y||{}},showElementOffset:function(W,U,D){D===void 0&&(D={}),et&&this.editor.runCommand("show-offset",{el:W,elPos:U,view:D.view,force:1,top:0,left:0})},hideElementOffset:function(W){this.editor.stopCommand("show-offset",{view:W})},showFixedElementOffset:function(W,U){this.editor.runCommand("show-offset",{el:W,elPos:U,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(W){this.canvas.getHighlighter(W).style.opacity=0},onClick:function(W){W.stopPropagation(),W.preventDefault();var U=this.em;if(U.get("_cmpDrag"))return U.set("_cmpDrag");var D=W.target,Y=(0,nt.getComponentModel)(D);if(!Y)for(var K=D.parentNode;!Y&&K&&!(0,rt.ZQ)(K);)Y=(0,nt.getComponentModel)(K),K=K.parentNode;if(Y){if(U.isEditing()&&(!Y.get("textable")&&Y.isChildOf("text")||U.getEditing()!==Y))return;this.select(Y,W)}},select:function(W,U){if(W){var D=this.em;D.setSelected(W,{event:U,useValid:!0}),this.initResize(D.getSelected())}},updateBadge:function(W,U,D){D===void 0&&(D={});var Y=this.canvas,K=(0,nt.getComponentModel)(W),ct=this.getBadge(D),M=ct.style;if(!K||!K.get("badgable")){M.display="none";return}if(!D.posOnly){var wt=this.canvas.getConfig(),gt=K.getIcon(),At=wt.pStylePrefix||"",Qt="".concat(At,"badge"),oe=wt.customBadgeLabel,yt="".concat(gt?'<div class="'.concat(Qt,'__icon">').concat(gt,"</div>"):"",`
        <div class="`).concat(Qt,'__name">').concat(K.getName(),"</div>");ct.innerHTML=oe?oe(K):yt}var Ct="px";M.display="block";var bt=Y.getTargetToElementFixed(W,ct,{pos:U}),Lt=bt.top,zt=D.leftOff<0?-D.leftOff:0;M.top=Lt+Ct,M.left=zt+Ct},showHighlighter:function(W){this.canvas.getHighlighter(W).style.opacity=""},initResize:function(W){var U=this,D,Y=this,K=Y.em,ct=Y.canvas,M=K.Editor,wt=!(0,e.isElement)(W)&&(0,rt.GW)(W)?W:K.getSelected(),gt=(D=wt?.get)===null||D===void 0?void 0:D.call(wt,"resizable"),At=n.F.Resize,Qt=ct.hasCustomSpot(At);ct.removeSpots({type:At});var oe={component:wt,hasCustomResize:Qt,resizable:gt};wt&&K.trigger(m.I.resizeInit,oe);var yt=oe.resizable;if(wt&&yt){ct.addSpot({type:At,component:wt});var Ct=(0,e.isElement)(W)?W:wt.getEl(),bt=(0,nt.isObject)(yt)?yt:{};if(Qt||!Ct||this.activeResizer)return;this.resizer=M.runCommand("resize",vt(vt({},bt),{el:Ct,component:wt,force:!0,afterStart:function(){et=!1,U.activeResizer=!0},afterEnd:function(){et=!0,U.activeResizer=!1}}))}else{if(Qt)return;M.stopCommand("resize"),this.resizer=null}},updateToolbar:function(W){var U=this.canvas,D=this.config.em,Y=W===D?D.getSelected():W,K=U.getToolbarEl(),ct=K.style,M=Y.get("toolbar"),wt=D.config.showToolbar,gt=!U.hasCustomSpot(n.F.Select);if(Y&&wt&&M&&M.length&&gt){if(ct.display="",!this.toolbar){K.innerHTML="",this.toolbar=new g(M);var At=new H({collection:this.toolbar,em:D});K.appendChild(At.render().el)}this.toolbar.reset(M),ct.top="-100px",ct.left="0"}else ct.display="none"},updateToolbarPos:function(W){var U="px",D=this.canvas.getToolbarEl().style;D.top="".concat(W.top).concat(U),D.left="".concat(W.left).concat(U),D.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(W){return W===void 0&&(W={}),this.canvas.getBadgeEl(W.view)},onCanvasScroll:function(W){this.onFrameScroll(W),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(W){return W&&W.get("status")==="selected"},updateToolsLocal:function(W){var U=this.em.getConfig(),D=W||this.getElHovered(),Y=D.el,K=D.pos,ct=D.view,M=D.component;if(!Y){this.lastHovered=0;return}var wt=M.get("hoverable"),gt=this.lastHovered!==Y,At=gt?{}:{posOnly:1},Qt=this.canvas.hasCustomSpot(n.F.Hover);gt&&wt&&(this.lastHovered=Y,Qt?this.hideHighlighter(ct):this.showHighlighter(ct),this.showElementOffset(Y,K,{view:ct})),this.isCompSelected(M)&&(this.hideHighlighter(ct),!U.showOffsetsSelected&&this.hideElementOffset(ct));var oe="px",yt=this.toggleToolsEl(1,ct),Ct=yt.style,bt=this.canvas.canvasRectOffset(Y,K),Lt=bt.top,zt=bt.left;!Qt&&this.updateBadge(Y,K,vt(vt({},At),{view:ct,topOff:Lt,leftOff:zt})),Ct.top=Lt+oe,Ct.left=zt+oe,Ct.width=K.width+oe,Ct.height=K.height+oe,this._trgToolUp("local",{component:M,el:yt,top:Lt,left:zt,width:K.width,height:K.height})},_upToolbar:(0,e.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(W,U){U===void 0&&(U={}),this.em.trigger("canvas:tools:update",vt({type:W},U))},updateToolsGlobal:function(W){W===void 0&&(W={});var U=this.getElSelected(),D=U.el,Y=U.pos,K=U.component;if(!D){this.toggleToolsEl(),this.lastSelected=0;return}var ct=this.canvas,M=this.lastSelected!==D;(M||W.force)&&(this.lastSelected=D,this.updateToolbar(K));var wt="px",gt=this.toggleToolsEl(1),At=gt.style,Qt=ct.getTargetToElementFixed(D,ct.getToolbarEl(),{pos:Y}),oe=Qt.canvasOffsetTop,yt=Qt.canvasOffsetLeft;At.top=oe+wt,At.left=yt+wt,At.width=Y.width+wt,At.height=Y.height+wt,this.updateToolbarPos({top:Qt.top,left:Qt.left}),this._trgToolUp("global",{component:K,el:gt,top:oe,left:yt,width:Y.width,height:Y.height})},updateAttached:(0,e.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,e.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(W){return this.canvas.getCanvasView().getElementPos(W,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(W){W&&W.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(W){(0,nt.hasWin)()&&(this.editor=W&&W.get("Editor"),this.enable())},stop:function(W,U,D){if(D===void 0&&(D={}),!!(0,nt.hasWin)()){var Y=this,K=Y.em,ct=Y.editor;this.onHovered(),this.stopSelectComponent(),!D.preserveSelected&&K.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),ct&&ct.stopCommand("resize")}}}}),1406:((i,r,t)=>{t.r(r),t.d(r,{default:()=>s});var e=t(7774),n=t(1447),o=t(8433);const s={startSelectPosition:function(u,f,c){c===void 0&&(c={}),this.isPointed=!1;var h=this.em.Utils,g=u[0].ownerDocument.body;h&&(this.sorter=new h.ComponentSorter({em:this.em,treeClass:n.A,containerContext:{container:g,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:f,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:o.A.BothDirections,nested:!0}})),c.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=c.onStart),u&&u.length>0&&this.sorter.startSort(u.map(function(m){return{element:m}}))},getOffsetDim:function(){var u=this.offset(this.canvas.getFrameEl()),f=this.offset(this.canvas.getElement()),c=u.top-f.top,h=u.left-f.left;return{top:c,left:h}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,e.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,e.default)(this.cDim[this.posIndex][5]).parent():(0,e.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(u,f,c){var h=u||0,g=f||"before",m=c.length,y=m!==0&&g=="after"&&h==m;return m!==0&&(!y&&!c[h][4]||c[h-1]&&!c[h-1][4]||y&&!c[h-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}}),9395:((i,r,t)=>{t.r(r),t.d(r,{default:()=>u});var e=t(5706),n=t(179),o=t(7774),s=function(){return s=Object.assign||function(f){for(var c,h=1,g=arguments.length;h<g;h++){c=arguments[h];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(f[m]=c[m])}return f},s.apply(this,arguments)};const u={getOffsetMethod:function(f){var c=f||"";return"get"+c+"OffsetViewerEl"},run:function(f,c,h){var g=this.canvas,m=h||{},y=m.state||"",w=f.getConfig(),C=this.em.getZoomDecimal(),x=m.el;if(!w.showOffsets||!(x instanceof HTMLElement)||!w.showOffsetsSelected&&y=="Fixed"){f.stopCommand("".concat(this.id),h);return}if(!g.hasCustomSpot(n.F.Spacing)){var E=s({},m.elPos||g.getElementPos(x));(0,e.isUndefined)(m.top)||(E.top=m.top),(0,e.isUndefined)(m.left)||(E.left=m.left);var N=window.getComputedStyle(x),L=this.ppfx,H=y+"State",rt=this.getOffsetMethod(y),nt=g[rt](h.view);nt.style.opacity="";var vt=this["marginT"+y],et=this["marginB"+y],G=this["marginL"+y],W=this["marginR"+y],U=this["padT"+y],D=this["padB"+y],Y=this["padL"+y],K=this["padR"+y];if(nt.childNodes.length&&(this[H]="1",vt=nt.querySelector("[data-offset-m-t]"),et=nt.querySelector("[data-offset-m-b]"),G=nt.querySelector("[data-offset-m-l]"),W=nt.querySelector("[data-offset-m-r]"),U=nt.querySelector("[data-offset-p-t]"),D=nt.querySelector("[data-offset-p-b]"),Y=nt.querySelector("[data-offset-p-l]"),K=nt.querySelector("[data-offset-p-r]")),!this[H]){var ct=y.toLowerCase(),M=ct+"margin-v",wt=ct+"padding-v",gt=(0,o.default)('<div class="'.concat(L,'marginName">')).get(0),At=(0,o.default)('<div class="'.concat(L,'paddingName">')).get(0),Qt=L+M+"-el",oe=L+wt+"-el",yt="".concat(Qt," ").concat(L+M),Ct="".concat(oe," ").concat(L+wt);vt=(0,o.default)('<div class="'.concat(yt,'-top"></div>')).get(0),et=(0,o.default)('<div class="'.concat(yt,'-bottom"></div>')).get(0),G=(0,o.default)('<div class="'.concat(yt,'-left"></div>')).get(0),W=(0,o.default)('<div class="'.concat(yt,'-right"></div>')).get(0),U=(0,o.default)('<div class="'.concat(Ct,'-top"></div>')).get(0),D=(0,o.default)('<div class="'.concat(Ct,'-bottom"></div>')).get(0),Y=(0,o.default)('<div class="'.concat(Ct,'-left"></div>')).get(0),K=(0,o.default)('<div class="'.concat(Ct,'-right"></div>')).get(0),this["marginT"+y]=vt,this["marginB"+y]=et,this["marginL"+y]=G,this["marginR"+y]=W,this["padT"+y]=U,this["padB"+y]=D,this["padL"+y]=Y,this["padR"+y]=K,gt.appendChild(vt),gt.appendChild(et),gt.appendChild(G),gt.appendChild(W),At.appendChild(U),At.appendChild(D),At.appendChild(Y),At.appendChild(K),nt.appendChild(gt),nt.appendChild(At),this[H]="1"}var bt="px",Lt=parseFloat(N.marginLeft.replace(bt,""))*C,zt=parseFloat(N.marginRight.replace(bt,""))*C,Dt=parseFloat(N.marginTop.replace(bt,""))*C,Ut=parseFloat(N.marginBottom.replace(bt,""))*C,Yt=vt.style,se=et.style,Xt=G.style,ee=W.style,xe=U.style,ue=D.style,mt=Y.style,Vt=K.style,Rt=parseFloat(E.left),T=parseFloat(N.width)*C+bt;Yt.height=Dt+bt,Yt.width=T,Yt.top=E.top-Dt+bt,Yt.left=Rt+bt,se.height=Ut+bt,se.width=T,se.top=E.top+E.height+bt,se.left=Rt+bt;var j=E.height+Dt+Ut+bt,z=E.top-Dt+bt;Xt.height=j,Xt.width=Lt+bt,Xt.top=z,Xt.left=Rt-Lt+bt,ee.height=j,ee.width=zt+bt,ee.top=z,ee.left=Rt+E.width+bt;var it=parseFloat(N.paddingTop)*C;xe.height=it+bt;var _t=parseFloat(N.paddingBottom)*C;ue.height=_t+bt;var q=E.height-_t-it+bt,ht=E.top+it+bt;mt.height=q,mt.width=parseFloat(N.paddingLeft)*C+bt,mt.top=ht;var st=parseFloat(N.paddingRight)*C;Vt.height=q,Vt.width=st+bt,Vt.top=ht}},stop:function(f,c,h){h===void 0&&(h={});var g=h||{},m=g.state||"",y=this.getOffsetMethod(m),w=h.view,C=this.canvas,x=C[y](w);x.style.opacity=0}}}),7285:((i,r,t)=>{t.r(r),t.d(r,{default:()=>o});var e=t(5706),n=t(1166);const o={init:function(){(0,e.bindAll)(this,"_onFramesChange")},run:function(s){this.toggleVis(s,!0)},stop:function(s){this.toggleVis(s,!1)},toggleVis:function(s,u){if(u===void 0&&(u=!0),!s.Commands.isActive("preview")){var f=s.Canvas,c=u?"on":"off",h=f.getModel();h[c]("change:frames",this._onFramesChange),this.handleFrames(f.getFrames(),u)}},handleFrames:function(s,u){var f=this;s.forEach(function(c){var h;!((h=c.view)===null||h===void 0)&&h.loaded&&f._upFrame(c,u),c.__ol||(c.on("loaded",function(){return f._upFrame(c)}),c.__ol=!0)})},_onFramesChange:function(s,u){this.handleFrames(u)},_upFrame:function(s,u){var f,c=this,h=c.ppfx,g=c.em,m=c.id,y=(0,n.isDef)(u)?u:g.Commands.isActive(m),w=y?"add":"remove",C="".concat(h,"dashed");(f=s.view)===null||f===void 0||f.getBody().classList[w](C)}}}),9156:((i,r,t)=>{t.d(r,{Kx:()=>f,Ss:()=>h,e2:()=>u,lK:()=>m,pM:()=>c,x2:()=>g});var e=t(4193),n=t.n(e),o=(function(){var y=function(w,C){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var N in E)Object.prototype.hasOwnProperty.call(E,N)&&(x[N]=E[N])},y(w,C)};return function(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");y(w,C);function x(){this.constructor=w}w.prototype=C===null?Object.create(C):(x.prototype=C.prototype,new x)}})(),s=function(){return s=Object.assign||function(y){for(var w,C=1,x=arguments.length;C<x;C++){w=arguments[C];for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(y[E]=w[E])}return y},s.apply(this,arguments)},u="add remove reset change",f=(function(y){o(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return w})(n().Model),c=(function(y){o(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return w})(n().Collection),h=(function(y){o(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return w})(n().View),g;(function(y){y.Screen="screen",y.World="world"})(g||(g={}));var m={x:0,y:0};s(s({},m),{width:0,height:0})}),2225:((i,r,t)=>{t.d(r,{I:()=>n,t:()=>e});var e;(function(o){o.remove="component:remove",o.add="component:add",o.move="component:move"})(e||(e={}));var n;(function(o){o.add="component:add",o.remove="component:remove",o.removeBefore="component:remove:before",o.removed="component:removed",o.create="component:create",o.update="component:update",o.updateInside="component:update-inside",o.styleUpdate="component:styleUpdate",o.styleUpdateProperty="component:styleUpdate:",o.select="component:select",o.selectBefore="component:select:before",o.mount="component:mount",o.scriptMount="component:script:mount",o.scriptMountBefore="component:script:mount:before",o.scriptUnmount="component:script:unmount",o.render="component:render",o.input="component:input",o.resize="component:resize",o.resizeStart="component:resize:start",o.resizeMove="component:resize:move",o.resizeEnd="component:resize:end",o.resizeUpdate="component:resize:update",o.resizeInit="component:resize:init",o.symbolMainAdd="symbol:main:add",o.symbolMainUpdate="symbol:main:update",o.symbolMainUpdateDeep="symbol:main:update-deep",o.symbolMainRemove="symbol:main:remove",o.symbolMain="symbol:main",o.symbolInstanceAdd="symbol:instance:add",o.symbolInstanceRemove="symbol:instance:remove",o.symbolInstance="symbol:instance",o.symbol="symbol"})(n||(n={}))}),8242:((i,r,t)=>{t.d(r,{A:()=>u});var e=t(5706),n=t(9156),o=(function(){var f=function(c,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])},f(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");f(c,h);function g(){this.constructor=c}c.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}})(),s=(function(f){o(c,f);function c(h,g,m){h===void 0&&(h={}),m===void 0&&(m=!1);var y=f.call(this,h)||this;return y.itemsView="",y.itemType="type",y.reuseView=!1,y.config=g||h.config||{},m&&y.listenTo(y.collection,"add",y.addTo),y.items=[],y}return c.prototype.addTo=function(h){this.add(h)},c.prototype.itemViewNotFound=function(h){var g=this,m=g.config,y=g.ns,w=m.em,C="".concat(y?"[".concat(y,"]: "):"","'").concat(h,"' type not found");w&&w.logWarning(C)},c.prototype.add=function(h,g){var m=this,y=m.config,w=m.reuseView,C=m.items,x=this.itemsView||{},E=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],N=g||null,L=this.itemView,H=h.get(this.itemType),rt;x[H]?L=x[H]:H&&!x[H]&&!(0,e.includes)(E,H)&&this.itemViewNotFound(H),h.view&&w?rt=h.view:rt=new L({model:h,config:y},y),C&&C.push(rt);var nt=rt.render().el;N?N.appendChild(nt):this.$el.append(nt)},c.prototype.render=function(){var h=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(g){this.add(g,h)},this),this.$el.append(h),this.onRender(),this},c.prototype.onRender=function(){},c.prototype.onRemoveBefore=function(h,g){},c.prototype.onRemove=function(h,g){},c.prototype.remove=function(h){h===void 0&&(h={});var g=this.items;return this.onRemoveBefore(g,h),this.clearItems(),f.prototype.remove.call(this),this.onRemove(g,h),this},c.prototype.clearItems=function(){this.items},c})(n.Ss);const u=s;s.prototype.itemView=""}),9966:((i,r,t)=>{t.d(r,{A:()=>c});var e=t(5706),n=t(6294),o=function(){return o=Object.assign||function(h){for(var g,m=1,y=arguments.length;m<y;m++){g=arguments[m];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(h[w]=g[w])}return h},o.apply(this,arguments)},s=function(){return{x:0,y:0}},u=["x","y"],f=(function(){function h(g){return g===void 0&&(g={}),this.opts={snapGuides:{x:5,y:5},snapOffset:5,scale:1},(0,e.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(g),this.delta=s(),this.lastScroll=s(),this.lastScrollDiff=s(),this.startPointer=s(),this.startPosition=s(),this.globScrollDiff=s(),this.currentPointer=s(),this.position=s(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return h.prototype.setOptions=function(g){g===void 0&&(g={}),this.opts=o(o({},this.opts),g)},h.prototype.toggleDrag=function(g){var m=this.getDocumentEl(),y=this.getContainerEl(),w=this.getWindowEl(),C=g?"on":"off",x={on:n.on,off:n.AU};x[C](y,"mousemove dragover",this.drag),x[C](m,"mouseup dragend touchend",this.stop),x[C](m,"keydown",this.keyHandle),x[C](w,"scroll",this.handleScroll)},h.prototype.handleScroll=function(){var g=this,m=g.lastScroll,y=g.delta,w=this.getScrollInfo(),C={x:w.x-m.x,y:w.y-m.y};this.move(y.x+C.x,y.y+C.y),this.lastScrollDiff=C},h.prototype.start=function(g){var m=this.opts,y=m.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(g),this.guidesStatic=(0,e.result)(m,"guidesStatic")||[],this.guidesTarget=(0,e.result)(m,"guidesTarget")||[],(0,e.isFunction)(y)&&y(g,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=s(),this.globScrollDiff=s(),this.drag(g)},h.prototype.drag=function(g){var m=this,y=this,w=y.opts,C=y.lastScrollDiff,x=y.globScrollDiff,E=w.onDrag,N=this.startPointer,L=this.getPointerPos(g),H={x:x.x+C.x,y:x.y+C.y};this.globScrollDiff=H;var rt={x:L.x-N.x+H.x,y:L.y-N.y+H.y};this.lastScrollDiff=s();var nt=function(D){u.forEach(function(Y){return D[Y]=D[Y]*(0,e.result)(w,"scale")}),m.delta=D,m.move(D.x,D.y),(0,e.isFunction)(E)&&E(g,m)},vt=o({},rt);if(this.currentPointer=L,this.lastScroll=this.getScrollInfo(),nt(rt),this.guidesTarget.length){var et=this.snapGuides(vt),G=et.newDelta,W=et.trgX,U=et.trgY;(W||U)&&nt(G)}g.which===0&&this.stop(g)},h.prototype.snapGuides=function(g){var m=this,y=o({},g),w=this,C=w.trgX,x=w.trgY;return this.guidesTarget.forEach(function(E){E.x&&m.trgX||E.y&&m.trgY||(E.active=!1,m.guidesStatic.forEach(function(N){if(!(E.y&&N.x||E.x&&N.y)){var L=E.y&&N.y,H=L?"y":"x",rt=E[H],nt=N[H],vt=g[H],et=L?x:C;if(m.isPointIn(rt,nt,{axis:H})&&(0,e.isUndefined)(et)){var G=vt-(rt-nt);m.setGuideLock(E,G)}}}))}),C=this.trgX,x=this.trgY,u.forEach(function(E){var N=E.toUpperCase(),L=m["trg".concat(N)];L&&!m.isPointIn(g[E],L.lock,{axis:E})&&(m.setGuideLock(L,null),L=null),L&&!(0,e.isUndefined)(L.lock)&&(y[E]=L.lock)}),{newDelta:y,trgX:this.trgX,trgY:this.trgY}},h.prototype.isPointIn=function(g,m,y){var w,C=y===void 0?{}:y,x=C.offset,E=C.axis,N=this.opts,L=N.snapGuides,H=L===void 0?{}:L,rt=N.snapOffset,nt=rt===void 0?0:rt,vt=E==="x"?H.x:E==="y"?H.y:void 0,et=vt===0?0:(w=x??vt)!==null&&w!==void 0?w:nt;return et===0?!1:g>=m&&g<=m+et||g<=m&&g>=m-et},h.prototype.setGuideLock=function(g,m){var y=(0,e.isUndefined)(g.x)?"Y":"X",w="trg".concat(y);return m!==null?(g.active=!0,g.lock=m,this[w]=g):(delete g.active,delete g.lock,delete this[w]),g},h.prototype.stop=function(g,m){m===void 0&&(m={});var y=this.delta,w=!!m.cancel,C=w?0:y.x,x=w?0:y.y;this.toggleDrag(),this.move(C,x,!0);var E=this.opts.onEnd;(0,e.isFunction)(E)&&E(g,this,{cancelled:w})},h.prototype.keyHandle=function(g){(0,n.v$)(g)&&this.stop(g,{cancel:!0})},h.prototype.move=function(g,m,y){var w=this,C=w.el,x=w.opts,E=this.startPosition;if(E){var N=x.setPosition,L=E.x+g,H=E.y+m;this.position={x:L,y:H,end:y},(0,e.isFunction)(N)&&N(this.position),C&&(C.style.left="".concat(L,"px"),C.style.top="".concat(H,"px"))}},h.prototype.getContainerEl=function(){var g=this.opts.container;return g?[g]:this.getDocumentEl()},h.prototype.getWindowEl=function(){var g=this.getContainerEl();return g.map(function(m){var y=m.ownerDocument||m;return y.defaultView||y.parentWindow})},h.prototype.getDocumentEl=function(g){var m=this.opts.doc;if(g=g||this.el,!this.docs.length){var y=[document];g&&y.push(g.ownerDocument),m&&y.push(m),this.docs=y}return this.docs},h.prototype.getPointerPos=function(g){var m=this.opts.getPointerPosition,y=(0,n.G2)(g);return m?m(g):{x:y.clientX,y:y.clientY}},h.prototype.getStartPosition=function(){var g=this,m=g.el,y=g.opts,w=y.getPosition,C=s();return(0,e.isFunction)(w)?C=w():m&&(C={x:parseFloat(m.style.left),y:parseFloat(m.style.top)}),C},h.prototype.getScrollInfo=function(){var g=this.opts.doc,m=g&&g.body;return{y:m?m.scrollTop:0,x:m?m.scrollLeft:0}},h.prototype.detectAxisLock=function(g,m){var y=g,w=m,C=Math.abs(y),x=Math.abs(w);if(w>=C||w<=-C)return"x";if(y>x||y<-x)return"y"},h})();const c=f}),7774:((i,r,t)=>{t.r(r),t.d(r,{default:()=>pr});var e=typeof document<"u"?document:null,n=typeof window<"u"?window:null,o=Array.prototype,s=o.filter,u=o.indexOf,f=o.map,c=o.push,h=o.reverse,g=o.slice,m=o.splice,y=/^#[\w-]*$/,w=/^\.[\w-]*$/,C=/<.+>/,x=/^\w+$/;function E(F,Q){return Q===void 0&&(Q=e),w.test(F)?Q.getElementsByClassName(F.slice(1)):x.test(F)?Q.getElementsByTagName(F):Q.querySelectorAll(F)}function N(F,Q){if(Q===void 0&&(Q=e),!!F){if(F.__cash)return F;var lt=F;if(Y(F)){if(Q.__cash&&(Q=Q[0]),lt=y.test(F)?Q.getElementById(F.slice(1)):C.test(F)?Se(F):E(F,Q),!lt)return}else if(D(F))return this.ready(F);(lt.nodeType||lt===n)&&(lt=[lt]),this.length=lt.length;for(var Pt=0,Wt=this.length;Pt<Wt;Pt++)this[Pt]=lt[Pt]}}function L(F,Q){return new N(F,Q)}var H=L.fn=L.prototype=N.prototype={constructor:L,__cash:!0,length:0,splice:m};H.get=function(F){return F===void 0?g.call(this):this[F<0?F+this.length:F]},H.eq=function(F){return L(this.get(F))},H.first=function(){return this.eq(0)},H.last=function(){return this.eq(-1)},H.map=function(F){return L(f.call(this,function(Q,lt){return F.call(Q,lt,Q)}))},H.slice=function(){return L(g.apply(this,arguments))};var rt=/(?:^\w|[A-Z]|\b\w)/g,nt=/[\s-_]+/g;function vt(F){return F.replace(rt,function(Q,lt){return Q[lt?"toUpperCase":"toLowerCase"]()}).replace(nt,"")}L.camelCase=vt;function et(F,Q){for(var lt=0,Pt=F.length;lt<Pt&&Q.call(F[lt],F[lt],lt,F)!==!1;lt++);}L.each=et,H.each=function(F){return et(this,function(Q,lt){return F.call(Q,lt,Q)}),this},H.removeProp=function(F){return this.each(function(Q,lt){delete lt[F]})};function G(F){F===void 0&&(F=this);for(var Q=arguments,lt=Q.length,Pt=lt<2?0:1;Pt<lt;Pt++)for(var Wt in Q[Pt])F[Wt]=Q[Pt][Wt];return F}L.extend=H.extend=G;var W=1;L.guid=W;function U(F,Q){var lt=F&&(F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.msMatchesSelector||F.oMatchesSelector);return!!lt&&lt.call(F,Q)}L.matches=U;function D(F){return typeof F=="function"}L.isFunction=D;function Y(F){return typeof F=="string"}L.isString=Y;function K(F){return!isNaN(parseFloat(F))&&isFinite(F)}L.isNumeric=K;var ct=Array.isArray;L.isArray=ct,H.prop=function(F,Q){if(F){if(Y(F))return arguments.length<2?this[0]&&this[0][F]:this.each(function(Pt,Wt){Wt[F]=Q});for(var lt in F)this.prop(lt,F[lt]);return this}};function M(F){return Y(F)?function(Q,lt){return U(lt,F)}:F.__cash?function(Q,lt){return F.is(lt)}:function(Q,lt,Pt){return lt===Pt}}H.filter=function(F){if(!F)return L();var Q=D(F)?F:M(F);return L(s.call(this,function(lt,Pt){return Q.call(lt,Pt,lt,F)}))};var wt=/\S+/g;function gt(F){return Y(F)?F.match(wt)||[]:[]}H.hasClass=function(F){var Q=gt(F),lt=!1;return Q.length&&this.each(function(Pt,Wt){return lt=Wt.classList.contains(Q[0]),!lt}),lt},H.removeAttr=function(F){var Q=gt(F);return Q.length?this.each(function(lt,Pt){et(Q,function(Wt){Pt.removeAttribute(Wt)})}):this},H.attr=function(F,Q){if(F){if(Y(F)){if(arguments.length<2){if(!this[0])return;var lt=this[0].getAttribute(F);return lt===null?void 0:lt}return Q===null?this.removeAttr(F):this.each(function(Wt,fe){fe.setAttribute(F,Q)})}for(var Pt in F)this.attr(Pt,F[Pt]);return this}},H.toggleClass=function(F,Q){var lt=gt(F),Pt=Q!==void 0;return lt.length?this.each(function(Wt,fe){et(lt,function(ye){Pt?Q?fe.classList.add(ye):fe.classList.remove(ye):fe.classList.toggle(ye)})}):this},H.addClass=function(F){return this.toggleClass(F,!0)},H.removeClass=function(F){return arguments.length?this.toggleClass(F,!1):this.attr("class","")};function At(F){return F.filter(function(Q,lt,Pt){return Pt.indexOf(Q)===lt})}L.unique=At,H.add=function(F,Q){return L(At(this.get().concat(L(F,Q).get())))};function Qt(F,Q,lt){if(F.nodeType===1){var Pt=n.getComputedStyle(F,null);return Q?lt?Pt.getPropertyValue(Q):Pt[Q]:Pt}}function oe(F,Q){return parseInt(Qt(F,Q),10)||0}var yt=/^--/;function Ct(F){return yt.test(F)}var bt={},Lt=e&&e.createElement("div"),zt=Lt?Lt.style:{},Dt=["webkit","moz","ms","o"];function Ut(F,Q){if(Q===void 0&&(Q=Ct(F)),Q)return F;if(!bt[F]){var lt=vt(F),Pt=""+lt.charAt(0).toUpperCase()+lt.slice(1),Wt=(lt+" "+Dt.join(Pt+" ")+Pt).split(" ");et(Wt,function(fe){if(fe in zt)return bt[F]=fe,!1})}return bt[F]}L.prefixedProp=Ut;var Yt={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function se(F,Q,lt){return lt===void 0&&(lt=Ct(F)),!lt&&!Yt[F]&&K(Q)?Q+"px":Q}H.css=function(F,Q){if(Y(F)){var lt=Ct(F);return F=Ut(F,lt),arguments.length<2?this[0]&&Qt(this[0],F,lt):F?(Q=se(F,Q,lt),this.each(function(Wt,fe){fe.nodeType===1&&(lt?fe.style.setProperty(F,Q):fe.style[F]=Q)})):this}for(var Pt in F)this.css(Pt,F[Pt]);return this};var Xt="__cashData",ee=/^data-(.*)/;L.hasData=function(F){return Xt in F};function xe(F){return F[Xt]=F[Xt]||{}}function ue(F,Q){var lt=xe(F);if(Q){if(!(Q in lt)){var Pt=F.dataset?F.dataset[Q]||F.dataset[vt(Q)]:L(F).attr("data-"+Q);if(Pt!==void 0){try{Pt=JSON.parse(Pt)}catch{}lt[Q]=Pt}}return lt[Q]}return lt}function mt(F,Q){Q===void 0?delete F[Xt]:delete xe(F)[Q]}function Vt(F,Q,lt){xe(F)[Q]=lt}H.data=function(F,Q){var lt=this;if(!F)return this[0]?(et(this[0].attributes,function(Wt){var fe=Wt.name.match(ee);fe&&lt.data(fe[1])}),ue(this[0])):void 0;if(Y(F))return Q===void 0?this[0]&&ue(this[0],F):this.each(function(Wt,fe){return Vt(fe,F,Q)});for(var Pt in F)this.data(Pt,F[Pt]);return this},H.removeData=function(F){return this.each(function(Q,lt){return mt(lt,F)})};function Rt(F,Q){return oe(F,"border"+(Q?"Left":"Top")+"Width")+oe(F,"padding"+(Q?"Left":"Top"))+oe(F,"padding"+(Q?"Right":"Bottom"))+oe(F,"border"+(Q?"Right":"Bottom")+"Width")}et(["Width","Height"],function(F){H["inner"+F]=function(){if(this[0])return this[0]===n?n["inner"+F]:this[0]["client"+F]}}),et(["width","height"],function(F,Q){H[F]=function(lt){return this[0]?arguments.length?(lt=parseInt(lt,10),this.each(function(Pt,Wt){if(Wt.nodeType===1){var fe=Qt(Wt,"boxSizing");Wt.style[F]=se(F,lt+(fe==="border-box"?Rt(Wt,!Q):0))}})):this[0]===n?this[0][vt("outer-"+F)]:this[0].getBoundingClientRect()[F]-Rt(this[0],!Q):lt===void 0?void 0:this}}),et(["Width","Height"],function(F,Q){H["outer"+F]=function(lt){if(this[0])return this[0]===n?n["outer"+F]:this[0]["offset"+F]+(lt?oe(this[0],"margin"+(Q?"Top":"Left"))+oe(this[0],"margin"+(Q?"Bottom":"Right")):0)}});function T(F,Q){for(var lt=0,Pt=Q.length;lt<Pt;lt++)if(F.indexOf(Q[lt])<0)return!1;return!0}function j(F,Q,lt){et(F[lt],function(Pt){Pt[0];var Wt=Pt[1];Q.removeEventListener(lt,Wt)}),delete F[lt]}var z="__cashEvents",it=".";function _t(F){return F[z]=F[z]||{}}function q(F,Q,lt,Pt){Pt.guid=Pt.guid||W++;var Wt=_t(F);Wt[Q]=Wt[Q]||[],Wt[Q].push([lt,Pt]),F.addEventListener(Q,Pt)}function ht(F){var Q=F.split(it);return[Q[0],Q.slice(1).sort()]}function st(F,Q,lt,Pt){var Wt=_t(F);if(Q){var fe=Wt[Q];if(!fe)return;Pt&&(Pt.guid=Pt.guid||W++),Wt[Q]=fe.filter(function(ye){var Be=ye[0],rr=ye[1];if(Pt&&rr.guid!==Pt.guid||!T(Be,lt))return!0;F.removeEventListener(Q,rr)})}else if(!lt||!lt.length)for(Q in Wt)j(Wt,F,Q);else for(Q in Wt)st(F,Q,lt,Pt)}H.off=function(F,Q){var lt=this;return F===void 0?this.each(function(Pt,Wt){return st(Wt)}):et(gt(F),function(Pt){var Wt=ht(Pt),fe=Wt[0],ye=Wt[1];lt.each(function(Be,rr){return st(rr,fe,ye,Q)})}),this},H.on=function(F,Q,lt,Pt){var Wt=this;if(!Y(F)){for(var fe in F)this.on(fe,Q,F[fe]);return this}return D(Q)&&(lt=Q,Q=!1),et(gt(F),function(ye){var Be=ht(ye),rr=Be[0],We=Be[1];Wt.each(function(bn,ze){var jr=function nn(Le){if(!(Le.namespace&&!T(We,Le.namespace.split(it)))){var nr=ze;if(Q){for(var ke=Le.target;!U(ke,Q);)if(ke===ze||(ke=ke.parentNode,!ke))return;nr=ke}Le.namespace=Le.namespace||"";var Mr=lt.call(nr,Le,Le.data);Pt&&st(ze,rr,We,nn),Mr===!1&&(Le.preventDefault(),Le.stopPropagation())}};jr.guid=lt.guid=lt.guid||W++,q(ze,rr,We,jr)})}),this},H.one=function(F,Q,lt){return this.on(F,Q,lt,!0)},H.ready=function(F){var Q=function(){return F(L)};return e.readyState!=="loading"?setTimeout(Q):e.addEventListener("DOMContentLoaded",Q),this},H.trigger=function(F,Q){var lt=F;if(Y(F)){var Pt=ht(F),Wt=Pt[0],fe=Pt[1];lt=e.createEvent("HTMLEvents"),lt.initEvent(Wt,!0,!0),lt.namespace=fe.join(it)}return lt.data=Q,this.each(function(ye,Be){Be.dispatchEvent(lt)})};function ie(F){var Q=[];return et(F.options,function(lt){lt.selected&&!lt.disabled&&!lt.parentNode.disabled&&Q.push(lt.value)}),Q}function _e(F){return F.selectedIndex<0?null:F.options[F.selectedIndex].value}var me=/select-one/i,B=/select-multiple/i;function ot(F){var Q=F.type;return me.test(Q)?_e(F):B.test(Q)?ie(F):F.value}var R=/%20/g;function Et(F,Q){return"&"+encodeURIComponent(F)+"="+encodeURIComponent(Q).replace(R,"+")}var pt=/file|reset|submit|button|image/i,It=/radio|checkbox/i;H.serialize=function(){var F="";return this.each(function(Q,lt){et(lt.elements||[lt],function(Pt){if(!(Pt.disabled||!Pt.name||Pt.tagName==="FIELDSET")&&!pt.test(Pt.type)&&!(It.test(Pt.type)&&!Pt.checked)){var Wt=ot(Pt);if(Wt!==void 0){var fe=ct(Wt)?Wt:[Wt];et(fe,function(ye){F+=Et(Pt.name,ye)})}}})}),F.substr(1)},H.val=function(F){return F===void 0?this[0]&&ot(this[0]):this.each(function(Q,lt){var Pt=B.test(lt.type),Wt=F===null?Pt?[]:"":F;Pt&&ct(Wt)?et(lt.options,function(fe){fe.selected=Wt.indexOf(fe.value)>=0}):lt.value=Wt})},H.clone=function(){return this.map(function(F,Q){return Q.cloneNode(!0)})},H.detach=function(){return this.each(function(F,Q){Q.parentNode&&Q.parentNode.removeChild(Q)})};var Jt=/^\s*<(\w+)[^>]*>/,Zt=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,Gt;function ae(){if(!Gt){var F=e.createElement("table"),Q=e.createElement("tr");Gt={"*":e.createElement("div"),tr:e.createElement("tbody"),td:Q,th:Q,thead:F,tbody:F,tfoot:F}}}function Se(F){if(ae(),!Y(F))return[];if(Zt.test(F))return[e.createElement(RegExp.$1)];var Q=Jt.test(F)&&RegExp.$1,lt=Gt[Q]||Gt["*"];return lt.innerHTML=F,L(lt.childNodes).detach().get()}L.parseHTML=Se,H.empty=function(){var F=this[0];if(F)for(;F.firstChild;)F.removeChild(F.firstChild);return this};function Ae(F,Q,lt){lt?F.insertBefore(Q,F.childNodes[0]):F.appendChild(Q)}function Te(F,Q,lt){if(Q!==void 0){var Pt=Y(Q);!Pt&&Q.length?et(Q,function(Wt){return Te(F,Wt,lt)}):et(F,Pt?function(Wt){Wt.insertAdjacentHTML(lt?"afterbegin":"beforeend",Q)}:function(Wt,fe){return Ae(Wt,fe?Q.cloneNode(!0):Q,lt)})}}H.append=function(){var F=this;return et(arguments,function(Q){Te(F,Q)}),this},H.appendTo=function(F){return Te(L(F),this),this},H.html=function(F){if(F===void 0)return this[0]&&this[0].innerHTML;var Q=F.nodeType?F[0].outerHTML:F;return this.each(function(lt,Pt){Pt.innerHTML=Q})},H.insertAfter=function(F){var Q=this;return L(F).each(function(lt,Pt){var Wt=Pt.parentNode;Q.each(function(fe,ye){Wt.insertBefore(lt?ye.cloneNode(!0):ye,Pt.nextSibling)})}),this},H.after=function(){var F=this;return et(h.apply(arguments),function(Q){h.apply(L(Q).slice()).insertAfter(F)}),this},H.insertBefore=function(F){var Q=this;return L(F).each(function(lt,Pt){var Wt=Pt.parentNode;Q.each(function(fe,ye){Wt.insertBefore(lt?ye.cloneNode(!0):ye,Pt)})}),this},H.before=function(){var F=this;return et(arguments,function(Q){L(Q).insertBefore(F)}),this},H.prepend=function(){var F=this;return et(arguments,function(Q){Te(F,Q,!0)}),this},H.prependTo=function(F){return Te(L(F),h.apply(this.slice()),!0),this},H.remove=function(){return this.detach().off()},H.replaceWith=function(F){var Q=this;return this.each(function(lt,Pt){var Wt=Pt.parentNode;if(Wt){var fe=lt?L(F).clone():L(F);if(!fe[0])return Q.remove(),!1;Wt.replaceChild(fe[0],Pt),L(fe[0]).after(fe.slice(1))}})},H.replaceAll=function(F){return L(F).replaceWith(this),this},H.text=function(F){return F===void 0?this[0]?this[0].textContent:"":this.each(function(Q,lt){lt.textContent=F})};var Je=e&&e.documentElement;H.offset=function(){var F=this[0];if(F){var Q=F.getBoundingClientRect();return{top:Q.top+n.pageYOffset-Je.clientTop,left:Q.left+n.pageXOffset-Je.clientLeft}}},H.offsetParent=function(){return L(this[0]&&this[0].offsetParent)},H.position=function(){var F=this[0];if(F)return{left:F.offsetLeft,top:F.offsetTop}},H.children=function(F){var Q=[];return this.each(function(lt,Pt){c.apply(Q,Pt.children)}),Q=L(At(Q)),F?Q.filter(function(lt,Pt){return U(Pt,F)}):Q},H.contents=function(){var F=[];return this.each(function(Q,lt){c.apply(F,lt.tagName==="IFRAME"?[lt.contentDocument]:lt.childNodes)}),L(F.length&&At(F))},H.find=function(F){for(var Q=[],lt=0,Pt=this.length;lt<Pt;lt++){var Wt=E(F,this[lt]);Wt.length&&c.apply(Q,Wt)}return L(Q.length&&At(Q))},H.has=function(F){var Q=Y(F)?function(lt,Pt){return!!E(F,Pt).length}:function(lt,Pt){return Pt.contains(F)};return this.filter(Q)},H.is=function(F){if(!F||!this[0])return!1;var Q=M(F),lt=!1;return this.each(function(Pt,Wt){return lt=Q(Pt,Wt,F),!lt}),lt},H.next=function(){return L(this[0]&&this[0].nextElementSibling)},H.not=function(F){if(!F||!this[0])return this;var Q=M(F);return this.filter(function(lt,Pt){return!Q(lt,Pt,F)})},H.parent=function(){var F=[];return this.each(function(Q,lt){lt&&lt.parentNode&&F.push(lt.parentNode)}),L(At(F))},H.index=function(F){var Q=F?L(F)[0]:this[0],lt=F?this:L(Q).parent().children();return u.call(lt,Q)},H.closest=function(F){return!F||!this[0]?L():this.is(F)?this.filter(F):this.parent().closest(F)},H.parents=function(F){var Q=[],lt;return this.each(function(Pt,Wt){for(lt=Wt;lt&&lt.parentNode&&lt!==e.body.parentNode;)lt=lt.parentNode,(!F||F&&U(lt,F))&&Q.push(lt)}),L(At(Q))},H.prev=function(){return L(this[0]&&this[0].previousElementSibling)},H.siblings=function(){var F=this[0];return this.parent().children().filter(function(Q,lt){return lt!==F})};const pr=L}),6294:((i,r,t)=>{t.d(r,{AU:()=>Qt,BC:()=>x,C8:()=>et,Ch:()=>U,Ci:()=>K,D8:()=>u,G2:()=>D,GW:()=>vt,GZ:()=>N,I6:()=>g,LJ:()=>wt,Sc:()=>C,X6:()=>m,Xy:()=>G,YZ:()=>c,ZQ:()=>f,_I:()=>oe,a_:()=>E,af:()=>H,bG:()=>w,cx:()=>h,ir:()=>rt,kk:()=>gt,on:()=>At,rp:()=>M,v$:()=>Y,yL:()=>L,zN:()=>y});var e=t(5706),n=function(yt,Ct,bt){if(bt||arguments.length===2)for(var Lt=0,zt=Ct.length,Dt;Lt<zt;Lt++)(Dt||!(Lt in Ct))&&(Dt||(Dt=Array.prototype.slice.call(Ct,0,Lt)),Dt[Lt]=Ct[Lt]);return yt.concat(Dt||Array.prototype.slice.call(Ct))},o="tag",s="attributes",u="transitionend oTransitionEnd transitionend webkitTransitionEnd",f=function(yt){return yt?.nodeType===Node.DOCUMENT_NODE},c=function(yt){var Ct=yt&&yt.parentNode;Ct&&Ct.removeChild(yt)};function h(){for(var yt=[],Ct=0;Ct<arguments.length;Ct++)yt[Ct]=arguments[Ct];var bt=Array.isArray(yt[0])?yt[0]:n([],yt,!0);return bt.filter(Boolean).join(" ")}var g=function(yt,Ct){return yt.querySelectorAll(Ct)},m=function(yt,Ct){return Ct===void 0&&(Ct={}),yt&&yt.setAttribute&&(0,e.each)(Ct,function(bt,Lt){return yt.setAttribute(Lt,bt)})},y=function(yt){var Ct;return yt&&!!(yt.offsetWidth||yt.offsetHeight||!((Ct=yt.getClientRects)===null||Ct===void 0)&&Ct.call(yt).length)},w=function(yt,Ct){var bt;(bt=yt.parentNode)===null||bt===void 0||bt.replaceChild(Ct,yt)},C=function(yt,Ct,bt){var Lt=yt.childNodes,zt=Lt.length,Dt=(0,e.isUndefined)(bt)?zt:bt;(0,e.isString)(Ct)&&(yt.insertAdjacentHTML("beforeEnd",Ct),Ct=yt.lastChild,yt.removeChild(Ct)),Dt>=zt?yt.appendChild(Ct):yt.insertBefore(Ct,Lt[Dt])},x=function(yt,Ct){return C(yt,Ct)},E=function(yt,Ct,bt){Ct===void 0&&(Ct={});var Lt=document.createElement(yt);return Ct&&(0,e.each)(Ct,function(zt,Dt){return Lt.setAttribute(Dt,zt)}),bt&&((0,e.isString)(bt)?Lt.innerHTML=bt:Lt.appendChild(bt)),Lt},N=function(yt){return document.createTextNode(yt)},L=function(yt,Ct){var bt,Lt=yt.type;try{bt=new window[Ct](Lt,yt)}catch{bt=document.createEvent(Ct),bt.initEvent(Lt,!0,!0)}return bt._parentEvent=yt,Lt.indexOf("key")===0&&(bt.keyCodeVal=yt.keyCode,["keyCode","which"].forEach(function(zt){Object.defineProperty(bt,zt,{get:function(){return this.keyCodeVal}})})),bt},H=function(yt,Ct){Ct===void 0&&(Ct=[]);var bt=Array.isArray(Ct)?Ct:[Ct];bt.forEach(function(Lt){var zt=Lt[o]||"div",Dt=Lt[s]||{},Ut=document.createElement(zt);(0,e.each)(Dt,function(Yt,se){Ut.setAttribute(se,Yt)}),yt.appendChild(Ut)})},rt=function(yt){return yt?.nodeType===Node.TEXT_NODE},nt=function(yt){return yt?.nodeType===Node.COMMENT_NODE},vt=function(yt){return yt&&!rt(yt)&&!nt(yt)},et=function(yt){var Ct={top:0,left:0,width:0,height:0};if(!yt)return Ct;var bt;if(rt(yt)){var Lt=document.createRange();Lt.selectNode(yt),bt=Lt.getBoundingClientRect(),Lt.detach()}return bt||(yt.getBoundingClientRect?yt.getBoundingClientRect():Ct)},G=function(yt){var Ct=yt?.ownerDocument||document,bt=Ct.documentElement,Lt=Ct.defaultView||window;return{x:(Lt.pageXOffset||bt.scrollLeft||0)-(bt.clientLeft||0),y:(Lt.pageYOffset||bt.scrollTop||0)-(bt.clientTop||0)}},W=function(yt){return yt.which||yt.keyCode},U=function(yt){return String.fromCharCode(W(yt))},D=function(yt){return yt.touches&&yt.touches[0]?yt.touches[0]:yt},Y=function(yt){return W(yt)===27},K=function(yt){return W(yt)===13},ct=function(yt){return yt.ctrlKey},M=function(yt){return ct(yt)||yt.metaKey},wt=function(yt){if(!yt)return"";var Ct=yt.name,bt=yt.publicId,Lt=yt.systemId,zt=bt?' PUBLIC "'.concat(bt,'"'):"",Dt=!bt&&Lt?' SYSTEM "'.concat(Lt,'"'):"";return"<!DOCTYPE ".concat(Ct).concat(zt).concat(Dt,">")},gt=function(yt){yt===void 0&&(yt={});var Ct=[];return(0,e.each)(yt,function(bt,Lt){return Ct.push("".concat(Lt,'="').concat(bt,'"'))}),Ct.join(" ")},At=function(yt,Ct,bt,Lt){var zt=Ct.split(/\s+/),Dt=(0,e.isArray)(yt)?yt:[yt];zt.forEach(function(Ut){Dt.forEach(function(Yt){return Yt?.addEventListener(Ut,bt,Lt)})})},Qt=function(yt,Ct,bt,Lt){var zt=Ct.split(/\s+/),Dt=(0,e.isArray)(yt)?yt:[yt];zt.forEach(function(Ut){Dt.forEach(function(Yt){return Yt?.removeEventListener(Ut,bt,Lt)})})},oe=function(yt){var Ct=yt.replace(/-([a-zA-Z0-9])/g,function(bt,Lt){return Lt.toUpperCase()});return Ct}}),1166:((i,r,t)=>{t.r(r),t.d(r,{appendStyles:()=>G,buildBase64UrlFromSvg:()=>ue,camelCase:()=>Y,capitalize:()=>zt,createId:()=>xe,deepMerge:()=>yt,escape:()=>gt,escapeAltQuoteAttrValue:()=>oe,escapeAttrValue:()=>Qt,escapeNodeContent:()=>At,find:()=>wt,get:()=>m,getComponentModel:()=>Xt,getComponentView:()=>se,getElement:()=>M,getGlobal:()=>H,getModel:()=>Ct,getUiClass:()=>et,getUnitFromValue:()=>U,getViewEl:()=>Ut,hasDnd:()=>ct,hasWin:()=>L,isBultInMethod:()=>C,isComponent:()=>Yt,isDef:()=>N,isEmptyObj:()=>Lt,isObject:()=>bt,isRule:()=>Dt,matches:()=>vt,normalizeFloat:()=>K,normalizeKey:()=>x,serialize:()=>w,set:()=>y,setViewEl:()=>ee,shallowDiff:()=>W,stringToPath:()=>h,toLowerCase:()=>rt,upFirst:()=>D,wait:()=>E});var e=t(5706),n=t(6294),o=function(){return o=Object.assign||function(mt){for(var Vt,Rt=1,T=arguments.length;Rt<T;Rt++){Vt=arguments[Rt];for(var j in Vt)Object.prototype.hasOwnProperty.call(Vt,j)&&(mt[j]=Vt[j])}return mt},o.apply(this,arguments)},s=function(mt,Vt,Rt){if(Rt||arguments.length===2)for(var T=0,j=Vt.length,z;T<j;T++)(z||!(T in Vt))&&(z||(z=Array.prototype.slice.call(Vt,0,T)),z[T]=Vt[T]);return mt.concat(z||Array.prototype.slice.call(Vt))},u={},f=/\\(\\)?/g,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=function(mt){var Vt=[];return mt.charCodeAt(0)===46&&Vt.push(""),mt.replace(c,function(Rt,T,j,z){return Vt.push(j?z.replace(f,"$1"):T||Rt),""}),Vt};function g(mt,Vt){return(0,e.isArray)(mt)?mt:Vt.hasOwnProperty(mt)?[mt]:h(mt)}var m=function(mt,Vt,Rt){for(var T,j=g(Vt,mt),z=j.length,it=0;mt!=null&&it<z;)mt=mt["".concat(j[it++])];return(T=it&&it==z?mt:void 0)!==null&&T!==void 0?T:Rt},y=function(mt,Vt,Rt){if(!bt(mt))return!1;var T=g(Vt,mt),j=T.length;if(j===0)return!1;if(j===1)return mt[T[0]]=Rt,!0;var z=T.slice(0,-1),it=T[j-1],_t=m(mt,z);if(_t){if(Array.isArray(_t)){var q=+it;if(!isNaN(q))return _t[q]=Rt,!0}else if(bt(_t))return _t[it]=Rt,!0}return!1},w=function(mt){return JSON.parse(JSON.stringify(mt))},C=function(mt){return(0,e.isFunction)(u[mt])},x=function(mt){return C(mt)?"_".concat(mt):mt},E=function(mt){return mt===void 0&&(mt=0),new Promise(function(Vt){return setTimeout(Vt,mt)})},N=function(mt){return typeof mt<"u"},L=function(){return typeof window<"u"},H=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:t.g},rt=function(mt){return(mt||"").toLowerCase()},nt=L()?window.Element.prototype:{},vt=nt.matches||nt.webkitMatchesSelector||nt.mozMatchesSelector||nt.msMatchesSelector,et=function(mt,Vt){var Rt=mt.getConfig(),T=Rt.stylePrefix,j=Rt.customUI;return[j&&"".concat(T,"cui"),Vt].filter(function(z){return z}).join(" ")},G=function(mt,Vt){Vt===void 0&&(Vt={});var Rt=(0,e.isArray)(mt)?s([],mt,!0):[mt];if(Rt.length){var T=Rt.shift();if(T&&(!Vt.unique||!document.querySelector('link[href="'.concat(T,'"]')))){var j=document.head,z=document.createElement("link");z.href=T,z.rel="stylesheet",Vt.prepand?j.insertBefore(z,j.firstChild):j.appendChild(z)}G(Rt)}},W=function(mt,Vt){var Rt={},T=(0,e.keys)(Vt);for(var j in mt)if(mt.hasOwnProperty(j)){var z=mt[j],it=Vt[j];T.indexOf(j)>=0?z!==it&&(Rt[j]=it):Rt[j]=null}for(var j in Vt)Vt.hasOwnProperty(j)&&(0,e.isUndefined)(mt[j])&&(Rt[j]=Vt[j]);return Rt},U=function(mt){return mt.replace(parseFloat(mt),"")},D=function(mt){return mt[0].toUpperCase()+mt.toLowerCase().slice(1)},Y=function(mt){return mt.replace(/-./g,function(Vt){return Vt[1].toUpperCase()})},K=function(mt,Vt,Rt){Vt===void 0&&(Vt=1),Rt===void 0&&(Rt=0);var T=0;if(isNaN(mt))return Rt;if(mt=parseFloat(mt),Math.floor(mt)!==mt){var j=Vt.toString().split(".")[1];T=j?j.length:0}return T?parseFloat(mt.toFixed(T)):mt},ct=function(mt){return"draggable"in document.createElement("i")&&(mt?mt.config.nativeDnD:!0)},M=function(mt){if((0,e.isElement)(mt)||(0,n.ir)(mt))return mt;if(mt&&mt.getEl)return mt.getEl()},wt=function(mt,Vt){var Rt=null;return mt.some(function(T,j){return Vt(T,j,mt)?(Rt=T,1):0}),Rt},gt=function(mt){return mt===void 0&&(mt=""),"".concat(mt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},At=function(mt){return mt===void 0&&(mt=""),"".concat(mt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Qt=function(mt){return mt===void 0&&(mt=""),"".concat(mt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},oe=function(mt){return mt===void 0&&(mt=""),"".concat(mt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;")},yt=function(){for(var mt=[],Vt=0;Vt<arguments.length;Vt++)mt[Vt]=arguments[Vt];for(var Rt=o({},mt[0]),T=1;T<mt.length;T++){var j=o({},mt[T]);for(var z in j){var it=Rt[z],_t=j[z];bt(it)&&bt(_t)?Rt[z]=yt(it,_t):Rt[z]=_t}}return Rt},Ct=function(mt,Vt){var Rt;return!Vt&&mt&&mt.__cashData?Rt=mt.__cashData.model:Vt&&(0,e.isElement)(mt)&&(Rt=Vt(mt).data("model")),Rt},bt=function(mt){return mt&&!Array.isArray(mt)&&typeof mt=="object"},Lt=function(mt){return Object.keys(mt).length<=0},zt=function(mt){return mt===void 0&&(mt=""),mt&&mt.charAt(0).toUpperCase()+mt.substring(1)},Dt=function(mt){return mt&&mt.toCSS},Ut=function(mt){return mt?.__gjsv},Yt=function(mt){return!!mt?.toHTML},se=function(mt){return Ut(mt)},Xt=function(mt){var Vt;return(Vt=se(mt))===null||Vt===void 0?void 0:Vt.model},ee=function(mt,Vt){mt.__gjsv=Vt},xe=function(mt){mt===void 0&&(mt=16);for(var Vt="",Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",T=Rt.length,j=0;j<mt;j++)Vt+=Rt.charAt(Math.floor(Math.random()*T));return Vt},ue=function(mt){if(mt&&mt.substr(0,4)==="<svg"){var Vt="";return L()?Vt=window.btoa(mt):typeof Buffer<"u"&&(Vt=Buffer.from(mt,"utf8").toString("base64")),Vt?"data:image/svg+xml;base64,".concat(Vt):mt}return mt}}),6756:((i,r,t)=>{t.d(r,{h:()=>o});var e=t(3178),n=(function(){var u=function(f,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(h[m]=g[m])},u(f,c)};return function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");u(f,c);function h(){this.constructor=f}f.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}})(),o=(function(u){n(f,u);function f(){var c=u!==null&&u.apply(this,arguments)||this;return c.displayCache=new Map,c}return f.prototype.getChildren=function(){return this.getDisplayedChildren()},f.prototype.getDisplayedChildren=function(){var c=this,h=this.model.components(),g=h.filter(function(m){return c.isChildDisplayed(m)});return g.map(function(m){return new c.constructor(m)})},f.prototype.isChildDisplayed=function(c){if(this.displayCache.has(c))return this.displayCache.get(c);var h=c.getEl(),g=s(h);return this.displayCache.set(c,g),g},f.prototype.getParent=function(){var c=this.model.parent();return c?new this.constructor(c):null},f.prototype.addChildAt=function(c,h,g){var m,y,w,C,x,E,N,L;g===void 0&&(g={action:"add-component"});var H=((y=(m=this.model)===null||m===void 0?void 0:m.isInstanceOf)===null||y===void 0?void 0:y.call(m,"text"))&&((C=(w=c?.model)===null||w===void 0?void 0:w.get)===null||C===void 0?void 0:C.call(w,"textable"));if(H)return(L=(N=(E=(x=this.model)===null||x===void 0?void 0:x.getView)===null||E===void 0?void 0:E.call(x))===null||N===void 0?void 0:N.insertComponent)===null||L===void 0?void 0:L.call(N,c?.model,{action:g.action});var rt=this.model.components().add(c.model,{at:this.getRealIndex(h),action:g.action});return new this.constructor(rt)},f.prototype.removeChildAt=function(c,h){h===void 0&&(h={temporary:!1});var g=this.model.components().at(this.getRealIndex(c));g&&this.model.components().remove(g,h)},f.prototype.indexOfChild=function(c){return this.getDisplayIndex(c)},f.prototype.getDisplayIndex=function(c){var h=this.getDisplayedChildren();return h?h.findIndex(function(g){return g.model===c.model}):-1},f.prototype.getRealIndex=function(c){if(c===-1)return-1;for(var h=0,g=this.model.components(),m=0;m<g.length;m++){var y=g.at(m),w=this.isChildDisplayed(y);if(w&&h++,h===c+1)return m}return-1},f.prototype.canMove=function(c,h){return this.model.em.Components.canMove(this.model,c.model,this.getRealIndex(h)).result},f.prototype.equals=function(c){return!!c?._model&&this._model.getId()===c._model.getId()},f.prototype.restNodeState=function(){this.clearState();var c=this.model;this.setContentEditable(!1),c.em.getEditing()===c&&this.disableEditing()},f.prototype.setContentEditable=function(c){this.element&&this.isTextNode()&&(this.element.contentEditable=c?"true":"false")},f.prototype.disableEditing=function(){var c,h;(h=(c=this.view)===null||c===void 0?void 0:c.disableEditing)===null||h===void 0||h.call(c)},f.prototype.clearState=function(){var c,h;(h=(c=this.model).set)===null||h===void 0||h.call(c,"status","")},f.prototype.setSelectedParentState=function(){var c,h;(h=(c=this.model).set)===null||h===void 0||h.call(c,"status","selected-parent")},f.prototype.isTextNode=function(){var c,h;return(h=(c=this.model).isInstanceOf)===null||h===void 0?void 0:h.call(c,"text")},f.prototype.isTextable=function(){var c,h;return(h=(c=this.model).get)===null||h===void 0?void 0:h.call(c,"textable")},f})(e.$);function s(u){return u?typeof u=="object"&&u.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(u).display!=="none"&&u.offsetWidth>0&&u.offsetHeight>0:!1}}),1447:((i,r,t)=>{t.d(r,{A:()=>s});var e=t(6756),n=(function(){var u=function(f,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(h[m]=g[m])},u(f,c)};return function(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");u(f,c);function h(){this.constructor=f}f.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}})(),o=(function(u){n(f,u);function f(){var c=u!==null&&u.apply(this,arguments)||this;return c._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},c}return Object.defineProperty(f.prototype,"view",{get:function(){var c,h;return(h=(c=this.model).getView)===null||h===void 0?void 0:h.call(c)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"element",{get:function(){var c,h;return(h=(c=this.model).getEl)===null||h===void 0?void 0:h.call(c)},enumerable:!1,configurable:!0}),f})(e.h);const s=o}),3178:((i,r,t)=>{t.d(r,{$:()=>e});var e=(function(){function n(o,s){s===void 0&&(s={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=o,this._dragSource=s}return Object.defineProperty(n.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropArea",{get:function(){var o,s;return this.getParent()?(s=this.nodeDimensions)===null||s===void 0?void 0:s.getDropArea(this._dropAreaConfig):(o=this.nodeDimensions)===null||o===void 0?void 0:o.clone()},enumerable:!1,configurable:!0}),n.prototype.isWithinDropBounds=function(o,s){return!!this.dropArea&&this.dropArea.isWithinBounds(o,s)},n.prototype.equals=function(o){return!!o?._model&&this._model===o._model},n.prototype.adjustDimensions=function(o){var s,u;o.topDifference===0&&o.leftDifference===0||((s=this.nodeDimensions)===null||s===void 0||s.adjustDimensions(o),(u=this.childrenDimensions)===null||u===void 0||u.forEach(function(f){return f.adjustDimensions(o)}))},n})()}),8433:((i,r,t)=>{t.d(r,{A:()=>e});var e;(function(n){n.Vertical="Vertical",n.Horizontal="Horizontal",n.BothDirections="BothDirections"})(e||(e={}))}),585:((i,r,t)=>{var e={"./CanvasClear":9484,"./CanvasClear.ts":9484,"./CanvasMove":9516,"./CanvasMove.ts":9516,"./CommandAbstract":9946,"./CommandAbstract.ts":9946,"./ComponentDelete":7801,"./ComponentDelete.ts":7801,"./ComponentDrag":4864,"./ComponentDrag.ts":4864,"./ComponentEnter":6134,"./ComponentEnter.ts":6134,"./ComponentExit":914,"./ComponentExit.ts":914,"./ComponentNext":5547,"./ComponentNext.ts":5547,"./ComponentPrev":8655,"./ComponentPrev.ts":8655,"./ComponentStyleClear":7640,"./ComponentStyleClear.ts":7640,"./CopyComponent":5837,"./CopyComponent.ts":5837,"./ExportTemplate":6477,"./ExportTemplate.ts":6477,"./Fullscreen":1772,"./Fullscreen.ts":1772,"./MoveComponent":741,"./MoveComponent.ts":741,"./OpenAssets":2924,"./OpenAssets.ts":2924,"./OpenBlocks":3963,"./OpenBlocks.ts":3963,"./OpenLayers":1479,"./OpenLayers.ts":1479,"./OpenStyleManager":3473,"./OpenStyleManager.ts":3473,"./OpenTraitManager":5054,"./OpenTraitManager.ts":5054,"./PasteComponent":6979,"./PasteComponent.ts":6979,"./Preview":4457,"./Preview.ts":4457,"./Resize":5493,"./Resize.ts":5493,"./SelectComponent":9317,"./SelectComponent.ts":9317,"./SelectPosition":1406,"./SelectPosition.ts":1406,"./ShowOffset":9395,"./ShowOffset.ts":9395,"./SwitchVisibility":7285,"./SwitchVisibility.ts":7285};function n(s){var u=o(s);return t(u)}function o(s){if(!t.o(e,s)){var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}return e[s]}n.keys=function(){return Object.keys(e)},n.resolve=o,i.exports=n,n.id=585}),5706:((i,r,t)=>{t.r(r),t.d(r,{VERSION:()=>n,after:()=>Tn,all:()=>go,allKeys:()=>Gt,any:()=>Io,assign:()=>jr,before:()=>Pn,bind:()=>Do,bindAll:()=>oi,chain:()=>Mo,chunk:()=>Nn,clone:()=>Mr,collect:()=>Fr,compact:()=>Fs,compose:()=>po,constant:()=>Rt,contains:()=>wr,countBy:()=>Rs,create:()=>ke,debounce:()=>ki,default:()=>yo,defaults:()=>nn,defer:()=>Vr,delay:()=>Gn,detect:()=>ge,difference:()=>Ia,drop:()=>oo,each:()=>ur,escape:()=>jt,every:()=>go,extend:()=>ze,extendOwn:()=>jr,filter:()=>ln,find:()=>ge,findIndex:()=>Rn,findKey:()=>Lo,findLastIndex:()=>vo,findWhere:()=>qe,first:()=>Ro,flatten:()=>La,foldl:()=>Wr,foldr:()=>zr,forEach:()=>ur,functions:()=>We,get:()=>sr,groupBy:()=>js,has:()=>Rr,head:()=>Ro,identity:()=>Ie,include:()=>wr,includes:()=>wr,indexBy:()=>ka,indexOf:()=>le,initial:()=>Qe,inject:()=>Wr,intersection:()=>Hs,invert:()=>rr,invoke:()=>Ms,isArguments:()=>ue,isArray:()=>Xt,isArrayBuffer:()=>oe,isBoolean:()=>D,isDataView:()=>se,isDate:()=>wt,isElement:()=>Y,isEmpty:()=>B,isEqual:()=>Zt,isError:()=>At,isFinite:()=>mt,isFunction:()=>bt,isMap:()=>lt,isMatch:()=>ot,isNaN:()=>Vt,isNull:()=>W,isNumber:()=>M,isObject:()=>G,isRegExp:()=>gt,isSet:()=>Wt,isString:()=>ct,isSymbol:()=>Qt,isTypedArray:()=>ht,isUndefined:()=>U,isWeakMap:()=>Pt,isWeakSet:()=>fe,iteratee:()=>Ee,keys:()=>me,last:()=>Vo,lastIndexOf:()=>Me,map:()=>Fr,mapObject:()=>an,matcher:()=>re,matches:()=>re,max:()=>Ea,memoize:()=>xn,methods:()=>We,min:()=>Aa,mixin:()=>ai,negate:()=>On,noop:()=>Cn,now:()=>I,object:()=>Us,omit:()=>jo,once:()=>ii,pairs:()=>Be,partial:()=>Kn,partition:()=>Ma,pick:()=>Da,pluck:()=>Mi,property:()=>yr,propertyOf:()=>Mt,random:()=>Sn,range:()=>Ho,reduce:()=>Wr,reduceRight:()=>zr,reject:()=>Fn,rest:()=>oo,restArguments:()=>et,result:()=>co,sample:()=>Di,select:()=>ln,shuffle:()=>Ls,size:()=>Vs,some:()=>Io,sortBy:()=>Is,sortedIndex:()=>qn,tail:()=>oo,take:()=>Ro,tap:()=>ve,template:()=>uo,templateSettings:()=>Pe,throttle:()=>vr,times:()=>pe,toArray:()=>mo,toPath:()=>on,transpose:()=>No,unescape:()=>Ce,union:()=>Ns,uniq:()=>Fo,unique:()=>Fo,uniqueId:()=>ko,unzip:()=>No,values:()=>ye,where:()=>Ds,without:()=>ji,wrap:()=>$n,zip:()=>ja});var e={};t.r(e),t.d(e,{VERSION:()=>n,after:()=>Tn,all:()=>go,allKeys:()=>Gt,any:()=>Io,assign:()=>jr,before:()=>Pn,bind:()=>Do,bindAll:()=>oi,chain:()=>Mo,chunk:()=>Nn,clone:()=>Mr,collect:()=>Fr,compact:()=>Fs,compose:()=>po,constant:()=>Rt,contains:()=>wr,countBy:()=>Rs,create:()=>ke,debounce:()=>ki,default:()=>Bs,defaults:()=>nn,defer:()=>Vr,delay:()=>Gn,detect:()=>ge,difference:()=>Ia,drop:()=>oo,each:()=>ur,escape:()=>jt,every:()=>go,extend:()=>ze,extendOwn:()=>jr,filter:()=>ln,find:()=>ge,findIndex:()=>Rn,findKey:()=>Lo,findLastIndex:()=>vo,findWhere:()=>qe,first:()=>Ro,flatten:()=>La,foldl:()=>Wr,foldr:()=>zr,forEach:()=>ur,functions:()=>We,get:()=>sr,groupBy:()=>js,has:()=>Rr,head:()=>Ro,identity:()=>Ie,include:()=>wr,includes:()=>wr,indexBy:()=>ka,indexOf:()=>le,initial:()=>Qe,inject:()=>Wr,intersection:()=>Hs,invert:()=>rr,invoke:()=>Ms,isArguments:()=>ue,isArray:()=>Xt,isArrayBuffer:()=>oe,isBoolean:()=>D,isDataView:()=>se,isDate:()=>wt,isElement:()=>Y,isEmpty:()=>B,isEqual:()=>Zt,isError:()=>At,isFinite:()=>mt,isFunction:()=>bt,isMap:()=>lt,isMatch:()=>ot,isNaN:()=>Vt,isNull:()=>W,isNumber:()=>M,isObject:()=>G,isRegExp:()=>gt,isSet:()=>Wt,isString:()=>ct,isSymbol:()=>Qt,isTypedArray:()=>ht,isUndefined:()=>U,isWeakMap:()=>Pt,isWeakSet:()=>fe,iteratee:()=>Ee,keys:()=>me,last:()=>Vo,lastIndexOf:()=>Me,map:()=>Fr,mapObject:()=>an,matcher:()=>re,matches:()=>re,max:()=>Ea,memoize:()=>xn,methods:()=>We,min:()=>Aa,mixin:()=>ai,negate:()=>On,noop:()=>Cn,now:()=>I,object:()=>Us,omit:()=>jo,once:()=>ii,pairs:()=>Be,partial:()=>Kn,partition:()=>Ma,pick:()=>Da,pluck:()=>Mi,property:()=>yr,propertyOf:()=>Mt,random:()=>Sn,range:()=>Ho,reduce:()=>Wr,reduceRight:()=>zr,reject:()=>Fn,rest:()=>oo,restArguments:()=>et,result:()=>co,sample:()=>Di,select:()=>ln,shuffle:()=>Ls,size:()=>Vs,some:()=>Io,sortBy:()=>Is,sortedIndex:()=>qn,tail:()=>oo,take:()=>Ro,tap:()=>ve,template:()=>uo,templateSettings:()=>Pe,throttle:()=>vr,times:()=>pe,toArray:()=>mo,toPath:()=>on,transpose:()=>No,unescape:()=>Ce,union:()=>Ns,uniq:()=>Fo,unique:()=>Fo,uniqueId:()=>ko,unzip:()=>No,values:()=>ye,where:()=>Ds,without:()=>ji,wrap:()=>$n,zip:()=>ja});var n="1.13.1",o=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,u=Object.prototype,f=typeof Symbol<"u"?Symbol.prototype:null,c=s.push,h=s.slice,g=u.toString,m=u.hasOwnProperty,y=typeof ArrayBuffer<"u",w=typeof DataView<"u",C=Array.isArray,x=Object.keys,E=Object.create,N=y&&ArrayBuffer.isView,L=isNaN,H=isFinite,rt=!{toString:null}.propertyIsEnumerable("toString"),nt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],vt=Math.pow(2,53)-1;function et(P,V){return V=V==null?P.length-1:+V,function(){for(var J=Math.max(arguments.length-V,0),tt=Array(J),dt=0;dt<J;dt++)tt[dt]=arguments[dt+V];switch(V){case 0:return P.call(this,tt);case 1:return P.call(this,arguments[0],tt);case 2:return P.call(this,arguments[0],arguments[1],tt)}var ut=Array(V+1);for(dt=0;dt<V;dt++)ut[dt]=arguments[dt];return ut[V]=tt,P.apply(this,ut)}}function G(P){var V=typeof P;return V==="function"||V==="object"&&!!P}function W(P){return P===null}function U(P){return P===void 0}function D(P){return P===!0||P===!1||g.call(P)==="[object Boolean]"}function Y(P){return!!(P&&P.nodeType===1)}function K(P){var V="[object "+P+"]";return function(J){return g.call(J)===V}}const ct=K("String"),M=K("Number"),wt=K("Date"),gt=K("RegExp"),At=K("Error"),Qt=K("Symbol"),oe=K("ArrayBuffer");var yt=K("Function"),Ct=o.document&&o.document.childNodes;typeof Int8Array!="object"&&typeof Ct!="function"&&(yt=function(P){return typeof P=="function"||!1});const bt=yt,Lt=K("Object");var zt=w&&Lt(new DataView(new ArrayBuffer(8))),Dt=typeof Map<"u"&&Lt(new Map),Ut=K("DataView");function Yt(P){return P!=null&&bt(P.getInt8)&&oe(P.buffer)}const se=zt?Yt:Ut,Xt=C||K("Array");function ee(P,V){return P!=null&&m.call(P,V)}var xe=K("Arguments");(function(){xe(arguments)||(xe=function(P){return ee(P,"callee")})})();const ue=xe;function mt(P){return!Qt(P)&&H(P)&&!isNaN(parseFloat(P))}function Vt(P){return M(P)&&L(P)}function Rt(P){return function(){return P}}function T(P){return function(V){var J=P(V);return typeof J=="number"&&J>=0&&J<=vt}}function j(P){return function(V){return V?.[P]}}const z=j("byteLength"),it=T(z);var _t=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function q(P){return N?N(P)&&!se(P):it(P)&&_t.test(g.call(P))}const ht=y?q:Rt(!1),st=j("length");function ie(P){for(var V={},J=P.length,tt=0;tt<J;++tt)V[P[tt]]=!0;return{contains:function(dt){return V[dt]},push:function(dt){return V[dt]=!0,P.push(dt)}}}function _e(P,V){V=ie(V);var J=nt.length,tt=P.constructor,dt=bt(tt)&&tt.prototype||u,ut="constructor";for(ee(P,ut)&&!V.contains(ut)&&V.push(ut);J--;)ut=nt[J],ut in P&&P[ut]!==dt[ut]&&!V.contains(ut)&&V.push(ut)}function me(P){if(!G(P))return[];if(x)return x(P);var V=[];for(var J in P)ee(P,J)&&V.push(J);return rt&&_e(P,V),V}function B(P){if(P==null)return!0;var V=st(P);return typeof V=="number"&&(Xt(P)||ct(P)||ue(P))?V===0:st(me(P))===0}function ot(P,V){var J=me(V),tt=J.length;if(P==null)return!tt;for(var dt=Object(P),ut=0;ut<tt;ut++){var Tt=J[ut];if(V[Tt]!==dt[Tt]||!(Tt in dt))return!1}return!0}function R(P){if(P instanceof R)return P;if(!(this instanceof R))return new R(P);this._wrapped=P}R.VERSION=n,R.prototype.value=function(){return this._wrapped},R.prototype.valueOf=R.prototype.toJSON=R.prototype.value,R.prototype.toString=function(){return String(this._wrapped)};function Et(P){return new Uint8Array(P.buffer||P,P.byteOffset||0,z(P))}var pt="[object DataView]";function It(P,V,J,tt){if(P===V)return P!==0||1/P===1/V;if(P==null||V==null)return!1;if(P!==P)return V!==V;var dt=typeof P;return dt!=="function"&&dt!=="object"&&typeof V!="object"?!1:Jt(P,V,J,tt)}function Jt(P,V,J,tt){P instanceof R&&(P=P._wrapped),V instanceof R&&(V=V._wrapped);var dt=g.call(P);if(dt!==g.call(V))return!1;if(zt&&dt=="[object Object]"&&se(P)){if(!se(V))return!1;dt=pt}switch(dt){case"[object RegExp]":case"[object String]":return""+P==""+V;case"[object Number]":return+P!=+P?+V!=+V:+P==0?1/+P===1/V:+P==+V;case"[object Date]":case"[object Boolean]":return+P==+V;case"[object Symbol]":return f.valueOf.call(P)===f.valueOf.call(V);case"[object ArrayBuffer]":case pt:return Jt(Et(P),Et(V),J,tt)}var ut=dt==="[object Array]";if(!ut&&ht(P)){var Tt=z(P);if(Tt!==z(V))return!1;if(P.buffer===V.buffer&&P.byteOffset===V.byteOffset)return!0;ut=!0}if(!ut){if(typeof P!="object"||typeof V!="object")return!1;var Bt=P.constructor,be=V.constructor;if(Bt!==be&&!(bt(Bt)&&Bt instanceof Bt&&bt(be)&&be instanceof be)&&"constructor"in P&&"constructor"in V)return!1}J=J||[],tt=tt||[];for(var we=J.length;we--;)if(J[we]===P)return tt[we]===V;if(J.push(P),tt.push(V),ut){if(we=P.length,we!==V.length)return!1;for(;we--;)if(!It(P[we],V[we],J,tt))return!1}else{var gr=me(P),Dr;if(we=gr.length,me(V).length!==we)return!1;for(;we--;)if(Dr=gr[we],!(ee(V,Dr)&&It(P[Dr],V[Dr],J,tt)))return!1}return J.pop(),tt.pop(),!0}function Zt(P,V){return It(P,V)}function Gt(P){if(!G(P))return[];var V=[];for(var J in P)V.push(J);return rt&&_e(P,V),V}function ae(P){var V=st(P);return function(J){if(J==null)return!1;var tt=Gt(J);if(st(tt))return!1;for(var dt=0;dt<V;dt++)if(!bt(J[P[dt]]))return!1;return P!==F||!bt(J[Se])}}var Se="forEach",Ae="has",Te=["clear","delete"],Je=["get",Ae,"set"],pr=Te.concat(Se,Je),F=Te.concat(Je),Q=["add"].concat(Te,Se,Ae);const lt=Dt?ae(pr):K("Map"),Pt=Dt?ae(F):K("WeakMap"),Wt=Dt?ae(Q):K("Set"),fe=K("WeakSet");function ye(P){for(var V=me(P),J=V.length,tt=Array(J),dt=0;dt<J;dt++)tt[dt]=P[V[dt]];return tt}function Be(P){for(var V=me(P),J=V.length,tt=Array(J),dt=0;dt<J;dt++)tt[dt]=[V[dt],P[V[dt]]];return tt}function rr(P){for(var V={},J=me(P),tt=0,dt=J.length;tt<dt;tt++)V[P[J[tt]]]=J[tt];return V}function We(P){var V=[];for(var J in P)bt(P[J])&&V.push(J);return V.sort()}function bn(P,V){return function(J){var tt=arguments.length;if(V&&(J=Object(J)),tt<2||J==null)return J;for(var dt=1;dt<tt;dt++)for(var ut=arguments[dt],Tt=P(ut),Bt=Tt.length,be=0;be<Bt;be++){var we=Tt[be];(!V||J[we]===void 0)&&(J[we]=ut[we])}return J}}const ze=bn(Gt),jr=bn(me),nn=bn(Gt,!0);function Le(){return function(){}}function nr(P){if(!G(P))return{};if(E)return E(P);var V=Le();V.prototype=P;var J=new V;return V.prototype=null,J}function ke(P,V){var J=nr(P);return V&&jr(J,V),J}function Mr(P){return G(P)?Xt(P)?P.slice():ze({},P):P}function ve(P,V){return V(P),P}function on(P){return Xt(P)?P:[P]}R.toPath=on;function Br(P){return R.toPath(P)}function ar(P,V){for(var J=V.length,tt=0;tt<J;tt++){if(P==null)return;P=P[V[tt]]}return J?P:void 0}function sr(P,V,J){var tt=ar(P,Br(V));return U(tt)?J:tt}function Rr(P,V){V=Br(V);for(var J=V.length,tt=0;tt<J;tt++){var dt=V[tt];if(!ee(P,dt))return!1;P=P[dt]}return!!J}function Ie(P){return P}function re(P){return P=jr({},P),function(V){return ot(V,P)}}function yr(P){return P=Br(P),function(V){return ar(V,P)}}function $e(P,V,J){if(V===void 0)return P;switch(J??3){case 1:return function(tt){return P.call(V,tt)};case 3:return function(tt,dt,ut){return P.call(V,tt,dt,ut)};case 4:return function(tt,dt,ut,Tt){return P.call(V,tt,dt,ut,Tt)}}return function(){return P.apply(V,arguments)}}function _r(P,V,J){return P==null?Ie:bt(P)?$e(P,V,J):G(P)&&!Xt(P)?re(P):yr(P)}function Ee(P,V){return _r(P,V,1/0)}R.iteratee=Ee;function Ne(P,V,J){return R.iteratee!==Ee?R.iteratee(P,V):_r(P,V,J)}function an(P,V,J){V=Ne(V,J);for(var tt=me(P),dt=tt.length,ut={},Tt=0;Tt<dt;Tt++){var Bt=tt[Tt];ut[Bt]=V(P[Bt],Bt,P)}return ut}function Cn(){}function Mt(P){return P==null?Cn:function(V){return sr(P,V)}}function pe(P,V,J){var tt=Array(Math.max(0,P));V=$e(V,J,1);for(var dt=0;dt<P;dt++)tt[dt]=V(dt);return tt}function Sn(P,V){return V==null&&(V=P,P=0),P+Math.floor(Math.random()*(V-P+1))}const I=Date.now||function(){return new Date().getTime()};function X(P){var V=function(ut){return P[ut]},J="(?:"+me(P).join("|")+")",tt=RegExp(J),dt=RegExp(J,"g");return function(ut){return ut=ut==null?"":""+ut,tt.test(ut)?ut.replace(dt,V):ut}}const xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},jt=X(xt),Ft=rr(xt),Ce=X(Ft),Pe=R.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Ke=/(.)^/,Re={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},sn=/\\|'|\r|\n|\u2028|\u2029/g;function Ao(P){return"\\"+Re[P]}var lo=/^\s*(\w|\$)+\s*$/;function uo(P,V,J){!V&&J&&(V=J),V=nn({},V,R.templateSettings);var tt=RegExp([(V.escape||Ke).source,(V.interpolate||Ke).source,(V.evaluate||Ke).source].join("|")+"|$","g"),dt=0,ut="__p+='";P.replace(tt,function(we,gr,Dr,Ws,Ra){return ut+=P.slice(dt,Ra).replace(sn,Ao),dt=Ra+we.length,gr?ut+=`'+
((__t=(`+gr+`))==null?'':_.escape(__t))+
'`:Dr?ut+=`'+
((__t=(`+Dr+`))==null?'':__t)+
'`:Ws&&(ut+=`';
`+Ws+`
__p+='`),we}),ut+=`';
`;var Tt=V.variable;if(Tt){if(!lo.test(Tt))throw new Error("variable is not a bare identifier: "+Tt)}else ut=`with(obj||{}){
`+ut+`}
`,Tt="obj";ut=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+ut+`return __p;
`;var Bt;try{Bt=new Function(Tt,"_",ut)}catch(we){throw we.source=ut,we}var be=function(we){return Bt.call(this,we,R)};return be.source="function("+Tt+`){
`+ut+"}",be}function co(P,V,J){V=Br(V);var tt=V.length;if(!tt)return bt(J)?J.call(P):J;for(var dt=0;dt<tt;dt++){var ut=P?.[V[dt]];ut===void 0&&(ut=J,dt=tt),P=bt(ut)?ut.call(P):ut}return P}var ni=0;function ko(P){var V=++ni+"";return P?P+V:V}function Mo(P){var V=R(P);return V._chain=!0,V}function fo(P,V,J,tt,dt){if(!(tt instanceof V))return P.apply(J,dt);var ut=nr(P.prototype),Tt=P.apply(ut,dt);return G(Tt)?Tt:ut}var no=et(function(P,V){var J=no.placeholder,tt=function(){for(var dt=0,ut=V.length,Tt=Array(ut),Bt=0;Bt<ut;Bt++)Tt[Bt]=V[Bt]===J?arguments[dt++]:V[Bt];for(;dt<arguments.length;)Tt.push(arguments[dt++]);return fo(P,tt,this,this,Tt)};return tt});no.placeholder=R;const Kn=no,Do=et(function(P,V,J){if(!bt(P))throw new TypeError("Bind must be called on a function");var tt=et(function(dt){return fo(P,tt,V,this,J.concat(dt))});return tt}),lr=T(st);function hr(P,V,J,tt){if(tt=tt||[],!V&&V!==0)V=1/0;else if(V<=0)return tt.concat(P);for(var dt=tt.length,ut=0,Tt=st(P);ut<Tt;ut++){var Bt=P[ut];if(lr(Bt)&&(Xt(Bt)||ue(Bt)))if(V>1)hr(Bt,V-1,J,tt),dt=tt.length;else for(var be=0,we=Bt.length;be<we;)tt[dt++]=Bt[be++];else J||(tt[dt++]=Bt)}return tt}const oi=et(function(P,V){V=hr(V,!1,!1);var J=V.length;if(J<1)throw new Error("bindAll must be passed function names");for(;J--;){var tt=V[J];P[tt]=Do(P[tt],P)}return P});function xn(P,V){var J=function(tt){var dt=J.cache,ut=""+(V?V.apply(this,arguments):tt);return ee(dt,ut)||(dt[ut]=P.apply(this,arguments)),dt[ut]};return J.cache={},J}const Gn=et(function(P,V,J){return setTimeout(function(){return P.apply(null,J)},V)}),Vr=Kn(Gn,R,1);function vr(P,V,J){var tt,dt,ut,Tt,Bt=0;J||(J={});var be=function(){Bt=J.leading===!1?0:I(),tt=null,Tt=P.apply(dt,ut),tt||(dt=ut=null)},we=function(){var gr=I();!Bt&&J.leading===!1&&(Bt=gr);var Dr=V-(gr-Bt);return dt=this,ut=arguments,Dr<=0||Dr>V?(tt&&(clearTimeout(tt),tt=null),Bt=gr,Tt=P.apply(dt,ut),tt||(dt=ut=null)):!tt&&J.trailing!==!1&&(tt=setTimeout(be,Dr)),Tt};return we.cancel=function(){clearTimeout(tt),Bt=0,tt=dt=ut=null},we}function ki(P,V,J){var tt,dt,ut,Tt,Bt,be=function(){var gr=I()-dt;V>gr?tt=setTimeout(be,V-gr):(tt=null,J||(Tt=P.apply(Bt,ut)),tt||(ut=Bt=null))},we=et(function(gr){return Bt=this,ut=gr,dt=I(),tt||(tt=setTimeout(be,V),J&&(Tt=P.apply(Bt,ut))),Tt});return we.cancel=function(){clearTimeout(tt),tt=ut=Bt=null},we}function $n(P,V){return Kn(V,P)}function On(P){return function(){return!P.apply(this,arguments)}}function po(){var P=arguments,V=P.length-1;return function(){for(var J=V,tt=P[V].apply(this,arguments);J--;)tt=P[J].call(this,tt);return tt}}function Tn(P,V){return function(){if(--P<1)return V.apply(this,arguments)}}function Pn(P,V){var J;return function(){return--P>0&&(J=V.apply(this,arguments)),P<=1&&(V=null),J}}const ii=Kn(Pn,2);function Lo(P,V,J){V=Ne(V,J);for(var tt=me(P),dt,ut=0,Tt=tt.length;ut<Tt;ut++)if(dt=tt[ut],V(P[dt],dt,P))return dt}function ho(P){return function(V,J,tt){J=Ne(J,tt);for(var dt=st(V),ut=P>0?0:dt-1;ut>=0&&ut<dt;ut+=P)if(J(V[ut],ut,V))return ut;return-1}}const Rn=ho(1),vo=ho(-1);function qn(P,V,J,tt){J=Ne(J,tt,1);for(var dt=J(V),ut=0,Tt=st(P);ut<Tt;){var Bt=Math.floor((ut+Tt)/2);J(P[Bt])<dt?ut=Bt+1:Tt=Bt}return ut}function ce(P,V,J){return function(tt,dt,ut){var Tt=0,Bt=st(tt);if(typeof ut=="number")P>0?Tt=ut>=0?ut:Math.max(ut+Bt,Tt):Bt=ut>=0?Math.min(ut+1,Bt):ut+Bt+1;else if(J&&ut&&Bt)return ut=J(tt,dt),tt[ut]===dt?ut:-1;if(dt!==dt)return ut=V(h.call(tt,Tt,Bt),Vt),ut>=0?ut+Tt:-1;for(ut=P>0?Tt:Bt-1;ut>=0&&ut<Bt;ut+=P)if(tt[ut]===dt)return ut;return-1}}const le=ce(1,Rn,qn),Me=ce(-1,vo);function ge(P,V,J){var tt=lr(P)?Rn:Lo,dt=tt(P,V,J);if(dt!==void 0&&dt!==-1)return P[dt]}function qe(P,V){return ge(P,re(V))}function ur(P,V,J){V=$e(V,J);var tt,dt;if(lr(P))for(tt=0,dt=P.length;tt<dt;tt++)V(P[tt],tt,P);else{var ut=me(P);for(tt=0,dt=ut.length;tt<dt;tt++)V(P[ut[tt]],ut[tt],P)}return P}function Fr(P,V,J){V=Ne(V,J);for(var tt=!lr(P)&&me(P),dt=(tt||P).length,ut=Array(dt),Tt=0;Tt<dt;Tt++){var Bt=tt?tt[Tt]:Tt;ut[Tt]=V(P[Bt],Bt,P)}return ut}function Vn(P){var V=function(J,tt,dt,ut){var Tt=!lr(J)&&me(J),Bt=(Tt||J).length,be=P>0?0:Bt-1;for(ut||(dt=J[Tt?Tt[be]:be],be+=P);be>=0&&be<Bt;be+=P){var we=Tt?Tt[be]:be;dt=tt(dt,J[we],we,J)}return dt};return function(J,tt,dt,ut){var Tt=arguments.length>=3;return V(J,$e(tt,ut,4),dt,Tt)}}const Wr=Vn(1),zr=Vn(-1);function ln(P,V,J){var tt=[];return V=Ne(V,J),ur(P,function(dt,ut,Tt){V(dt,ut,Tt)&&tt.push(dt)}),tt}function Fn(P,V,J){return ln(P,On(Ne(V)),J)}function go(P,V,J){V=Ne(V,J);for(var tt=!lr(P)&&me(P),dt=(tt||P).length,ut=0;ut<dt;ut++){var Tt=tt?tt[ut]:ut;if(!V(P[Tt],Tt,P))return!1}return!0}function Io(P,V,J){V=Ne(V,J);for(var tt=!lr(P)&&me(P),dt=(tt||P).length,ut=0;ut<dt;ut++){var Tt=tt?tt[ut]:ut;if(V(P[Tt],Tt,P))return!0}return!1}function wr(P,V,J,tt){return lr(P)||(P=ye(P)),(typeof J!="number"||tt)&&(J=0),le(P,V,J)>=0}const Ms=et(function(P,V,J){var tt,dt;return bt(V)?dt=V:(V=Br(V),tt=V.slice(0,-1),V=V[V.length-1]),Fr(P,function(ut){var Tt=dt;if(!Tt){if(tt&&tt.length&&(ut=ar(ut,tt)),ut==null)return;Tt=ut[V]}return Tt==null?Tt:Tt.apply(ut,J)})});function Mi(P,V){return Fr(P,yr(V))}function Ds(P,V){return ln(P,re(V))}function Ea(P,V,J){var tt=-1/0,dt=-1/0,ut,Tt;if(V==null||typeof V=="number"&&typeof P[0]!="object"&&P!=null){P=lr(P)?P:ye(P);for(var Bt=0,be=P.length;Bt<be;Bt++)ut=P[Bt],ut!=null&&ut>tt&&(tt=ut)}else V=Ne(V,J),ur(P,function(we,gr,Dr){Tt=V(we,gr,Dr),(Tt>dt||Tt===-1/0&&tt===-1/0)&&(tt=we,dt=Tt)});return tt}function Aa(P,V,J){var tt=1/0,dt=1/0,ut,Tt;if(V==null||typeof V=="number"&&typeof P[0]!="object"&&P!=null){P=lr(P)?P:ye(P);for(var Bt=0,be=P.length;Bt<be;Bt++)ut=P[Bt],ut!=null&&ut<tt&&(tt=ut)}else V=Ne(V,J),ur(P,function(we,gr,Dr){Tt=V(we,gr,Dr),(Tt<dt||Tt===1/0&&tt===1/0)&&(tt=we,dt=Tt)});return tt}function Di(P,V,J){if(V==null||J)return lr(P)||(P=ye(P)),P[Sn(P.length-1)];var tt=lr(P)?Mr(P):ye(P),dt=st(tt);V=Math.max(Math.min(V,dt),0);for(var ut=dt-1,Tt=0;Tt<V;Tt++){var Bt=Sn(Tt,ut),be=tt[Tt];tt[Tt]=tt[Bt],tt[Bt]=be}return tt.slice(0,V)}function Ls(P){return Di(P,1/0)}function Is(P,V,J){var tt=0;return V=Ne(V,J),Mi(Fr(P,function(dt,ut,Tt){return{value:dt,index:tt++,criteria:V(dt,ut,Tt)}}).sort(function(dt,ut){var Tt=dt.criteria,Bt=ut.criteria;if(Tt!==Bt){if(Tt>Bt||Tt===void 0)return 1;if(Tt<Bt||Bt===void 0)return-1}return dt.index-ut.index}),"value")}function Li(P,V){return function(J,tt,dt){var ut=V?[[],[]]:{};return tt=Ne(tt,dt),ur(J,function(Tt,Bt){var be=tt(Tt,Bt,J);P(ut,Tt,be)}),ut}}const js=Li(function(P,V,J){ee(P,J)?P[J].push(V):P[J]=[V]}),ka=Li(function(P,V,J){P[J]=V}),Rs=Li(function(P,V,J){ee(P,J)?P[J]++:P[J]=1}),Ma=Li(function(P,V,J){P[J?0:1].push(V)},!0);var Ii=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function mo(P){return P?Xt(P)?h.call(P):ct(P)?P.match(Ii):lr(P)?Fr(P,Ie):ye(P):[]}function Vs(P){return P==null?0:lr(P)?P.length:me(P).length}function Bu(P,V,J){return V in J}const Da=et(function(P,V){var J={},tt=V[0];if(P==null)return J;bt(tt)?(V.length>1&&(tt=$e(tt,V[1])),V=Gt(P)):(tt=Bu,V=hr(V,!1,!1),P=Object(P));for(var dt=0,ut=V.length;dt<ut;dt++){var Tt=V[dt],Bt=P[Tt];tt(Bt,Tt,P)&&(J[Tt]=Bt)}return J}),jo=et(function(P,V){var J=V[0],tt;return bt(J)?(J=On(J),V.length>1&&(tt=V[1])):(V=Fr(hr(V,!1,!1),String),J=function(dt,ut){return!wr(V,ut)}),Da(P,J,tt)});function Qe(P,V,J){return h.call(P,0,Math.max(0,P.length-(V==null||J?1:V)))}function Ro(P,V,J){return P==null||P.length<1?V==null||J?void 0:[]:V==null||J?P[0]:Qe(P,P.length-V)}function oo(P,V,J){return h.call(P,V==null||J?1:V)}function Vo(P,V,J){return P==null||P.length<1?V==null||J?void 0:[]:V==null||J?P[P.length-1]:oo(P,Math.max(0,P.length-V))}function Fs(P){return ln(P,Boolean)}function La(P,V){return hr(P,V,!1)}const Ia=et(function(P,V){return V=hr(V,!0,!0),ln(P,function(J){return!wr(V,J)})}),ji=et(function(P,V){return Ia(P,V)});function Fo(P,V,J,tt){D(V)||(tt=J,J=V,V=!1),J!=null&&(J=Ne(J,tt));for(var dt=[],ut=[],Tt=0,Bt=st(P);Tt<Bt;Tt++){var be=P[Tt],we=J?J(be,Tt,P):be;V&&!J?((!Tt||ut!==we)&&dt.push(be),ut=we):J?wr(ut,we)||(ut.push(we),dt.push(be)):wr(dt,be)||dt.push(be)}return dt}const Ns=et(function(P){return Fo(hr(P,!0,!0))});function Hs(P){for(var V=[],J=arguments.length,tt=0,dt=st(P);tt<dt;tt++){var ut=P[tt];if(!wr(V,ut)){var Tt;for(Tt=1;Tt<J&&wr(arguments[Tt],ut);Tt++);Tt===J&&V.push(ut)}}return V}function No(P){for(var V=P&&Ea(P,st).length||0,J=Array(V),tt=0;tt<V;tt++)J[tt]=Mi(P,tt);return J}const ja=et(No);function Us(P,V){for(var J={},tt=0,dt=st(P);tt<dt;tt++)V?J[P[tt]]=V[tt]:J[P[tt][0]]=P[tt][1];return J}function Ho(P,V,J){V==null&&(V=P||0,P=0),J||(J=V<P?-1:1);for(var tt=Math.max(Math.ceil((V-P)/J),0),dt=Array(tt),ut=0;ut<tt;ut++,P+=J)dt[ut]=P;return dt}function Nn(P,V){if(V==null||V<1)return[];for(var J=[],tt=0,dt=P.length;tt<dt;)J.push(h.call(P,tt,tt+=V));return J}function Uo(P,V){return P._chain?R(V).chain():V}function ai(P){return ur(We(P),function(V){var J=R[V]=P[V];R.prototype[V]=function(){var tt=[this._wrapped];return c.apply(tt,arguments),Uo(this,J.apply(R,tt))}}),R}ur(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var V=s[P];R.prototype[P]=function(){var J=this._wrapped;return J!=null&&(V.apply(J,arguments),(P==="shift"||P==="splice")&&J.length===0&&delete J[0]),Uo(this,J)}}),ur(["concat","join","slice"],function(P){var V=s[P];R.prototype[P]=function(){var J=this._wrapped;return J!=null&&(J=V.apply(J,arguments)),Uo(this,J)}});const Bs=R;var un=ai(e);un._=un;const yo=un})},Ip={};function De(i){var r=Ip[i];if(r!==void 0)return r.exports;var t=Ip[i]={exports:{}};return py[i].call(t.exports,t,t.exports,De),t.exports}De.n=i=>{var r=i&&i.__esModule?()=>i.default:()=>i;return De.d(r,{a:r}),r};De.d=(i,r)=>{for(var t in r)De.o(r,t)&&!De.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:r[t]})};De.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();De.o=(i,r)=>Object.prototype.hasOwnProperty.call(i,r);De.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var Vu={};De.d(Vu,{Ay:()=>VE,I0:()=>Hg,nu:()=>Ng});var k=De(5706),Ot=De(1166);function gn(i){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var e=i.raw;return e.reduce(function(n,o,s){var u=r[s-1],f=e[s-1];return Array.isArray(u)?u=u.join(""):f&&f.slice(-1)==="$"?n=n.slice(0,-1):u=(0,Ot.escape)(u),n+u+o})}var hy=function(){return{stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0}};const vy=hy;var Yf=De(4193),gy=De.n(Yf),Tr=De(7774);const my=(function(i){var r=i.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var t=r.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var o=this.get(0);return o&&o.focus(),this},t.bind=function(o,s){return this.on(o,s)},t.unbind=function(o,s){if((0,k.isObject)(o)){for(var u in o)o.hasOwnProperty(u)&&this.off(u,o[u]);return this}else return this.off(o,s)},t.click=function(o){return o?this.on("click",o):this.trigger("click")},t.change=function(o){return o?this.on("change",o):this.trigger("change")},t.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},t.delegate=function(o,s,u,f){return f||(f=u),this.on(s,o,function(c){c.data=u,f(c)})},t.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var s=o instanceof Window?o:null;return s?s.pageXOffset:o.scrollLeft||0},t.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var s=o instanceof Window?o:null;return s?s.pageYOffset:o.scrollTop||0};var e=r.prototype.offset;t.offset=function(o){var s,u;return o&&(s=o.top,u=o.left),typeof s<"u"&&this.css("top","".concat(s,"px")),typeof u<"u"&&this.css("left","".concat(u,"px")),e.call(this)},r.map=function(o,s){for(var u=[],f=0;f<o.length;f++)u.push(s(o[f],f));return u};var n=Array.prototype.indexOf;r.inArray=function(o,s,u){return s==null?-1:n.call(s,o,u)},r.Event=function(o,s){if(!(this instanceof r.Event))return new r.Event(o,s);this.type=o,this.isDefaultPrevented=function(){return!1}}}});var Ht=De(9156),lv=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),yy=(function(i){lv(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ht.Kx),_y=(function(i){lv(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getByComponent=function(t){var e=this;return this.filter(function(n){return e.getComponent(n)===t})[0]},r.prototype.addComponent=function(t,e){var n=this,o=((0,k.isArray)(t)?t:[t]).filter(function(s){return!n.hasComponent(s)}).map(function(s){return new yy({component:s})})[0];return this.push(o,e)},r.prototype.getComponent=function(t){return t.get("component")},r.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},r.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},r.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},r.prototype.removeComponent=function(t,e){var n=this,o=((0,k.isArray)(t)?t:[t]).map(function(s){return n.getByComponent(s)});return this.remove(o,e)},r})(Ht.pM);const wy=_y;var by=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),sf=function(){return sf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},sf.apply(this,arguments)},Cy=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},uv=(function(){function i(r,t,e){this.debounced=[],this.collections=[],this.cls=[],this.events={},this._em=r,this._name=t;var n=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,k.isUndefined)(r.config[n])?r.config[this.name]:r.config[n],s=o===!0?{}:o||{};s.pStylePrefix=r.config.pStylePrefix||"",!(0,k.isUndefined)(o)&&!o&&(s._disable=1),s.em=r,this._config=(0,Ot.deepMerge)(e||{},s)}return Object.defineProperty(i.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),i.prototype.render=function(r){},i.prototype.postLoad=function(r){},i.prototype.onInit=function(){},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i.prototype.getConfig=function(r){return r?this.config[r]:this.config},i.prototype.__logWarn=function(r,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),t)},i.prototype.destroy=function(){this.__destroy()},i.prototype.__destroy=function(){var r,t,e;(r=this.view)===null||r===void 0||r.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(e=this.state)===null||e===void 0||e.clear(),this.debounced.forEach(function(n){return n.cancel()}),this.collections.forEach(function(n){n.stopListening(),n.reset()})},i.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var t=(0,k.isElement)(r)?r:document.querySelector(r);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},i})();const wn=uv;var Eo=(function(i){by(r,i);function r(t,e,n,o,s,u){u===void 0&&(u={});var f=i.call(this,t,e,s)||this;return f.cls=[],f._itemCache=new Map,f.private=!1,f.all=n,o&&(f.events=o),!u.skipListen&&f.__initListen(),f}return r.prototype.postLoad=function(t){},r.prototype.render=function(t){},r.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},r.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.all,o=e.onResult,s=e.reset,u=this.storageKey,f={action:"load"},c=n||this.all,h=t[u];if(typeof h=="string")try{h=JSON.parse(h)}catch{this.__logWarn("Data parsing failed",{input:h})}return s&&h&&c.reset(void 0,f),o?h&&o(h,f):h&&(0,Ot.isDef)(h.length)&&c.reset(h,f),h},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},r.prototype.getAll=function(){return Cy([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},r.prototype._makeCacheKey=function(t){return""},r.prototype._cacheItem=function(t){var e=this._makeCacheKey(t);e&&this._itemCache.set(e,t)},r.prototype._uncacheItem=function(t){var e=this._makeCacheKey(t);e&&this._itemCache.delete(e)},r.prototype._clearItemCache=function(){this._itemCache.clear()},r.prototype._onItemsResetCache=function(t){var e=this;this._clearItemCache(),t.each(function(n){return e._cacheItem(n)})},r.prototype._onItemKeyChange=function(t){for(var e,n=0,o=this._itemCache.entries();n<o.length;n++){var s=o[n],u=s[0],f=s[1];if(f===t){e=u;break}}e&&this._itemCache.delete(e),this._cacheItem(t)},r.prototype._setupCacheListeners=function(){this.em.listenTo(this.all,"add",this._cacheItem.bind(this)),this.em.listenTo(this.all,"remove",this._uncacheItem.bind(this)),this.em.listenTo(this.all,"reset",this._onItemsResetCache.bind(this))},r.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,n=e.all,o=e.em,s=e.events;n&&o&&n.on("add",function(u,f,c){return o.trigger(s.add,u,c)}).on("remove",function(u,f,c){return o.trigger(s.remove,u,c)}).on("change",function(u,f){return o.trigger(s.update,u,u.changedAttributes(),f)}).on("all",this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach(function(u){var f=u.entity,c=u.event;f.on("all",function(h,g,m,y){var w=y||m,C=sf({event:h},w);[o,n].map(function(x){return x.trigger(c,g,C)})})})},r.prototype.__remove=function(t,e){var n=this;e===void 0&&(e={});var o=this.em,s=(0,k.isString)(t)?this.get(t):t,u=function(){return s&&n.all.remove(s,e),s};return!e.silent&&o?.trigger(this.events.removeBefore,s,u,e),!e.abort&&u()},r.prototype.__catchAllEvent=function(t,e,n,o){var s=this,u=s.em,f=s.events,c=o||n;u&&f.all&&u.trigger(f.all,{event:t,model:e,options:c}),this.__onAllEvent()},r.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var n=(0,k.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render(t))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),n=e.length+t,o=this.getAllMap(),s;do s=(0,Ot.createId)(n);while(o[s]);return s},r.prototype.__listenAdd=function(t,e){var n=this;t.on("add",function(o,s,u){return n.em.trigger(e,o,u)})},r.prototype.__listenRemove=function(t,e){var n=this;t.on("remove",function(o,s,u){return n.em.trigger(e,o,u)})},r.prototype.__listenUpdate=function(t,e){var n=this;t.on("change",function(o,s){return n.em.trigger(e,o,o.changedAttributes(),s)})},r.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},r})(uv),Sy=function(){return{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0}};const xy=Sy;var ri=De(7058),lf;(function(i){i.add="device:add",i.addBefore="device:add:before",i.remove="device:remove",i.removeBefore="device:remove:before",i.select="device:select",i.selectBefore="device:select:before",i.update="device:update",i.all="device"})(lf||(lf={}));const cv=lf;var uf;(function(i){i.add="page:add",i.addBefore="page:add:before",i.remove="page:remove",i.removeBefore="page:remove:before",i.select="page:select",i.selectBefore="page:select:before",i.update="page:update",i.all="page"})(uf||(uf={}));const cf=uf;var Oy=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ty=(function(i){Oy(r,i);function r(t,e,n){return i.call(this,e,{module:t,modelConstructor:n})||this}return r.prototype.add=function(t,e){var n=this,o,s=(0,k.isArray)(t)?t:(0,k.isUndefined)(t)?void 0:[t];return s=(o=s?.map(function(u){return u instanceof n.newModel?u:new n.newModel(n.module,u)}))!==null&&o!==void 0?o:[void 0],i.prototype.add.call(this,(0,k.isArray)(t)?s:s[0],e)},r.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},r})(Ht.pM);const Fu=Ty;var El;(function(i){i.dragEnter="canvas:dragenter",i.dragOver="canvas:dragover",i.dragEnd="canvas:dragend",i.dragData="canvas:dragdata",i.drop="canvas:drop",i.spot="canvas:spot",i.spotAdd="canvas:spot:add",i.spotUpdate="canvas:spot:update",i.spotRemove="canvas:spot:remove",i.coords="canvas:coords",i.zoom="canvas:zoom",i.pointer="canvas:pointer",i.refresh="canvas:refresh",i.frameLoad="canvas:frame:load",i.frameLoadHead="canvas:frame:load:head",i.frameLoadBody="canvas:frame:load:body",i.frameUnload="canvas:frame:unload"})(El||(El={}));const ps=El;var Py=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ff=function(){return ff=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ff.apply(this,arguments)},jp=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Rp="__aw",Vp="__ah",Fp=function(i,r){var t,e=i.get(r),n=(t=i.view)===null||t===void 0?void 0:t.el[r==="width"?"offsetWidth":"offsetHeight"];return(0,k.isNumber)(e)?e:(0,k.isString)(e)&&e.endsWith("px")?parseFloat(e):n||0},Ey=(function(i){Py(r,i);function r(t,e){var n=i.call(this,t,e)||this,o=n.em,s=n.attributes,u=s.styles,f=s.component,c=o.Components,h=c.getConfig(),g=o.Css.getAll(),m={},y={em:o,config:h,frame:n,idMap:m};if(!(0,Ot.isComponent)(f)){var w=(0,Ot.isObject)(f)?f:{components:f};!w.type&&(w.type="wrapper");var C=c.getType("wrapper").model;n.set("component",new C(w,y))}if(!u)n.set("styles",g);else if(!(0,Ot.isObject)(u)){var x=u;(0,k.keys)(m).length&&(x=(0,k.isString)(x)?o.Parser.parseCss(x):x,o.Css.checkId(x,{idMap:m})),g.add(x),n.set("styles",g)}return!e.width&&n.set(Rp,1),!e.height&&n.set(Vp,1),!n.id&&n.set("id",(0,Ot.createId)()),n}return r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"width",{get:function(){return Fp(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Fp(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){var t=this.refFrame;return t?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),r.prototype.initRefs=function(){var t=this.refFrame;if((0,k.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},r.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,n=t.y,o=this,s=o.width,u=o.height;return{x:e,y:n,width:s,height:u}},r.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},r.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},r.prototype.getHead=function(){return jp([],this.head,!0)},r.prototype.setHead=function(t){return this.set("head",jp([],t,!0))},r.prototype.addHeadItem=function(t){this.head.push(t)},r.prototype.getHeadByAttr=function(t,e,n){return this.head.filter(function(o){return o.attributes&&o.attributes[t]==e&&(!n||n===o.tag)})[0]},r.prototype.removeHeadByAttr=function(t,e,n){var o=this.getHeadByAttr(t,e,n),s=this.head.indexOf(o);s>=0&&this.head.splice(s,1)},r.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},r.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},r.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},r.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},r.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},r.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",ff({frame:this},t))},r.prototype._emitUnload=function(){this._emitWithEditor(ps.frameUnload,{frame:this})},r.prototype._emitWithEditor=function(t,e){[this.em,this].forEach(function(n){return n?.trigger(t,e)})},r.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=ri.A.prototype.toJSON.call(this,t),n=(0,k.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[Rp]&&delete e.width,e[Vp]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,k.forEach)(e,function(o,s){s.indexOf("_")===0&&delete e[s]}),(0,k.forEach)(n,function(o,s){e[s]===o&&delete e[s]}),(0,k.forEach)(["attributes","head"],function(o){(0,k.isEmpty)(e[o])&&delete e[o]}),e},r})(ri.A);const fv=Ey;var Ay=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ky=(function(i){Ay(r,i);function r(t,e){e===void 0&&(e=[]);var n=i.call(this,t,e,fv)||this;return n.loadedItems=0,n.itemsToLoad=0,(0,k.bindAll)(n,"itemLoaded"),n.on("add",n.onAdd),n.on("reset",n.onReset),n.on("remove",n.onRemove),n.forEach(function(o){return n.onAdd(o)}),n}return r.prototype.onAdd=function(t){this.module.framesById[t.id]=t},r.prototype.onReset=function(t,e){var n=this,o=e?.previousModels||[];o.map(function(s){return n.onRemove(s)})},r.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},r.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(n){return n[t?"on":"off"]("loaded",e.itemLoaded)})},r})(Fu);const dv=ky;var My=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Dy=(function(i){My(r,i);function r(t){var e=this,n=t.em,o=t.config,s=o.scripts,u=o.styles;return e=i.call(this,t,{scripts:s,styles:u})||this,e.set("frames",new dv(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(n,"change:device ".concat(cv.update),e.updateDevice),e.listenTo(n,cf.select,e._pageUpdated),e}return r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:Ht.lK,pointerScreen:Ht.lK}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var t=this.em,e=t.Pages._initPage();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},r.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get("readyCanvas")&&n.stopDefault(),e?.getFrames().map(function(o){o.disable(),o._emitUnload()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,n=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&n){var s=n.attributes,u=s.width,f=s.height,c=s.minHeight;o.set({width:u,height:f,minHeight:c},{noUndo:1})}},r.prototype.onZoomChange=function(t,e,n){var o=this,s=o.em,u=o.module,f=this.get("zoom");f<1&&this.set("zoom",1),s.trigger(u.events.zoom,{options:n})},r.prototype.onCoordsChange=function(){var t=this,e=t.em,n=t.module;e.trigger(n.events.coords)},r.prototype.onPointerChange=function(){var t=this,e=t.em,n=t.module;e.trigger(n.events.pointer)},r.prototype.getPointerCoords=function(t){t===void 0&&(t=Ht.x2.World);var e=this.attributes,n=e.pointer,o=e.pointerScreen;return t===Ht.x2.World?n:o},r})(ri.A);const Ly=Dy;var Bn=De(179),je=De(2225),Iy=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),jy=(function(i){Iy(r,i);function r(t,e){e===void 0&&(e=[]);var n=i.call(this,t,e,Bn.A)||this;n.on("add",n.onAdd),n.on("change",n.onChange),n.on("remove",n.onRemove);var o=n.em;n.refreshDbn=(0,k.debounce)(function(){return n.refresh()},0);var s="".concat(je.I.resize," styleable:change ").concat(je.I.input," ").concat(je.I.update," frame:updated undo redo");return n.listenTo(o,s,function(){return n.refreshDbn()}),n}return Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),r.prototype.refresh=function(){var t=this,e=t.em,n=t.events;e.trigger(n.spot)},r.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},r.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},r.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},r.prototype.__trgEvent=function(t,e){var n=this.module,o=n.em;o.trigger(t,e),this.refreshDbn()},r})(Fu);const Ry=jy;var Vy=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Fy=(function(i){Vy(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(t){this.className=""},r})(Ht.Ss);const zn=Fy;var Kt=De(6294),Ny=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Hy=(function(i){Ny(r,i);function r(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=i.call(this,t)||this;return n.itemsView="",n.itemType="type",n.reuseView=!1,n.viewCollection=[],e&&n.listenTo(n.collection,"add",n.addTo),n}return r.prototype.addTo=function(t){this.add(t)},r.prototype.itemViewNotFound=function(t){},r.prototype.add=function(t,e){var n=this,o=n.reuseView,s=n.viewCollection,u=e||null,f=t.get(this.itemType),c;t.view&&o?c=t.view:c=this.renderView(t,f),s.push(c);var h=c.render().el;u?u.appendChild(h):this.$el.append(h)},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(n){return t.add(n,e)}),this.$el.append(e),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(t,e){},r.prototype.onRemove=function(t,e){},r.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),Ht.Ss.prototype.remove.apply(this,t),this.onRemove(e,t),this},r.prototype.clearItems=function(){this.viewCollection},r})(zn);const Uy=Hy;var Sa;(function(i){i.mount="css:mount",i.mountBefore="css:mount:before"})(Sa||(Sa={}));var By=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Wy=(function(i){By(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.config=t.config||{};var n=e.model;return e.listenTo(n,"change",e.render),e.listenTo(n,"destroy remove",e.remove),e.listenTo(n.get("selectors"),"change",e.render),n.setView(e),e}return Object.defineProperty(r.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),r.prototype.remove=function(){return i.prototype.remove.call(this),this.model.removeView(this),this},r.prototype.updateStyles=function(){this.render()},r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var t=this,e=t.model,n=t.el,o=t.em,s=e.get("important"),u=e.toCSS({important:s}),f={rule:e,ruleView:this,css:u};return o?.trigger(Sa.mountBefore,f),n.innerHTML=f.css,o?.trigger(Sa.mount,f),this},r})(Ht.Ss);const Xf=Wy;var zy=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ky=(function(i){zy(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},r})(Xf);const Gy=Ky;var $y=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Sc=function(i,r){return"".concat(i).concat(r?"-".concat(parseFloat(r)):"")},qy=(function(i){$y(r,i);function r(t){var e=i.call(this,t)||this;(0,k.bindAll)(e,"sortRules");var n=t.config||{};e.atRules={},e.config=n,e.em=n.em,e.pfx=n.stylePrefix||"",e.className=e.pfx+"rules";var o=e.collection;return e.listenTo(o,"add",e.addTo),e.listenTo(o,"reset",e.render),e}return r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){if(this.renderStarted){var n=e||null,o=this.config,s={model:t,config:o},u,f;if(t.get("atRuleType")==="keyframes"){var c=t.getAtRule(),h=this.atRules[c];if(!h){var g=document.createElement("style");h=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(c,"{"))),g.appendChild(h),g.appendChild(document.createTextNode("}")),this.atRules[c]=h,u=g}f=new Gy(s),h.appendData(f.render().el.textContent)}else f=new Xf(s),u=f.render().el;var m=this.className,y=t.get("mediaText"),w=Sc(m),C=w;if(y&&(C=Sc(m,this.getMediaWidth(y))),u){var x=n||this.el,E=void 0;try{E=x.querySelector("#".concat(C))}catch{}E||(E=x.querySelector("#".concat(w))),E?.appendChild(u)}return u}},r.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(t,e){var n=this.em,o=(n.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var s=o?t:e,u=o?e:t;return s-u},r.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,o=e.$el,s=e.collection,u=this.className,f=document.createDocumentFragment();o.empty();var c=n.Devices.getAll().pluck("priority").sort(this.sortRules);return c.every(function(h){return h})&&c.unshift(0),c.forEach(function(h){return f.appendChild((0,Kt.a_)("div",{id:Sc(u,h)}))}),s.each(function(h){return t.addToCollection(h,f)}),o.append(f),o.attr("class",u),this},r})(Ht.Ss);const df=qy;var dr;(function(i){i.variable="data-variable",i.condition="data-condition",i.conditionTrue="data-condition-true-content",i.conditionFalse="data-condition-false-content",i.collection="data-collection",i.collectionItem="data-collection-item"})(dr||(dr={}));var Ss;(function(i){i.rootData="__rootData"})(Ss||(Ss={}));var pf;(function(i){i.string="string",i.number="number",i.boolean="boolean",i.date="date",i.json="json",i.relation="relation"})(pf||(pf={}));var Oo;(function(i){i.add="data:add",i.addBefore="data:add:before",i.remove="data:remove",i.removeBefore="data:remove:before",i.update="data:update",i.path="data:path",i.pathSource="data:pathSource:",i.providerLoad="data:provider:load",i.providerLoadBefore="data:provider:load:before",i.providerLoadError="data:provider:load:error",i.providerLoadAll="data:provider:loadAll",i.providerLoadAllBefore="data:provider:loadAll:before",i.all="data"})(Oo||(Oo={}));var Yy=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Al=function(){return Al=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Al.apply(this,arguments)},eo=dr.variable,Xy=(function(i){Yy(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.em=e.em,n.collectionsStateMap=e.collectionsStateMap,n}return r.prototype.defaults=function(){return{type:eo,defaultValue:"",path:"",collectionId:void 0,variableType:void 0,asPlainText:void 0}},Object.defineProperty(r.prototype,"path",{get:function(){var t;return(t=this.get("path"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultValue",{get:function(){var t;return(t=this.get("defaultValue"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"collectionId",{get:function(){return this.get("collectionId")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"variableType",{get:function(){return this.get("variableType")},enumerable:!1,configurable:!0}),r.prototype.resolvesFromCollection=function(){return!!this.collectionId},r.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this.trigger("change")},r.prototype.getResolverPath=function(){var t;if(this.resolvesFromCollection()){var e=this.resolveCollectionVariable();return Oa(e)?(t=e.path)!==null&&t!==void 0?t:"":!1}return this.path},r.prototype.toJSON=function(t){var e=this.defaults(),n=i.prototype.toJSON.call(this,t),o=Object.fromEntries(Object.entries(n).filter(function(s){var u=s[0],f=s[1];return f!==e[u]}));return Al(Al({},o),{type:eo})},r.prototype.getDataValue=function(){var t={em:this.em,collectionsStateMap:this.collectionsStateMap};return r.resolveDataResolver({path:this.path,defaultValue:this.defaultValue,collectionId:this.collectionId,variableType:this.variableType},t)},r.resolveDataSourceVariable=function(t,e){var n,o;return e.em.DataSources.getValue((n=t.path)!==null&&n!==void 0?n:"",(o=t.defaultValue)!==null&&o!==void 0?o:"")},r.resolveDataResolver=function(t,e){var n,o,s,u;if(t.collectionId){var f=r.resolveCollectionVariable(t,e);return Oa(f)?r.resolveDataSourceVariable({path:(n=f.path)!==null&&n!==void 0?n:"",defaultValue:(o=t.defaultValue)!==null&&o!==void 0?o:""},{em:e.em}):f}return r.resolveDataSourceVariable({path:(s=t.path)!==null&&s!==void 0?s:"",defaultValue:(u=t.defaultValue)!==null&&u!==void 0?u:""},{em:e.em})},r.prototype.resolveCollectionVariable=function(){var t=this,e=t.em,n=t.collectionsStateMap;return r.resolveCollectionVariable(this.attributes,{em:e,collectionsStateMap:n})},r.resolveCollectionVariable=function(t,e){var n,o,s=t.collectionId,u=s===void 0?"":s,f=t.variableType,c=t.path,h=t.defaultValue,g=h===void 0?"":h,m=e.em,y=e.collectionsStateMap;if(!y)return g;var w=y[u];if(!w)return g;if(!f)return m.logError("Missing collection variable type for collection: ".concat(u)),g;if(f==="currentItem")return(n=r.resolveCurrentItem(w,c,u,m))!==null&&n!==void 0?n:g;var C=w;return(o=C[f])!==null&&o!==void 0?o:g},r.resolveCurrentItem=function(t,e,n,o){var s=t.currentItem;if(!s){o.logError("Current item is missing for collection: ".concat(n));return}if(s.type===eo){var u=s.path?"".concat(s.path,".").concat(e):e;return{type:eo,path:u}}if(!(e&&!s[e]))return e?s[e]:s},r})(Ht.Kx);const Pa=Xy;var Jy=(function(){function i(r){var t=this;this.listeners=[],this.model=new Ht.Kx,this.onChange=function(){var e=t.resolver.getDataValue();t.onUpdate(e)},this.em=r.em,this.resolver=r.resolver,this.onUpdate=r.onUpdate,this.listenToResolver()}return i.prototype.createListener=function(r,t,e){return e===void 0&&(e=this.onChange),{obj:r,event:t,callback:e}},i.prototype.listenToResolver=function(){var r=this,t=r.resolver,e=r.model;this.removeListeners();var n=[],o=t.attributes.type;switch(o){case eo:n=this.listenToDataVariable(t);break;case xa:n=this.listenToConditionalVariable(t);break}n.forEach(function(s){return e.listenTo(s.obj,s.event,s.callback)}),this.listeners=n},i.prototype.listenToConditionalVariable=function(r){return[{obj:r,event:Cl,callback:this.onChange}]},i.prototype.listenToDataVariable=function(r){var t=this,e=this.em,n=[],o=function(){t.listenToResolver(),t.onChange()};n.push(this.createListener(r,"change",o));var s=r.getResolverPath();if(!s)return n;var u=(0,Ot.stringToPath)(s||"").join("."),f=e.DataSources.fromPath(s),c=f[0],h=f[1];return c&&n.push(this.createListener(c.records,"add remove reset",o)),h&&n.push(this.createListener(h,"change")),n.push(this.createListener(e.DataSources.all,"add remove reset",o),this.createListener(e,"".concat(Oo.path,":").concat(u)),this.createListener(e,Oo.path,function(g){var m=g.path;m!==s&&m.startsWith(s)&&t.onChange()})),n},i.prototype.removeListeners=function(){var r=this;this.listeners.forEach(function(t){return r.model.stopListening(t.obj,t.event,t.callback)}),this.listeners=[]},i.prototype.destroy=function(){this.removeListeners()},i})();const As=Jy;var Np=(function(){function i(r,t,e){this.operator=r,this.statements=t,this.opts=e}return i.prototype.evaluate=function(){var r=this,t=this.statements.map(function(e){var n=new pv({condition:e},r.opts);return n.evaluate()});return this.operator.evaluate(t)},i})(),Nu=(function(){function i(r,t){this.operationString=r,this.em=t.em}return i.prototype.getOperations=function(){return m0(this.operationsEnum)},i})(),Zy=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),xs;(function(i){i.equals="equals",i.isTruthy="isTruthy",i.isFalsy="isFalsy",i.isDefined="isDefined",i.isNull="isNull",i.isUndefined="isUndefined",i.isArray="isArray",i.isObject="isObject",i.isString="isString",i.isNumber="isNumber",i.isBoolean="isBoolean",i.isDefaultValue="isDefaultValue"})(xs||(xs={}));var Qy=(function(i){Zy(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=xs,t}return r.prototype.evaluate=function(t,e){var n;switch(this.operationString){case"equals":return t===e;case"isTruthy":return!!t;case"isFalsy":return!t;case"isDefined":return t!=null;case"isNull":return t===null;case"isUndefined":return t===void 0;case"isArray":return Array.isArray(t);case"isObject":return typeof t=="object"&&t!==null;case"isString":return typeof t=="string";case"isNumber":return typeof t=="number";case"isBoolean":return typeof t=="boolean";case"isDefaultValue":return t instanceof Pa&&t.get("defaultValue")===e;default:return(n=this.em)===null||n===void 0||n.logWarning("Unsupported generic operation: ".concat(this.operationString)),!1}},r})(Nu),t0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ci;(function(i){i.and="and",i.or="or",i.xor="xor"})(Ci||(Ci={}));var e0=(function(i){t0(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=Ci,t}return r.prototype.evaluate=function(t){if(!t?.length)return!1;switch(this.operationString){case Ci.and:return t.every(Boolean);case Ci.or:return t.some(Boolean);case Ci.xor:return t.filter(Boolean).length===1;default:return this.em.logWarning("Unsupported boolean operation: ".concat(this.operationString)),!1}},r})(Nu),r0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),so;(function(i){i.greaterThan=">",i.lessThan="<",i.greaterThanOrEqual=">=",i.lessThanOrEqual="<=",i.equals="=",i.notEquals="!="})(so||(so={}));var n0=(function(i){r0(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=so,t}return r.prototype.evaluate=function(t,e){if(typeof t!="number")return!1;switch(this.operationString){case so.greaterThan:return t>e;case so.lessThan:return t<e;case so.greaterThanOrEqual:return t>=e;case so.lessThanOrEqual:return t<=e;case so.equals:return t===e;case so.notEquals:return t!==e;default:return this.em.logWarning("Unsupported number operation: ".concat(this.operationString)),!1}},r})(Nu),o0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Un;(function(i){i.contains="contains",i.startsWith="startsWith",i.endsWith="endsWith",i.matchesRegex="matchesRegex",i.equalsIgnoreCase="equalsIgnoreCase",i.trimEquals="trimEquals"})(Un||(Un={}));var i0=(function(i){o0(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.operationsEnum=Un,t}return r.prototype.evaluate=function(t,e){if(typeof t!="string")return!1;switch(this.operationString){case Un.contains:return t.includes(e);case Un.startsWith:return t.startsWith(e);case Un.endsWith:return t.endsWith(e);case Un.matchesRegex:return e||this.em.logWarning("Regex pattern must be provided."),new RegExp(e??"").test(t);case Un.equalsIgnoreCase:return t.toLowerCase()===e.toLowerCase();case Un.trimEquals:return t.trim()===e.trim();default:return this.em.logWarning("Unsupported string operation: ".concat(this.operationString)),!1}},r})(Nu),a0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),pv=(function(i){a0(r,i);function r(t,e){var n,o=i.call(this,t)||this;return o.collectionsStateMap={},o.em=e.em,o.collectionsStateMap=(n=e.collectionsStateMap)!==null&&n!==void 0?n:{},o}return r.prototype.evaluate=function(){var t=this.get("condition");if(!t||(0,k.isBoolean)(t))return!!t;var e=this.getOperator();return e?e.evaluate(this.getResolvedLeftValue(),this.getResolvedRightValue()):!1},r.prototype.getDependentDataVariables=function(){var t=this.get("condition");return t?this.extractDataVariables(t):[]},r.prototype.getOperations=function(){var t=this.getOperator();return!t||t instanceof Np?[]:t.getOperations()},r.prototype.updateCollectionStateMap=function(t){this.collectionsStateMap=t},r.prototype.getOperator=function(){var t={em:this.em,collectionsStateMap:this.collectionsStateMap},e=this.get("condition");if(!(!e||(0,k.isBoolean)(e))){var n;if(this.isLogicGroup(e)){var o=e.logicalOperator,s=e.statements,u=new e0(o,t);n=new Np(u,s,t)}if(this.isExpression(e)){var f=e.left,u=e.operator,c=Ml(f,t);n=this.resolveOperator(c,u)}return n}},r.prototype.resolveOperator=function(t,e){var n=this.em;if(this.isOperatorInEnum(e,xs))return new Qy(e,{em:n});if(typeof t=="number")return new n0(e,{em:n});if(typeof t=="string")return new i0(e,{em:n})},r.prototype.extractDataVariables=function(t){var e=this,n=[];return this.isExpression(t)?(Oa(t.left)&&n.push(t.left),Oa(t.right)&&n.push(t.right)):this.isLogicGroup(t)&&t.statements.forEach(function(o){return n.push.apply(n,e.extractDataVariables(o))}),n},r.prototype.isLogicGroup=function(t){return t&&typeof t.logicalOperator<"u"&&Array.isArray(t.statements)},r.prototype.isExpression=function(t){return t&&typeof t.left<"u"&&typeof t.operator=="string"},r.prototype.isOperatorInEnum=function(t,e){return Object.values(e).includes(t)},r.prototype.resolveExpressionSide=function(t){var e=this.get("condition"),n=this,o=n.em,s=n.collectionsStateMap;if(!e||typeof e=="boolean")return e;if(e&&typeof e=="object"&&t in e){var u=e[t];return Ml(u,{em:o,collectionsStateMap:s})}},r.prototype.getResolvedLeftValue=function(){return this.resolveExpressionSide("left")},r.prototype.getResolvedRightValue=function(){return this.resolveExpressionSide("right")},r.prototype.toJSON=function(t){var e=this.get("condition");if(typeof e=="object"){var n=JSON.parse(JSON.stringify(e));return n}return e},r})(Ht.Kx),s0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),xa="data-condition",l0="data-condition-evaluation-changed",Cl="data-condition-output-changed",hv=(function(i){s0(r,i);function r(t,e){var n,o=i.call(this,t,e)||this;o.collectionsStateMap={},o.resolverListeners=[],o._previousEvaluationResult=null,o.em=e.em,o.collectionsStateMap=(n=e.collectionsStateMap)!==null&&n!==void 0?n:{};var s=t.condition,u=s===void 0?{}:s,f=new pv({condition:u},{em:o.em});return o._conditionEvaluator=f,o.listenToDataVariables(),o.listenToPropsChange(),o}return r.prototype.defaults=function(){return{type:xa,condition:{left:"",operator:Un.equalsIgnoreCase,right:""},ifTrue:{},ifFalse:{}}},r.prototype.getCondition=function(){return this._conditionEvaluator.get("condition")},r.prototype.getIfTrue=function(){return this.get("ifTrue")},r.prototype.getIfFalse=function(){return this.get("ifFalse")},r.prototype.getOperations=function(){return this._conditionEvaluator.getOperations()},r.prototype.setCondition=function(t){this.set("condition",t),this._conditionEvaluator.set("condition",t),this.trigger(Cl,this.getDataValue())},r.prototype.setIfTrue=function(t){this.set("ifTrue",t)},r.prototype.setIfFalse=function(t){this.set("ifFalse",t)},r.prototype.isTrue=function(){return this._conditionEvaluator.evaluate()},r.prototype.getDataValue=function(t){t===void 0&&(t=!1);var e=this,n=e.em,o=e.collectionsStateMap,s={em:n,collectionsStateMap:o},u=this.getIfTrue(),f=this.getIfFalse(),c=this.isTrue();return t?c?u:f:Ml(c?u:f,s)},r.prototype.resolvesFromCollection=function(){return!1},r.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this._conditionEvaluator.updateCollectionStateMap(t),this.listenToDataVariables(),this.emitConditionEvaluationChange()},r.prototype.listenToPropsChange=function(){var t=this;this.on("change:condition",this.handleConditionChange.bind(this)),this.on("change:condition change:ifTrue change:ifFalse",function(){t.listenToDataVariables()})},r.prototype.handleConditionChange=function(){this.setCondition(this.get("condition"))},r.prototype.listenToDataVariables=function(){this.cleanupListeners(),this.setupConditionDataVariableListeners(),this.setupOutputDataVariableListeners()},r.prototype.setupConditionDataVariableListeners=function(){var t=this;this._conditionEvaluator.getDependentDataVariables().forEach(function(e){t.addListener(e,function(){t.emitConditionEvaluationChange()})})},r.prototype.setupOutputDataVariableListeners=function(){var t=this.isTrue();this.setupOutputVariableListener(this.getIfTrue(),t),this.setupOutputVariableListener(this.getIfFalse(),!t)},r.prototype.setupOutputVariableListener=function(t,e){var n=this;Oa(t)&&this.addListener(t,function(){e&&n.trigger(Cl,t)})},r.prototype.addListener=function(t,e){var n=new As({em:this.em,resolver:new Pa(t,{em:this.em,collectionsStateMap:this.collectionsStateMap}),onUpdate:e});this.resolverListeners.push(n)},r.prototype.emitConditionEvaluationChange=function(){var t=this.isTrue();this._previousEvaluationResult!==t&&(this._previousEvaluationResult=t,this.trigger(l0,t),this.emitOutputValueChange())},r.prototype.emitOutputValueChange=function(){var t=this.getDataValue();this.trigger(Cl,t)},r.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(t){return t.destroy()}),this.resolverListeners=[]},r.prototype.toJSON=function(){var t=this.getIfTrue(),e=this.getIfFalse();return{type:xa,condition:this._conditionEvaluator.toJSON(),ifTrue:t,ifFalse:e}},r})(Ht.Kx),us="dataResolver",hn=function(){return hn=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},hn.apply(this,arguments)},vv=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Si=function(i){return(0,k.isArray)(i.get(Zr))},kl=function(i){return!!i.get(vn)},ro=function(i){return!!(Si(i)||kl(i))},Ti=function(i){var r=i.parent();return ro(i)&&(!r||!ro(r))},is=function(i){i.__symbReady||(i.on("change",i.__upSymbProps),i.__symbReady=!0)},Wn=function(i){var r=i.get(vn);if(r&&(0,k.isString)(r)){var t=i.__getAllById()[r];t?(r=t,i.set(vn,t)):r=0}return r||void 0},yn=function(i){var r=i?.get(Zr);return r&&(0,k.isArray)(r)&&(r.forEach(function(t,e){t&&(0,k.isString)(t)&&(r[e]=i.__getAllById()[t])}),r=r.filter(function(t){return t&&!(0,k.isString)(t)})),r||void 0},Os=function(i,r){r===void 0&&(r="");var t=i?.get(xi),e=r.split(":")[0],n=r!==e?[r,e]:[r];return t===!0||(0,k.isArray)(t)&&n.some(function(o){return t.indexOf(o)>=0})},xo=function(i,r){r===void 0&&(r={});var t=[],e=r.changed;if(r.fromInstance||r.noPropagate||r.fromUndo||e&&Os(i,e))return t;var n=yn(i)||[],o=Wn(i),s=o?vv([o],yn(o)||[],!0):n;return t=s.filter(function(u){return u!==i}).filter(function(u){return!(e&&Os(u,e))}),t},Ts=function(i,r){for(var t=i,e=i.parent(r);e&&ro(e);)t=e,e=e.parent(r);return t},Hu=function(i,r){r===void 0&&(r={});var t=Wn(i),e=t&&yn(t);!r.skipRefs&&e&&t.set(Zr,e.filter(function(n){return n!==i})),i.set(vn,0),i.components().forEach(function(n){return Hu(n,r)})},hs=function(i,r,t,e){e===void 0&&(e={});var n=Wn(i),o=yn(i);!n&&!o||i.em.log(r,{model:i,toUp:t,context:"symbols",opts:e})},u0=function(i,r){r===void 0&&(r={});var t=i.changedAttributes();if(t){var e=i.dataResolverWatchers.getProps(t);if(c0(e),!(0,Ot.isEmptyObj)(e)){var n=xo(i,r);e=Hp(e,i),hs(i,"props",n,{opts:r,changed:e}),n.forEach(function(o){var s=Hp(e,o);o.set(s,hn({fromInstance:i},r))})}}},c0=function(i){var r,t,e=["status","open",Zr,vn,xi];e.forEach(function(n){return delete i[n]}),(r=i.attributes)===null||r===void 0||delete r.id,(0,Ot.isEmptyObj)((t=i.attributes)!==null&&t!==void 0?t:{})&&delete i.attributes},Hp=function(i,r){var t=hn({},i);return(0,k.keys)(i).forEach(function(e){p0(i,e,r)||delete t[e]}),t},f0=function(i){return i?Object.values(i).some(function(r){return!!r?.collectionId}):!1},d0=function(i,r){var t;switch(r){case"attributes":case"style":return f0(i[r]);default:return!!(!((t=i[r])===null||t===void 0)&&t.collectionId)}},p0=function(i,r,t){var e=d0(i,r);return!Os(t,r)||e},h0=function(i,r){r===void 0&&(r={});var t=xo(i,r);hs(i,"classes",t,{opts:r}),t.forEach(function(e){e.set("classes",i.get("classes"),{fromInstance:i})}),i.__changesUp(r)},gv=function(i,r,t,e){var n=e||t||{},o=n.fromInstance,s=n.fromUndo,u={fromInstance:o,fromUndo:s},f=r.opt.temporary;if(e)if(e.add){var y=[],w=!!yn(i),h=xo(i,hn(hn({},u),{changed:"components:add"}));if(h.length){var C=Wn(r);y=yn(C||r)||[],y=vv([],y,!0),y.push(C||r)}!f&&hs(i,"add",h,{opts:e,addedInstances:y.map(function(et){return et.cid}),added:r.cid}),h.forEach(function(et){var G=Ts(et),W=y.filter(function(D){var Y=Ts(D,{prev:1});return G&&Y&&Y===G})[0],U=W||r.clone({symbol:!0,symbolInv:w});et.append(U,hn({fromInstance:i},e))})}else{var x=Wn(r);if(x&&!e.temporary&&x.set(Zr,yn(x).filter(function(vt){return vt!==r})),!Ti(r)&&!e.skipRefsUp){var E="components:remove",N=e.index,L=r.parent(),H=hn({fromInstance:r},e),rt=Ti(r),nt=function(et){var G=et.parent();G&&!Os(G,E)&&et.remove(H)},h=Os(L,E)?[]:xo(r,u);rt&&(h=L&&xo(L,hn(hn({},u),{changed:E})),nt=function(et){var G=et.components().at(N);G&&G.remove(hn({fromInstance:L},H))}),!f&&hs(i,"remove",h,{opts:e,removed:r.cid,isSymbNested:rt}),h.forEach(nt)}}else{var c=r,h=xo(i,hn(hn({},u),{changed:"components:reset"})),g=c.models,m=new Set;hs(i,"reset",h,{components:g}),h.forEach(function(vt){var et=vt.components(),G=g.map(function(W,U){return i.get(us)?W.clone({symbol:ro(W)}):!ro(W)||m.has(W)?(m.add(W),W.clone({symbol:!0})):et.at(U)});et.reset(G,hn({fromInstance:i},t))})}i.__changesUp(n)},v0="id";function hf(i){return typeof i=="object"&&[eo,xa].includes(i?.type)}function Oa(i){return i?.type===eo}function Ml(i,r){return hf(i)?(Oa(i)&&Pa.resolveDataResolver(i,r),yv(i,r)):i}function mv(i,r){var t,e=i.type,n;switch(e){case eo:n=new Pa(i,r);break;case xa:{n=new hv(i,r);break}default:(t=r.em)===null||t===void 0||t.logWarning("Unsupported resolver type: ".concat(e));return}return n}function yv(i,r){var t=mv(i,r);return t?.getDataValue()}var g0=function(i){return!!i&&[dr.collectionItem,dr.conditionTrue,dr.conditionFalse].includes(i)};function m0(i){return Object.keys(i).filter(function(r){return isNaN(Number(r))}).map(function(r){return i[r]})}function y0(i){var r=i.collectionsStateMap;if(!r)return!1;var t=Object.keys(r);if(!t.length)return!1;var e=Wn(i);if(!e||e===i)return!1;var n=e.collectionsStateMap,o=Object.keys(n),s=o.every(function(u){return t.includes(u)});return s}function _0(i){var r=Wn(i);return r?r.getId():""}function w0(i){var r=y0(i),t=r?_0(i):null;return{shouldSync:r,itemId:t}}var _v="text/html",b0=_v;const C0=(function(i,r){r===void 0&&(r={});var t=new DOMParser,e=r.htmlType||b0,n=e===_v,o=n?i:"<div>".concat(i,"</div>"),s=t.parseFromString(o,e),u;if(n){if(r.asDocument)return s;var f=s.head,c=s.body,h=f.querySelectorAll("script");(0,k.each)(h,function(m){return c.appendChild(m)});var g=[];(0,k.each)(f.children,function(m){return g.push(m)}),(0,k.each)(g,function(m,y){return c.insertBefore(m,c.children[y])}),u=c}else u=s.firstChild;return u});var ti;(function(i){i.html="parse:html",i.htmlRoot="parse:html:root",i.htmlBefore="parse:html:before",i.css="parse:css",i.cssBefore="parse:css:before",i.all="parse"})(ti||(ti={}));var Qn=function(){return Qn=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Qn.apply(this,arguments)},S0="data-gjs-",x0=function(i,r){return r===void 0&&(r={}),{compTypes:[],modelAttrStart:S0,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,""),o=e?.length||0,s=e?.substring(0,1),u=e?.substring(o-1),f=e==="true"?!0:e==="false"?!1:e;try{f=s=="{"&&u=="}"||s=="["&&u=="]"?JSON.parse(f):f}catch{}return{name:n,value:f}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var n={},o={};return(0,k.each)(t,function(s,u){if(u.indexOf(e.modelAttrStart)===0){var f=e.getPropAttribute(u,s);n[f.name]=f.value}else o[u]=s}),{props:n,attrs:o}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var n=t.indexOf("/*"),o=t.indexOf("*/"),s=o>-1?o+2:void 0;t=t.replace(t.slice(n,s),"")}for(var u=t.split(";"),f=0,c=u.length;f<c;f++){var h=u[f].trim();if(h){var g=h.split(":"),m=g[0].trim(),y=g.slice(1).join(":").trim();e[m]?((0,k.isArray)(e[m])||(e[m]=[e[m]]),e[m].push(y)):e[m]=y}}return e},parseClass:function(t){for(var e=[],n=t.split(" "),o=0,s=n.length;o<s;o++){var u=n[o].trim();u&&e.push(u)}return e},parseNodeAttr:function(t,e){for(var n,o,s=e||{},u=t.attributes||[],f=u.length,c=!!(!((n=r?.optionsHtml)===null||n===void 0)&&n.convertDataGjsAttributesHyphens),h=c&&!!s.type&&(0,k.result)((o=i?.Components.getType(s.type))===null||o===void 0?void 0:o.model.prototype,"defaults")||{},g=0;g<f;g++){var m=u[g].nodeName,y=u[g].nodeValue;if(m=="style")s.style=this.parseStyle(y);else if(m=="class")s.classes=this.parseClass(y);else{if(m=="contenteditable")continue;if(m.indexOf(this.modelAttrStart)===0){var w=this.getPropAttribute(m,y),C=w.name;if(c&&!(C in h)){var x=(0,Kt._I)(C);C=x in h?x:C}s[C]=w.value}else y===""&&t[m]===!0&&(y=!0),s.attributes||(s.attributes={}),s.attributes[m]=y}}return s},detectNode:function(t,e){var n;e===void 0&&(e={});var o=this.compTypes,s={};if(o){var u=(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"".concat(this.modelAttrStart,"type"));if(u)s={type:u};else for(var f=0;f<o.length;f++){var c=o[f],h=c.model.isComponent(t,e);if(h){typeof h!="object"&&(h={type:c.id}),s=h;break}}}return s},parseNode:function(t,e){var n;e===void 0&&(e={});var o=((n=t.content)===null||n===void 0?void 0:n.childNodes)||t.childNodes,s=o.length,u=this.detectNode(t,e);if(!u.tagName){var f=t.tagName||"",c=t.namespaceURI||"";u.tagName=f&&c==="http://www.w3.org/1999/xhtml"?f.toLowerCase():f}if(u=this.parseNodeAttr(t,u),!s&&"".concat(t.outerHTML).slice(-2)==="/>"&&(u.void=!0),s&&!u.components&&!e.skipChildren){var h=o[0];s===1&&h.nodeType===3?(!u.type&&(u.type="text"),u.components={type:"textnode",content:h.nodeValue}):u.components=this.parseNodes(t,Qn(Qn({},e),{inSvg:e.inSvg||u.type==="svg"}))}var g=u.components;if(!u.type&&g?.length){for(var m=r.textTypes,y=m===void 0?[]:m,w=r.textTags,C=w===void 0?[]:w,x=!0,E=!1,N=0;N<g.length;N++){var L=g[N],H=L.type;if(!y.includes(H)&&!C.includes(L.tagName)){x=!1;break}H==="textnode"&&(E=!0)}x&&E&&(u.type="text")}return u},parseNodes:function(t,e){var n;e===void 0&&(e={});for(var o=[],s=((n=t.content)===null||n===void 0?void 0:n.childNodes)||t.childNodes,u=s.length,f=0;f<u;f++){var c=s[f],h=o[o.length-1],g=this.parseNode(c,e);if(g.type==="textnode"){if(h?.type==="textnode"){h.content+=g.content;continue}if(!e.keepEmptyTextNodes){var m=c.nodeValue||"",y=f===0||f===u-1,w=m.includes(`
`);if(m!=" "&&!m.trim()&&(y||w))continue}}!g.tagName&&(0,k.isUndefined)(g.content)||o.push(g)}return o},parse:function(t,e,n){var o,s,u;n===void 0&&(n={});var f=i?.get("Config")||{},c=i?.Parser,h={html:[]},g=Qn(Qn(Qn({},r.optionsHtml),{htmlType:((o=r.optionsHtml)===null||o===void 0?void 0:o.htmlType)||r.htmlType}),n),m=Qn(Qn({},g),{asDocument:this.__checkAsDocument(t,g)}),y=Qn(Qn({},r),m),w=m.preParser,C=m.asDocument,x={input:(0,k.isFunction)(w)?w(t,{editor:i?.getEditor()}):t};c?.__emitEvent(ti.htmlBefore,x);var E=x.input,N=(0,k.isFunction)(y.parserHtml)?y.parserHtml(E,m):C0(E,m),L=N,H=N;C&&(L=H.documentElement,h.doctype=(0,Kt.LJ)(H.doctype));var rt=L.querySelectorAll("script"),nt=rt.length,vt=(0,k.isUndefined)(f.allowScripts)?m.allowScripts:f.allowScripts;if(!vt)for(;nt--;)(s=rt[nt].parentNode)===null||s===void 0||s.removeChild(rt[nt]);if((!m.allowUnsafeAttr||!m.allowUnsafeAttrValue)&&this.__sanitizeNode(L,m),e){for(var et=L.querySelectorAll("style"),G=et.length,W="";G--;)W=et[G].innerHTML+W,(u=et[G].parentNode)===null||u===void 0||u.removeChild(et[G]);W&&(h.css=e.parse(W))}c?.__emitEvent(ti.htmlRoot,{input:E,root:L});var U=[];if(C)h.head=this.parseNode(H.head,y),h.root=this.parseNodeAttr(L),U=this.parseNode(H.body,y);else{var D=this.parseNodes(L,y);U=D.length===1&&!y.returnArray?D[0]:D}return h.html=U,c?.__emitEvent(ti.html,{input:E,output:h,options:m}),h},__sanitizeNode:function(t,e){var n=this,o=t.attributes||[],s=t.childNodes||[],u=[];(0,k.each)(o,function(f){var c=f.nodeName||"",h=f.nodeValue||"";!e.allowUnsafeAttr&&c.startsWith("on")&&u.push(c),!e.allowUnsafeAttrValue&&h.startsWith("javascript:")&&u.push(c)}),u.map(function(f){return t.removeAttribute(f)}),(0,k.each)(s,function(f){return n.__sanitizeNode(f,e)})},__checkAsDocument:function(t,e){if((0,Ot.isDef)(e.asDocument))return e.asDocument;if((0,k.isFunction)(e.detectDocument))return!!e.detectDocument(t);if(e.detectDocument)return t.toLowerCase().trim().startsWith("<!doctype")}}};const wv=x0;var Dl=function(){return Dl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Dl.apply(this,arguments)},xc=(function(){function i(r,t,e){this.model=r,this.updateFn=t,this.resolverListeners={},this.em=e.em}return i.prototype.bindModel=function(r){this.model=r},i.prototype.setDataValues=function(r,t){t===void 0&&(t={});var e=t.skipWatcherUpdates||t.fromDataSource;return e||this.removeListeners(),this.addDataValues(r,t)},i.prototype.addDataValues=function(r,t){if(t===void 0&&(t={}),!r)return{};var e=this.evaluateValues(r),n=t.skipWatcherUpdates||t.fromDataSource;return n||this.updateListeners(r),e},i.prototype.onCollectionsStateMapUpdate=function(){var r=this,t=this.getValuesResolvingFromCollections();if(t.length){var e=this.addDataValues(this.getValuesOrResolver(Object.fromEntries(t.map(function(n){return[n,""]}))));Object.entries(e).forEach(function(n){var o=n[0],s=n[1];return r.updateFn(r.model,o,s)})}},Object.defineProperty(i.prototype,"collectionsStateMap",{get:function(){var r,t=this.model;return(r=t?.collectionsStateMap)!==null&&r!==void 0?r:{}},enumerable:!1,configurable:!0}),i.prototype.updateListeners=function(r){var t=this,e=this,n=e.em,o=e.collectionsStateMap;this.removeListeners(Object.keys(r));for(var s=Object.keys(r),u=function(h){var g=s[h],m=r[g];if(!hf(m))return"continue";var y=mv(m,{em:n,collectionsStateMap:o});f.resolverListeners[g]=new As({em:n,resolver:y,onUpdate:function(w){return t.updateFn(t.model,g,w)}})},f=this,c=0;c<s.length;c++)u(c)},i.prototype.evaluateValues=function(r){for(var t=this,e=t.em,n=t.collectionsStateMap,o=Dl({},r),s=Object.keys(r),u=0;u<s.length;u++){var f=s[u],c=r[f];hf(c)&&(o[f]=yv(c,{em:e,collectionsStateMap:n}))}return o},i.prototype.removeListeners=function(r){var t=this,e=r||Object.keys(this.resolverListeners);return e.forEach(function(n){var o,s;t.resolverListeners[n]&&((s=(o=t.resolverListeners[n]).destroy)===null||s===void 0||s.call(o),delete t.resolverListeners[n])}),e},i.prototype.getValuesOrResolver=function(r){if(!r)return{};for(var t=Dl({},r),e=Object.keys(t),n=0;n<e.length;n++){var o=e[n],s=this.resolverListeners[o];s&&(t[o]=s.resolver.toJSON())}return t},i.prototype.getAllDataResolvers=function(){for(var r={},t=Object.keys(this.resolverListeners),e=0;e<t.length;e++){var n=t[e];r[n]=this.resolverListeners[n].resolver.toJSON()}return r},i.prototype.getValuesResolvingFromCollections=function(){var r=this,t=Object.keys(this.resolverListeners).filter(function(e){return r.resolverListeners[e].resolver.resolvesFromCollection()});return t},i.prototype.destroy=function(){this.removeListeners()},i})(),Dn=function(){return Dn=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Dn.apply(this,arguments)},O0=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Sl={fromDataSource:!0,avoidStore:!0},na="__data_values",T0=(function(){function i(r,t){var e=this;this.model=r,this.options=t,this.onPropertyUpdate=function(n,o,s){n?.set(o,s,Sl)},this.onAttributeUpdate=function(n,o,s){var u;e.isComponent(n)&&n?.addAttributes((u={},u[o]=s,u),Sl)},this.onStyleUpdate=function(n,o,s){var u;n?.addStyle((u={},u[o]=s,u),Dn(Dn({},Sl),{partial:!0,avoidStore:!0}))},this.propertyWatcher=new xc(r,this.onPropertyUpdate,t),this.attributeWatcher=new xc(r,this.onAttributeUpdate,t),this.styleWatcher=new xc(r,this.onStyleUpdate,t)}return i.prototype.bindModel=function(r){this.model=r,this.watchers.forEach(function(t){return t.bindModel(r)}),this.updateSymbolOverride()},i.prototype.addProps=function(r,t){var e;t===void 0&&(t={});var n=(e=r[na])!==null&&e!==void 0?e:{},o=this.filterProps(r),s=Dn(Dn({},r),this.propertyWatcher.addDataValues(Dn(Dn({},o),n.props),t));this.shouldProcessProp("attributes",r,n)&&(s.attributes=this.processAttributes(r,n,t)),this.shouldProcessProp("style",r,n)&&(s.style=this.processStyles(r,n,t));var u=t.skipWatcherUpdates||t.fromDataSource;return u||(this.updateSymbolOverride(),s[na]={props:this.propertyWatcher.getAllDataResolvers(),style:this.styleWatcher.getAllDataResolvers(),attributes:this.attributeWatcher.getAllDataResolvers()}),s},i.prototype.getProps=function(r){var t=this.getValueOrResolver("props",r),e=Dn({},t);return delete e[na],(0,k.isEmpty)(r.attributes)||(e.attributes=this.getValueOrResolver("attributes",r.attributes)),(0,k.isObject)(r.style)&&!(0,k.isEmpty)(r.style)&&(e.style=this.getValueOrResolver("styles",r.style)),e},i.prototype.getValueOrResolver=function(r,t){var e;switch(r){case"props":e=this.propertyWatcher;break;case"styles":e=this.styleWatcher;break;case"attributes":e=this.attributeWatcher;break;default:{var n=this.options.em;return n?.logError("Invalid target '".concat(r,"'. Must be 'props', 'styles', or 'attributes'.")),{}}}return t?e.getValuesOrResolver(t):e.getAllDataResolvers()},i.prototype.removeAttributes=function(r){this.attributeWatcher.removeListeners(r),this.updateSymbolOverride()},i.prototype.disableStyles=function(){this.styleWatcher.removeListeners(),this.styleWatcher.destroy()},i.prototype.onCollectionsStateMapUpdate=function(){this.watchers.forEach(function(r){return r.onCollectionsStateMapUpdate()})},i.prototype.destroy=function(){this.watchers.forEach(function(r){return r.destroy()})},Object.defineProperty(i.prototype,"watchers",{get:function(){return[this.propertyWatcher,this.styleWatcher,this.attributeWatcher]},enumerable:!1,configurable:!0}),i.prototype.isComponent=function(r){return r instanceof ir},i.prototype.shouldProcessProp=function(r,t,e){var n=r==="attributes"?this.attributeWatcher:this.styleWatcher,o=e[r],s=!!t[r],u=o&&Object.keys(o).length>0,f=o&&Object.keys(n.getAllDataResolvers()).length>0;return s||u||f},i.prototype.updateSymbolOverride=function(){var r,t=this.model;if(!(!this.isComponent(t)||!ro(t))){var e=!!Object.keys((r=t?.collectionsStateMap)!==null&&r!==void 0?r:{}).length;if(e){var n=this.propertyWatcher.getValuesResolvingFromCollections(),o=this.attributeWatcher.getValuesResolvingFromCollections(),s=O0(["locked","layerable",na],n,!0),u=Object.keys(o).length;u&&s.push("attributes");var f=xo(t);f.forEach(function(c){c.setSymbolOverride(s,{fromDataSource:!0})}),t.setSymbolOverride(s,{fromDataSource:!0})}}},i.prototype.filterProps=function(r){var t=["components","dataResolver","status","state","open",xi,na],e=Object.fromEntries(Object.entries(r).filter(function(n){var o=n[0];return!t.includes(o)}));return e},i.prototype.processAttributes=function(r,t,e){var n;return e===void 0&&(e={}),this.attributeWatcher.setDataValues(Dn(Dn({},r.attributes),(n=t.attributes)!==null&&n!==void 0?n:{}),e)},i.prototype.processStyles=function(r,t,e){var n;return e===void 0&&(e={}),typeof r=="string"?(this.styleWatcher.removeListeners(),r):this.styleWatcher.setDataValues(Dn(Dn({},r.style),(n=t.style)!==null&&n!==void 0?n:{}),e)},i})(),P0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Er=function(){return Er=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Er.apply(this,arguments)},E0=wv(),vf=function(i){return(0,k.isArray)(i)?i[i.length-1]:i},A0=(function(i){P0(r,i);function r(t,e){e===void 0&&(e={});var n=this,o=e.em,s=new T0(void 0,{em:o});return n=i.call(this,t,Er(Er({},e),{dataResolverWatchers:s}))||this,n.views=[],n.collectionsStateMap={},s.bindModel(n),n.dataResolverWatchers=s,n.em=e.em,n.opt=e,n}return r.prototype.get=function(t,e){return e?.skipResolve?this.dataResolverWatchers.getValueOrResolver("props")[t]:i.prototype.get.call(this,t)},r.prototype.set=function(t,e,n){var o,s,u={skipWatcherUpdates:!1,fromDataSource:!1},f,c;typeof t=="object"?(f=t,c=e||u):typeof t=="string"?(f=(o={},o[t]=e,o),c=n||u):(f={},c=u),this.dataResolverWatchers=(s=this.dataResolverWatchers)!==null&&s!==void 0?s:c.dataResolverWatchers;var h=this.dataResolverWatchers.addProps(f,c);return i.prototype.set.call(this,h,c)},r.prototype.parseStyle=function(t){return E0.parseStyle(t)},r.prototype.extendStyle=function(t){return Er(Er({},this.getStyle("",{skipResolve:!0})),t)},r.prototype.getStyle=function(t,e){e===void 0&&(e={});var n=this.get("style"),o=(0,k.isString)(n)?this.parseStyle(n):(0,k.isObject)(n)?Er({},n):{};delete o.__p;var s=!t||t===""||(0,k.isObject)(t);if(!e.skipResolve)return s?o:o[t];var u=this.dataResolverWatchers.getValueOrResolver("styles",o);return s?u:u[t]},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,k.isString)(t)&&(t=this.parseStyle(t));var o=this.getStyle("",{skipResolve:!0});e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var s=Er({},t),u=Er({},s);(0,k.keys)(u).forEach(function(h){if(u[h]===""){delete u[h];return}}),this.set({style:u},e),u=this.attributes.style;var f=Object.keys((0,Ot.shallowDiff)(o,s)),c=f.reduce(function(h,g){var m;return Er(Er({},h),(m={},m[g]=u[g],m))},{});return delete c.__p,(0,k.keys)(c).forEach(function(h){var g=n.em;e.noEvent||(n.trigger("change:style:".concat(h)),g&&(g.trigger("styleable:change",n,h,e),g.trigger("styleable:change:".concat(h),n,h,e)))}),u},r.prototype.getView=function(t){var e=this,n=e.views,o=e.em,s=t||o?.getCurrentFrameModel();return s?n.find(function(u){return u.frameView===s.view}):n[0]},r.prototype.setView=function(t){var e=this.views;!e.includes(t)&&e.push(t)},r.prototype.removeView=function(t){var e=this.views;e.splice(e.indexOf(t),1)},r.prototype.updateView=function(){this.views.forEach(function(t){return t.updateStyles()})},r.prototype.addStyle=function(t,e,n){var o;e===void 0&&(e=""),n===void 0&&(n={}),typeof t=="string"?t=(o={},o[t]=e,o):n=e||{},n.addStyle=t,t=this.extendStyle(t),this.setStyle(t,n)},r.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},r.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],n=t.style||this.getStyle(t),o=t.important,s=function(f){var c=(0,k.isArray)(o)?o.indexOf(f)>=0:o,h=f.substring(0,2),g=h==="__";if(g)return"continue";var m=n[f],y=(0,k.isArray)(m)?m:[m];y.forEach(function(w){var C="".concat(w).concat(c?" !important":"");C&&e.push("".concat(f,":").concat(C,";"))})};for(var u in n)s(u);return e.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},r.prototype.onCollectionsStateMapUpdate=function(t){this.collectionsStateMap=t,this.dataResolverWatchers.onCollectionsStateMapUpdate()},r.prototype.clone=function(t,e){var n=this.dataResolverWatchers.getProps(this.attributes),o=Er(Er({},n),t),s=Er(Er({},this.opt),e),u=this.constructor;return new u(o,s)},r.prototype.toJSON=function(t,e){if(t?.fromUndo)return Er({},i.prototype.toJSON.call(this,t));var n=Er(Er({},this.attributes),e),o=this.dataResolverWatchers.getProps(n);return o},r})(Ht.Kx);const bv=A0;var k0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),dl=1,Oc=2,Cv=(function(i){k0(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this,t,e)||this,o=e.config,s=o===void 0?{}:o,u=n.get("name"),f=n.get("label");u?f||n.set("label",u):n.set("name",f);var c=n.get("name"),h=s.escapeName,g=h?h(c):r.escapeName(c);return n.set("name",g),n.em=e.em,n}return r.prototype.defaults=function(){return{name:"",label:"",type:dl,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===Oc},r.prototype.isClass=function(){return this.get("type")===dl},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,n=this.get("name"),o="";switch(this.get("type")){case dl:o=".";break;case Oc:o="#";break}return o+(e?e(n):n)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getName=function(){return this.get("name")||""},r.prototype.getLabel=function(){return this.get("label")||""},r.prototype.setLabel=function(t){return this.set("label",t)},r.prototype.getActive=function(){return!!this.get("active")},r.prototype.setActive=function(t){return this.set("active",t)},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,n=Ht.Kx.prototype.toJSON.call(this,[t]),o=(0,k.result)(this,"defaults");if(e?.getConfig().avoidDefaults){(0,k.forEach)(o,function(u,f){n[f]===u&&delete n[f]}),n.label===n.name&&delete n.label;var s=(0,k.keys)(n).length;s===1&&n.name&&(n=n.name),s===2&&n.name&&n.type&&(n=this.getFullName())}return n},r.escapeName=function(t){return"".concat(t).trim().replace(/\s+/g,"-")},r.TYPE_CLASS=dl,r.TYPE_ID=Oc,r})(Ht.Kx);const en=Cv;Cv.prototype.idAttribute="name";var M0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Sv=function(i,r){return i.reduce(function(t,e,n){return t.concat(Sv(i.slice(n+1),"".concat(r).concat(e)))},[r])},xv=(function(i){M0(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||en.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,k.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},r.prototype.getValid=function(t){var e=t===void 0?{}:t,n=e.noDisabled;return(0,k.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return n?o.get("active"):1})},r.prototype.getFullString=function(t,e){e===void 0&&(e={});var n=[],o=t||this;return o.forEach(function(s){return n.push(s.getFullName(e))}),e.sort&&n.sort(),n.join("").trim()},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,n=t.array,o=[],s=this.map(function(u){return u.getFullName(t)}).sort();return e?s.forEach(function(u,f){o=o.concat(Sv(s.slice(f+1),u))}):o=s,n?o:e?o.join(","):o.join("")},r})(Ht.pM);const Qo=xv;xv.prototype.model=en;var D0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Up=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},L0=(function(i){D0(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r.prototype.getId=function(){return this.get("id")},r.prototype.getLabel=function(){return this.get("label")},r})(Ht.Kx);const ks=L0;function Ov(i){var r=new Set,t=new Map,e={items:[]};i.forEach(function(o){var s=o.category;if(s){r.add(s);var u=t.get(s);u?u.push(o):t.set(s,[o])}else e.items.push(o)});var n=Array.from(r).map(function(o){return{category:o,items:t.get(o)||[]}});return Up(Up([],n,!0),[e],!1)}var I0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Bp="category",Tv=(function(i){I0(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initCategory=function(t){var e=t.get(Bp),n=e instanceof ks;if(e&&!n){(0,k.isString)(e)?e={id:e,label:e}:(0,Ot.isObject)(e)&&!e.id&&(e.id=e.label);var o=this.getCategories().add(e);return t.set(Bp,o,{silent:!0}),o}else if(n){var o=e;return this.getCategories().add(o),o}},r})(Ht.pM),j0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Pv=(function(i){j0(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this,t,e)||this,o=e.events,s=e.em,u=o?.update;return s&&u&&n.on("change",function(f,c){return s.trigger(u,{category:f,changes:f.changedAttributes(),options:c})}),n}return r.prototype.add=function(t,e){var n=(0,k.isArray)(t)?t:[t];return n.forEach(function(o){return o&&(o.id=(0,Ot.normalizeKey)("".concat(o.id)))}),i.prototype.add.call(this,t,e)},r.prototype.get=function(t){return i.prototype.get.call(this,(0,k.isString)(t)?(0,Ot.normalizeKey)(t):t)},r})(Ht.pM);const Ll=Pv;Pv.prototype.model=ks;var Il;(function(i){i.select="trait:select",i.value="trait:value",i.categoryUpdate="trait:category:update",i.custom="trait:custom",i.all="trait"})(Il||(Il={}));const gf=Il;var R0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),jl=function(){return jl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},jl.apply(this,arguments)},V0=(function(i){R0(r,i);function r(t,e){var n=i.call(this,t)||this,o=n.attributes,s=o.target,u=o.name;return!n.get("id")&&n.set("id",u),s&&n.setTarget(s),n.em=e,n}return r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(r.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"category",{get:function(){var t=this.get("category");return t instanceof ks?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),r.prototype.setTarget=function(t){if(t){var e=this.attributes,n=e.name,o=e.changeProp,s=e.value,u=e.getValue;this.target=t,this.unset("target");var f=o?"change:".concat(n):"change:attributes:".concat(n);this.listenTo(t,f,this.targetUpdated);var c=s||(u?void 0:this.getValue());!(0,k.isUndefined)(c)&&this.set({value:c},{silent:!0})}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,o=n===void 0?!0:n,s=this.getId(),u=this.get("label")||this.getName();return o&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(s)))||u},r.prototype.getValue=function(t){return this.getTargetValue(t)},r.prototype.setValue=function(t,e){var n=this;e===void 0&&(e={});var o=this,s=o.component,u=o.em,f=e.partial,c={},h=this.attributes.setValue;if(h){h({value:t,component:s,editor:u?.getEditor(),trait:this,partial:!!f,options:e,emitUpdate:function(){return n.targetUpdated()}});return}f&&(c.avoidStore=!0),this.setTargetValue(t,c)},r.prototype.getDefault=function(){return this.get("default")},r.prototype.getOptions=function(){return this.get("options")||[]},r.prototype.getOption=function(t){var e=this,n=(0,Ot.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===n})[0]},r.prototype.getOptionId=function(t){return t.id||t.value},r.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var o=e.locale,s=o===void 0?!0:o,u=(0,k.isString)(t)?this.getOption(t):t,f=this.getOptionId(u),c=u.label||u.name||f,h=this.getName();return s&&((n=this.em)===null||n===void 0?void 0:n.t("traitManager.traits.options.".concat(h,".").concat(f)))||c},r.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var e=this,n=e.em,o=e.category,s=t.locale,u=s===void 0?!0:s,f=o?.getId(),c=o?.getLabel();return u&&n?.t("traitManager.categories.".concat(f))||c||""},r.prototype.runCommand=function(){var t=this.em,e=this.attributes.command;if(e&&t)return(0,k.isString)(e)?t.Commands.run(e):e(t.Editor,this)},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var t=this,e=t.component,n=t.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var s={trait:this,component:e,value:o};e.trigger(gf.value,s),n?.trigger(gf.value,s),n?.trigger("trait:update",s)},r.prototype.getTargetValue=function(t){var e;t===void 0&&(t={});var n=this,o=n.component,s=n.em,u=this.getName(),f=this.get("getValue"),c,h=t.skipResolve;if(f?c=f({editor:s?.getEditor(),trait:this,component:o}):this.changeProp?(c=o.get(u),h&&(c=o.dataResolverWatchers.getValueOrResolver("props",(e={},e[u]=c,e))[u])):c=o.getAttributes({skipResolve:h})[u],t.useType){var g=this.getType();if(g==="checkbox"){var m=this.attributes,y=m.valueTrue,w=m.valueFalse;!(0,k.isUndefined)(y)&&y===c?c=!0:!(0,k.isUndefined)(w)&&w===c&&(c=!1)}}return(0,k.isUndefined)(c)?"":c},r.prototype.setTargetValue=function(t,e){var n;e===void 0&&(e={});var o=this,s=o.component,u=o.attributes,f=this.getName();if(!(0,k.isUndefined)(t)){var c=t;if(t==="false"?c=!1:t==="true"&&(c=!0),this.getType()==="checkbox"){var h=u.valueTrue,g=u.valueFalse;c&&!(0,k.isUndefined)(h)&&(c=h),!c&&!(0,k.isUndefined)(g)&&(c=g)}var m=(n={},n[f]=c,n);m.__p=e.avoidStore?null:void 0,this.changeProp?s.set(m,e):s.addAttributes(m,e)}},r.prototype.setValueFromInput=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var o={value:t};this.set(o,jl(jl({},n),{avoidStore:1})),e&&(this.set("value","",n),this.set(o,n))},r.prototype.getInitValue=function(){var t=this.component,e=this.getName(),n;if(t){var o=t.get("attributes");n=this.changeProp?t.get(e):o[e]}return n||this.get("value")||this.get("default")},r})(Ht.Kx);const Rl=V0;var F0=(function(){function i(r){r===void 0&&(r={}),this.config=r}return i.prototype.build=function(r,t){return(0,k.isString)(r)?this.buildFromString(r,t):new Rl(r,t)},i.prototype.buildFromString=function(r,t){var e={name:r,type:"text"};switch(r){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new Rl(e,t)},i})();const N0=F0;var H0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),U0=(function(i){H0(r,i);function r(t,e){var n=i.call(this,t)||this;n.categories=new Ll;var o=e.em;n.em=o,n.categories=new Ll([],{em:o,events:{update:gf.categoryUpdate}}),n.on("add",n.handleAdd),n.on("reset",n.handleReset);var s=n.module,u=s?.getConfig();return n.tf=new N0(u),n}return Object.defineProperty(r.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),r.prototype.getCategories=function(){return this.categories},r.prototype.handleReset=function(t,e){var n=e===void 0?{}:e,o=n.previousModels,s=o===void 0?[]:o;s.forEach(function(u){return u.trigger("remove")})},r.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e),this.initCategory(t)},r.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},r.prototype.add=function(t,e){if(t!=null){var n=this,o=n.target,s=n.em;if((0,k.isArray)(t)){for(var u=[],f=0,c=t.length;f<c;f++){var h=t[f];u[f]=h instanceof Rl?h:this.tf.build(h,s),u[f].setTarget(o)}return i.prototype.add.call(this,u,e)}var g=t instanceof Rl?t:this.tf.build(t,s);return g.setTarget(o),i.prototype.add.call(this,g,e)}},r})(Tv);const Vl=U0;var B0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ur=function(){return Ur=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ur.apply(this,arguments)},xl=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},Tc=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},ia=function(i,r){if(r===void 0&&(r=[]),!i)return[];var t=(0,k.isArray)(i)||(0,k.isFunction)(i.map)?i:[i];return t.map(function(e){r.push(e.getId()),ia(e.components().models,r)}),r},Ev=function(i,r,t){r===void 0&&(r={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,n=t.updateOptions||{},o=(0,k.isArray)(i)?i:[i];return o.map(function(s){var u=s.attributes,f=u===void 0?{}:u,c=s.components,h=s.tagName,g=s.style,m=f.id;f.draggable;var y=xl(f,["id","draggable"]),w=s;if(m){if(e[m])e[m].push(w),m=ir.getNewId(r),w.attributes.id=m;else if(e[m]=[],r[m]){w=r[m];var C=n.onAttributes,x=n.onStyle,E=w;h&&E.set({tagName:h},Ur(Ur({},t),{silent:!0})),C?C({item:s,component:E,attributes:y,options:t}):(0,k.keys)(y).length&&E.addAttributes(y,Ur({},t)),x?x({item:s,component:E,style:g,options:t}):(0,k.keys)(g).length&&E.addStyle(g,t)}}var N=(0,k.isFunction)(w.components)?w:null;if(c){var L=Ev(c,r,t);N?N.components().reset(L,t):w.components=L}else N&&N.components().reset([],t);return w})},W0=(function(i){B0(r,i);function r(t,e){var n=i.call(this,t,e)||this;n.opt=e,n.listenTo(n,"add",n.onAdd),n.listenTo(n,"remove",n.removeChildren),n.listenTo(n,"reset",n.resetChildren);var o=e.em,s=e.config;return n.config=s,n.em=o,n.domc=e.domc||o?.Components,n}return Object.defineProperty(r.prototype,"events",{get:function(){var t;return(t=this.domc)===null||t===void 0?void 0:t.events},enumerable:!1,configurable:!0}),r.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var o=this,s=e.previousModels||[],u=s.filter(function(h){return!t.get(h.cid)}),f=ia(t),c=ia(s).filter(function(h){return f.indexOf(h)>=0});e.keepIds=(e.keepIds||[]).concat(c),u.forEach(function(h){return n.removeChildren(h,o,e)}),t.each(function(h){return n.onAdd(h)})},r.prototype.resetFromString=function(t,e){var n,o;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=ia(this);var s=this,u=s.domc,f=s.em,c=s.parent,h=u?.allById()||{},g=this.parseString(t,Ur(Ur({},e),{cloneRules:!0})),m=Ur({skipViewUpdate:!0},e),y=Ev(g,h,m);r.cloneCssRules(f,m.visitedCmps),this.reset(y,e),f?.trigger("component:content",c,e,t),(o=(n=c).__checkInnerChilds)===null||o===void 0||o.call(n)},r.prototype.removeChildren=function(t,e,n){var o=this;if(n===void 0&&(n={}),!!t){var s=this,u=s.domc,f=s.em,c=n.temporary||n.fromUndo;if(t.prevColl=this,!c){var h=t.getId(),g=f.Selectors.getAll(),m=f.Css.getAll(),y=(n.keepIds||[]).indexOf(h)<0,w=u?u.allById():{};delete w[h];var C=y?m.remove(m.filter(function(L){return L.getSelectors().getFullString()==="#".concat(h)}),n):[];g.remove(C.map(function(L){return L.getSelectors().at(0)})),t.opt.temporary||(f.Commands.run("core:component-style-clear",{target:t}),t.views.forEach(function(L){L.scriptContainer&&t.emitWithEditor(je.I.scriptUnmount,{component:t,view:L,el:L.el})}),t.removed(),t.trigger("removed"),f.trigger(je.I.remove,t),u&&kl(t)&&Ti(t)&&u.symbols.__trgEvent(u.events.symbolInstanceRemove,{component:t},!0));var x=t.components();x.forEach(function(L){gv(L,L,x,Ur(Ur({},n),{skipRefsUp:!0})),o.removeChildren(L,e,n)})}var E=t.components();if(f.stopListening(E),f.stopListening(t),f.stopListening(t.get("classes")),t.__postRemove(),!t.opt.temporary){var N=function(L){L.emitWithEditor(je.I.removed,L,{removeOptions:n}),L.components().forEach(function(H){return N(H)})};N(t)}}},r.prototype.model=function(t,e){var n=e.collection.opt,o=n.em,s,u=o.Components.componentTypes;e.em=o,e.config=n.config,e.componentTypes=u,e.domc=n.domc;for(var f=0;f<u.length;f++){var c=u[f].id;if(c==t.type){s=u[f].model;break}}return s||(s=u[u.length-1].model,o&&t.type&&o.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new s(t,e)},r.prototype.parseString=function(t,e){e===void 0&&(e={});var n=this,o=n.em,s=n.domc,u=n.parent,f=u?.is("wrapper"),c=e.asDocument&&f,h=o.Css,g=o.Parser.parseHtml(t,Ur({asDocument:c},e.parserOptions)),m=g.html;if(f&&g.doctype){var y=u,w=g.html||{},C=w.components,x=C===void 0?[]:C,E=xl(w,["components"]),N=g.head||{},L=N.components,H=xl(N,["components"]);m=x,y.set(E,e),y.head.set(H,e),y.head.components(L,e),y.docEl.set(g.root,e),y.set({doctype:g.doctype})}var rt=ir.checkId(m,g.css,s.componentsById,e);if(e.cloneRules&&r.cloneCssRules(o,rt.updatedIds),g.css&&h&&!e.temporary){e.at;var nt=xl(e,["at"]);h.addCollection(g.css,Ur(Ur({},nt),{extend:1}))}return m},r.prototype.add=function(t,e){var n=this;if(e===void 0&&(e={}),t!=null){e.keepIds=Tc(Tc([],e.keepIds||[],!0),ia(e.previousModels),!0),(0,k.isString)(t)?t=this.parseString(t,e):(0,k.isArray)(t)&&(t=Tc([],t,!0),t.forEach(function(s,u){if((0,k.isString)(s)){var f=n.parseString(s,e);t[u]=(0,k.isArray)(f)&&!f.length?null:f}}));var o=((0,k.isArray)(t)?t:[t]).filter(Boolean).map(function(s){return n.processDef(s)});return t=(0,k.isArray)(t)?(0,k.flatten)(o,1):o[0],i.prototype.add.call(this,t,e)}},r.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,n=e.em,o=e.config,s=o===void 0?{}:o,u=s.processor,f=t;if(u){f=Ur({},f);var c=u(f);c&&((0,k.each)(f,function(x,E){return delete f[E]}),(0,k.extend)(f,c))}if(f.$$typeof&&typeof f.props=="object"){f=Ur({},f),f.props=Ur({},f.props);var h=n.Components,g=n.Parser,m=g.parserHtml;(0,k.each)(f,function(x,E){(0,k.includes)(["props","type"],E)||delete f[E]});var y=f.props,w=y.children;delete y.children,delete f.props;var C=m.splitPropsFromAttr(y);f.attributes=C.attrs,w&&(f.components=w),f.type?h.getType(f.type)||(f.tagName=f.type,delete f.type):f.type="textnode",(0,k.extend)(f,C.props)}return f},r.prototype.onAdd=function(t,e,n){n===void 0&&(n={});var o=this,s=o.domc,u=o.em,f=u.config.avoidInlineStyle;if(s&&s.Component.ensureInList(t),!f&&u.config.forceClass&&!n.temporary){var c=t.getStyle();if(!(0,k.isEmpty)(c)){var h=t.cid;u.Css.setClassRule(h,c),t.setStyle({}),t.addClass(h)}}if(t.__postAdd({recursive:!0}),u&&!n.temporary){var g=function(m){u.trigger(je.I.add,m,n),m.components().forEach(function(y){return g(y)})};g(t),s&&kl(t)&&Ti(t)&&s.symbols.__trgEvent(s.events.symbolInstanceAdd,{component:t},!0)}},r.cloneCssRules=function(t,e){e===void 0&&(e={});var n=t.Css;Object.keys(e).forEach(function(o){var s=e[o];if(s.length){var u=(n.getRules("#".concat(o))||[]).filter(function(c){return!(0,k.isEmpty)(c.attributes.style)});if(u.length){var f=n.getAll();s.forEach(function(c){u.forEach(function(h){var g=h.clone();g.set("selectors",["#".concat(c.attributes.id)]),f.add(g)})})}}})},r})(Ht.pM);const Ps=W0;var z0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),He=function(){return He=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},He.apply(this,arguments)},K0=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},kn=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Wp=function(i){return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},mi=function(i){return!!i?.getConfig().avoidInlineStyle},Jf="component:drag",Zr="__symbols",vn="__symbol",xi="__symbol_ovrd",Ol=je.I.update,mf=je.I.updateInside,G0=(function(i){z0(r,i);function r(t,e){t===void 0&&(t={});var n=this,o=e.em;n=i.call(this,t,e)||this,(0,k.bindAll)(n,"__upSymbProps","__upSymbCls","__upSymbComps","syncOnComponentChange");var s=n.parent(),u=s?.attributes,f=n.get("propagate");if(f&&n.set("propagate",(0,k.isArray)(f)?f:[f]),u&&u.propagate&&!f){var c={},h=u.propagate;h.forEach(function(E){return c[E]=s.get(E)}),c.propagate=h,n.set(He(He({},c),t))}e&&e.config&&e.config.voidElements.indexOf(n.get("tagName"))>=0&&n.set("void",!0),e.em=o,n.opt=e,n.em=o,n.config=e.config||{};var g=He(He({},(0,k.result)(n,"defaults").attributes||{}),n.get("attributes")||{}),m=n.dataResolverWatchers.getValueOrResolver("attributes",g);if(n.setAttributes(m),n.ccid=r.createId(n,e),n.preInit(),n.initClasses(),n.initComponents(),n.initTraits(),n.initToolbar(),n.initScriptProps(),n.listenTo(n,"change:script",n.scriptUpdated),n.listenTo(n,"change:tagName",n.tagUpdated),n.listenTo(n,"change:attributes",n.attrUpdated),n.listenTo(n,"change:attributes:id",n._idUpdated),n.on("change:toolbar",n.__emitUpdateTlb),n.on("change",n.__onChange),n.on(mf,n.__propToParent),n.set("status",""),n.views=[],["classes","traits","components"].forEach(function(E){var N="add remove reset ".concat(E!=="components"?"change":"");n.listenTo(n.get(E),N.trim(),function(){for(var L=[],H=0;H<arguments.length;H++)L[H]=arguments[H];return n.emitUpdate.apply(n,kn([E],L,!1))})}),!e.temporary){var y=o&&o.Css,w=n.attributes,C=w.styles,x=w.type;C&&y&&y.addCollection(C,{avoidUpdateStyle:!0},{group:"cmp:".concat(x)}),n._moveInlineStyleToRule(),n.__postAdd(),n.init(),ro(n)&&is(n),o?.trigger(je.I.create,n,e)}return mi(o)&&n.dataResolverWatchers.disableStyles(),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},t[vn]=0,t[Zr]=0,t[xi]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"page",{get:function(){var t;return(t=this.frame)===null||t===void 0?void 0:t.getPage()},enumerable:!1,configurable:!0}),r.prototype.getType=function(){return this.get("type")||"default"},r.prototype.preInit=function(){},r.prototype.init=function(){},r.prototype.updated=function(t,e,n){},r.prototype.removed=function(){},r.prototype.onCollectionsStateMapUpdate=function(t){var e;i.prototype.onCollectionsStateMapUpdate.call(this,t),(e=this._getStyleRule())===null||e===void 0||e.onCollectionsStateMapUpdate(t);var n=this.components();n.forEach(function(o){return o.onCollectionsStateMapUpdate(t)})},r.prototype.syncComponentsCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.listenTo(this.components(),"add remove reset",this.syncOnComponentChange),this.components().forEach(function(t){return t.syncComponentsCollectionState()})},r.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.collectionsStateMap={},this.components().forEach(function(t){return t.stopSyncComponentCollectionState()})},r.prototype.syncOnComponentChange=function(t,e,n){var o=this;if(!(!this.collectionsStateMap||!Object.keys(this.collectionsStateMap).length)){var s=n||e||{};if(n)if(s.add){var f=t;f.syncComponentsCollectionState(),f.onCollectionsStateMapUpdate(this.collectionsStateMap)}else{var c=t;c.stopSyncComponentCollectionState()}else{var u=s.previousModels||[];u.forEach(function(h){return h.stopSyncComponentCollectionState()}),this.components().forEach(function(h){h.syncComponentsCollectionState(),h.onCollectionsStateMapUpdate(o.collectionsStateMap)})}}},r.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,n=e?.UndoManager,o=this.components();n&&!this.__hasUm&&(n.add(o),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map(function(s){return s.__postAdd(t)})},r.prototype.__postRemove=function(){var t=this.em,e=t?.UndoManager;e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(t,e){var n=this,o=this.changedAttributes()||{};(0,k.keys)(o).forEach(function(s){return n.emitUpdate(s)}),["status","open","toolbar","traits"].forEach(function(s){return delete o[s]}),(0,Ot.isEmptyObj)(o)||(this.__changesUp(e,{changed:o}),this.__propSelfToParent({component:this,changed:o,options:e}))},r.prototype.__onStyleChange=function(t,e){var n=this,o=this,s=o.collectionsStateMap,u=o.em;if(!(!u||e?.noEvent)){var f=(0,k.keys)(t),c={style:t};this.emitWithEditor(je.I.styleUpdate,this,c),f.forEach(function(y){return n.emitWithEditor("".concat(je.I.styleUpdateProperty).concat(y),n,c)});var h=Object.keys(s).filter(function(y){return y!==Ss.rootData});if(h.length!==0){var g=h.every(function(y){var w=s[y];return w.currentIndex===w.startIndex});if(g){var m=xo(this);m.forEach(function(y){var w=y.collectionsStateMap,C=Object.keys(w),x=C.every(function(E){return h.includes(E)});x&&y.addStyle(He({},t),{noEvent:!0})})}}}},r.prototype.__changesUp=function(t,e){var n=this;e===void 0&&(e={});var o=this,s=o.em,u=o.frame;[u,s].forEach(function(f){f?.changesUp(t,He({component:n,options:t},e))})},r.prototype.__propSelfToParent=function(t){this.trigger(Ol,t),this.__propToParent(t)},r.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(mf,t)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},r.prototype.__upSymbProps=function(t,e){e===void 0&&(e={}),u0(this,e)},r.prototype.__upSymbCls=function(t,e,n){n===void 0&&(n={}),h0(this,n)},r.prototype.__upSymbComps=function(t,e,n){gv(this,t,e,n)},r.prototype.__onDestroy=function(){},r.prototype.is=function(t){return this.get("type")==t},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.getDragMode=function(){return this.get("dmode")||""},r.prototype.setSymbolOverride=function(t,e){var n,o;e===void 0&&(e={}),this.set((n={},n[xi]=(o=(0,k.isString)(t)?[t]:t)!==null&&o!==void 0?o:0,n),e)},r.prototype.getSymbolOverride=function(){return this.get(xi)},r.prototype.find=function(t){var e,n=[],o=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return o?.each(function(s){var u=o.eq(s),f=u.data("model");f&&n.push(f)}),n},r.prototype.findType=function(t){var e=[],n=function(o){return o.forEach(function(s){s.is(t)&&e.push(s),n(s.components())})};return n(this.components()),e},r.prototype.findFirstType=function(t){return this.findType(t).at(0)},r.prototype.closest=function(t){var e,n=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return n?.length?n.data("model"):void 0},r.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},r.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(o){!e&&o.forEach(function(s){s===t&&(e=!0),!e&&n(s.components())})};return n(this.components()),e},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(t,e){e===void 0&&(e={});var n=this.collection,o=n.indexOf(this);n.remove(this);var s=n.add(t,He(He({},e),{at:o}));return(0,k.isArray)(s)?s:[s]},r.prototype.attrUpdated=function(t,e,n){var o=this;n===void 0&&(n={});var s=this.get("attributes"),u=s.class;u&&this.setClass(u),delete s.class;var f=s.style;f&&this.setStyle(f,n),delete s.style;var c=He({},this.previous("attributes")),h=(0,Ot.shallowDiff)(c,this.get("attributes"));(0,k.keys)(h).forEach(function(g){var m,y="attributes:".concat(g);o.trigger("change:".concat(y),o,h[g],n),(m=o.em)===null||m===void 0||m.trigger("".concat(Ol,":").concat(y),o,h[g],n)})},r.prototype.setAttributes=function(t,e){return e===void 0&&(e={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",He({},t),e),this},r.prototype.addAttributes=function(t,e){e===void 0&&(e={});var n=this.dataResolverWatchers.getValueOrResolver("attributes",this.getAttributes({noClass:!0,noStyle:!0}));return this.setAttributes(He(He({},n),t),e)},r.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=Array.isArray(t)?t:[t],o=this.getAttributes();return n.map(function(s){return delete o[s]}),this.setAttributes(o,e)},r.prototype.getStyle=function(t,e){var n=this.em,o=(0,k.isString)(t),s=o?t:"",u=o?e:t,f=!!u?.skipResolve;if(mi(n)&&!u?.inline){var c=n.get("state"),h=n.Css,g=h.getIdRule(this.getId(),He({state:c},u));return this.rule=g,g?g.getStyle(s,{skipResolve:f}):{}}return i.prototype.getStyle.call(this,s,{skipResolve:f})},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={});var o=this,s=o.opt,u=o.em;if(mi(u)&&!s.temporary&&!e.inline){var f=this.get("style")||{};t=(0,k.isString)(t)?this.parseStyle(t):t,t=He(He({},f),t);var c=u.get("state"),h=u.Css,g=this.getStyle(He(He({},e),{skipResolve:!0}));this.rule=h.setIdRule(this.getId(),t,He({state:c},e));var m=(0,Ot.shallowDiff)(g,t);this.set("style","",{silent:!0}),(0,k.keys)(m).forEach(function(y){return n.trigger("change:style:".concat(y))})}else t=i.prototype.setStyle.apply(this,arguments);return s.temporary||this.__onStyleChange(e.addStyle||t,e),t},r.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,n=[],o=He({},this.get("attributes")),s=t?.skipResolve?this.dataResolverWatchers.getValueOrResolver("attributes",o):o,u=e?.Selectors,f=this.getId();if(t.noClass?delete s.class:(this.classes.forEach(function(g){return n.push((0,k.isString)(g)?g:g.getName())}),n.length&&(s.class=n.join(" "))),!t.noStyle){var c=this.getStyle({inline:!0});(0,Ot.isObject)(c)&&!(0,Ot.isEmptyObj)(c)&&(s.style=this.styleToString({inline:!0}))}if(!(0,k.has)(s,"id")){var h=!1;(mi(e)||!(0,k.isEmpty)(this.getStyle()))&&(h=!!u?.get(f,u.Selector.TYPE_ID)),(ro(this)||this.get("script-export")||this.get("script"))&&(h=!0),h&&(s.id=f)}return s},r.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},r.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},r.prototype.removeClass=function(t){var e=[];t=(0,k.isArray)(t)?t:[t];var n=this.classes,o=en.TYPE_CLASS;return t.forEach(function(s){var u=s.split(" ");u.forEach(function(f){var c=n.where({name:f,type:o})[0];c&&e.push(n.remove(c))})}),e},r.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},r.prototype.initClasses=function(t,e,n){n===void 0&&(n={});var o="change:classes",s=this.get("attributes")||{},u=s.class,f=K0(s,["class"]),c=[this,o,this.initClasses],h=this.get("classes")||u||[],g=(0,k.isString)(h)?h.split(" "):h;this.stopListening.apply(this,c);var m=this.normalizeClasses(g),y=new Qo([]);return this.set("classes",y,n),y.add(m),y.on("add remove reset",this.__upSymbCls),u&&m.length&&this.set("attributes",f),this.listenTo.apply(this,c),this},r.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var n=new Ps([],this.opt);n.parent=this;var o=this.get("components"),s=!this.opt.avoidChildren;return this.set("components",n),s&&o&&n.add((0,k.isFunction)(o)?o(this):o,this.opt),n.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},r.prototype.initTraits=function(t){var e=this,n=this.em,o="change:traits";this.off(o,this.initTraits),this.__loadTraits();var s=He({},this.get("attributes")),u=this.traits;u.each(function(c){var h=c.getName(),g=c.getInitValue();c.changeProp?(0,k.isUndefined)(e.get(h))&&e.set(h,g):h&&g&&(s[h]=g)});var f=this.dataResolverWatchers.getValueOrResolver("attributes",s);return u.length&&this.setAttributes(f),this.on(o,this.initTraits),t&&n&&n.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],o=this.get(t)||[],s=n.map(function(f){return"change:".concat(f)}).join(" "),u=o.map(function(f){return"change:".concat(f)}).join(" ");s&&this.off(s,this.__scriptPropsChange),u&&this.on(u,this.__scriptPropsChange),this.on.apply(this,e)}},r.prototype.__scriptPropsChange=function(t,e,n){n===void 0&&(n={}),!n.avoidStore&&this.trigger("rerender")},r.prototype.append=function(t,e){e===void 0&&(e={});var n=(0,k.isArray)(t)?kn([],t,!0):[t],o=n.map(function(u){return(0,k.isString)(u)||u.collection&&u.collection.remove(u,{temporary:!0}),u}),s=this.components().add(o,He({action:je.t.add},e));return s},r.prototype.components=function(t,e){e===void 0&&(e={});var n=this.get("components");return(0,k.isUndefined)(t)?n:(n.reset(void 0,e),t?this.append(t,e):[])},r.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},r.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},r.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},r.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},r.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var o=[];e.collection&&o.push({label:t.getIcon("arrowUp"),command:function(s){return s.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&o.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&o.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&o.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",o)}},r.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var n=t||this.traits;if(!(n instanceof Vl)){n=(0,k.isFunction)(n)?n(this):n;var o=new Vl([],this.opt);o.setTarget(this),n.length&&o.add(n),this.set({traits:o},e)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),kn([],this.traits.models,!0)},r.prototype.setTraits=function(t){var e=(0,k.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},r.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},r.prototype.updateTrait=function(t,e){var n,o=this.getTrait(t);return o&&o.set(e),(n=this.em)===null||n===void 0||n.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},r.prototype.removeTrait=function(t){var e=this,n,o=(0,k.isArray)(t)?t:[t],s=o.map(function(c){return e.getTrait(c)}),u=this.traits,f=s.length?u.remove(s):[];return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,k.isArray)(f)?f:[f]},r.prototype.addTrait=function(t,e){var n;e===void 0&&(e={}),this.__loadTraits();var o=this.traits.add(t,e);return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,k.isArray)(o)?o:[o]},r.prototype.normalizeClasses=function(t){var e=[],n=this.em,o=n?.Selectors;return o?t.models?kn([],t.models,!0):(t.forEach(function(s){return e.push(o.add(s))}),e):[]},r.prototype.clone=function(t){var e;t===void 0&&(t={});var n=this.em,o=this.dataResolverWatchers.getProps(this.attributes),s=He({},this.opt),u=this.getId(),f=n?.Css;o.components=[],o.classes=[],o.traits=[],Ti(this)&&(t.symbol=!0),this.get("components").each(function(x,E){o.components[E]=x.clone(He(He({},t),{_inner:1}))}),this.get("traits").each(function(x,E){o.traits[E]=x.clone()}),this.get("classes").each(function(x,E){o.classes[E]=x.get("name")}),o.status="",s.collection=null,s.forCloning=!0;var c=new this.constructor(o,s),h="#".concat(c.getId()),g=f?f.getRules("#".concat(u)):[];g.forEach(function(x){var E=x.clone();E.set("selectors",[h]),f.getAll().add(E)}),c.set(Zr,0);var m=Wn(this),y=yn(this);if(!t.symbol&&(m||y))c.set(vn,0),c.set(Zr,0);else if(m){var w=(e=yn(m))!==null&&e!==void 0?e:[];m.set(Zr,kn(kn([],w,!0),[c],!1)),is(c)}else t.symbol&&(Si(this)?(this.set(Zr,kn(kn([],y,!0),[c],!1)),c.set(vn,this),is(c)):t.symbolInv?(this.set(Zr,[c]),c.set(vn,this),[this,c].map(function(x){return is(x)})):(c.set(Zr,[this]),[this,c].map(function(x){return is(x)}),this.set(vn,c)));var C="component:clone";return n&&n.trigger(C,c),this.trigger(C,c),c},r.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,n=this.attributes,o=n.type,s=n.tagName,u=n.name,f=o||s,c=o?"":s,h="domComponents.names.",g=u&&e?.t("".concat(h).concat(u)),m=c&&e?.t("".concat(h).concat(c)),y=e&&(e.t("".concat(h).concat(o))||e.t("".concat(h).concat(s))),w=this.get("custom-name");return(t.noCustom?"":w)||g||u||m||(0,Ot.capitalize)(c)||y||(0,Ot.capitalize)(f)},r.prototype.setName=function(t,e){e===void 0&&(e={}),this.set("custom-name",t,e)},r.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},r.prototype.toHTML=function(t){t===void 0&&(t={});var e=t.tag,n=e||this.get("tagName");delete t.tag;var o=this.__attrToString(t),s=o?" ".concat(o):"",u=this.getInnerHTML(t),f=!u&&this.get("void"),c="<".concat(n).concat(s).concat(f?"/":"",">").concat(u);return!f&&(c+="</".concat(n,">")),c},r.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},r.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(n){return n.toHTML(t)}).join(""):this.content},r.prototype.__attrToString=function(t){t===void 0&&(t={});var e=[],n=t.attributes,o=this.getAttrToHTML(t);if(n&&((0,k.isFunction)(n)?o=n(this,o)||{}:(0,Ot.isObject)(n)&&(o=n)),t.withProps){var s=this.toJSON();(0,k.forEach)(s,function(g,m){var y=["classes","attributes","components"];m[0]!=="_"&&y.indexOf(m)<0&&(o["data-gjs-".concat(m)]=(0,k.isArray)(g)||(0,Ot.isObject)(g)?JSON.stringify(g):(0,k.isBoolean)(g)?"".concat(g):g)})}for(var u in o){var f=o[u];if(!(0,k.isUndefined)(f)&&f!==null)if((0,k.isBoolean)(f))f&&e.push(u);else{var c="";if(t.altQuoteAttr&&(0,k.isString)(f)&&f.indexOf('"')>=0)c="'".concat((0,Ot.escapeAltQuoteAttrValue)(f),"'");else{var h=(0,k.isString)(f)?(0,Ot.escapeAttrValue)(f):f;c='"'.concat(h,'"')}e.push("".concat(u,"=").concat(c))}}return e.join(" ")},r.prototype.getAttrToHTML=function(t){var e=this.getAttributes();return mi(this.em)&&t?.keepInlineStyle!==!0&&delete e.style,e},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=i.prototype.toJSON.call(this,t,{attributes:this.getAttributes()});if(delete e.dataResolverWatchers,delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,delete e.delegate,this.collectionsStateMap&&Object.getOwnPropertyNames(this.collectionsStateMap).length>0&&(delete e[vn],delete e[xi],delete e[Zr]),!t.fromUndo){var n=e[vn],o=e[Zr];o&&(0,k.isArray)(o)&&(e[Zr]=o.filter(function(s){return s}).map(function(s){return s.getId?s.getId():s})),n&&!(0,k.isString)(n)&&(e[vn]=n.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},r.prototype.getChangedProps=function(t){var e=t||Yf.Model.prototype.toJSON.apply(this),n=(0,k.result)(this,"defaults");return(0,k.forEach)(n,function(o,s){["type"].indexOf(s)===-1&&e[s]===o&&delete e[s]}),(0,k.isEmpty)(e.type)&&delete e.type,(0,k.forEach)(["attributes","style"],function(o){(0,k.isEmpty)(n[o])&&(0,k.isEmpty)(e[o])&&delete e[o]}),(0,k.forEach)(["classes","components"],function(o){(!e[o]||(0,k.isEmpty)(n[o])&&!e[o].length)&&delete e[o]}),e},r.prototype.getId=function(){var t=this.get("attributes")||{},e=w0(this),n=e.shouldSync,o=e.itemId;return n&&(t.id=o),t.id||this.ccid||this.cid},r.prototype.setId=function(t,e){return this.addAttributes({id:t},e),this},r.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},r.prototype.getView=function(t){var e=this,n=e.view,o=e.views,s=e.em,u=t||s?.getCurrentFrameModel();return u&&(n=o.filter(function(f){return f.frameView===u.view})[0]),n},r.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t?.model;return this.getView(e)},r.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(n,o){return n[o]=t[o],n},{})},r.prototype.getScriptString=function(t){var e=this,n=t||this.get("script")||"";if(!n)return n;if(this.get("script-props"))n=n.toString().trim();else{if((0,k.isFunction)(n)){var o=n.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),n=o.trim()}var s=this.em.getConfig(),u=Wp(s.tagVarStart||"{[ "),f=Wp(s.tagVarEnd||" ]}"),c=new RegExp("".concat(u,"([\\w\\d-]*)").concat(f),"g");n=n.replace(c,function(h,g){e.scriptUpdated();var m=e.attributes[g]||"";return(0,k.isArray)(m)||typeof m=="object"?JSON.stringify(m):m})}return n},r.prototype.emitUpdate=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=this.em,u=Ol+(t?":".concat(t):""),f=t&&this.get(t);t&&this.updated.apply(this,kn([t,f,t&&this.previous(t)],n,!1)),this.trigger.apply(this,kn([u],n,!1)),s&&s.trigger.apply(s,kn([u,this],n,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=f,e),options:n[2]||n[1]||{}})},r.prototype.emitWithEditor=function(t,e,n){[this.em,this].forEach(function(o){return o?.trigger(t,e,n)})},r.prototype.onAll=function(t){return(0,k.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},r.prototype.forEachChild=function(t){(0,k.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},r.prototype.remove=function(t){var e=this;t===void 0&&(t={});var n=this.em,o=this.collection,s=function(){o&&o.remove(e,He({action:je.t.remove},t)),o||(e.components("",t),e.components().removeChildren(e,void 0,t))},u=He({},t);return[this,n].map(function(f){return f.trigger(je.I.removeBefore,e,s,u)}),!u.abort&&s(),this},r.prototype.destroy=function(t){return this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.dataResolverWatchers.destroy(),this.__onDestroy(),i.prototype.destroy.call(this,t)},r.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var n=e.at,o=this.index(),s=t===this.parent(),u=o===n||o===n-1;if(!s||!u){s&&n&&n>o&&(e.at=n-1);var f=je.t.move;this.remove({action:f,temporary:1}),t.append(this,He({action:f},e)),this.emitUpdate()}}return this},r.prototype.isInstanceOf=function(t){var e,n,o=(n=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||n===void 0?void 0:n.model;if(!o)return!1;var s=this.constructor.typeExtends;return this instanceof o||s.has(t)},r.prototype.isChildOf=function(t){for(var e=(0,k.isString)(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1},r.prototype.resetId=function(t){var e=this.em,n=this.getId();if(!n)return this;var o=r.createId(this);this.setId(o);var s=e?.Css.getIdRule(n),u=s?.get("selectors").at(0);return u?.set("name",o),this},r.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,n=e.id,o=this.em,s=n||this.getId();return o?.Css.getIdRule(s)},r.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e?.get("selectors").at(0)},r.prototype._moveInlineStyleToRule=function(){var t=this.get("style"),e=(0,k.isString)(t)&&t.length>0||(0,Ot.isObject)(t)&&Object.keys(t).length>0;mi(this.em)&&e&&this.addStyle((0,Ot.isObject)(t)?this.dataResolverWatchers.getValueOrResolver("styles",t):t,{avoidStore:!0,noUndo:!0})},r.prototype._idUpdated=function(t,e,n){if(n===void 0&&(n={}),!n.idUpdate){var o=this.ccid,s=(this.get("attributes")||{}).id,u=(this.previous("attributes")||{}).id||o,f=r.getList(this);if(f[s]||!s&&u)return this.setId(u,{idUpdate:!0});delete f[u],f[s]=this,this.ccid=s;var c=this._getStyleSelector({id:u});c&&c.set({name:s,label:s})}},r.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},r.isComponent=function(t,e){return{tagName:(0,Ot.toLowerCase)(t.tagName)}},r.ensureInList=function(t){var e=r.getList(t),n=t.getId(),o=e[n];if(!o)e[n]=t;else if(o!==t){var s=r.getIncrementId(n,e);t.setId(s),e[s]=t}t.components().forEach(function(u){return r.ensureInList(u)})},r.createId=function(t,e){e===void 0&&(e={});var n=r.getList(t),o=e.idMap,s=o===void 0?{}:o,u=t.get("attributes").id,f;return u?(f=r.getIncrementId(u,n,e),t.setId(f),u!==f&&(s[u]=f)):f=r.getNewId(n),n[f]=t,f},r.getNewId=function(t){for(var e=Object.keys(t).length,n=e.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-n),s="i".concat(o);t[s];)s=r.getNewId(t);return s},r.getIncrementId=function(t,e,n){n===void 0&&(n={});var o=n.keepIds,s=o===void 0?[]:o,u=1,f=t;if(s.indexOf(t)<0)for(;e[f];)u++,f="".concat(t,"-").concat(u);return f},r.getList=function(t){var e,n=t.em,o=n?.Components;return(e=o?.componentsById)!==null&&e!==void 0?e:{}},r.checkId=function(t,e,n,o){e===void 0&&(e=[]),n===void 0&&(n={}),o===void 0&&(o={}),o.updatedIds=o.updatedIds||{};var s=(0,k.isArray)(t)?t:[t],u=o.keepIds,f=u===void 0?[]:u,c=o.idMap,h=c===void 0?{}:c,g=o.updatedIds;return s.forEach(function(m){m.attributes;var y=m.attributes,w=y===void 0?{}:y,C=m.components,x=w.id;if(x&&n[x]&&f.indexOf(x)<0){var E=r.getIncrementId(x,n);g[x]=g[x]?kn(kn([],g[x],!0),[m],!1):[m],h[x]=E,w.id=E,(0,k.isArray)(e)&&e.forEach(function(N){var L=N.selectors;L.forEach(function(H,rt){H==="#".concat(x)&&(L[rt]="#".concat(E))})})}C&&r.checkId(C,e,n,o)}),{updatedIds:o.updatedIds}},r.typeExtends=new Set,r})(bv);const ir=G0;var $0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Fl=function(){return Fl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Fl.apply(this,arguments)},ba="head",q0=["title","style","base","link","meta","script","noscript"],Y0=(function(i){$0(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Fl(Fl({},i.prototype.defaults),{type:ba,tagName:ba,draggable:!1,highlightable:!1,droppable:(function(t){var e=t.tagName;return!e||q0.includes((0,Ot.toLowerCase)(e))})})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===ba},r})(ir);const X0=Y0;var J0=(function(){function i(r,t){r===void 0&&(r=50);var e;this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=r,this.lastMaxHeight=(e=t?.lastMaxHeight)!==null&&e!==void 0?e:0,this.onScroll=t?.onScroll,this.rectIsInScrollIframe=!!t?.rectIsInScrollIframe,(0,k.bindAll)(this,"start","autoscroll","updateClientY","stop")}return i.prototype.start=function(r,t,e){var n=this;this.eventEl=r,this.scrollEl=t,this.lastMaxHeight=e?.lastMaxHeight||Number.POSITIVE_INFINITY,this.zoom=e?.zoom||1,this.ignoredElement=e?.ignoredElement,setTimeout(function(){n.toggleAutoscrollFx(!0),requestAnimationFrame(n.autoscroll)},0)},i.prototype.autoscroll=function(){var r=this,t,e,n=this.scrollEl;if(!(!this.dragging||!n)){if(this.lastClientY===void 0){setTimeout(function(){requestAnimationFrame(r.autoscroll)},50);return}var o=(t=this.lastClientY)!==null&&t!==void 0?t:0,s=this.autoscrollLimit,u=this.getEventElHeight(),f=u-s,c=0;o<s&&(c+=o-s),o>f&&(c+=o-f);var h=this.getElScrollTop(n);c=Math.min(c,this.lastMaxHeight-h),c=Math.max(c,-h),c!==0&&(n.scrollBy({top:c,behavior:"auto"}),(e=this.onScroll)===null||e===void 0||e.call(this)),requestAnimationFrame(this.autoscroll)}},i.prototype.getEventElHeight=function(){var r=this.eventEl;if(!r)return 0;var t=r.getBoundingClientRect();return t.height},i.prototype.updateClientY=function(r){var t=r.target;if(!(this.ignoredElement&&this.ignoredElement.contains(t))){var e=this.scrollEl;r.preventDefault();var n=this.rectIsInScrollIframe?0:this.getElScrollTop(e);this.lastClientY=(0,Kt.G2)(r).clientY*this.zoom-n}},i.prototype.getElScrollTop=function(r){return(r instanceof HTMLElement?r.scrollTop:r?.scrollY)||0},i.prototype.toggleAutoscrollFx=function(r){this.dragging=r;var t=this.eventEl;if(t){var e=r?"on":"off",n={on:Kt.on,off:Kt.AU};n[e](t,"mousemove dragover",this.updateClientY),n[e](t,"mouseup",this.stop)}},i.prototype.stop=function(){this.toggleAutoscrollFx(!1),this.lastClientY=void 0,this.ignoredElement=void 0},i})();const Av=J0;var Z0=De(1447),Q0=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),t_=(function(i){Q0(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.canMove=function(t,e){var n=this,o=this.getRealIndex(e),s=t._dragSource,u=s.model,f=s.content,c=s.dragDef,h=!u||!this.isSourceSameSymbol(u),g=((0,k.isFunction)(f)?c:f)||t.model;return Array.isArray(g)?h&&g.every(function(m,y){return n.canMoveSingleContent(m,o+y)}):h&&this.canMoveSingleContent(g,o)},r.prototype.canMoveSingleContent=function(t,e){return this.model.em.Components.canMove(this.model,t,e).result},r.prototype.addChildAt=function(t,e){var n=t._dragSource,o=n.content,s=this.isTextNode()&&t.isTextable(),u=(0,k.isFunction)(o)?o():o;return Array.isArray(u)?this.addMultipleChildren(u,e,s):this.addSingleChild(u,e,s)},r.prototype.addSingleChild=function(t,e,n){var o,s,u,f,c;return n?c=(f=(u=(s=(o=this.model)===null||o===void 0?void 0:o.getView)===null||s===void 0?void 0:s.call(o))===null||u===void 0?void 0:u.insertComponent)===null||f===void 0?void 0:f.call(u,t,{action:"add-component"}):c=this.model.components().add(t,{at:this.getRealIndex(e),action:"add-component"}),new this.constructor(c)},r.prototype.addMultipleChildren=function(t,e,n){var o=this,s;return t.forEach(function(u,f){s=o.addSingleChild(u,e+f,n)}),s},r.prototype.isSourceSameSymbol=function(t){if(ro(this.model)){var e=Ts(this.model),n=Si(e)?e:Wn(e);if(n===t)return!0}return!1},Object.defineProperty(r.prototype,"content",{set:function(t){this._dragSource.content=t},enumerable:!1,configurable:!0}),r})(Z0.A);const kv=t_;var Pi=De(8433),yf=function(){return yf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},yf.apply(this,arguments)},e_=(function(){function i(r,t){var e=this;this.em=r,this.canvas=r.Canvas;var n=t||this.canvas.getFrames().map(function(s){return s.getComponent().getEl()}),o=Array.isArray(n)?n:[n];this.el=o[0],this.counter=0,(0,k.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),o.forEach(function(s){return e.toggleEffects(s,!0)})}return i.prototype.toggleEffects=function(r,t){var e={on:Kt.on,off:Kt.AU},n=t?"on":"off";e[n](r,"dragenter",this.handleDragEnter),e[n](r,"dragover",this.handleDragOver),e[n](r,"drop",this.handleDrop),e[n](r,"dragleave",this.handleDragLeave)},i.prototype.__customTglEff=function(r){var t,e=r?Kt.on:Kt.AU,n=this.el.ownerDocument,o=(t=n.defaultView)===null||t===void 0?void 0:t.frameElement,s=function(u){return{legacyOnStartSort:function(){(0,Kt.on)(o,"pointermove",u.onMove)},legacyOnEnd:function(){(0,Kt.AU)(o,"pointermove",u.onMove)},customTarget:function(f){var c=f.event;return n.elementFromPoint(c.clientX,c.clientY)}}};this.getSorterOptions=r?s:void 0,e(o,"pointerenter",this.handleDragEnter),e(o,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(o,"pointerout",this.handleDragLeave)},i.prototype.startCustom=function(){this.__customTglEff(!0)},i.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},i.prototype.endDrop=function(r,t){var e=this,n=e.em,o=e.dragStop;this.counter=0,o&&o(r||!this.over),this.__customTglEff(!1),n.trigger("canvas:dragend",t)},i.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},i.prototype.updateCounter=function(r,t){this.counter+=r,this.counter===0&&this.endDrop(!0,t)},i.prototype.handleDragEnter=function(r){var t=this,e,n,o=this,s=o.em,u=o.canvas,f=r.dataTransfer,c=s.get("dragSource");if(!(!c?.content&&!u.getConfig().allowExternalDrop)&&(this.updateCounter(1,r),!this.over)){this.over=!0;var h=s.Utils,g=c?.content||"<br>",m;if(s.stopDefault(),s.inAbsoluteMode()){var y=s.Components.getWrapper(),w=y.append({})[0],C=s.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:w,onEnd:function(nt,vt,et){var G=et.cancelled,W;if(!G&&g){W=y.append(g)[0];var U=u.getOffset(),D=w.getStyle(),Y=D.top,K=D.left,ct=D.position,M=(0,Kt.Xy)(nt.target),wt=parseInt("".concat(parseFloat(K)+M.x-U.left),10),gt=parseInt("".concat(parseFloat(Y)+M.y-U.top),10);W.addStyle({left:wt+"px",top:gt+"px",position:ct})}t.handleDragEnd(W,f),w.remove()}});m=function(nt){return C.stop(r,{cancel:nt})},this.setAbsoluteDragContent=function(nt){return g=nt}}else{var x=new h.ComponentSorter({em:s,treeClass:kv,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:u.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:Pi.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),E=(e=this.getSorterOptions)===null||e===void 0?void 0:e.call(this,x);E&&(x.eventHandlers.legacyOnStartSort=E.legacyOnStart,x.eventHandlers.legacyOnEnd=E.legacyOnEnd,x.containerContext.customTarget=E.customTarget);var N=s.Components.getShallowWrapper(),L=N?.append(g,{temporary:!0})[0],H=L?.getEl(),rt=[{element:H,dragSource:yf({model:L},c)}];x.startSort(rt),this.sorter=x,this.draggedNode=(n=x.sourceNodes)===null||n===void 0?void 0:n[0],m=function(nt){nt?x.cancelDrag():x.endDrag()}}this.dragStop=m,s.trigger("canvas:dragenter",f,g)}},i.prototype.handleDragEnd=function(r,t){var e=this.em;this.over=!1,r&&(e.set("dragResult",r),e.trigger("canvas:drop",t,r)),e.runDefault({preserveSelected:1})},i.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},i.prototype.handleDrop=function(r){var t;r.preventDefault();var e=r.dataTransfer,n=this.getContentByData(e).content||"";this.draggedNode&&(this.draggedNode.content=n),(t=this.setAbsoluteDragContent)===null||t===void 0||t.call(this,n),this.endDrop(!n,r)},i.prototype.getContentByData=function(r){var t=this.em,e=r?.types||[],n=r?.files||[],o=t.get("dragSource"),s=r?.getData("text")||"";if(n.length){s=[];for(var u=0;u<n.length;u++){var f=n[u],c=f.type.split("/")[0];c=="image"&&s.push({type:c,file:f,attributes:{alt:f.name}})}}else if(o?.content)s=o.content;else if((0,k.indexOf)(e,"text/html")>=0)s=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,k.indexOf)(e,"text/uri-list")>=0)s={type:"link",attributes:{href:s},content:s};else if((0,k.indexOf)(e,"text/json")>=0){var h=r&&r.getData("text/json");h&&(s=JSON.parse(h))}else e.length===1&&e[0]==="text/plain"&&(s="<div>".concat(s,"</div>"));var g={content:s,setContent:function(m){g.content=m}};return t.trigger("canvas:dragdata",r,g),g},i})();const r_=e_;var n_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Hn=function(){return Hn=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Hn.apply(this,arguments)},o_=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},i_=(function(i){n_(r,i);function r(t,e){var n=i.call(this,{model:t})||this;n.dragging=!1,n.loaded=!1,n.lastMaxHeight=0,n.tools={},(0,k.bindAll)(n,"startAutoscroll","stopAutoscroll","_emitUpdate");var o=n.el;n.module._config=Hn(Hn({},n.config||{}),{frameView:n}),n.frameWrapView=e,n.showGlobalTools=(0,k.debounce)(n.showGlobalTools.bind(n),50);var s=n.getCanvasModel();return n.listenTo(t,"change:head",n.updateHead),n.listenTo(s,"change:styles",n.renderStyles),t.view=n,(0,Ot.setViewEl)(o,n),n.autoScroller=new Av(n.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){var u=n.getGlobalToolsEl();u.style.opacity="0",n.showGlobalTools(),n.em.Canvas.spots.refreshDbn()}}),n}return Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.getBoxRect=function(){var t=this,e=t.el,n=t.module,o=n.getCanvasView(),s=n.getCoords(),u=e.getBoundingClientRect(),f=o.getCanvasOffset(),c=o.getViewportDelta(),h=n.getZoomMultiplier(),g=(u.x-f.left-c.x-s.x)*h,m=(u.y-f.top-c.y-s.y)*h,y=u.width*h,w=u.height*h;return{x:g,y:m,width:y,height:w}},r.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],o=[],s=t.head,u=t.previous("head"),f=function(h){return h===void 0&&(h={}),Object.keys(h).sort().map(function(g){return"[".concat(g,'="').concat(h[g],'"]')}).join("")},c=function(h,g,m){h.forEach(function(y){var w=y.tag,C=y.attributes,x=g.some(function(E){return E.tag===w&&f(E.attributes)===f(C)});!x&&m.push(y)})};c(s,u,o),c(u,s,n),n.forEach(function(h){var g,m=e.querySelector("".concat(h.tag).concat(f(h.attributes)));(g=m?.parentNode)===null||g===void 0||g.removeChild(m)}),(0,Kt.af)(e,o)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){var t;return(t=this===null||this===void 0?void 0:this.em.Canvas)===null||t===void 0?void 0:t.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Kt.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,o=e.scrollLeft,s=t.offsetHeight,u=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:s,width:u,scrollTop:n,scrollLeft:o,scrollBottom:n+s,scrollRight:o+u}},r.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},r.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),zn.prototype.remove.apply(this,e),this},r.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal(),ignoredElement:this.em.Canvas.getSpotsEl()})},r.prototype.stopAutoscroll=function(){this.autoScroller.stop()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.render=function(){var t=this,e=t.$el,n=t.ppfx,o=t.em;return e.attr({class:"".concat(n,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},r.prototype.renderScripts=function(){var t=this,e=this,n=e.el,o=e.model,s=e.em,u="frame:load",f={el:n,model:o,view:this},c=this.getCanvasModel(),h=function(g){var m;if(g.length>0){var y=g.shift(),w=(0,Kt.a_)("script",Hn({type:"text/javascript"},(0,k.isString)(y)?{src:y}:y));(m=n.contentDocument)===null||m===void 0||m.head.appendChild(w),w.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(g):w.onerror=w.onload=h.bind(null,g)}else s?.trigger(ps.frameLoadHead,f),t.renderBody(),s?.trigger(ps.frameLoadBody,f),s?.trigger(u,f)};n.onload=function(){var g=t.config.frameContent;if(g){var m=t.getDoc();m.open(),m.write(g),m.close()}f.window=t.getWindow(),s?.trigger("".concat(u,":before"),f),s?.trigger(ps.frameLoad,f),t.renderHead(),h(o_([],c.get("scripts"),!0))}},r.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),n=this.getCanvasModel(),o=function(g){return g===void 0&&(g=[]),g.map(function(m){return{tag:"link",attributes:Hn({rel:"stylesheet"},(0,k.isString)(m)?{href:m}:m)}})},s=o(t.prev||n.previous("styles")),u=o(n?.get("styles")),f=[],c=[],h=function(g,m,y){g.forEach(function(w){var C=w.attributes.href,x=m.some(function(E){return E.attributes.href===C});!x&&y.push(w)})};h(u,s,c),h(s,u,f),f.forEach(function(g){var m,y=e.querySelector('link[href="'.concat(g.attributes.href,'"]'));(m=y?.parentNode)===null||m===void 0||m.removeChild(y)}),(0,Kt.af)(e,c)},r.prototype.renderHead=function(){var t,e=this,n=e.model,o=e.em,s=n.root,u=(t=o?.Components)===null||t===void 0?void 0:t.getType(ba).view;u&&(this.headView=new u({el:this.getHead(),model:s.head,config:Hn(Hn({},s.config),{frameView:this})}).render())},r.prototype.renderBody=function(){var t=this,e,n=this,o=n.config,s=n.em,u=n.model,f=n.ppfx,c=this.getBody(),h=this.getWindow(),g=u.hasAutoHeight(),m=s.config;h._isEditor=!0,this.renderStyles({prev:[]});var y="#ffca6f";(0,Kt.BC)(c,`<style>
      `.concat(m.baseCss||o.frameStyle||"",`

      `).concat(g?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(g?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(f,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(f,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(f,`selected-parent {
        outline: 2px solid `).concat(y,` !important
      }

      .`).concat(f,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(f,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(f,`no-pointer {
        pointer-events: none;
      }

      .`).concat(f,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(f,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(f,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(f,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(f,`is__grabbing,
      .`).concat(f,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(m.canvasCss||"",`
      `).concat(m.protectedCss||"",`
    </style>`));var w=u.root,C=(((e=s?.Components)===null||e===void 0?void 0:e.getType("wrapper"))||{}).view;C&&((0,k.isFunction)(o.customRenderer)?o.customRenderer({editor:s.Editor,frame:u,window:h,frameView:this,onMount:function(x){t.wrapper=x,t._onRootMount(x)}}):(this.wrapper=new C({model:w,config:Hn(Hn({},w.config),{em:s,frameView:this})}).render(),this._onRootMount(this.wrapper)))},r.prototype._onRootMount=function(t){var e=this,n,o=this,s=o.config,u=o.em,f=o.model,c=this.getDoc(),h=c.body;(0,Kt.BC)(h,t.el),(0,Kt.BC)(h,new df({collection:f.getStyles(),config:Hn(Hn({},u.Css.getConfig()),{frameView:this})}).render().el),(0,Kt.BC)(h,this.getJsContainer()),(0,Kt.on)(h,"click",function(g){var m;return g&&((m=g.target)===null||m===void 0?void 0:m.tagName)=="A"&&g.preventDefault()}),(0,Kt.on)(h,"submit",function(g){return g&&g.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!s.infiniteCanvas}}].forEach(function(g){return g.event.split(" ").forEach(function(m){c.addEventListener(m,function(y){return e.el.dispatchEvent((0,Kt.yL)(y,g.class))},g.opts)})}),this._toggleEffects(!0),(0,Ot.hasDnd)(u)&&(this.droppable=new r_(u,(n=this.wrapper)===null||n===void 0?void 0:n.el)),this.loaded=!0,f.trigger("loaded")},r.prototype._toggleEffects=function(t){var e=t?Kt.on:Kt.AU,n=this.getWindow();n&&e(n,"".concat(Kt.D8," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r})(zn);const a_=i_;var Mv=De(9966),s_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),aa=function(){return aa=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},aa.apply(this,arguments)},l_=(function(i){s_(r,i);function r(t,e){var n=i.call(this,{model:t})||this;return(0,k.bindAll)(n,"onScroll","frameLoaded","updateOffset","remove","startDrag"),aa(aa({},t.config),{frameWrapView:n}),n.cv=e,n.frame=new a_(t,n),n.classAnim="".concat(n.ppfx,"frame-wrapper--anim"),n.updateOffset=(0,k.debounce)(n.updateOffset.bind(n),0),n.updateSize=(0,k.debounce)(n.updateSize.bind(n),0),n.listenTo(t,"loaded",n.frameLoaded),n.listenTo(t,"change:x change:y",n.updatePos),n.listenTo(t,"change:width change:height",n.updateSize),n.listenTo(t,"destroy remove",n.remove),n.updatePos(),n.setupDragger(),n}return r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var t=this,e=this,n=e.module,o=e.model,s,u,f,c=function(h){n.toggleFramesEvents(h)};this.dragger=new Mv.A({onStart:function(){var h=o.attributes,g=h.x,m=h.y;f=t.em.getZoomMultiplier(),s=g,u=m,c(!1)},onEnd:function(){return c(!0)},setPosition:function(h){o.set({x:s+h.x*f,y:u+h.y*f})}})},r.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},r.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Kt.YZ)(this.elTools)},r.prototype.remove=function(t){var e=this,n;return(n=this.sizeObserver)===null||n===void 0||n.disconnect(),this.__clear(t),zn.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(o){return e[o]=0}),this},r.prototype.updateOffset=function(){var t,e=this,n=e.em,o=e.$el,s=e.frame;!n||n.destroyed||(n.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(t=s?.model)===null||t===void 0||t._emitUpdated())},r.prototype.updatePos=function(t){var e=this,n=e.model,o=e.el,s=n.attributes,u=s.x,f=s.y,c=o.style;this.frame.rect=void 0,c.left=isNaN(u)?u:"".concat(u,"px"),c.top=isNaN(f)?f:"".concat(f,"px"),t&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var t=this,e=t.em,n=t.el,o=t.$el,s=t.model,u=t.classAnim,f=t.frame;if(f){f.rect=void 0,o.addClass(u);var c=this.__handleSize(),h=c.noChanges,g=c.width,m=c.height;((0,k.isNull)(g)||(0,k.isNull)(m))&&s.set(aa(aa({},g?{}:{width:n.offsetWidth}),m?{}:{height:n.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var t=this,e=t.frame,n=t.em;n.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},r.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var t,e="px",n=this,o=n.model,s=n.el,u=s.style,f=o.attributes,c=f.width,h=f.height,g=u.width||"",m=u.height||"",y=c||"",w=h||"",C=g==y&&m==w,x=(0,k.isNumber)(y)?"".concat(y).concat(e):y,E=(0,k.isNumber)(w)?"".concat(w).concat(e):w;if(u.width=x,(t=this.sizeObserver)===null||t===void 0||t.disconnect(),o.hasAutoHeight()){var N=this.frame.el,L=N.contentDocument;if(L){var H=new ResizeObserver(function(){requestAnimationFrame(function(){var rt=parseFloat(o.get("minHeight"))||0,nt=Math.max(L.body.scrollHeight,rt);u.height="".concat(nt,"px")})});H.observe(L.body),this.sizeObserver=H}}else u.height=E,delete this.sizeObserver;return{noChanges:C,width:c,height:h,newW:y,newH:w}},r.prototype.render=function(){var t=this,e=t.frame,n=t.$el,o=t.ppfx,s=t.cv,u=t.model,f=t.el,c=u.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(u.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var h=(0,Kt.a_)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=h;var g=s?.toolsWrapper;return g&&g.appendChild(h),c&&c({el:f,elTop:f.querySelector("[data-frame-top]"),elRight:f.querySelector("[data-frame-right]"),elBottom:f.querySelector("[data-frame-bottom]"),elLeft:f.querySelector("[data-frame-left]"),frame:u,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r})(zn);const u_=l_;var c_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),f_=(function(i){c_(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,!0)||this;return n.listenTo(n.collection,"reset",n.render),n.canvasView=e.canvasView,n._module=e.module,n}return r.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(n){return n.remove(e)})},r.prototype.onRender=function(){var t=this,e=t.$el,n=t.ppfx;e.attr({class:"".concat(n,"frames")})},r.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},r.prototype.renderView=function(t,e){return new u_(t,this.canvasView)},r})(Uy);const d_=f_;var p_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Nl=function(){return Nl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Nl.apply(this,arguments)},h_=(function(i){p_(r,i);function r(t){var e=i.call(this,{model:t})||this;e.ready=!1,(0,k.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var n=e,o=n.em,s=n.pfx,u=n.ppfx,f=e.module.events;return e.className="".concat(s,"canvas ").concat(u,"no-touch-actions").concat(o.config.customUI?"":" ".concat(s,"canvas-bg")),e.clsUnscale="".concat(s,"unscale"),e._initFrames(),e.listenTo(o,f.refresh,e.clearOff),e.listenTo(o,"component:selected",e.checkSelected),e.listenTo(o,"".concat(f.coords," ").concat(f.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return r.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,o=t.config,s=t.em,u=n.frames;s.set("readyCanvas",0),u.once("loaded:all",function(){return s.set("readyCanvas",1)}),e?.remove(),this.frames=new d_({collection:u},Nl(Nl({},o),{canvasView:this}))},r.prototype.checkSelected=function(t,e){var n;e===void 0&&(e={});var o=e.scroll,s=this.em.getCurrentFrame();o&&((n=t.views)===null||n===void 0||n.forEach(function(u){u.frameView===s&&u.scrollIntoView(o)}))},r.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return clearTimeout(this.timerZoom),(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,zn.prototype.remove.apply(this,e),this.toggleListeners(!1),this},r.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},r.prototype.toggleListeners=function(t){var e=this,n=e.el,o=e.config,s=t?Kt.on:Kt.AU;s(document,"keypress",this.onKeyPress),s(window,"scroll resize",this.clearOff),s(n,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),s(n,"pointermove",this.onPointer)},r.prototype.screenToWorld=function(t,e){var n=this.module,o=n.getCoords(),s=n.getZoomMultiplier(),u=this.getViewportDelta();return{x:(t-o.x-u.x)*s,y:(e-o.y-u.y)*s}},r.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),n=(0,Kt.Xy)(),o={x:t.clientX-e.left+n.x,y:t.clientY-e.top+n.y};if(t._parentEvent){var s=t.target.getBoundingClientRect(),u=this.module.getZoomDecimal();o.x=s.left-e.left+n.x+t.clientX*u,o.y=s.top-e.top+n.y+t.clientY*u}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},r.prototype.onKeyPress=function(t){var e=this.em,n=(0,Kt.Ch)(t);n===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(t){var e=this,n=e.module,o=e.config;if(o.infiniteCanvas){this.preventDefault(t);var s=t.deltaX,u=t.deltaY,f=n.getZoomDecimal(),c=(0,Kt.rp)(t),h=n.getCoords();if(c){var g=f-u*f*.01;n.setZoom(g*100);var m=this.model.getPointerCoords(Ht.x2.Screen),y=this.getCanvasOffset(),w=m.x-y.width/2,C=m.y-y.height/2,x=g/f,E=w-(w-h.x)*x,N=C-(C-h.y)*x;n.setCoords(E,N)}else this.onPointer(t),n.setCoords(h.x-s,h.y-u)}},r.prototype.updateFrames=function(t){var e=this.em,n=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),n.style.display="none",e.trigger("canvas:update",t),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(o),e.runDefault(o),n.style.display=""},300)},r.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,n=t.model,o=t.module,s=t.cvStyle,u=t.clsUnscale,f=o.getZoomMultiplier();if(e){var c=n.attributes,h=c.x,g=c.y,m=o.getZoomDecimal();e.style.transform="scale(".concat(m,") translate(").concat(h*f,"px, ").concat(g*f,"px)")}s&&(s.innerHTML=`
        .`.concat(u," { scale: ").concat(f,` }
      `))},r.prototype.fitViewport=function(t){var e,n,o;t===void 0&&(t={});var s=this,u=s.em,f=s.module,c=s.model;this.clearOff();var h=this.getCanvasOffset(),g=t.el,m=g&&((e=(0,Ot.getComponentView)(g))===null||e===void 0?void 0:e.frameView),y=m?m.model:t.frame||u.getCurrentFrameModel()||c.frames.at(0),w=y.attributes,C=w.x,x=w.y,E={x:C??0,y:x??0,width:y.width,height:y.height};if(g){var N=this.getElBoxRect(g);E.x=E.x+N.x,E.y=E.y+N.y,E.width=N.width,E.height=N.height}var L=t.ignoreHeight,H=(n=t.gap)!==null&&n!==void 0?n:0,rt=(0,k.isNumber)(H),nt=rt?H:H.x,vt=rt?H:H.y,et=E.width+nt*2,G=E.height+vt*2,W=h.width,U=h.height,D=W/et,Y=U/G,K=L?D:Math.min(D,Y),ct=K*100,M=(o=(0,k.isFunction)(t.zoom)?t.zoom(ct):t.zoom)!==null&&o!==void 0?o:ct;f.setZoom(M,{from:"fitViewport"});var wt=-E.x+(y.width>=W?W/2-et/2:-nt),gt=-E.y+U/2-G/2,At=f.getZoomDecimal(),Qt={x:(wt+nt)*At,y:(gt+vt)*At};if(L){var oe=f.getZoomMultiplier(),yt=U*oe,Ct=yt-U,bt=Ct/2;Qt.y=(-E.y+vt)*At-bt/oe}f.setCoords(Qt.x,Qt.y)},r.prototype.isElInViewport=function(t){var e=(0,Ot.getElement)(t),n=(0,Kt.C8)(e),o=this.getFrameOffset(e),s=n.top,u=n.left;return s>=0&&u>=0&&s<=o.height&&u<=o.width},r.prototype.offset=function(t,e){e===void 0&&(e={});var n=e.noScroll,o=(0,Kt.C8)(t),s=n?{x:0,y:0}:(0,Kt.Xy)(t);return{top:o.top+s.y,left:o.left+s.x,width:o.width,height:o.height}},r.prototype.getRectToScreen=function(t){var e,n,o,s,u=this.getCanvasScroll(),f=this.module.getZoomDecimal(),c=this.module.getCoords(),h=this.getViewportDelta(),g=((e=t.x)!==null&&e!==void 0?e:0)*f-u.scrollLeft+c.x+h.x||0,m=((n=t.y)!==null&&n!==void 0?n:0)*f-u.scrollTop+c.y+h.y||0;return{x:g,y:m,width:((o=t.width)!==null&&o!==void 0?o:0)*f,height:((s=t.height)!==null&&s!==void 0?s:0)*f}},r.prototype.getElBoxRect=function(t,e){var n,o,s;e===void 0&&(e={});var u=this.module,f=(0,Kt.C8)(t),c=f.width,h=f.height,g=f.left,m=f.top,y=(n=(0,Ot.getComponentView)(t))===null||n===void 0?void 0:n.frameView,w=y?.getBoxRect(),C=u.getZoomMultiplier(),x=(o=w?.x)!==null&&o!==void 0?o:0,E=(s=w?.y)!==null&&s!==void 0?s:0,N=this.el,L=(0,Kt.Xy)(),H=g+x+(N.scrollLeft+L.x)*C,rt=m+E+(N.scrollTop+L.y)*C,nt={x:H,y:rt,width:c,height:h};return e.local&&(nt.x=g,nt.y=m),e.toScreen?this.getRectToScreen(nt):nt},r.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),n=e.top,o=e.left,s=e.width,u=e.height,f=this.module;if(t.toWorld){var c=f.getZoomMultiplier(),h=f.getCoords(),g=this.getViewportDelta(),m=-h.x-g.x||0,y=-h.y-g.y||0;return{x:m*c,y:y*c,width:s*c,height:u*c}}else return{x:o,y:n,width:s,height:u}},r.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),n=this.getCanvasOffset(),o=n.width,s=n.height,u=o*e,f=s*e,c=u-o,h=f-s;return{x:c/2/e,y:h/2/e}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=(e=this.frame)===null||e===void 0?void 0:e.el,o=t?.ownerDocument.defaultView,s=o?o.frameElement:n;this.frmOff=this.offset(s||n)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.module.getZoomDecimal(),o=this.getFrameOffset(t),s=this.el,u=this.getCanvasOffset(),f=this.offset(t,e),c=e.avoidFrameOffset?0:o.top,h=e.avoidFrameOffset?0:o.left,g=e.avoidFrameZoom?f.top:f.top*n,m=e.avoidFrameZoom?f.left:f.left*n,y=e.avoidFrameOffset?g:g+c-u.top+s.scrollTop,w=e.avoidFrameOffset?m:m+h-u.left+s.scrollLeft,C=e.avoidFrameZoom?f.height:f.height*n,x=e.avoidFrameZoom?f.width:f.width*n;return{top:y,left:w,height:C,width:x,zoom:n,rect:f}},r.prototype.getElementOffsets=function(t){if(!t||(0,Kt.ir)(t))return{};var e={},n=window.getComputedStyle(t),o=this.module.getZoomDecimal(),s=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return s.forEach(function(u){e[u]=parseFloat(n[u])*o}),e},r.prototype.getPosition=function(t){var e;t===void 0&&(t={});var n=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!n)return{top:0,left:0,width:0,height:0};var o=n.body,s=this.module.getZoomDecimal(),u=this.getFrameOffset(),f=this.getCanvasOffset(),c=t.noScroll;return{top:u.top+(c?0:o.scrollTop)*s-f.top,left:u.left+(c?0:o.scrollLeft)*s-f.left,width:f.width,height:f.height}},r.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},r.prototype.updateScript=function(t){var e=t.model,n=e.getId(),o={component:e,view:t,el:t.el};if(!t.scriptContainer){t.scriptContainer=(0,Kt.a_)("div",{"data-id":n});var s=this.getJsContainer();s?.appendChild(t.scriptContainer)}t.el.id=n,t.scriptContainer.innerHTML="";var u=document.createElement("script"),f=e.getScriptString(),c=e.get("script-props")?f:`function(){
`.concat(f,`
;}`),h=JSON.stringify(e.__getScriptProps());u.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(n,`');
        if (!item) return;
        var script = (`).concat(c,`).bind(item);
        script(`).concat(h,`, { el: item });
      }, 1);`),setTimeout(function(){e.emitWithEditor(je.I.scriptMountBefore,o);var g=t.scriptContainer;g?.appendChild(u),e.emitWithEditor(je.I.scriptMount,o)},0)},r.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e?.getJsContainer()},r.prototype.getFrameView=function(t){return t?.frameView||this.em.getCurrentFrame()},r.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,o=t.em,s=t.framesArea,u=e.frames;u.listenToLoad(),n.render();var f=u.at(0),c=f?.view;o.setCurrentFrame(c),s?.appendChild(n.el),this.frame=c,this.updateFramesArea()}},r.prototype.renderFrames=function(){this._renderFrames()},r.prototype.render=function(){var t=this,e=t.el,n=t.$el,o=t.ppfx,s=t.config,u=t.em;n.html(this.template());var f=n.find("[data-frames]");this.framesArea=f.get(0);var c=n.find("[data-tools]");return this.toolsWrapper=c.get(0),c.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(s.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(o,"tools")),this.hlEl=e.querySelector(".".concat(o,"highlighter")),this.badgeEl=e.querySelector(".".concat(o,"badge")),this.placerEl=e.querySelector(".".concat(o,"placeholder")),this.ghostEl=e.querySelector(".".concat(o,"ghost")),this.toolbarEl=e.querySelector(".".concat(o,"toolbar")),this.resizerEl=e.querySelector(".".concat(o,"resizer")),this.offsetEl=e.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(o,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),e.className=(0,Ot.getUiClass)(u,this.className),s.scrollableCanvas===!0&&(e.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},r})(zn);const v_=h_;var g_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),yi=function(){return yi=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},yi.apply(this,arguments)},m_=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},y_=(function(i){g_(r,i);function r(t){var e=i.call(this,t,"Canvas",xy())||this;return e.events=El,e.framesById={},e.canvas=new Ly(e),e.spots=new Ry(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e.autoScroller=new Av,e}return r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.postLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(t){return this.getFrames()[t||0]},r.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t?.el},r.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},r.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t?.getWindow()},r.prototype.getDocument=function(){var t=this.getFrameEl();return t?.contentDocument},r.prototype.getBody=function(){var t=this.getDocument();return t?.body},r.prototype._getLocalEl=function(t,e,n){var o=t,s=e?.frameView;return o=s?s[n]():o,o},r.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},r.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},r.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},r.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},r.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new v_(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},r.prototype.offset=function(t){return this.getCanvasView().offset(t)},r.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},r.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},r.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},r.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},n=e.top,o=n===void 0?0:n,s=e.left,u=s===void 0?0:s;return yi(yi({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:u})},r.prototype.getTargetToElementDim=function(t,e,n){n===void 0&&(n={});var o=n||{},s=this.getCanvasView().getPosition();if(s){var u=o.elPos||this.getCanvasView().getElementPos(e),f=n.toRight||0,c=o.targetHeight||t.offsetHeight,h=o.targetWidth||t.offsetWidth,g=o.event||null,m=u.top-c,y=u.left;y+=f?u.width:0,y=f?y-h:y;var w=y<s.left?s.left:y,C=m<s.top?s.top:m;C=C>u.top+u.height?u.top+u.height:C;var x={top:C,left:w,elementTop:u.top,elementLeft:u.left,elementWidth:u.width,elementHeight:u.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return g&&this.em&&this.em.trigger(g,x),x}},r.prototype.canvasRectOffset=function(t,e,n){var o=this;n===void 0&&(n={});var s=function(f){var c=f.defaultView;return c?.frameElement},u=function(f,c,h){c===void 0&&(c=1);var g=o.em.getZoomDecimal(),m=c?"top":"left",y=f.ownerDocument,w=n.offset?s(y):{},C=w.offsetTop,x=C===void 0?0:C,E=w.offsetLeft,N=E===void 0?0:E,L=y.body||{},H=L.scrollTop,rt=H===void 0?0:H,nt=L.scrollLeft,vt=nt===void 0?0:nt,et=c?rt:vt,G=c?x:N;return h[m]-(et-G)*g};return{top:u(t,1,e),left:u(t,0,e)}},r.prototype.getTargetToElementFixed=function(t,e,n){n===void 0&&(n={});var o=n.pos||this.getElementPos(t,{noScroll:!0}),s=n.canvasOff||this.canvasRectOffset(t,o),u=e.offsetHeight||0,f=e.offsetWidth||0,c=this.getCanvasView(),h=c.getCanvasScroll(),g=h.scrollTop,m=h.scrollLeft,y=c.getPosition(),w=n.event,C=o.width-f,x=-u,E=(0,k.isUndefined)(n.left)?C:n.left,N=Math.max(-o.left+m,0);E=Math.max(E,N);var L=o.width-f;E=Math.min(E,L);var H=y.width+m-f-o.left;E=Math.min(E,H);var rt=s.top<u+g,nt=x;if(rt){var vt=o.height+u,et=vt<y.height;if(et)nt=nt+vt;else{var G=-s.top+g;nt=G<o.height?G:o.height}}var W={top:nt,left:E,canvasOffsetTop:s.top,canvasOffsetLeft:s.left,elRect:o,canvasOffset:s,canvasRect:y,targetWidth:f,targetHeight:u};return w&&this.em.trigger(w,W),W},r.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var n=e.subWinOffset,o=t.target,s=o.nodeType===Node.DOCUMENT_NODE?o:o.ownerDocument,u=s.defaultView||s.parentWindow,f=u.frameElement,c=n?u.pageYOffset:0,h=n?u.pageXOffset:0,g=this.getZoomMultiplier(),m=0,y=0;if(f){var w=f.getBoundingClientRect();m=w.top||0,y=w.left||0}return{y:(t.clientY+m-c)*g,x:(t.clientX+y-h)*g}},r.prototype.getMouseRelativeCanvas=function(t,e){var n,o=this.getZoomDecimal(),s=this.getCanvasView(),u=(n=s.getPosition(e))!==null&&n!==void 0?n:{top:0,left:0},f=s.getCanvasScroll(),c={top:u.top+f.scrollTop,left:u.left+f.scrollLeft},h=c.top,g=c.left;return{y:t.clientY*o+h,x:t.clientX*o+g}},r.prototype.startDrag=function(t){this.em.set("dragSource",t)},r.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=m_(["body"],this.config.notTextable,!0),o=e&&document.activeElement===e,s=o?t&&t.activeElement:document.activeElement;return s&&!n.some(function(u){return s.matches(u)})},r.prototype.scrollTo=function(t,e){e===void 0&&(e={});var n=(0,Ot.getElement)(t),o=n&&(0,Ot.getViewEl)(n);o&&o.scrollIntoView(e)},r.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();if(e&&e.startAutoscroll(),this.config.scrollableCanvas){var n=this.getCanvasView().el;this.autoScroller.start(n,n,{zoom:this.em.getZoomDecimal(),ignoredElement:this.getSpotsEl()})}},r.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},r.prototype.setZoom=function(t,e){return e===void 0&&(e={}),this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t,e),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(t,e,n){var o;n===void 0&&(n={});var s=t||t===0,u=e||e===0,f={x:this.canvas.get("x"),y:this.canvas.get("y")};if(s&&(f.x=parseFloat("".concat(t))),u&&(f.y=parseFloat("".concat(e))),n.toWorld){var c=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();c&&(s&&(f.x=f.x-c.x),u&&(f.y=f.y-c.y))}return this.canvas.set(f),this},r.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,n=t.y;return{x:e,y:n}},r.prototype.getPointer=function(t){var e=this.canvas.attributes,n=e.pointer,o=e.pointerScreen;return t?o:n},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},r.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},r.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},r.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new fv(this,yi({},t)),e)},r.prototype.getLastDragResult=function(){return this.em.get("dragResult")},r.prototype.addSpot=function(t,e){var n;e===void 0&&(e={});var o=t,s=this.getSpots(o);if(s.length){var u=s[0];return u.set(o),u}var f=o.componentView||((n=o.component)===null||n===void 0?void 0:n.view),c=new Bn.A(this,yi(yi({},o),{id:o.id||"cs_".concat(o.type,"_").concat(f?.cid),type:o.type||""}));return this.spots.add(c,e),c},r.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},r.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,k.isArray)(t)?t:this.getSpots(t),n=this.spots.remove(e);return n},r.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},r.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},r.prototype.refresh=function(t){t===void 0&&(t={});var e=this,n=e.em,o=e.events,s=e.canvasView;s?.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),n.trigger("canvas:updateTools")),n.set("canvasOffset",this.getOffset()),n.trigger(o.refresh,t)},r.prototype.refreshSpots=function(){this.spots.refresh()},r.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(n){return t[n]={}})},r})(wn);const __=y_;var w_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),sa=function(){return sa=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},sa.apply(this,arguments)},Dv=(function(i){w_(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.dataResolver=n.initializeDataResolver(t,e),n.listenToPropsChange(),n}return r.prototype.initializeDataResolver=function(t,e){var n,o=(n=t.dataResolver)!==null&&n!==void 0?n:{type:t.type},s=this.createResolverInstance(o,sa(sa({},e),{collectionsStateMap:this.collectionsStateMap}));return s},r.prototype.getDataResolver=function(){return this.get("dataResolver")},r.prototype.setDataResolver=function(t){return this.set("dataResolver",t)},r.prototype.onCollectionsStateMapUpdate=function(t){this.dataResolver.updateCollectionsStateMap(t),i.prototype.onCollectionsStateMapUpdate.call(this,t)},r.prototype.listenToPropsChange=function(){var t=this;this.on("change:dataResolver",function(){t.dataResolver.set(t.get("dataResolver"))})},r.prototype.removePropsListeners=function(){this.stopListening(this.dataResolver),this.off("change:dataResolver"),this.off("change:".concat(this.collectionsStateMap))},r.prototype.destroy=function(t){return this.removePropsListeners(),i.prototype.destroy.call(this,t)},r.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t),n=this.dataResolver.toJSON();return delete n.type,sa(sa({},e),{dataResolver:n})},r})(ir),b_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Hl=function(){return Hl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Hl.apply(this,arguments)},C_=(function(i){b_(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Hl(Hl({},i.prototype.defaults),{type:eo,dataResolver:{},droppable:!1})},enumerable:!1,configurable:!0}),r.prototype.getPath=function(){return this.dataResolver.get("path")},r.prototype.getCollectionId=function(){return this.dataResolver.get("collectionId")},r.prototype.getVariableType=function(){return this.dataResolver.get("variableType")},r.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},r.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},r.prototype.resolvesFromCollection=function(){return this.dataResolver.resolvesFromCollection()},r.prototype.getInnerHTML=function(){return this.getDataValue()},r.prototype.setPath=function(t){this.dataResolver.set("path",t)},r.prototype.setDefaultValue=function(t){this.dataResolver.set("defaultValue",t)},r.prototype.resetDataSourcePath=function(t){this.set("dataResolver",{path:t,collectionId:void 0,variableType:void 0})},r.prototype.createResolverInstance=function(t,e){return new Pa(t,e)},r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===eo},r})(Dv);const S_=C_;var x_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ul=function(){return Ul=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ul.apply(this,arguments)},O_=(function(i){x_(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ul(Ul({},i.prototype.defaults),{droppable:!1,type:dr.condition,dataResolver:{condition:{left:"",operator:Un.equalsIgnoreCase,right:""}},components:[{type:dr.conditionTrue},{type:dr.conditionFalse}]})},enumerable:!1,configurable:!0}),r.prototype.isTrue=function(){return this.dataResolver.isTrue()},r.prototype.getCondition=function(){return this.dataResolver.getCondition()},r.prototype.getIfTrueContent=function(){return this.components().at(0)},r.prototype.getIfFalseContent=function(){return this.components().at(1)},r.prototype.getOutputContent=function(){return this.isTrue()?this.getIfTrueContent():this.getIfFalseContent()},r.prototype.setCondition=function(t){this.dataResolver.setCondition(t)},r.prototype.setIfTrueComponents=function(t){this.setComponentsAtIndex(0,t)},r.prototype.setIfFalseComponents=function(t){this.setComponentsAtIndex(1,t)},r.prototype.getInnerHTML=function(t){var e,n;return(n=(e=this.getOutputContent())===null||e===void 0?void 0:e.getInnerHTML(t))!==null&&n!==void 0?n:""},r.prototype.createResolverInstance=function(t,e){return new hv(t,e)},r.prototype.setComponentsAtIndex=function(t,e){var n=this.components().at(t);n?.components(e)},r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===xa},r})(Dv);const T_=O_;var P_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Bl=function(){return Bl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Bl.apply(this,arguments)},E_=(function(i){P_(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Bl(Bl({},i.prototype.defaults),{removable:!1,draggable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return g0((0,Ot.toLowerCase)(t.tagName))},r})(ir);const Pc=E_;var A_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Wl=function(){return Wl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Wl.apply(this,arguments)},k_=(function(i){A_(r,i);function r(t,e){e===void 0&&(e={});var n,o=i.call(this,t,e)||this;return o.mutable=(n=t.mutable)!==null&&n!==void 0?n:!0,o.on("change",o.handleChange),o}return Object.defineProperty(r.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),r.prototype.handleChange=function(t,e){var n=this,o=this.changedAttributes();(0,k.keys)(o).forEach(function(s){return n.triggerChange(s,e)})},r.prototype.getPath=function(t,e){e===void 0&&(e={});var n=this,o=n.dataSource,s=n.id,u=n.index,f=o.id,c=t?".".concat(t):"";return"".concat(f,".").concat(e.useIndex?u:s).concat(c)},r.prototype.getPaths=function(t){return[this.getPath(t),this.getPath(t,{useIndex:!0})]},r.prototype.triggerChange=function(t,e){e===void 0&&(e={});var n=this,o=n.dataSource,s=n.em,u=this.getPaths(t),f={dataSource:o,dataRecord:this,path:u[0],options:e};s.trigger(Oo.path,f),s.trigger("".concat(Oo.pathSource,":").concat(o.id),f),u.forEach(function(c){return s.trigger("".concat(Oo.path,":").concat(c),Wl(Wl({},f),{path:c}))})},r.prototype.set=function(t,e,n){var o=this,s,u;if(!this.isNew()&&this.attributes.mutable===!1)throw new Error("Cannot modify immutable record");var f=(u=(s=this.dataSource)===null||s===void 0?void 0:s.transformers)===null||u===void 0?void 0:u.onRecordSetValue,c=function(x,E,N){N===void 0&&(N={});var L=N?.avoidTransformers||!f?E:f({id:o.id,key:x,value:E});i.prototype.set.call(o,x,L,N),i.prototype.set.call(o,{__p:N.partial?!0:void 0},N)};if(typeof t=="object"&&t!==null)for(var h=t,g=0,m=Object.entries(h);g<m.length;g++){var y=m[g],w=y[0],C=y[1];c(w,C,e)}else c(t,e,n);return this},r})(Ht.Kx);const M_=k_;var D_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Lv=(function(i){D_(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.dataSource=e.dataSource,n}return r})(Ht.pM);const zp=Lv;Lv.prototype.model=M_;var L_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),bo=function(){return bo=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},bo.apply(this,arguments)},Kp=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},Gp=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},I_=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},j_=(function(i){L_(r,i);function r(t,e){var n=i.call(this,bo(bo({schema:{}},t),{records:[]}),e)||this,o=t.records,s=t.transformers;return n.transformers=s||{},o instanceof zp||n.set({records:new zp(o,{dataSource:n})}),n.listenTo(n.records,"add",n.onAdd),n.listenTo(n.records,Ht.e2,n.handleChanges),n}return r.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(r.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"schema",{get:function(){return this.attributes.schema},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasProvider",{get:function(){return!!this.attributes.provider},enumerable:!1,configurable:!0}),r.prototype.onAdd=function(t){t.triggerChange()},r.prototype.addRecord=function(t,e){return this.records.add(t,e)},r.prototype.getRecord=function(t){return this.records.get(t)},r.prototype.getRecords=function(){var t=this;return I_([],this.records.models,!0).map(function(e){return t.getRecord(e.id)})},r.prototype.getResolvedRecords=function(){var t=this,e=Object.entries(this.schema),n=this.getRecords().map(function(o){var s=bo({},o.attributes);return e.length===0||e.forEach(function(u){var f=u[0],c=u[1],h=c;if(h?.type===pf.relation&&h.target){var g=s[f];if(g){var m=t.em.DataSources.get(h.target);if(m){var y=m.records,w=h.targetField||v0;if(h.isMany){var C=Array.isArray(g)?g:[g],x=y.filter(function(N){return C.includes(N.attributes[w])});s[f]=x.map(function(N){return bo({},N.attributes)})}else{var E=m.records.find(function(N){return N.attributes[w]===g});E&&(s[f]=bo({},E.attributes))}}}}}),s});return n},r.prototype.loadProvider=function(){return Kp(this,void 0,void 0,function(){var t,e,n,o,s,u,f,c,h,g,m=this;return Gp(this,function(y){switch(y.label){case 0:return t=this,e=t.attributes,n=t.em,o=e.provider,o?(0,k.isString)(o)?[2]:(s=(0,k.isString)(o.get)?{url:o.get}:o.get,u=s.url,f=s.method,c=s.headers,h=s.body,g=function(){return Kp(m,void 0,void 0,function(){var w,C,x,E,N;return Gp(this,function(L){switch(L.label){case 0:w=this,L.label=1;case 1:return L.trys.push([1,6,,7]),n.trigger(n.DataSources.events.providerLoadBefore,{dataSource:w}),[4,fetch(u,{method:f,headers:c,body:h})];case 2:return C=L.sent(),C.ok?[3,4]:(x=Error.bind,[4,C.text()]);case 3:throw new(x.apply(Error,[void 0,L.sent()]));case 4:return[4,C.json()];case 5:return E=L.sent(),E?.records&&this.setRecords(E.records),E?.schema&&this.upSchema(E.schema),n.trigger(n.DataSources.events.providerLoad,{result:E,dataSource:w}),[3,7];case 6:return N=L.sent(),n.logError(N.message),n.trigger(n.DataSources.events.providerLoadError,{dataSource:w,error:N}),[3,7];case 7:return[2]}})})},[4,g()]):[2];case 1:return y.sent(),[2]}})})},r.prototype.removeRecord=function(t,e){var n=this.getRecord(t);if(n?.mutable===!1&&!e?.dangerously)throw new Error("Cannot remove immutable record");return this.records.remove(t,e)},r.prototype.setRecords=function(t){var e=this;this.records.reset([],{silent:!0}),t.forEach(function(n){e.records.add(n)})},r.prototype.upSchema=function(t,e){this.set("schema",bo(bo({},this.schema),t),e)},r.prototype.getSchemaField=function(t){return this.schema[t]},r.prototype.handleChanges=function(t,e,n){var o=n||e;this.em.changesUp(o,{dataRecord:t,options:o})},r})(Ht.Kx);const Iv=j_;var R_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),_f=function(){return _f=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},_f.apply(this,arguments)},V_=(function(i){R_(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.collectionsStateMap={},n.listenToPropsChange(),n}return r.prototype.onCollectionsStateMapUpdate=function(t){var e,n;this.collectionsStateMap=t,(n=(e=this.dataResolverWatchers)===null||e===void 0?void 0:e.onCollectionsStateMapUpdate)===null||n===void 0||n.call(e),this.components().forEach(function(o){var s;(s=o.onCollectionsStateMapUpdate)===null||s===void 0||s.call(o,t)})},r.prototype.syncOnComponentChange=function(t,e,n){var o=this.collectionsStateMap;this.collectionsStateMap={},i.prototype.syncOnComponentChange.call(this,t,e,n),this.collectionsStateMap=o,this.onCollectionsStateMapUpdate(o)},r.prototype.setDataResolver=function(t){return this.set("dataResolver",t)},r.prototype.getDataResolver=function(){return this.dataResolverProps},Object.defineProperty(r.prototype,"dataResolverProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),r.prototype.listenToDataSource=function(){var t=this,e,n=this.dataResolverPath;if(n){var o=this,s=o.em,u=o.collectionsStateMap;(e=this.dataSourceWatcher)===null||e===void 0||e.destroy(),this.dataSourceWatcher=new As({em:s,resolver:new Pa({type:eo,path:n},{em:s,collectionsStateMap:u}),onUpdate:function(){return t.onDataSourceChange()}})}},r.prototype.listenToPropsChange=function(){var t=this;this.on("change:dataResolver",function(){t.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(r.prototype,"dataSourceProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataResolverPath",{get:function(){var t;return(t=this.dataSourceProps)===null||t===void 0?void 0:t.path},enumerable:!1,configurable:!0}),r.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.collectionsStateMap)},r.prototype.getDataSourceItems=function(){var t=this.dataSourceProps;if(!t)return[];var e=this.listDataSourceItems(t);if(e&&(0,k.isArray)(e))return e;var n=_f({},e);return n},r.prototype.listDataSourceItems=function(t){var e=t instanceof Iv?t.get("id"):t.path;if(!e)return[];var n=this.em.DataSources.getValue(e,[]),o=e.split(".").length===1;return o&&(n=Object.entries(n).map(function(s){s[0];var u=s[1];return u})),n},r.prototype.getItemKey=function(t,e){return(0,k.isArray)(t)?e:Object.keys(t)[e]},r.prototype.removePropsListeners=function(){var t;this.off("change:dataResolver"),(t=this.dataSourceWatcher)===null||t===void 0||t.destroy(),this.dataSourceWatcher=void 0},r.prototype.destroy=function(t){return this.removePropsListeners(),i.prototype.destroy.call(this,t)},r})(ir);const jv=V_;var F_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),dn=function(){return dn=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},dn.apply(this,arguments)},Ec={avoidStore:!0,partial:!0},N_=(function(i){F_(r,i);function r(t,e){var n=this;if(e.forCloning)return n=i.call(this,t,e)||this;var o=dn(dn({},t),{droppable:!1}),s=n=i.call(this,o,e)||this;return n.rebuildChildrenFromCollection=n.rebuildChildrenFromCollection.bind(n),n.listenToPropsChange(),n.rebuildChildrenFromCollection(),s}return Object.defineProperty(r.prototype,"defaults",{get:function(){return dn(dn({},i.prototype.defaults),{droppable:!1,dataResolver:{},type:dr.collection,components:[{type:dr.collectionItem}]})},enumerable:!1,configurable:!0}),r.prototype.getItemsCount=function(){var t,e,n=this.getDataSourceItems(),o=U_(n),s=Math.max(0,(t=this.getConfigStartIndex())!==null&&t!==void 0?t:0),u=(e=this.getConfigEndIndex())!==null&&e!==void 0?e:Number.MAX_VALUE,f=Math.min(o-1,u),c=f-s+1;return Math.max(0,c)},r.prototype.getConfigStartIndex=function(){return this.dataResolver.startIndex},r.prototype.getConfigEndIndex=function(){return this.dataResolver.endIndex},r.prototype.getDataSource=function(){var t;return(t=this.dataResolver)===null||t===void 0?void 0:t.dataSource},r.prototype.getCollectionId=function(){var t;return(t=this.dataResolver)===null||t===void 0?void 0:t.collectionId},r.prototype.getCollectionItemComponents=function(){return this.firstChild.components()},r.prototype.setCollectionId=function(t){this.updateCollectionConfig({collectionId:t})},r.prototype.setStartIndex=function(t){if(t<0){this.em.logError("Start index should be greater than or equal to 0");return}this.updateCollectionConfig({startIndex:t})},r.prototype.setEndIndex=function(t){this.updateCollectionConfig({endIndex:t})},r.prototype.setDataSource=function(t){this.set(us,dn(dn({},this.dataResolver),{dataSource:t}))},r.prototype.setCollectionItemComponents=function(t){this.firstChild.components(t)},r.prototype.onCollectionsStateMapUpdate=function(t){var e=this;i.prototype.onCollectionsStateMapUpdate.call(this,t);var n=this.getDataSourceItems(),o=this.resolveCollectionConfig(n).startIndex,s=this.components();s.forEach(function(u,f){var c=e.getItemKey(n,o+f),h=e.getCollectionsStateMapForItem(n,c);u.onCollectionsStateMapUpdate(h)})},r.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.onCollectionsStateMapUpdate({})},r.prototype.setCollectionStateMapAndPropagate=function(t,e){t.setSymbolOverride(["locked","layerable",na]),t.syncComponentsCollectionState(),t.onCollectionsStateMapUpdate(e)},r.prototype.onDataSourceChange=function(){this.rebuildChildrenFromCollection()},r.prototype.listenToPropsChange=function(){var t=this;this.on("change:".concat(us),function(){t.rebuildChildrenFromCollection(),t.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(r.prototype,"dataSourceProps",{get:function(){return this.dataResolver.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataResolver",{get:function(){return this.get(us)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"firstChild",{get:function(){return this.components().at(0)},enumerable:!1,configurable:!0}),r.prototype.updateCollectionConfig=function(t){this.set(us,dn(dn({},this.dataResolver),t))},r.prototype.rebuildChildrenFromCollection=function(){var t=this.getDataSourceItems(),e=this.resolveCollectionConfig(t).totalItems;if(e===this.components().length){this.onCollectionsStateMapUpdate(this.collectionsStateMap);return}var n=this.getCollectionItems(t);this.components().reset(n,Sl)},r.prototype.getCollectionItems=function(t){var e,n=this.ensureFirstChild(),o=n.getStyle().display,s=!o||o==="none",u=s?"":o;n.addStyle({display:"none"},Ec);var f=[n],c=W_(this.dataResolver,this.em);if(!c)return f;var h=this.collectionId,g=t??this.getDataSourceItems(),m=this.resolveCollectionConfig(g),y=m.startIndex,w=m.endIndex,C=this.hasDuplicateCollectionId();if(C)return this.em.logError('The collection ID "'.concat(h,'" already exists in the parent collection state. Overriding it is not allowed.')),f;for(var x=y;x<=w;x++){var E=x===y,N=this.getItemKey(g,x),L=this.getCollectionsStateMapForItem(g,N);if(E){(e=yn(n))===null||e===void 0||e.forEach(function(rt){return Hu(rt)}),this.setCollectionStateMapAndPropagate(n,L),n.addStyle({display:u},Ec);continue}var H=n.clone({symbol:!0,symbolInv:!0});H.set({locked:!0,layerable:!1},Ec),this.setCollectionStateMapAndPropagate(H,L),f.push(H)}return f},r.prototype.getCollectionsStateMapForItem=function(t,e){var n,o=this.resolveCollectionConfig(t),s=o.startIndex,u=o.endIndex,f=o.totalItems,c=this.collectionId,h=t[e],g=this.collectionsStateMap,m=typeof e=="string"?Object.keys(t).indexOf(e):e,y=m-s,w=f-(1+y),C={collectionId:c,currentIndex:m,currentItem:h,currentKey:e,startIndex:s,endIndex:u,totalItems:f,remainingItems:w},x=dn(dn({},g),(n={},n[c]=C,n));return x},r.prototype.hasDuplicateCollectionId=function(){var t=this.collectionId,e=this.collectionsStateMap;return!!e[t]},r.prototype.resolveCollectionConfig=function(t){var e,n,o=Array.isArray(t),s=o?t.length:Object.keys(t).length,u=(e=this.getConfigStartIndex())!==null&&e!==void 0?e:0,f=(n=this.getConfigEndIndex())!==null&&n!==void 0?n:Number.MAX_VALUE,c=Math.min(s-1,f),h=0;return s>0&&(h=Math.max(0,c-u+1)),{startIndex:u,endIndex:c,totalItems:h,isArray:o}},r.prototype.ensureFirstChild=function(){var t=this.em.Components.getType(dr.collectionItem).model;return this.firstChild||new t({type:dr.collectionItem},this.opt)},Object.defineProperty(r.prototype,"collectionId",{get:function(){var t,e;return(e=(t=this.dataResolverProps)===null||t===void 0?void 0:t.collectionId)!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===dr.collection},r.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t);delete e.droppable,delete e[vn];var n=this.firstChild;return dn(dn({},e),{components:[n]})},r})(jv);const H_=N_;function U_(i){return(0,k.isArray)(i)?i.length:Object.keys(i).length}function B_(i,r,t){return i?!0:(t.logError('The "'.concat(r,'" property is required in the collection definition.')),!1)}function W_(i,r){for(var t=[{property:i?.collectionId,propertyPath:"dataResolver.collectionId"},{property:i?.dataSource,propertyPath:"dataResolver.dataSource"}],e=0,n=t;e<n.length;e++){var o=n[e].propertyPath;if(!B_(i,o,r))return[]}var s=i?.startIndex;return s!==void 0&&(s<0||!Number.isInteger(s))&&r.logError("Invalid startIndex: ".concat(s,". It must be a non-negative integer.")),!0}var z_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),K_=(function(i){z_(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.compView=Ge,t}return r.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},r.prototype.removeChildren=function(t,e,n){var o=this;n===void 0&&(n={}),t.views.forEach(function(u){if(u){var f=u.childrenView,c=u.scriptContainer;f&&f.stopListening(),(0,Kt.YZ)(c),u.remove.apply(u)}});var s=t.components();s.forEach(function(u){return o.removeChildren(u,e,n)})},r.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},r.prototype.addToCollection=function(t,e,n){for(var o=this,s=o.config,u=o.opts,f=o.em,c=s.frameView,h=c?.model&&t.getView(c.model),g=u.componentTypes||f?.Components.getTypes(),m=t.get("type")||"default",y=this.compView,w=0;w<g.length;w++)if(g[w].id==m){y=g[w].view;break}var C=h||new y({model:t,config:s,componentTypes:g}),x;try{x=C.render().el}catch(H){x=document.createTextNode(""),f.logError(H)}if(e)e.appendChild(x);else{var E=this.parentEl,N=E.childNodes;if((0,k.isUndefined)(n))E.appendChild(x);else{var L=N.length==n;L&&n--,L||!N.length?E.appendChild(x):E.insertBefore(x,N[n])}}return t.opt.temporary||f?.trigger(je.I.mount,t),x},r.prototype.resetChildren=function(t,e){var n=this;if(e===void 0&&(e={}),!e.skipViewUpdate){var o=e.previousModels;e.skipDomReset||(this.parentEl.innerHTML=""),o?.forEach(function(s){return n.removeChildren(s,n.collection)}),t.each(function(s){return n.addToCollection(s)})}},r.prototype.render=function(t){var e=this,n=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(s){return e.addToCollection(s,o)}),n.innerHTML="",n.appendChild(o),this},r})(Ht.Ss);const Rv=K_;var G_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ao=function(){return ao=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ao.apply(this,arguments)},$_=(function(i){G_(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.rendered=!1,t}return r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{},o=n.em,s=e.opt||{},u=this,f=u.$el,c=u.el;this.opts=t,this.modelOpt=s,this.config=n,this.em=o,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),f.data("model",e),(0,Ot.setViewEl)(c,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=ao(ao({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!s.temporary&&this.init(this._clbObj())},Object.defineProperty(r.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"createDoc",{get:function(){var t,e,n=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((e=this.opts.config)===null||e===void 0)&&e.useFrameDoc?n:document},enumerable:!1,configurable:!0}),r.prototype.__isDraggable=function(){var t=this,e=t.model,n=t.config,o=e.attributes.draggable;return n.draggableComponents&&o},r.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,o=t.el;return{editor:e?.getEditor(),model:n,el:o}},r.prototype.init=function(t){},r.prototype.removed=function(t){},r.prototype.onRender=function(t){},r.prototype.onActive=function(t){},r.prototype.onDisable=function(t){},r.prototype.remove=function(){var t;i.prototype.remove.call(this);var e=this,n=e.model,o=e.$el,s=n.views,u=this.frameView||{};return n.components().forEach(function(f){var c=f.getView(u.model);c?.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),s.splice(s.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault();var e=this.em.getSelectedAll(),n=e.includes(this.model)?e:[this.model];this.em.Commands.run("tlb-move",{target:n,event:t})},r.prototype.initClasses=function(){var t=this.model,e=t.classes,n="change:classes";e instanceof Qo&&(this.stopListening(t,n,this.initClasses),this.listenTo(t,n,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},r.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,n=e.model,o=e.$el,s=e.childrenView,u="change:components",f=n.get("components"),c=[n,u,this.initComponents];f instanceof Ps&&(o.data("collection",f),s&&s.remove(),this.stopListening.apply(this,c),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,c))},r.prototype.handleChange=function(){var t=this.model,e=(0,k.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var n in t.changed)t.emitUpdate(n)}},r.prototype.importClasses=function(){var t=this,e=t.em,n=t.model,o=e.Selectors;o&&n.classes.forEach(function(s){return o.add(s.getName())})},r.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,n=e.em,o=e.el,s=e.ppfx,u=e.model,f=n?.Canvas,c=f?.config.extHl,h=u.get("status"),g="".concat(s,"selected"),m="".concat(g,"-parent"),y="".concat(s,"freezed"),w="".concat(s,"hovered"),C="".concat(s,"no-pointer"),x="".concat(s,"pointer-init"),E=[g,m,y,w,C,x],N=c&&!t.noExtHl?"":g;this.$el.removeClass(E.join(" "));var L=o.getAttribute("class")||"",H=[L],rt=!f?.hasCustomSpot(Bn.F.Select),nt=!f?.hasCustomSpot(Bn.F.Target);switch(h){case"selected":rt&&H.push(N);break;case"selected-parent":nt&&H.push(m);break;case"freezed":H.push(y);break;case"freezed-selected":H.push(y),rt&&H.push(N);break;case"hovered":!t.avoidHover&&H.push(w);break}(0,k.isBoolean)(u.locked)&&H.push(u.locked?C:x);var vt=H.filter(Boolean).join(" ");vt&&o.setAttribute("class",vt)},r.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),n=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",n?!0:"")},r.prototype.updateStyle=function(t,e,n){n===void 0&&(n={});var o=this,s=o.model,u=o.em;if(mi(u)&&!n.inline){var f=this.__cmpStyleOpts,c=s.getStyle(ao({inline:!0},f));!(0,k.isEmpty)(c)&&s.setStyle(c,f)}else this.setAttribute("style",s.styleToString(n))},r.prototype.updateStyles=function(){this.updateStyle()},r.prototype.updateClasses=function(){var t,e,n=((e=(t=this.model.classes).pluck)===null||e===void 0?void 0:e.call(t,"name").join(" "))||"";this.setAttribute("class",n),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var t=this,e=t.model,n=t.$el;t.el;var o=e.attributes,s=o.textable,u=o.type,f=ao(ao({id:e.getId(),"data-gjs-type":u||"default"},this.__isDraggable()&&{draggable:!0}),s&&{contenteditable:"false"});this.__clearAttributes(),this.updateStyle(),this.updateHighlight();var c=ao(ao({},f),e.getAttributes());(0,k.keys)(c).forEach(function(h){return c[h]===!1&&delete c[h]}),n.attr(c)},r.prototype.__clearAttributes=function(){var t=this,e=t.el,n=t.$el,o=[];(0,k.each)(e.attributes,function(s){return o.push(s.nodeName)}),o.forEach(function(s){return n.removeAttr(s)})},r.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},r.prototype.prevDef=function(t){t.preventDefault()},r.prototype.updateScript=function(){var t=this,e=t.model,n=t.em;e.get("script")&&n?.Canvas.getCanvasView().updateScript(this)},r.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},r.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,n=0,o=0,s=function(u){var f=u.offsetParent;f?(n+=f.offsetTop,o+=f.offsetLeft,s(f)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return s(e),t},r.prototype.isInViewport=function(){var t=this,e=t.el,n=t.em,o=t.frameView,s=n.Canvas.getCanvasView(),u=s.getElBoxRect(e,{local:!0}),f=o.el,c=f.clientHeight,h=f.clientWidth,g=u.y,m=u.x,y=g+u.height,w=m+u.width,C=g>=0&&g<c,x=y>0&&y<c,E=w>=0&&w<h,N=m>0&&m<=h,L=(C||x)&&(E||N);return L},r.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var n=this.isInViewport();if(!n||t.force){var o=this.el;if(t.behavior!=="smooth"){var s=this.getOffsetRect();(e=o.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,s.top)}else o.scrollIntoView(ao({behavior:"smooth",block:"nearest"},t))}},r.prototype.reset=function(){var t=this,e=t.el,n=t.model;t.scriptContainer&&n.emitWithEditor(je.I.scriptUnmount,{component:n,view:t,el:e}),this.el="",this._ensureElement(),this._setData(),(0,Kt.bG)(e,this.el),this.render()},r.prototype._setData=function(){var t=this,e=t.model,n=t.el,o=e.components(),s=this;this.$el.data({model:e,collection:o,view:s}),(0,Ot.setViewEl)(n,this)},r.prototype._createElement=function(t){return this.createDoc.createElement(t)},r.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new Rv({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),o=0,s=n.length;o<s;o++)t.appendChild(n.shift())},r.prototype.renderAttributes=function(t,e,n){n===void 0&&(n={}),!n.skipViewUpdate&&(this.updateAttributes(),this.updateClasses())},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Ot.setViewEl)(this.el,this),this.postRender(),this)},r.prototype.postRender=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,n=t.el;this.onRender(this._clbObj()),e.emitWithEditor(je.I.render,{component:e,view:this,el:n}),this.rendered=!0}},r.getEvents=function(){return(0,k.result)(this.prototype,"events")},r})(Ht.Ss);const Ge=$_;var q_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Y_=(function(i){q_(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ge);const X_=Y_;var J_=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Z_=(function(i){J_(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initialize=function(t){t===void 0&&(t={}),i.prototype.initialize.call(this,t),this.postRender=this.postRender.bind(this),this.listenTo(this.model.components(),"reset",this.postRender),this.dataResolverListener=new As({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender})},r.prototype.renderDataResolver=function(){var t=this.model.getIfTrueContent(),e=this.model.getIfFalseContent(),n=t?.getEl(),o=e?.getEl(),s=this.model.isTrue();n&&(n.style.display=s?"":"none"),o&&(o.style.display=s?"none":"")},r.prototype.postRender=function(){this.renderDataResolver(),i.prototype.postRender.call(this)},r.prototype.remove=function(){return this.stopListening(this.model.components(),"reset",this.postRender),this.dataResolverListener.destroy(),i.prototype.remove.call(this)},r})(Ge);const Q_=Z_;var tw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ew=(function(i){tw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initialize=function(t){var e=this;t===void 0&&(t={}),i.prototype.initialize.call(this,t),this.dataResolverListener=new As({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return e.postRender()}})},r.prototype.remove=function(){return this.dataResolverListener.destroy(),i.prototype.remove.call(this)},r.prototype.postRender=function(){var t=this.model,e=t.getDataResolver(),n=!!e.asPlainText;n?this.el.textContent=t.getDataValue():this.el.innerHTML=t.getDataValue(),i.prototype.postRender.call(this)},r})(Ge);const rw=ew;var nw=function(){return{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}};const ow=nw;var iw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),zl=function(){return zl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},zl.apply(this,arguments)},aw=(function(i){iw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return zl(zl({},i.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var t=this.content,e=this.parent();return e?.is("script")?t:this.__escapeContent(t)},r.prototype.__escapeContent=function(t){return(0,Ot.escapeNodeContent)(t)},r.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},r})(ir);const Vv=aw;var sw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),wf=function(){return wf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},wf.apply(this,arguments)},lw=(function(i){sw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return wf({},i.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},r.isComponent=function(t){var e;if(t.nodeType==8)return{type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},r})(Vv);const uw=lw;var cw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Kl=function(){return Kl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Kl.apply(this,arguments)},Ac="iframe",fw=(function(i){cw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Kl(Kl({},i.prototype.defaults),{type:Ac,tagName:Ac,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Ac},r})(ir);const dw=fw;var pw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Gl=function(){return Gl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Gl.apply(this,arguments)},$p='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',hw=(function(i){pw(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this,o=n.get("attributes").src;return o&&(0,Ot.buildBase64UrlFromSvg)((0,k.result)(n,"defaults").src)!==o&&n.set("src",o,{silent:!0}),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Gl(Gl({},i.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat($p,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat($p,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initToolbar=function(){i.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,n="image-editor";if(e.has(n)){for(var o=!1,s=this.get("toolbar"),u=0;u<s.length;u++)if(s[u].command==="image-editor"){o=!0;break}o||(s.push({attributes:{class:"fa fa-pencil"},command:n}),this.set("toolbar",s))}}},r.prototype.getAttrToHTML=function(){var t=i.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},r.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",n=e;return e&&e.substr(0,4)==="<svg"&&(n=(0,Ot.buildBase64UrlFromSvg)(e)),n},r.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,k.result)(this,"defaults").src;return t===e||t===(0,Ot.buildBase64UrlFromSvg)(e)},r.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t),n=e.attributes;return n&&e.src===n.src&&delete e.src,e},r.prototype.parseUri=function(t){var e={},n=function(o){o===void 0&&(o="");for(var s={},u=o.substring(1).split("&"),f=0;f<u.length;f++){var c=u[f].split("="),h=decodeURIComponent(c[0]);h&&(s[h]=decodeURIComponent(c[1]||""))}return s};if((0,Ot.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:n(e.search)}},r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)==="img"},r})(ir);const Zf=hw;var vw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),$l=function(){return $l=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},$l.apply(this,arguments)},gw=(function(i){vw(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this;return n.__checkInnerChilds(),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){return $l($l({},i.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(n){n.isInstanceOf("textnode")||n.set({locked:!0,layerable:!1})};(0,k.isFunction)(t)?this.forEachChild(function(n){t(n)&&e(n)}):this.forEachChild(e)}},r})(ir);const Qf=gw;var mw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ql=function(){return ql=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ql.apply(this,arguments)},kc="label",yw=(function(i){mw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return ql(ql({},i.prototype.defaults),{type:kc,tagName:kc,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===kc},r})(Qf);const _w=yw;var ww=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Yl=function(){return Yl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Yl.apply(this,arguments)},qp="link",bw=(function(i){ww(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Yl(Yl({},i.prototype.defaults),{type:qp,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){e===void 0&&(e={});var n;if((0,Ot.toLowerCase)(t.tagName)==="a"){var o=e.textTags||[];n={type:qp,editable:!1};var s=t.childNodes,u=s.length;u||delete n.editable,(0,k.forEach)(s,function(f){var c=f.tagName;(f.nodeType==3&&f.textContent.trim()!==""||c&&o.indexOf((0,Ot.toLowerCase)(c))>=0)&&delete n.editable})}return n},r})(Qf);const Cw=bw;var Sw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Xl=function(){return Xl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Xl.apply(this,arguments)},xw=(function(i){Sw(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this;return n.get("src")?n.parseFromSrc():n.updateSrc(),n.listenTo(n,"change:address change:zoom change:mapType",n.updateSrc),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){var t=i.prototype.defaults;return Xl(Xl({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),n=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",n=n?"&t="+n:"";var o=this.get("mapUrl")+"?"+t+e+n;return o+="&output=embed",o},r.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},r.isComponent=function(t){if((0,Ot.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},r})(Zf);const Ow=xw;var Tw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Jl=function(){return Jl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Jl.apply(this,arguments)},Mc="script",Pw=(function(i){Tw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Jl(Jl({},i.prototype.defaults),{type:Mc,tagName:Mc,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Mc},r})(ir);const Ew=Pw;var Aw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Zl=function(){return Zl=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Zl.apply(this,arguments)},Dc="svg",kw=(function(i){Aw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Zl(Zl({},i.prototype.defaults),{type:Dc,tagName:Dc,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Dc},r})(ir);const Fv=kw;var Mw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ql=function(){return Ql=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ql.apply(this,arguments)},Dw=(function(i){Mw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return Ql(Ql({},i.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},r})(Fv);const Lw=Dw;var Iw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),tu=function(){return tu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},tu.apply(this,arguments)},Lc="table",jw=(function(i){Iw(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this,o=n.get("components");return!o.length&&o.add({type:"tbody"}),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){return tu(tu({},i.prototype.defaults),{type:Lc,tagName:Lc,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Lc},r})(ir);const Rw=jw;var Vw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),eu=function(){return eu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},eu.apply(this,arguments)},Ic="tbody",Fw=(function(i){Vw(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this,o=n.get("components"),s=n.get("columns"),u=n.get("rows");if(!o.length){for(var f=[];u--;){for(var c=[],h=s;h--;)c.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:c})}o.add(f)}return n}return Object.defineProperty(r.prototype,"defaults",{get:function(){return eu(eu({},i.prototype.defaults),{type:Ic,tagName:Ic,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Ic},r})(ir);const td=Fw;var Nw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ru=function(){return ru=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ru.apply(this,arguments)},Hw=(function(i){Nw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return ru(ru({},i.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return["td","th"].indexOf((0,Ot.toLowerCase)(t.tagName))>=0},r})(ir);const Uw=Hw;var Bw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),nu=function(){return nu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},nu.apply(this,arguments)},jc="tfoot",Ww=(function(i){Bw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return nu(nu({},i.prototype.defaults),{type:jc,tagName:jc})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===jc},r})(td);const zw=Ww;var Kw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ou=function(){return ou=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ou.apply(this,arguments)},Rc="thead",Gw=(function(i){Kw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return ou(ou({},i.prototype.defaults),{type:Rc,tagName:Rc})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Rc},r})(td);const $w=Gw;var qw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),iu=function(){return iu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},iu.apply(this,arguments)},Yp="tr",Yw=(function(i){qw(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"defaults",{get:function(){return iu(iu({},i.prototype.defaults),{tagName:Yp,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,Ot.toLowerCase)(t.tagName)===Yp},r})(ir);const Xw=Yw;var Jw=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),au=function(){return au=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},au.apply(this,arguments)},Vc="video",Zi="yt",Qi="vi",ta="ytnc",Xp="so",Fc=function(i){return i&&i!=="0"},Zw=(function(i){Jw(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this;return n.get("src")&&n.parseFromSrc(),n.updatePropsFromAttr(),n.updateTraits(),n.on("change:provider",n.updateTraits),n.on("change:videoId change:provider",n.updateSrc),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){return au(au({},i.prototype.defaults),{type:Vc,tagName:Vc,videoId:"",void:!1,provider:Xp,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:!1,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.updatePropsFromAttr=function(){if(this.get("provider")===Xp){var t=this.get("attributes"),e=t.controls,n=t.autoplay,o=t.loop,s=t.muted,u={};(0,Ot.isDef)(e)&&(u.controls=!!e),(0,Ot.isDef)(n)&&(u.autoplay=!!n),(0,Ot.isDef)(o)&&(u.loop=!!o),(0,Ot.isDef)(s)&&(u.muted=!!s),(0,Ot.isEmptyObj)(u)||this.set(u)}},r.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),n="iframe",o;switch(e){case Zi:case ta:o=this.getYoutubeTraits();break;case Qi:o=this.getVimeoTraits();break;default:n="video",o=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:o}),t.get("ready")&&t.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),n=e.query;switch(t){case Zi:case ta:case Qi:this.set("videoId",e.pathname.split("/").pop()),n.list&&this.set("list",n.list),Fc(n.autoplay)&&this.set("autoplay",!0),Fc(n.loop)&&this.set("loop",!0),parseInt(n.controls)===0&&this.set("controls",!1),Fc(n.color)&&this.set("color",n.color),n.rel==="0"&&this.set("rel",0),n.modestbranding==="1"&&this.set("modestbranding",1),n.muted==="1"&&this.set("muted",!0);break}},r.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case Zi:e=this.getYoutubeSrc();break;case ta:e=this.getYoutubeNoCookieSrc();break;case Qi:e=this.getVimeoSrc();break}this.set({src:e})},r.prototype.getAttrToHTML=function(){var t=i.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case Zi:case ta:case Qi:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls"),t.muted=!!this.get("muted")}return t},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Zi,name:"Youtube"},{value:ta,name:"Youtube (no cookie)"},{value:Qi,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),this.getMutedTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0},this.getMutedTrait()]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getMutedTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getMutedTrait=function(){return{type:"checkbox",label:"Muted",name:"muted",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),n=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=n?"&list=".concat(n):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("muted")?"&mute=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},r.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},r.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("muted")?"&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},r.isComponent=function(t){var e=t.tagName,n=t.src,o=/youtube\.com\/embed/.test(n),s=/youtube-nocookie\.com\/embed/.test(n),u=/player\.vimeo\.com\/video/.test(n),f=o||s||u;if((0,Ot.toLowerCase)(e)==Vc||(0,Ot.toLowerCase)(e)=="iframe"&&f){var c={type:"video"};return n&&(c.src=n),f&&(o?c.provider=Zi:s?c.provider=ta:u&&(c.provider=Qi)),c}},r})(Zf);const Qw=Zw;var tb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),la=function(){return la=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},la.apply(this,arguments)},eb=(function(i){tb(r,i);function r(t,e){t===void 0&&(t={});var n=i.call(this,t,e)||this;n._resolverCurrentItem=0,n._isWatchingCollectionStateMap=!1;var o=n.dataResolverProps;return o&&(n.onDataSourceChange(),n.syncComponentsCollectionState()),n}return Object.defineProperty(r.prototype,"defaults",{get:function(){return la(la({},i.prototype.defaults),{dataResolver:null,tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.preInit=function(){var t,e,n=this,o=n.opt,s=n.attributes,u=(t=this.em)===null||t===void 0?void 0:t.Components,f=(e=u?.getType(ba))===null||e===void 0?void 0:e.model,c=u?.getType("default").model;if(f){var h=s.head,g=s.docEl;this.set({head:h&&h instanceof ir?h:new f(la({},h),o),docEl:g&&g instanceof ir?g:new c(la({tagName:"html"},g),o)},{silent:!0})}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),r.prototype.clone=function(t){var e=i.prototype.clone.call(this,t);return e.set("head",this.get("head").clone(t)),e.set("docEl",this.get("docEl").clone(t)),e},r.prototype.toHTML=function(t){t===void 0&&(t={});var e=this.doctype,n=(0,k.isUndefined)(t.asDocument)?!!e:t.asDocument,o=this,s=o.head,u=o.docEl,f=i.prototype.toHTML.call(this,t),c=n&&s?.toHTML(t)||"",h=n&&(0,Kt.kk)(u?.getAttrToHTML())||"",g=h?" ".concat(h):"";return n?"".concat(e,"<html").concat(g,">").concat(c).concat(f,"</html>"):f},r.prototype.onCollectionsStateMapUpdate=function(t){var e=this.head;i.prototype.onCollectionsStateMapUpdate.call(this,t),e.onCollectionsStateMapUpdate(t)},r.prototype.syncComponentsCollectionState=function(){i.prototype.syncComponentsCollectionState.call(this),this.head.syncComponentsCollectionState()},r.prototype.syncOnComponentChange=function(t,e,n){var o=this.getCollectionsStateMap();this.collectionsStateMap=o,i.prototype.syncOnComponentChange.call(this,t,e,n),this.onCollectionsStateMapUpdate(o)},Object.defineProperty(r.prototype,"resolverCurrentItem",{get:function(){return this._resolverCurrentItem},set:function(t){this._resolverCurrentItem=t,this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},enumerable:!1,configurable:!0}),r.prototype.setResolverCurrentItem=function(t){this.resolverCurrentItem=t},r.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},r.prototype.listenToPropsChange=function(){var t=this;this.on("change:dataResolver",function(e,n){var o=!(0,k.isUndefined)(n);o&&!t._isWatchingCollectionStateMap?(t._isWatchingCollectionStateMap=!0,t.syncComponentsCollectionState(),t.onCollectionsStateMapUpdate(t.getCollectionsStateMap()),t.listenToDataSource()):!o&&t._isWatchingCollectionStateMap&&(t._isWatchingCollectionStateMap=!1,t.stopSyncComponentCollectionState())}),this.listenToDataSource()},r.prototype.getCollectionsStateMap=function(){var t,e=this,n=e.dataResolverPath,o=e.resolverCurrentItem,s=e.em,u=s.DataSources;if(!n)return{};var f=Ss.rootData,c=this.getDataSourceItems(),h=(0,k.isNumber)(o)?c[o]:(0,k.isString)(o)?u.getValue("".concat(n,".").concat(o)):c;return t={},t[f]={collectionId:f,currentItem:h},t},r.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&e?.add(this),i.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e?.remove(this),i.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r})(jv);const rb=eb;var nb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),su=function(){return su=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},su.apply(this,arguments)},ob=(function(i){nb(r,i);function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.apply(this,t)||this;n.refreshDbn=(0,k.debounce)(function(){return n.refresh()},0);var o=n.events;return n.on(o.update,n.onUpdate),n.on(o.updateInside,n.onUpdateDeep),n}return r.prototype.removeChildren=function(t,e,n){var o;n===void 0&&(n={}),i.prototype.removeChildren.call(this,t,e,n),(o=yn(t))===null||o===void 0||o.forEach(function(s){return Hu(s,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},r.prototype.onAdd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.prototype.onAdd.apply(this,t);var n=t[0];this.__trgEvent(this.events.symbolMainAdd,{component:n})},r.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},r.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},r.prototype.refresh=function(){var t=this,e=t.em,n=t.events;e.trigger(n.symbol)},r.prototype.__trgEvent=function(t,e,n){n===void 0&&(n=!1);var o=this,s=o.em,u=o.events,f=n?u.symbolInstance:u.symbolMain;s.trigger(t,e),s.trigger(f,su(su({},e),{event:t})),this.refreshDbn()},r})(Ps);const ib=ob;var ab=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),sb=(function(i){ab(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this,e=t.model,n=t.el;return e.opt.temporary?this:(n.textContent=e.content,this)},r})(Ge);const Nv=sb;var lb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ub=(function(i){lb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype._createElement=function(){return document.createComment(this.model.content)},r})(Nv);const cb=ub;var fb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),db=(function(i){fb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var t=(0,Kt.I6)(this.el,"iframe")[0];t&&(0,Kt.X6)(t,{src:this.__getSrc()})},r.prototype.render=function(){i.prototype.render.call(this);var t=(0,Kt.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r})(Ge);const pb=db;var hb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),vb=(function(i){hb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,n=t.em,o=e.get("file");if(o&&n){var s=n.Assets.FileUploader();s?.uploadFile({dataTransfer:{files:[o]}},function(u){var f=u&&u.data&&u.data[0],c=f&&((0,k.isString)(f)?f:f.src);c&&e.set({src:c})},{componentView:this,file:o}),e.set("file","")}}},r.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){i.prototype.updateClasses.call(this);var t=this,e=t.el,n=t.classEmpty,o=t.model,s=o.getSrcResult()&&!o.isDefaultSrc(),u=s?"remove":"add";e.classList[u](n)},r.prototype.onActive=function(t){t?.stopPropagation();var e=this,n=e.em,o=e.model,s=n?.Assets;s&&o.get("editable")&&s.open({select:function(u,f){o.set({src:u.getSrc()}),f&&s.close()},target:o,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var t=this,e=t.model,n=t.el,o=e.getSrcResult({fallback:!0});o&&(n.srcset&&(n.srcset=""),n.src=o)},r.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},r.prototype.noDrag=function(t){return t.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,n=t.model,o=e.attr("class")||"";return!n.get("src")&&e.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},r})(Ge);const ed=vb;var gb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),_i=function(){return _i=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},_i.apply(this,arguments)},pl=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},hl=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},mb=(function(i){gb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(t){i.prototype.initialize.call(this,t),(0,k.bindAll)(this,"disableEditing","onDisable");var e=this.model,n=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=n?.RichTextEditor},r.prototype.updateContentText=function(t,e,n){n===void 0&&(n={}),!n.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var t=this,e=t.model,n=t.rteEnabled,o=t.em,s=o?.getEditing(),u=s===e,f=!0,c=!1,h;if((n||!e.get("editable")||u||(c=e.isChildOf("text")))&&(f=!1,c&&!e.get("textable"))){for(var g=e.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?h=g:f=!0}return{result:f,delegate:h}},r.prototype.onActive=function(t){return pl(this,void 0,void 0,function(){var e,n,o,s,u,f,c,h,g,m,y,w;return hl(this,function(C){switch(C.label){case 0:return e=this,n=e.rte,o=e.em,s=this.canActivate(),u=s.result,f=s.delegate,u?((w=t?.stopPropagation)===null||w===void 0||w.call(t),c=this,[4,this.getContent()]):(f&&((y=t?.stopPropagation)===null||y===void 0||y.call(t),o.setSelected(f),f.trigger("active",t)),[2]);case 1:if(c.lastContent=C.sent(),!n)return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),h=this,g=this,[4,n.enable(h,this.activeRte,{event:t,view:h})];case 3:return g.activeRte=C.sent(),[3,5];case 4:return m=C.sent(),o.logError(m),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(t){this.disableEditing(t)},r.prototype.disableEditing=function(){return pl(this,arguments,void 0,function(t){var e,n,o,s,u,f,c,h,g;return t===void 0&&(t={}),hl(this,function(m){switch(m.label){case 0:return e=this,n=e.model,o=e.rte,s=e.activeRte,u=e.em,f=n&&n.get("editable"),o?(c={},[4,this.getContent()]):[3,7];case 1:h=m.sent(),m.label=2;case 2:return m.trys.push([2,4,,5]),[4,o.disable(this,s,t)];case 3:return c=m.sent(),[3,5];case 4:return g=m.sent(),u.logError(g),[3,5];case 5:return f&&(h!==this.lastContent||c.forceSync)?[4,this.syncContent(_i(_i({},t),{content:h}))]:[3,7];case 6:m.sent(),this.lastContent="",m.label=7;case 7:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){return pl(this,void 0,void 0,function(){var t,e,n,o;return hl(this,function(s){switch(s.label){case 0:return t=this,e=t.rte,n=t.activeRte,o="",e?[4,e.getContent(this,n)]:[3,2];case 1:o=s.sent(),s.label=2;case 2:return[2,o]}})})},r.prototype.syncContent=function(){return pl(this,arguments,void 0,function(t){var e,n,o,s,u,f,c,h,g;return t===void 0&&(t={}),hl(this,function(m){switch(m.label){case 0:return e=this,n=e.model,o=e.rte,s=e.rteEnabled,!s&&!t.force?[2]:(g=t.content)!==null&&g!==void 0?(f=g,[3,3]):[3,1];case 1:return[4,this.getContent()];case 2:f=m.sent(),m.label=3;case 3:return u=f,c=n.components(),h=_i({fromDisable:1},t),n.set("content","",h),o?.customRte&&!o.customRte.parseContent?(c.length&&c.reset(void 0,_i(_i({},t),{keepIds:ia(c)})),n.set("content",u,h)):c.resetFromString(u,t),[2]}})})},r.prototype.insertComponent=function(t,e){var n;e===void 0&&(e={});var o=this,s=o.model,u=o.el,f=u.ownerDocument,c=f.getSelection();if(c?.rangeCount){var h=c.getRangeAt(0),g=h.startContainer,m=h.startOffset,y=(0,Ot.getComponentModel)(g),w=[];if(y&&(!((n=y.is)===null||n===void 0)&&n.call(y,"textnode"))){var C=y.collection;C.forEach(function(N){if(N===y){var L="textnode",H=e.useDomContent?g.textContent||"":N.content;w.push({type:L,content:H.slice(0,m)}),w.push(t),w.push({type:L,content:H.slice(m)})}else w.push(N)});var x=w.filter(Boolean),E=x.indexOf(t);return C.reset(x,e),C.at(E)}}return s.append(t,e)},r.prototype.onInput=function(){var t=this.model,e=[je.I.update,je.I.input];e.forEach(function(n){return t.emitWithEditor(n,t)})},r.prototype.disablePropagation=function(t){t.stopPropagation()},r.prototype.toggleEvents=function(t){var e=this,n=e.em,o=e.model,s=e.$el,u={on:Kt.on,off:Kt.AU},f=t?"on":"off";n.setEditing(t?this:!1),this.rteEnabled=!!t;var c=[this.el.ownerDocument,document];if(u.off(c,"mousedown",this.onDisable),u[f](c,"mousedown",this.onDisable),n[f]("toolbar:run:before",this.onDisable),o){var h=n.RichTextEditor.events;o[f]("removed",this.onDisable),o.trigger(t?h.enable:h.disable)}if(s?.off("mousedown",this.disablePropagation),s&&s[f]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,g=g.parentNode,g&&g.tagName=="BODY"&&(g=0)},r})(Ge);const Hv=mb;var yb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),_b=(function(i){yb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.render=function(){return i.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r})(Hv);const Uv=_b;var wb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),bb=(function(i){wb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Uv);const Cb=bb;var Sb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),xb=(function(i){Sb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(t){i.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},r.prototype.render=function(){return i.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r})(ed);const Ob=xb;var Tb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Pb=(function(i){Tb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r})(Ge);const Eb=Pb;var Ab=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),kb=(function(i){Ab(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},r})(Ge);const Jp=kb;var Mb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Db=(function(i){Mb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ge);const Lb=Db;var Ib=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),jb=(function(i){Ib(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ge);const Rb=jb;var Vb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Fb=(function(i){Vb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ge);const Nb=Fb;var Hb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ub=(function(i){Hb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ge);const Bb=Ub;var Wb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),zb=(function(i){Wb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ge);const Kb=zb;var Gb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),$b=(function(i){Gb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.events=function(){return{}},r})(Ge);const qb=$b;var Yb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Xb=(function(i){Yb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){Ge.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster","muted"],n=e.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},r.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},r.prototype.updateSrc=function(){var t=this,e=t.model,n=t.videoEl;if(n){var o=e.get("provider"),s=e.get("src");switch(o){case"yt":s=e.getYoutubeSrc();break;case"ytnc":s=e.getYoutubeNoCookieSrc();break;case"vi":s=e.getVimeoSrc();break}n.src=s}},r.prototype.updateVideo=function(){var t=this,e=t.model,n=t.videoEl,o=e.get("provider");switch(o){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(n){var s=n;s.loop=e.get("loop"),s.autoplay=e.get("autoplay"),s.controls=e.get("controls"),s.poster=e.get("poster"),s.muted=e.get("muted")}}},r.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},r.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},r.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},r.prototype.render=function(){Ge.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},r})(ed);const Jb=Xb;var Zb=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Qb=(function(i){Zb(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.tagName=function(){return"div"},r})(Ge);const tC=Qb;var eC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ar=function(){return Ar=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ar.apply(this,arguments)},rC=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},nC=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},ua;(function(i){i[i.InvalidSource=0]="InvalidSource",i[i.SourceReject=1]="SourceReject",i[i.TargetReject=2]="TargetReject"})(ua||(ua={}));var oC=(function(i){eC(r,i);function r(t){var e=i.call(this,t,"DomComponents",new Ps(void 0,{em:t}),je.I,ow())||this;e.componentTypes=[{id:dr.collectionItem,model:Pc,view:Ge},{id:dr.conditionTrue,model:Pc,view:Ge},{id:dr.conditionFalse,model:Pc,view:Ge},{id:dr.collection,model:H_,view:X_},{id:dr.condition,model:T_,view:Q_},{id:dr.variable,model:S_,view:rw},{id:"cell",model:Uw,view:Rb},{id:"row",model:Xw,view:Kb},{id:"table",model:Rw,view:qb},{id:"thead",model:$w,view:Bb},{id:"tbody",model:td,view:Lb},{id:"tfoot",model:zw,view:Nb},{id:"map",model:Ow,view:Ob},{id:"link",model:Cw,view:Uv},{id:"label",model:_w,view:Cb},{id:"video",model:Qw,view:Jb},{id:"image",model:Zf,view:ed},{id:"script",model:Ew,view:Eb},{id:"svg-in",model:Lw,view:Jp},{id:"svg",model:Fv,view:Jp},{id:"iframe",model:dw,view:pb},{id:"comment",model:uw,view:cb},{id:"textnode",model:Vv,view:Nv},{id:ba,model:X0,view:Ge},{id:"wrapper",model:rb,view:tC},{id:"text",model:Qf,view:Hv},{id:"default",model:ir,view:Ge}],e.componentsById={},e.Component=ir,e.Components=Ps,e.ComponentView=Ge,e.ComponentsView=Rv,e.storageKey="components",e.keySymbols="symbols",e.events=je.I;var n=e.config;e.symbols=new ib([],{em:t,config:n,domc:e}),t&&(e.config.components=t.config.components||e.config.components);var o=e.config.pStylePrefix;if(o&&(e.config.stylePrefix=o+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var s=t.get("selected");t.listenTo(s,"add",function(u,f,c){return e.selectAdd(s.getComponent(u),c)}),t.listenTo(s,"remove",function(u,f,c){return e.selectRemove(s.getComponent(u),c)})}return e}return r.prototype.postLoad=function(){var t=this,e=t.em,n=t.symbols,o=e.UndoManager;o.add(n)},r.prototype.load=function(t){var e=this,n=this.loadProjectData(t,{onResult:function(o){var s=e.getWrapper();if(s||(e.em.Pages.add({},{select:!0}),s=e.getWrapper()),(0,k.isArray)(o))o.length&&s.components(o);else{var u=o.components,f=u===void 0?[]:u,c=rC(o,["components"]);s.set(c),s.components(f)}}});return this.symbols.reset(t[this.keySymbols]||[]),n},r.prototype.store=function(){var t;return t={},t[this.keySymbols]=this.symbols,t},r.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t?.getMainFrame();return e?.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var t=this.getWrapper();return t?.components()},r.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},r.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e?.filter(Boolean).forEach(function(n){return n.remove(t)}),this},r.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},r.prototype.addType=function(t,e){var n=this.em,o=e.model,s=o===void 0?{}:o,u=e.view,f=u===void 0?{}:u,c=e.isComponent,h=e.extend,g=e.extendView,m=e.extendFn,y=m===void 0?[]:m,w=e.extendFnView,C=w===void 0?[]:w,x=e.block,E=this.getType(t),N=this.getType(h),L=this.getType(g),H=N||E||this.getType("default"),rt=H.model,nt=L?L.view:H.view,vt=function(Y,K,ct){return Y.reduce(function(M,wt){var gt=K[wt],At=ct.prototype[wt];return gt&&At&&(M[wt]=function(){for(var Qt=[],oe=0;oe<arguments.length;oe++)Qt[oe]=arguments[oe];At.bind(this).apply(void 0,Qt),gt.bind(this).apply(void 0,Qt)}),M},{})};if(typeof s=="object"){var et={defaults:s.defaults};delete s.defaults;var G=new Set(rt.typeExtends);G.add(rt.getDefaults().type),e.model=rt.extend(Ar(Ar({},s),vt(y,s,rt)),{typeExtends:G,isComponent:E&&!N&&!c?rt.isComponent:c||(function(){return 0})}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return Ar(Ar({},(0,k.result)(rt.prototype,"defaults")||{}),(0,k.result)(et,"defaults")||{})}})}if(typeof f=="object"&&(e.view=nt.extend(Ar(Ar({},f),vt(C,f,nt)))),E?(E.model=e.model,E.view=e.view):(e.id=t,this.componentTypes.unshift(e)),x){var W={id:t,label:t,content:{type:t}},U=x===!0?W:Ar(Ar({},W),x);n.Blocks.add(U.id||t,U)}var D="component:type:".concat(E?"update":"add");return n?.trigger(D,E||e),this},r.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++){var o=e[n].id;if(o==t)return e[n]}},r.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var o=e.indexOf(n);return e.splice(o,1),n}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(t,e){var n=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return n.em.trigger(o,t,e)}))},r.prototype.selectRemove=function(t,e){var n=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return n.em.trigger(o,t,e)}))},r.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),n=t.previous("componentHovered"),o="hovered";n&&n.get("status")==o&&n.set({status:"",state:""}),e&&(0,k.isEmpty)(e.get("status"))&&e.set("status",o)},r.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,n=t.em;if(!e&&n){var o=n.shallow;if(!o)return;var s=o.Components;if(s.componentTypes=this.componentTypes,e=s.getWrapper(),e){var u=[Ol,mf].join(" ");e.on(u,(0,k.debounce)(function(){return e?.components("")},100))}this.shallow=e}return e},r.prototype.isComponent=function(t){return(0,Ot.isComponent)(t)},r.prototype.addSymbol=function(t){if(!((0,k.isSymbol)(t)&&!Ti(t))){var e=t.clone({symbol:!0});return Si(e)&&this.symbols.add(e),this.em.trigger("component:toggled"),e}},r.prototype.getSymbols=function(){return nC([],this.symbols.models,!0)},r.prototype.detachSymbol=function(t){kl(t)&&Hu(t)},r.prototype.getSymbolInfo=function(t,e){e===void 0&&(e={});var n=Si(t),o=Wn(t),s=!!o,u=yn(n?t:o)||[],f=o||(n?t:void 0),c=xo(t,{changed:e.withChanges}),h=n||s,g=h&&Ti(t);return{isSymbol:h,isMain:n,isInstance:s,isRoot:g,main:f,instances:u,relatives:c||[]}},r.prototype.canMove=function(t,e,n){var o={result:!1,reason:ua.InvalidSource,target:t,source:null};if(!e||!t)return o;if(ro(t)&&e instanceof ir&&ro(e)){var s=Ts(t),u=Si(s)?s:Wn(s),f=Ts(e),c=Si(f)?f:Wn(f),h=u===c,g=s!==f;if(h&&g)return Ar(Ar({},o),{reason:ua.TargetReject})}var m=(0,Ot.isComponent)(e)?e:null;if(!m){var y=this.getShallowWrapper();m=y?.append(e,{temporary:!0})[0]||null}if(o.source=m,!m)return o;var w=m.get("draggable");if((0,k.isFunction)(w))w=!!w(m,t,n);else{var C=t.getEl();w=(0,k.isArray)(w)?w.join(","):w,w=(0,k.isString)(w)?C?.matches(w):w}if(!w)return Ar(Ar({},o),{reason:ua.SourceReject});var x=t.get("droppable");if((0,k.isFunction)(x))x=!!x(m,t,n);else if(x===!1&&t.isInstanceOf("text")&&m.get("textable"))x=!0;else{var C=m.getEl();x=(0,k.isArray)(x)?x.join(","):x,x=(0,k.isString)(x)?C?.matches(x):x}var E=[t].concat(t.parents()).indexOf(m)>-1;return!x||E?Ar(Ar({},o),{reason:ua.TargetReject}):Ar(Ar({},o),{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(t){return this.componentsById[t]||null},r.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(n){return e[n]&&e[n].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(n){return{}})},r})(Eo);const iC=oC;var aC=function(){return{stylePrefix:"css-",rules:[]}};const sC=aC;var lC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),uC=Number.MAX_VALUE,cC=function(i){var r=/(-?\d*\.?\d+)\w{0,}/.exec(i);return r?r[0]:""},fC=(function(i){lC(r,i);function r(){var t=i.call(this)||this;return(0,k.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return r.prototype.buildFromModel=function(t,e){var n=this;e===void 0&&(e={});var o="",s=this.em,u=s&&s.getConfig().avoidInlineStyle,f=t.styleToString(),c=t.classes;this.ids.push("#".concat(t.getId())),c.forEach(function(g){return n.compCls.push(g.getFullName())}),!u&&f&&(o="#".concat(t.getId(),"{").concat(f,"}"));var h=t.components();return h.forEach(function(g){return o+=n.buildFromModel(g,e)}),o},r.prototype.build=function(t,e){var n=this;e===void 0&&(e={});var o=e.json,s=e.em,u=e.cssc||s?.Css;this.em=s,this.compCls=[],this.ids=[],this.model=t;var f=[],c=t?this.buildFromModel(t,e):"",h=(0,k.isUndefined)(e.clearStyles)&&s?s.getConfig().clearStyles:e.clearStyles;if(u){var g=e.rules||u.getAll(),m={},y=[];e.onlyMatched&&t&&(0,Ot.hasWin)()&&(g=this.matchedRules(t,g)),g.forEach(function(w){var C=w.getAtRule();if(C){var x=m[C];x?x.push(w):m[C]=[w];return}var E=n.buildFromRule(w,y,e);o?f.push(E):c+=E}),this.sortMediaObject(m).forEach(function(w){var C="",x=w.key,E=w.value;E.forEach(function(N){var L=n.buildFromRule(N,y,e);N.get("singleAtRule")?c+="".concat(x,"{").concat(L,"}"):C+=L,o&&f.push(L)}),C&&(c+="".concat(x,"{").concat(C,"}"))}),s&&h&&g.remove&&g.remove(y)}return o?f.filter(function(w){return w}):c},r.prototype.buildFromRule=function(t,e,n){var o=this,s;n===void 0&&(n={});var u="",f=this.model,c=t.selectorsToString({skipAdd:1}),h=t.get("selectorsAdd"),g=t.get("singleAtRule"),m;if((s=t.get("selectors"))===null||s===void 0||s.forEach(function(w){var C=w.getFullName();(o.compCls.indexOf(C)>=0||o.ids.indexOf(C)>=0||n.keepUnusedStyles)&&(m=1)}),c&&m||h||g||!f){var y=t.getDeclaration();y&&(n.json?u=t:u+=y)}else e.push(t);return u},r.prototype.matchedRules=function(t,e){var n=this,o=t.getEl(),s=[];return e.forEach(function(u){try{u.selectorsToString().split(",").some(function(f){return o?.matches(n.__cleanSelector(f))})&&s.push(u)}catch{}}),t.components().forEach(function(u){s=s.concat(n.matchedRules(u,e))}),s=s.filter(function(u,f){return s.indexOf(u)===f}),s},r.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):uC},r.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var n=[];return(0,k.each)(t,function(o,s){return n.push({key:s,value:o})}),n.sort(function(o,s){var u=[o.key,s.key].every(function(h){return h.indexOf("min-width")!==-1}),f=u?o.key:s.key,c=u?s.key:o.key;return e.getQueryLength(f)-e.getQueryLength(c)})},r.prototype.sortRules=function(t,e){var n=function(f){return f.get("mediaText")||""},o=[n(t),n(e)].every(function(f){return f.indexOf("min-width")!==-1}),s=n(o?t:e),u=n(o?e:t);return this.getQueryLength(s)-this.getQueryLength(u)},r.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},r})(Ht.Kx);const dC=fC;var pC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),bf=function(){return bf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},bf.apply(this,arguments)},hC=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Nc=((0,Ot.hasWin)()?window:{}).CSS,vC=(function(i){pC(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this,t,{em:e.em})||this;return n.views=[],n.config=t||{},n.opt=e,n.em=e.em,n.ensureSelectors(null,null,{}),n.setStyle(n.get("style"),{skipWatcherUpdates:!0}),n.on("change",n.__onChange),n}return r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(t,e){var n=this.em,o=this.changedAttributes();o&&!(0,Ot.isEmptyObj)(o)&&n?.changesUp(e,{rule:t,changed:o,options:e})},r.prototype.clone=function(){var t=this.get("selectors").map(function(e){return e.clone()});return i.prototype.clone.call(this,{selectors:t})},r.prototype.ensureSelectors=function(t,e,n){var o=this.em,s=o?.Selectors,u=[this,"change:selectors",this.ensureSelectors],f=this.getSelectors();if(this.stopListening.apply(this,u),f.models&&(f=hC([],f.models,!0)),f=(0,k.isString)(f)?[f]:f,Array.isArray(f)){var c=f.filter(function(h){return h}).map(function(h){return s?s.add(h):h});f=new Qo(c)}this.set("selectors",f,n),this.listenTo.apply(this,u)},r.prototype.getAtRule=function(){return r.getAtRuleFromProps(this.attributes)},r.getAtRuleFromProps=function(t){var e=t.atRuleType,n=t.mediaText,o=e?"@".concat(e):n?"@media":"";return o+(n&&o?" ".concat(n):"")},r.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],n=this.get("state"),o=this.get("selectorsAdd"),s={escape:function(c){return Nc&&Nc.escape?Nc.escape(c):c}},u=this.getSelectors().getFullString(0,s),f=n&&!t.skipState?":".concat(n):"";return u&&e.push("".concat(u).concat(f)),o&&!t.skipAdd&&e.push(o),e.join(", ")},r.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",n=this.attributes.important,o=this.selectorsToString(t),s=this.styleToString(bf({important:n},t)),u=this.get("singleAtRule");return(o||u)&&(s||t.allowEmpty)&&(e=u?s:"".concat(o,"{").concat(s,"}")),e},r.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,o=e.mediaText,s=t?.Devices.getDevices()||[],u=s.filter(function(f){return f.getWidthMedia()===""})[0];return n!=="media"||!o?u||null:s.filter(function(f){return f.getWidthMedia()===cC(o)})[0]||null},r.prototype.getState=function(){var t=this.em,e=this.get("state"),n=t?.Selectors.getStates()||[];return n.filter(function(o){return o.getName()===e})[0]||null},r.prototype.getComponent=function(){var t,e=this.getSelectors(),n=e.length==1&&e.at(0),o=n&&n.isId()&&n.get("name");return o&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(o))||null},r.prototype.toCSS=function(t){t===void 0&&(t={});var e="",n=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},r.prototype.toJSON=function(t){var e,n=i.prototype.toJSON.call(this,t);if(!((e=this.em)===null||e===void 0)&&e.getConfig().avoidDefaults){var o=this.defaults();(0,k.forEach)(o,function(s,u){n[u]===s&&delete n[u]}),delete n.style.__p,(0,k.isEmpty)(n.selectors)&&delete n.selectors,(0,k.isEmpty)(n.style)&&delete n.style}return n},r.prototype.compare=function(t,e,n,o){var s;o===void 0&&(o={});var u=e||"",f=n||"",c=o.selectorsAdd||"",h=o.atRuleType||"",g=!(0,k.isArray)(t)&&!t.models?[t]:t.models||t;f&&!h&&(h="media");var m=g.map(function(x){return x.getFullName()}),y=(s=this.get("selectors"))===null||s===void 0?void 0:s.map(function(x){return x.getFullName()}),w=m.slice().sort(),C=y.slice().sort();return!(m.length!==y.length||!w.every(function(x,E){return x===C[E]})||this.get("state")!==u||this.get("mediaText")!==f||this.get("selectorsAdd")!==c||this.get("atRuleType")!==h)},r})(bv);const Cf=vC;var gC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Bv=(function(i){gC(r,i);function r(t,e){var n=i.call(this,t)||this;return n.editor=e?.em,setTimeout(function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}),n}return r.prototype.toJSON=function(t){var e=Ht.pM.prototype.toJSON.call(this,t);return e.filter(function(n){return n.style&&!n.shallow})},r.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},r.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},r.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,Ht.pM.prototype.add.apply(this,[t,e])},r})(Ht.pM);const Zp=Bv;Bv.prototype.model=Cf;var mC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),to=function(){return to=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},to.apply(this,arguments)},yC=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},_C=(function(i){mC(r,i);function r(t){var e=i.call(this,t,"CssComposer",null,Sa,sC())||this;e.classes={CssRule:Cf,CssRules:Zp,CssRuleView:Xf,CssRulesView:df},e.events=Sa,e.Selectors=Qo,e.storageKey="styles",e._itemCache=new Map;var n=e.config,o=n.pStylePrefix;return o&&(n.stylePrefix=o+n.stylePrefix),n.rules=e.em.config.style||n.rules||"",e.rules=new Zp([],n),e._setupCacheListeners(),e}return r.prototype._setupCacheListeners=function(){i.prototype._setupCacheListeners.call(this),this.em.listenTo(this.rules,"change:selectors change:state change:mediaText",this._onItemKeyChange.bind(this))},r.prototype._makeCacheKey=function(t){var e=t.getAtRule(),n=t.selectorsToString();return"".concat(e,"__").concat(n)},r.prototype._makeCacheKeyFromProps=function(t){var e=t.atRuleType,n=e===void 0?"":e,o=t.mediaText,s=o===void 0?"":o,u=t.state,f=u===void 0?"":u,c=t.selectorsAdd,h=c===void 0?"":c,g=t.selectors,m=g===void 0?[]:g,y=m.map(function(N){return(0,k.isString)(N)?N:N.toString()}).join(""),w=[];y&&w.push("".concat(y).concat(f?":".concat(f):"")),h&&w.push(h);var C=w.join(", "),x=n?"@".concat(n):s?"@media":"",E=x+(s&&x?" ".concat(s):"");return"".concat(E,"__").concat(C)},r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0}),this._onItemsResetCache(this.rules)},r.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},r.prototype._findRule=function(t,e,n,o){var s=t;if((0,k.isString)(t)){var u=this.em.Selectors,f=t.split(",")[0].trim(),c=this.em.Parser.parserCss.checkNode({selectors:f})[0];s=u.get(c.selectors)}var h=this.rules.find(function(g){return g.compare(s,e,n,o)})||null;return h},r.prototype.add=function(t,e,n,o,s){o===void 0&&(o={}),s===void 0&&(s={});var u=e||"",f=n||"",c=to({},o),h=this._makeCacheKeyFromProps(to(to({state:u,mediaText:f},c),{selectors:Array.isArray(t)?t:[t]})),g=this._itemCache.get(h);if(g&&g.config&&!g.config.singleAtRule)return g;var m=this._findRule(t,u,f,c);return m&&m.config&&!m.config.singleAtRule?(this._cacheItem(m),m):(c.state=u,c.mediaText=f,c.selectors=[],f&&!c.atRuleType&&(c.atRuleType="media"),m=new Cf(c,this.config),m.get("selectors").add(t,s),this.rules.add(m,s),this._cacheItem(m),m)},r.prototype.get=function(t,e,n,o){var s=this._makeCacheKeyFromProps(to(to({},o),{selectors:Array.isArray(t)?t:[t],state:e,width:n,mediaText:n})),u=this._itemCache.get(s);if(u)return u;var f=this._findRule(t,e,n,o);return f&&this._cacheItem(f),f},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var o=this.em,s=[];(0,k.isString)(t)&&(t=o.Parser.parseCss(t));for(var u=t instanceof Array?t:[t],f=0,c=u.length;f<c;f++){var h=u[f]||{};if(h.selectors){var g=o?.Selectors;g||console.warn("Selector Manager not found");for(var m=h.selectors,y=m instanceof Array?m:[m],w=[],C=0,x=y.length;C<x;C++){var E=g.add(y[C]);w.push(E)}var N=this.get(w,h.state,h.mediaText,h),L=this.add(w,h.state,h.mediaText,h,e),H=!N||!e.avoidUpdateStyle,rt=h.style||{};if((0,Ot.isObject)(n)&&L.set(n,e),H){var nt=e.extend?to(to({},L.getStyle("",{skipResolve:!0})),rt):rt;L.setStyle(nt,e)}s.push(L)}}return s},r.prototype.addRules=function(t){return this.addCollection(t)},r.prototype.setRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var o=n.atRuleType,s=n.atRuleParams,u=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],f=u.state,c=u.selectorsAdd,h=this.em.Selectors,g=h.add(u.selectors),m=this.add(g,f,s,{selectorsAdd:c,atRule:o});return n.addStyles?m.addStyle(e,n):m.setStyle(e,n),m},r.prototype.getRule=function(t,e){e===void 0&&(e={});var n=this.em,o=n.Selectors,s=n.Parser.parserCss.checkNode({selectors:t})[0],u=o.get(s.selectors),f=s.state,c=s.selectorsAdd,h=e.atRuleType,g=e.atRuleParams;return u?this.get(u,f,g,{selectorsAdd:c,atRuleType:h}):void 0},r.prototype.getRules=function(t){var e=this.getAll();if(!t)return yC([],e.models,!0);var n={sort:!0},o=(0,k.isString)(t)?t.split(",").map(function(u){return u.trim()}):t,s=e.filter(function(u){return o.indexOf(u.getSelectors().getFullString(null,n))>=0});return s},r.prototype.setIdRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var o=n.addOpts,s=o===void 0?{}:o,u=n.mediaText,f=n.state||"",c=(0,k.isUndefined)(u)?this.em.getCurrentMedia():u,h=this.em.Selectors,g=h.add({name:t,type:en.TYPE_ID},s),m=this.add(g,f,c,{},s);return m.setStyle(e,to(to({},n),s)),m},r.prototype.getIdRule=function(t,e){e===void 0&&(e={});var n=e.mediaText,o=e.state||"",s=(0,k.isUndefined)(n)?this.em.getCurrentMedia():n,u=this.em.Selectors.get(t,en.TYPE_ID);return u&&this.get(u,o,s)},r.prototype.setClassRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var o=n.state||"",s=n.mediaText||this.em.getCurrentMedia(),u=this.em.Selectors,f=u.add({name:t,type:en.TYPE_CLASS}),c=this.add(f,o,s);return c.setStyle(e,n),c},r.prototype.getClassRule=function(t,e){e===void 0&&(e={});var n=e.state||"",o=e.mediaText||this.em.getCurrentMedia(),s=this.em.Selectors.get(t,en.TYPE_CLASS);return s&&this.get(s,n,o)},r.prototype.remove=function(t,e){var n=(0,k.isString)(t)?this.getRules(t):t,o=Array.isArray(n)?n:[n],s=this.getAll().remove(o,e);return Array.isArray(s)?s:[s]},r.prototype.clear=function(t){return t===void 0&&(t={}),this._clearItemCache(),this.getAll().reset([],t),this},r.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var n=e.state,o=e.mediaText,s=e.current;s&&(n=this.em.get("state")||"",o=this.em.getCurrentMedia());var u=t.getId(),f=this.getAll().filter(function(c){return!(0,k.isUndefined)(n)&&c.get("state")!==n||!(0,k.isUndefined)(o)&&c.get("mediaText")!==o?!1:c.getSelectorsString()==="#".concat(u)});return f},r.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new df({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.checkId=function(t,e){e===void 0&&(e={});var n=e.idMap,o=n===void 0?{}:n,s=[];if(!Object.keys(o).length)return s;var u=Array.isArray(t)?t:[t];return u.forEach(function(f){var c=f.selectors;if(c&&c.length==1){var h=c[0];if((0,k.isString)(h)){if(h[0]==="#"){var g=h.substring(1),m=o[g];g&&m&&(c[0]="#".concat(m),s.push(f))}}else if(h.name&&h.type===en.TYPE_ID){var m=o[h.name];m&&(h.name=m,s.push(f))}}}),s},r.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},r})(Eo);const wC=_C;var bC=function(){return{appendTo:"",blocks:[],appendOnClick:!1,custom:!1}};const CC=bC;var SC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),xC=(function(i){SC(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(r.prototype,"category",{get:function(){var t=this.get("category");return t instanceof ks?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getDragDef=function(){return this.get("dragDef")},r.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,k.isFunction)(t?.get)?t.get("label"):t?.label?t?.label:t},r})(Ht.Kx);const Wv=xC;var OC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),zv=(function(i){OC(r,i);function r(t,e){var n=i.call(this,t)||this;return n.em=e.em,n.on("add",n.handleAdd),n}return r.prototype.getCategories=function(){return this.em.Blocks.getCategories()},r.prototype.handleAdd=function(t){this.initCategory(t)},r})(Tv);const vl=zv;zv.prototype.model=Wv;var vs;(function(i){i.add="block:add",i.remove="block:remove",i.removeBefore="block:remove:before",i.update="block:update",i.dragStart="block:drag:start",i.drag="block:drag",i.dragEnd="block:drag:stop",i.categoryUpdate="block:category:update",i.custom="block:custom",i.all="block"})(vs||(vs={}));var TC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ca=function(){return ca=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ca.apply(this,arguments)},PC=(function(i){TC(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this,t)||this,o=n.model;return n.em=e.em,n.config=e,n.endDrag=n.endDrag.bind(n),n.ppfx=e.pStylePrefix||"",n.listenTo(o,"destroy remove",n.remove),n.listenTo(o,"change",n.render),n}return r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(t){var e,n,o=this,s=o.config,u=o.model,f=o.em,c=u.get("onClick")||s.appendOnClick;if(f.trigger("block:click",u,t),c){if((0,k.isFunction)(c))return c(u,f?.getEditor(),{event:t})}else return;var h=(e=s.getSorter)===null||e===void 0?void 0:e.call(s);if(h){var g=u.get("content"),m=this.getTempDropModel(g),y=(n=m.view)===null||n===void 0?void 0:n.el,w=y?[{element:y,dragSource:{content:g}}]:[],C=f.getSelected(),x,E,N,L=0;if(C)if(E=h.validTarget(C.getEl(),w,L),E)x=C;else{var H=C.parent();H&&(E=h.validTarget(H.getEl(),w,L),E&&(x=H,N=H.components().indexOf(C)+1))}if(!x){var rt=f.getWrapper();E=h.validTarget(rt.getEl(),w,L),E&&(x=rt)}var nt=x&&x.append(g,{at:N})[0];nt&&f.setSelected(nt,{scroll:!0})}},r.prototype.startDrag=function(t){var e,n=this,o=n.config,s=n.em,u=n.model,f=u.get("disable");if(!(t.button!==0||!o.getSorter||this.el.draggable||f)){s.refreshCanvas();var c=o.getSorter();c.__currentBlock=u;var h=this.model.get("content"),g=this.getTempDropModel(h),m=(e=g.view)===null||e===void 0?void 0:e.el,y=m?[{element:m,dragSource:{content:h}}]:[];c.startSort(y),(0,Kt.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},r.prototype.handleDrag=function(t){this.__getModule().__drag(t)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){var t,e;(0,Kt.AU)(document,"mouseup",this.endDrag);var n=(e=(t=this.config).getSorter)===null||e===void 0?void 0:e.call(t);n&&n.endDrag()},r.prototype.getTempDropModel=function(t){var e,n=this.em.Components.getComponents(),o={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},s=n.add(t,ca(ca({},o),{temporary:!0})),u=n.remove(s,ca(ca({},o),{temporary:!0}));return u=u instanceof Array?u[0]:u,(e=u.view)===null||e===void 0||e.$el.data("model",u),u},r.prototype.render=function(){var t,e=this,n=e.em,o=e.el,s=e.$el,u=e.ppfx,f=e.model,c=f.get("disable"),h=f.get("attributes")||{},g=h.class||"",m="".concat(u,"block"),y=n&&n.t("blockManager.labels.".concat(f.id))||f.get("label"),w=f.get("render"),C=f.get("media"),x=c?"".concat(m,"--disable"):"".concat(u,"four-color-h");s.attr(h),o.className="".concat(g," ").concat(m," ").concat(u,"one-bg ").concat(x).trim(),o.innerHTML=`
      `.concat(C?'<div class="'.concat(m,'__media">').concat(C,"</div>"):"",`
      <div class="`).concat(m,'-label">').concat(y,`</div>
    `),o.title=h.title||((t=o.textContent)===null||t===void 0?void 0:t.trim()),o.setAttribute("draggable","".concat(!!((0,Ot.hasDnd)(n)&&!c)));var E=w&&w({el:o,model:f,className:m,prefix:u});return E&&(o.innerHTML=E),this},r})(Ht.Ss);const EC=PC;var AC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),kC=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},MC=(function(i){AC(r,i);function r(t,e,n){var o=i.call(this,t)||this;o.config=e;var s=e.pStylePrefix||"";return o.em=e.em,o.catName=n,o.pfx=s,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(s,"caret-icon"),o.activeClass="".concat(s,"open"),o.className="".concat(s).concat(n,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(t){var e=t.pfx,n=t.label,o=t.catName;return gn(Qp||(Qp=kC([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),e,e,n,e,o)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},r.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},r.prototype.append=function(t){this.getTypeEl().appendChild(t)},r.prototype.render=function(){var t=this,e=t.em,n=t.el,o=t.$el,s=t.model,u=t.pfx,f=t.catName,c=e.t("".concat(f,"Manager.categories.").concat(s.id))||s.get("label");return n.innerHTML=this.template({pfx:u,label:c,catName:f}),o.addClass(this.className),o.css({order:s.get("order")}),this.updateVisibility(),this},r})(Ht.Ss);const Kv=MC;var Qp,DC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),lu=function(){return lu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},lu.apply(this,arguments)},LC=(function(i){DC(r,i);function r(t,e){var n=i.call(this,t)||this;n.renderedCategories=new Map,(0,k.bindAll)(n,"getSorter","onDrag","onDrop","onMove"),n.config=e||{},n.categories=t.categories||"";var o=n.config.pStylePrefix||"";n.ppfx=o,n.noCatClass="".concat(o,"blocks-no-cat"),n.blockContClass="".concat(o,"blocks-c"),n.catsClass="".concat(o,"block-categories");var s=n.collection;return n.listenTo(s,"add",n.addTo),n.listenTo(s,"reset",n.render),n.em=n.config.em,n.em&&(n.config.getSorter=n.getSorter),n}return r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=lu(lu({},this.config),t)},r.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.ComponentSorter({em:t,treeClass:kv,containerContext:{container:n.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:n.getPlacerEl(),document:n.getBody().ownerDocument},dragBehavior:{dragDirection:Pi.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},r.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},r.prototype.onMove=function(t){this.__getModule().__drag(t)},r.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},r.prototype.addTo=function(t){this.add(t)},r.prototype.add=function(t,e){var n=this,o=n.config,s=n.renderedCategories,u=t.get("attributes"),f=new EC({model:t,attributes:u},o),c=f.render().el,h=t.parent.initCategory(t);if(h&&this.categories&&!o.ignoreCategories){var g=h.getId(),m=this.getCategoriesEl(),y=s.get(g);!y&&m&&(y=new Kv({model:h},o,"block").render(),s.set(g,y),m.appendChild(y.el)),y?.append(c);return}e?e.appendChild(c):this.append(c)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},r.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(s){return t.add(s,n)}),this.append(n);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},r})(Ht.Ss);const th=LC;var IC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Xo=function(){return Xo=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Xo.apply(this,arguments)},jC=(function(i){IC(r,i);function r(t){var e=i.call(this,t,"BlockManager",new vl([],{em:t}),vs,CC())||this;return e.events=vs,e.Block=Wv,e.Blocks=vl,e.Category=ks,e.Categories=Ll,e.storageKey="",e.blocks=e.all,e.blocksVisible=new vl(e.blocks.models,{em:t}),e.categories=new Ll([],{em:t,events:{update:vs.categoryUpdate}}),e.__onAllEvent=(0,k.debounce)(function(){return e.__trgCustom()},0),e}return r.prototype.onInit=function(){var t=this,e=t.config,n=t.blocks,o=t.blocksVisible;n.on("add",function(s){return o.add(s)}),n.on("remove",function(s){return o.remove(s)}),n.on("reset",function(s){return o.reset(s.models)}),n.add(e.blocks||[])},r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(n,o){return t.startDrag(n,o)},drag:function(n){return t.__drag(n)},dragStop:function(n){return t.endDrag(n)}}},r.prototype.__startDrag=function(t,e){var n=this,o=n.em,s=n.events,u=n.blocks,f=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragSource:{content:f,dragDef:t.getDragDef()}}),[o,u].map(function(c){return c.trigger(s.dragStart,t,e)})},r.prototype.__drag=function(t){var e=this,n=e.em,o=e.events,s=e.blocks,u=this._dragBlock;[n,s].map(function(f){return f.trigger(o.drag,u,t)})},r.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,n=e.em,o=e.events,s=e.blocks,u=this._dragBlock,f=t.component||n.get("dragResult");if(delete this._dragBlock,f&&u){var c="activeOnRender",h=f.get&&f.get(c),g=u.get("activate")||h,m=u.get("select"),y=(0,k.isArray)(f)?f[0]:f,w=m||g&&m!==!1;w?n.setSelected(y,{activate:g}):g&&y.trigger("active"),g&&h&&y.unset(c),u.get("resetId")&&y.onAll(function(C){return C.resetId()})}n.set({dragResult:null,dragSource:void 0}),u&&[n,s].map(function(C){return C.trigger(o.dragEnd,f,u)})},r.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Xo(Xo({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(n){var o;return(o=n.droppable)===null||o===void 0?void 0:o.startCustom()})},r.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var n;return(n=e.droppable)===null||n===void 0?void 0:n.endCustom(t)}),this.__endDrag()},r.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,o=t.em,s=this.blocksVisible;this.blocksView=new th({collection:s,categories:e},Xo(Xo({},n),{em:o})),this.__appendTo(s.models),this.__trgCustom()},r.prototype.add=function(t,e,n){n===void 0&&(n={});var o=e||{};return o.id=t,this.blocks.add(o,n)},r.prototype.get=function(t){return this.blocks.get(t)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},r.prototype.getDragBlock=function(){return this._dragBlock},r.prototype.getBlocksByCategory=function(t){return Ov(t||this.getAll().models)},r.prototype.render=function(t,e){e===void 0&&(e={});var n=this,o=n.categories,s=n.config,u=n.em,f=t||this.getAll().models;if(e.external){var c=new vl(f,{em:u});return new th({collection:c,categories:o},Xo(Xo({em:u},s),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(f),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(n){return n.stopListening()}),e.map(function(n){return n.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},r})(Eo);const RC=jC;var VC=function(){return{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1}};const FC=VC;var NC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Gv=(function(i){NC(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r})(Ht.Kx);const Hc=Gv;Gv.prototype.idAttribute="name";var uu;(function(i){i.add="selector:add",i.remove="selector:remove",i.removeBefore="selector:remove:before",i.update="selector:update",i.state="selector:state",i.custom="selector:custom",i.all="selector"})(uu||(uu={}));var HC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),UC=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},eh="contentEditable",BC=(function(i){HC(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this,n=t.config||{};return e.config=n,e.module=t.module,e.coll=t.coll||null,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return r.prototype.template=function(){var t=this,e=t.pfx,n=t.model,o=t.config,s=n.get("label")||"";return gn(rh||(rh=UC([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,s,e,e,o.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[eh]="true",e.focus(),t?.setEditing(!0)},r.prototype.endEditTag=function(){var t=this,e=t.model,n=t.em,o=this.getInputEl(),s=o.textContent||"",u=n?.Selectors;o[eh]="false",n?.setEditing(!1),u&&u.rename(e,s)!==e&&(o.innerText=e.getLabel())},r.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,o=t.config,s=o.iconTagOn,u=o.iconTagOff,f=n.find("[data-tag-status]");e.get("active")?(f.html(s),n.removeClass("opac50")):(f.html(u),n.addClass("opac50"))},r.prototype.render=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.$el,s=t.model,u="".concat(e,"tag"),f=["".concat(u," ").concat(n,"three-bg")];return s.get("protected")&&f.push("".concat(u,"-protected")),o.html(this.template()),o.attr("class",f.join(" ")),this.updateStatus(),this},r})(Ht.Ss);const WC=BC;var rh,zC=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),as=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},KC=(function(i){zC(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var n=e.config.em,o=e.collection;e.target=n;var s=n.Selectors;e.module=s,e.em=n,e.componentChanged=(0,k.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,k.debounce)(e.checkSync.bind(e),0);var u=je.I.update,f="".concat(u,":classes"),c="component:toggled ".concat(f),h="".concat(f," ").concat(u,":attributes:id change:state");return e.listenTo(n,c,e.componentChanged),e.listenTo(n,"styleManager:update",e.componentChanged),e.listenTo(n,h,e.__handleStateChange),e.listenTo(n,"styleable:change change:device",e.checkSync),e.listenTo(o,"add",e.addNew),e.listenTo(o,"reset",e.renderClasses),e.listenTo(o,"remove",e.tagRemoved),e.listenTo(s.getAll(),s.events.state,(0,k.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return r.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,o=t.iconSync,s=t.iconAdd,u=t.pfx,f=t.ppfx;return gn(nh||(nh=as([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),u,u,u,u,n,u,u,u,f,f,f,u,f,f,u,f,u,u,u,u,u,s,u,u,o,u,u,e,u)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),n=t.Css,o={noDisabled:1},s=this.getCommonSelectors({opts:o}),u=t.get("state"),f=t.getCurrentMedia(),c=[],h=n.get(s,u,f)||n.add(s,u,f),g;this.getTargets().forEach(function(m){var y=n.getIdRule(m.getId(),{state:u,mediaText:f});g=y.getStyle(),y.setStyle({}),c.push(y)}),g&&h.addStyle(g),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:s,mediaText:f,rule:h,ruleComponents:c,state:u})},r.prototype.tagRemoved=function(t){this.updateStateVis()},r.prototype.addNew=function(t){this.addToClasses(t)},r.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},r.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},r.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},r.prototype.componentChanged=function(t){var e=t===void 0?{}:t,n=e.targets;this.updateSelection(n)},r.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,k.isArray)(e)?e:[e];var n=[];return e&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},r.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,n=e.targets,o=e.opts,s=o===void 0?{}:o,u=n||this.getTargets();return this.module.__getCommonSelectors(u,s)},r.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},r.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,n=t.config,o=t.collection,s=this.getTarget(),u;if(s&&n.componentFirst&&o.length){var f=s.getStyle();u=!(0,k.isEmpty)(f)}e&&e[u?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||n?"":"none";this.getStatesC().css("display",o),this.updateSelector(t)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(t){var e=this,n=this.el.querySelector("[data-selected]"),o=[],s=t||this.getTargets();s=(0,k.isArray)(s)?s:[s],s.forEach(function(u){return o.push(e.__getName(u))}),n&&(n.innerHTML=o.join(", ")),this.checkStates()},r.prototype.__getName=function(t){var e=this,n=e.pfx,o=e.config,s=e.em,u=o.selectedName,f=o.componentFirst,c;if((0,k.isString)(t))c=gn(oh||(oh=as(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),n,t);else{var h=t?.getSelectors();if(!h)return"";var g=h.getStyleable(),m=s.get("state"),y=t.getId?gn(ih||(ih=as(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),n,t.getName(),n,t.getId()):"";c=this.collection.getFullString(g),c=c?gn(ah||(ah=as(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),n,c):t.get("selectorsAdd")||y,c=f&&y?y:c,c+=m?gn(sh||(sh=as(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),n,m):"",c=u?u({result:c,state:m,target:t}):c}return c&&'<span class="'.concat(n,'sel">').concat(c,"</span>")},r.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set("state",n)},r.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},r.prototype.addToClasses=function(t,e){var n=e,o=this.getClasses(),s=new WC({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(s):o.append(s),s},r.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each(function(o){return t.addToClasses(o,e)}),n.append(e)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var t=this,e=t.module,n=t.em,o=n.t("selectorManager.emptyState"),s=e.getStates().map(function(f){var c=n.t("selectorManager.states.".concat(f.id))||f.getLabel()||f.id;return'<option value="'.concat(f.id,'">').concat(c,"</option>")}).join(""),u=this.getStates();u&&u.html('<option value="">'.concat(o,"</option>").concat(s)),this.checkStates()},r.prototype.render=function(){var t=this,e=t.em,n=t.pfx,o=t.ppfx,s=t.config,u=t.$el,f=t.el,c=s.render,h=s.iconSync,g=s.iconAdd,m={iconSync:h,iconAdd:g,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:o,pfx:n,el:f};u.html(this.template(m));var y=c&&c(m);return y&&y!==f&&u.empty().append(y),this.$input=u.find("[data-input]"),this.$addBtn=u.find("[data-add]"),this.$classes=u.find("#"+n+"tags-c"),this.$btnSyncEl=u.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),u.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},r})(Ht.Ss);const GC=KC;var nh,oh,ih,ah,sh,$C=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),gs=function(){return gs=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},gs.apply(this,arguments)},Uc=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},lh=function(i){return(0,k.isString)(i)&&i[0]=="#"},uh=function(i){return(0,k.isString)(i)&&i[0]=="."},qC=(function(i){$C(r,i);function r(t){var e=i.call(this,t,"SelectorManager",new Qo([]),uu,FC(),{skipListen:!0})||this;e.Selector=en,e.Selectors=Qo,e.events=uu,e.storageKey="",(0,k.bindAll)(e,"__updateSelectedByComponents");var n=e,o=n.config,s=n.events,u=o.pStylePrefix;u&&(o.stylePrefix=u+o.stylePrefix),e.all=new Qo(o.selectors),e.selected=new Qo([],{em:t,config:o}),e.states=new Ht.pM(o.states.map(function(h){return new Hc(h)}),{model:Hc}),e.model=new Ht.Kx({cFirst:o.componentFirst,_undo:!0}),e.__update=(0,k.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:s.state}]}),t.on("change:state",function(h,g){return t.trigger(s.state,g)}),e.model.on("change:cFirst",function(h,g){return t.trigger("selector:type",g)});var f="".concat(je.I.update,":classes");t.on("component:toggled ".concat(f),e.__updateSelectedByComponents);var c="component:toggled ".concat(f," change:device styleManager:update selector:state selector:type style:target");return e.model.listenTo(t,c,function(){return e.__update()}),e}return r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},r.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?Uc([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(t,e){e===void 0&&(e={});var n=Array.isArray(t)?t:[t],o=this.em.Styles.select(n,e);this.selected.reset(this.__getCommonSelectors(o));var s=this.selectorTags,u=o.filter(function(f){return f}).map(function(f){return(0,Ot.isComponent)(f)||(0,Ot.isRule)(f)&&!f.get("selectorsAdd")?f:f.getSelectorsString()});return s&&s.componentChanged({targets:u}),this},r.prototype.addSelector=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var o=gs({},e);(0,k.isObject)(t)?o=t:o.name=t,lh(o.name)?(o.name=o.name.substr(1),o.type=en.TYPE_ID):uh(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var s=this,u=s.all,f=s.em,c=s.config,h=u.get(o);if(!h){var g=o instanceof en?o:new en(o,gs(gs({},n),{config:c,em:f}));return u.add(g,n)}return h},r.prototype.getSelector=function(t,e){return e===void 0&&(e=en.TYPE_CLASS),lh(t)?(t=t.substr(1),e=en.TYPE_ID):uh(t)&&(t=t.substr(1)),this.all.get({name:t,type:e})},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var o=(0,k.isString)(t)?{}:e;return(0,k.isArray)(t)?t.map(function(s){return n.addSelector(s,e,o)}):this.addSelector(t,e,o)},r.prototype.addClass=function(t){var e=this,n=[];return(0,k.isString)(t)&&(t=t.trim().split(" ").filter(Boolean)),t.forEach(function(o){return n.push(e.addSelector(o))}),n},r.prototype.get=function(t,e){var n=this;if((0,k.isArray)(t)){var o=[],s=t.map(function(u){return n.getSelector(u)}).filter(Boolean);return s.forEach(function(u){return o.indexOf(u)<0&&o.push(u)}),o}else return this.getSelector(t,e)},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.rename=function(t,e,n){var o=this.escapeName(e),s=this.get(o);return s||t.set({name:o,label:e},n)},r.prototype.setState=function(t){return this.em.setState(t),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return Uc([],this.states.models,!0)},r.prototype.setStates=function(t,e){return this.states.reset(t.map(function(n){return new Hc(n)}),e)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return Uc([],this.selected.models,!0)},r.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(n){n.getSelectors().add(e)})},r.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},r.prototype.duplicateSelected=function(t,e){var n=this;e===void 0&&(e={});var o=this.em,s=this.getSelected();if(!(s.indexOf(t)<0)){var u=this.getState(),f=o.getCurrentMedia(),c=o.Css.get(s,u,f),h=c?.getStyle();if(o.getSelectedAll().forEach(function(m){var y=m.getSelectors();if(y.includes(t)){var w=e.suffix||" copy",C=t.getLabel(),x=n.addSelector("".concat(C).concat(w)),E=y.indexOf(t);y.remove(t),y.add(x,{at:E})}}),h){var g=o.Css.add(this.getSelected(),u,f);g.setStyle(h)}}},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):en.escapeName(t)},r.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),o=e?.el;return this.selected.reset(t),this.selectorTags=new GC({el:o,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},r.prototype.destroy=function(){var t=this,e=t.selectorTags,n=t.model;n.stopListening(),this.__update.cancel(),this.__destroy(),e?.remove(),this.selectorTags=void 0},r.prototype.load=function(){},r.prototype.store=function(){},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var n=t.map(function(o){return o.getSelectors&&o.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,n)},r.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(o){return e[1].indexOf(o)>=0}):e.slice(1).reduce(function(o,s){return t.__common(o,s)},e[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r})(Eo);const $v=qC;var YC=function(){return{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1,convertDataGjsAttributesHyphens:!1}}};const XC=YC;var Zn,In={MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15},Ca=(Zn={},Zn[In.MEDIA_RULE]="media",Zn[In.FONT_FACE_RULE]="font-face",Zn[In.PAGE_RULE]="page",Zn[In.KEYFRAMES_RULE]="keyframes",Zn[In.COUNTER_STYLE_RULE]="counter-style",Zn[In.SUPPORTS_RULE]="supports",Zn[In.DOCUMENT_RULE]="document",Zn[In.FONT_FEATURE_VALUES_RULE]="font-feature-values",Zn[In.VIEWPORT_RULE]="viewport",Zn),qv=(0,k.keys)(Ca),rd=[In.FONT_FACE_RULE,In.PAGE_RULE,In.COUNTER_STYLE_RULE,In.VIEWPORT_RULE],JC=qv.filter(function(i){return rd.indexOf(Number(i))<0}).map(function(i){return Ca[i]}).concat(["container","layer"]),ZC=rd.map(function(i){return Ca[i]}),Yv=function(i){i===void 0&&(i="");for(var r=[],t=[],e=i.split(","),n=0,o=e.length;n<o;n++){var s=e[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var u=s.split(".").filter(Boolean);t.push(u)}else r.push(s)}return{result:t,add:r}},QC=function(i){for(var r=i.style,t={},e=0,n=r.length;e<n;e++){var o=r[e],s=r.getPropertyValue(o),u=r.getPropertyPriority(o);t[o]="".concat(s).concat(u?" !".concat(u):"")}return t},ch=function(i){var r=i.conditionText||i.media&&i.media.mediaText||i.name||i.selectorText||"";return r.trim()},Sf=function(i,r,t){r===void 0&&(r={}),t===void 0&&(t={});var e={},n=i.length,o=i[n-1],s=o?o.split(/:(.+)/):[],u=s[1],f=t.atRule,c=t.selectorsAdd,h=t.mediaText,g=ZC.indexOf(f)>=0;return g&&(e.singleAtRule=!0),f&&(e.atRuleType=f),c&&(e.selectorsAdd=c),h&&(e.mediaText=h),u&&(i[n-1]=s[0],e.state=u,s.splice(s.length-1,1)),e.selectors=i,e.style=r,e},fh=function(i){var r=i.cssText,t=r===void 0?"":r;return JC.find(function(e){return t.indexOf("@".concat(e))===0})},Xv=function(i){for(var r=[],t=i.cssRules||[],e=0,n=t.length;e<n;e++){var o=t[e],s=o.type,u=!1,f="",c="",h=o.selectorText||o.keyText||"",g=rd.indexOf(s)>=0;if(g)u=!0,f=Ca[s],c=ch(o);else if(qv.indexOf("".concat(s))>=0||!s&&fh(o)){var m=Xv(o),y=Ca[s]||fh(o);c=ch(o);for(var w=0,C=m.length;w<C;w++){var x=m[w];c&&(x.mediaText=c),x.atRuleType=y}r=r.concat(m)}if(!(!h&&!g)){for(var E=QC(o),N=Yv(h),L=N.add,H=N.result,rt=void 0,nt=0,vt=H.length;nt<vt;nt++){var et=Sf(H[nt],E,{atRule:Ca[s]});r.push(et),rt=et}if(L.length){var G=L.join(", ");if(rt)rt.selectorsAdd=G;else{var et={selectors:[],selectorsAdd:G,style:E};u&&(et.singleAtRule=u),f&&(et.atRuleType=f),c&&(et.mediaText=c),r.push(et)}}}}return r};const tS=(function(i){var r=document.createElement("style");r.innerHTML=i,document.head.appendChild(r);var t=r.sheet;return document.head.removeChild(r),t?Xv(t):[]});var eS=function(i,r){return r===void 0&&(r={}),{parse:function(t,e){var n=this;e===void 0&&(e={});var o=[],s=r.parserCss,u=i?.Editor,f=[],c,h=i?.Parser,g={input:t};h?.__emitEvent(ti.cssBefore,g);var m=g.input;try{f=s?s(m,u):tS(m)}catch(y){if(c=y,e.throwOnError)throw y}return f.forEach(function(y){return o=o.concat(n.checkNode(y))}),h?.__emitEvent(ti.css,{input:m,output:o,nodes:f,error:c}),o},checkNode:function(t){var e=t.selectors,n=t.style,o=[t];if((0,k.isString)(e)){var s=[],u=t,f=Yv(e),c=f.result,h=f.add.join(", "),g={atRule:u.atRule,mediaText:u.params};if(c.length?c.forEach(function(y){s.push(Sf(y,n,g))}):s.push(Sf([],n,g)),h){var m=s[s.length-1];m.selectorsAdd=h}o=s}return o}}};const rS=eS;var nS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),xf=function(){return xf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},xf.apply(this,arguments)},oS=(function(i){nS(r,i);function r(t){var e=i.call(this,t,"Parser",XC())||this;e.events=ti;var n=e.config;return e.parserCss=rS(t,n),e.parserHtml=wv(t,n),e}return r.prototype.parseHtml=function(t,e){e===void 0&&(e={});var n=this,o=n.em,s=n.parserHtml;return s.compTypes=o.Components.getTypes()||[],s.parse(t,this.parserCss,e)},r.prototype.parseCss=function(t){return this.parserCss.parse(t)},r.prototype.__emitEvent=function(t,e){var n=this,o=n.em,s=n.events;o.trigger(t,e),o.trigger(s.all,xf({event:t},e))},r.prototype.destroy=function(){},r})(wn);const iS=oS;var aS=function(){return{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(i){return i},onLoad:function(i){return i},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(i){return i},onLoad:function(i){return i}}}}};const sS=aS;var dh=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},ph=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},lS=(function(){function i(){}return i.prototype.store=function(r){return dh(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),ph(this,function(n){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(t)),[2,t]})})},i.prototype.load=function(){return dh(this,arguments,void 0,function(r){var t;return r===void 0&&(r={}),ph(this,function(e){return t={},this.hasLocal(r,!0)&&(t=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,t]})})},i.prototype.hasLocal=function(r,t){if(r===void 0&&(r={}),r.checkLocal&&(!(0,Ot.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},i})();const uS=lS;function Ei(i){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ei(i)}function cS(i){var r=this.constructor;return this.then(function(t){return r.resolve(i()).then(function(){return t})},function(t){return r.resolve(i()).then(function(){return r.reject(t)})})}const fS=cS;function dS(i){var r=this;return new r(function(t,e){if(!(i&&typeof i.length<"u"))return e(new TypeError(Ei(i)+" "+i+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(i);if(n.length===0)return t([]);var o=n.length;function s(f,c){if(c&&(Ei(c)==="object"||typeof c=="function")){var h=c.then;if(typeof h=="function"){h.call(c,function(g){s(f,g)},function(g){n[f]={status:"rejected",reason:g},--o===0&&t(n)});return}}n[f]={status:"fulfilled",value:c},--o===0&&t(n)}for(var u=0;u<n.length;u++)s(u,n[u])})}const pS=dS;function Jv(i,r){this.name="AggregateError",this.errors=i,this.message=r||""}Jv.prototype=Error.prototype;function hS(i){var r=this;return new r(function(t,e){if(!(i&&typeof i.length<"u"))return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(i);if(n.length===0)return e();for(var o=[],s=0;s<n.length;s++)try{r.resolve(n[s]).then(t).catch(function(u){o.push(u),o.length===n.length&&e(new Jv(o,"All promises were rejected"))})}catch(u){e(u)}})}const vS=hS;var gS=setTimeout;function Zv(i){return!!(i&&typeof i.length<"u")}function mS(){}function yS(i,r){return function(){i.apply(r,arguments)}}function er(i){if(!(this instanceof er))throw new TypeError("Promises must be constructed via new");if(typeof i!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],tg(i,this)}function Qv(i,r){for(;i._state===3;)i=i._value;if(i._state===0){i._deferreds.push(r);return}i._handled=!0,er._immediateFn(function(){var t=i._state===1?r.onFulfilled:r.onRejected;if(t===null){(i._state===1?Of:Es)(r.promise,i._value);return}var e;try{e=t(i._value)}catch(n){Es(r.promise,n);return}Of(r.promise,e)})}function Of(i,r){try{if(r===i)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(Ei(r)==="object"||typeof r=="function")){var t=r.then;if(r instanceof er){i._state=3,i._value=r,Tf(i);return}else if(typeof t=="function"){tg(yS(t,r),i);return}}i._state=1,i._value=r,Tf(i)}catch(e){Es(i,e)}}function Es(i,r){i._state=2,i._value=r,Tf(i)}function Tf(i){i._state===2&&i._deferreds.length===0&&er._immediateFn(function(){i._handled||er._unhandledRejectionFn(i._value)});for(var r=0,t=i._deferreds.length;r<t;r++)Qv(i,i._deferreds[r]);i._deferreds=null}function _S(i,r,t){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function tg(i,r){var t=!1;try{i(function(e){t||(t=!0,Of(r,e))},function(e){t||(t=!0,Es(r,e))})}catch(e){if(t)return;t=!0,Es(r,e)}}er.prototype.catch=function(i){return this.then(null,i)};er.prototype.then=function(i,r){var t=new this.constructor(mS);return Qv(this,new _S(i,r,t)),t};er.prototype.finally=fS;er.all=function(i){return new er(function(r,t){if(!Zv(i))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(i);if(e.length===0)return r([]);var n=e.length;function o(u,f){try{if(f&&(Ei(f)==="object"||typeof f=="function")){var c=f.then;if(typeof c=="function"){c.call(f,function(h){o(u,h)},t);return}}e[u]=f,--n===0&&r(e)}catch(h){t(h)}}for(var s=0;s<e.length;s++)o(s,e[s])})};er.any=vS;er.allSettled=pS;er.resolve=function(i){return i&&Ei(i)==="object"&&i.constructor===er?i:new er(function(r){r(i)})};er.reject=function(i){return new er(function(r,t){t(i)})};er.race=function(i){return new er(function(r,t){if(!Zv(i))return t(new TypeError("Promise.race accepts an array"));for(var e=0,n=i.length;e<n;e++)er.resolve(i[e]).then(r,t)})};er._immediateFn=typeof setImmediate=="function"&&function(i){setImmediate(i)}||function(i){gS(i,0)};er._unhandledRejectionFn=function(r){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};const Pf=er;(0,Ot.hasWin)()&&(window.Promise=window.Promise||Pf);const eg=typeof fetch=="function"?fetch.bind():function(i,r){return new Pf(function(t,e){var n=new XMLHttpRequest;n.open(r.method||"get",i),n.withCredentials=r.credentials=="include";for(var o in r.headers||{})n.setRequestHeader(o,r.headers[o]);n.onload=function(s){return t({status:n.status,statusText:n.statusText,text:function(){return Pf.resolve(n.responseText)}})},n.onerror=e,n.upload&&r.onProgress&&(n.upload.onprogress=r.onProgress),r.body?n.send(r.body):n.send()})};var cu=function(){return cu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},cu.apply(this,arguments)},hh=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},vh=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wS=(function(){function i(){}return i.prototype.store=function(r){return hh(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),vh(this,function(n){switch(n.label){case 0:return[4,this.request(e.urlStore,this.__props(e,t),e)];case 1:return[2,n.sent()]}})})},i.prototype.load=function(){return hh(this,arguments,void 0,function(r){return r===void 0&&(r={}),vh(this,function(t){switch(t.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,t.sent()]}})})},i.prototype.request=function(r,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),eg(r,t).then(function(n){var o=n.text(),s=(n.status/200|0)===1;return s?o:o.then(Promise.reject)}).then(function(n){var o=n&&(0,k.isString)(n);return e.contentTypeJson&&o?JSON.parse(n):n})},i.prototype.__props=function(r,t){r===void 0&&(r={});var e=r.contentTypeJson,n=r.headers||{},o=r.fetchOptions||{},s="X-Requested-With",u="Content-Type",f;if((0,k.isUndefined)(n[s])&&(n[s]="XMLHttpRequest"),(0,k.isUndefined)(n[u])&&e&&(n[u]="application/json; charset=utf-8"),t)if(e)f=JSON.stringify(t);else{f=new FormData;for(var c in t)f.append(c,t[c])}var h={method:f?"POST":"GET",credentials:r.credentials,headers:n,body:f};return cu(cu({},h),(0,k.isFunction)(o)?o(h):o)},i})();const bS=wS;var Ef;(function(i){i.start="storage:start",i.startStore="storage:start:store",i.startLoad="storage:start:load",i.load="storage:load",i.store="storage:store",i.after="storage:after",i.afterStore="storage:after:store",i.afterLoad="storage:after:load",i.end="storage:end",i.endStore="storage:end:store",i.endLoad="storage:end:load",i.error="storage:error",i.errorStore="storage:error:store",i.errorLoad="storage:error:load"})(Ef||(Ef={}));const Xr=Ef;var CS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),fa=function(){return fa=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},fa.apply(this,arguments)},Bc=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},Wc=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},gl="local",gh="remote",SS=(function(i){CS(r,i);function r(t){var e=i.call(this,t,"StorageManager",sS())||this;e.storages={},e.events=Xr;var n=e.config;return n._disable&&(n.type=void 0),e.storages={},e.add(gl,new uS),e.add(gh,new bS),e.setCurrent(n.type),e}return r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},r.prototype.add=function(t,e){return this.storages[t]=e,this},r.prototype.get=function(t){return this.storages[t]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},r.prototype.store=function(t){return Bc(this,arguments,void 0,function(e,n){var o,s,u,f,c,h;return n===void 0&&(n={}),Wc(this,function(g){switch(g.label){case 0:o=this.getCurrentStorage(),s=fa(fa({},this.getCurrentOptions()),n),u=this.getRecoveryStorage(),f=this.getCurrentOptions(gl),g.label=1;case 1:return g.trys.push([1,5,,9]),[4,this.__exec(o,s,e)];case 2:return g.sent(),c=u,c?[4,this.__exec(u,f,{})]:[3,4];case 3:c=g.sent(),g.label=4;case 4:return[3,9];case 5:return h=g.sent(),u?[4,this.__exec(u,f,e)]:[3,7];case 6:return g.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,e]}})})},r.prototype.load=function(){return Bc(this,arguments,void 0,function(t){var e,n,o,s,u;return t===void 0&&(t={}),Wc(this,function(f){switch(f.label){case 0:return e=this.getCurrentStorage(),n=fa(fa({},this.getCurrentOptions()),t),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(gl))]:[3,5];case 1:if(u=f.sent(),(0,k.isEmpty)(u))return[3,5];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return f.sent(),s=u,[3,5];case 4:return f.sent(),[3,5];case 5:return s?[3,7]:[4,this.__exec(e,n)];case 6:s=f.sent(),f.label=7;case 7:return[2,s||{}]}})})},r.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(n,o){(0,k.isFunction)(e)?e(n,o,t?.getEditor()):confirm(t?.t("storageManager.recover"))?n(null):o()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===gh&&this.get(gl)},r.prototype.__exec=function(t,e,n){return Bc(this,void 0,void 0,function(){var o,s,u,f,c,h,g,m,y,w,C,x,E,N;return Wc(this,function(L){switch(L.label){case 0:if(o=n?"store":"load",s=this.getConfig(),u=s.onStore,f=s.onLoad,!t)return[2,n||{}];this.onStart(o,n),L.label=1;case 1:return L.trys.push([1,14,,15]),h=(N=this.em)===null||N===void 0?void 0:N.getEditor(),g=void 0,n?(y=u,y?[4,u(n,h)]:[3,3]):[3,7];case 2:y=L.sent(),L.label=3;case 3:return m=y||n,w=e.onStore,w?[4,e.onStore(m,h)]:[3,5];case 4:w=L.sent(),L.label=5;case 5:return m=w||m,[4,t.store(m,e)];case 6:return g=L.sent(),c=n,[3,13];case 7:return[4,t.load(e)];case 8:return g=L.sent(),c=this.__clearKeys(g),C=e.onLoad,C?[4,e.onLoad(c,h)]:[3,10];case 9:C=L.sent(),L.label=10;case 10:return c=C||c,x=f,x?[4,f(c,h)]:[3,12];case 11:x=L.sent(),L.label=12;case 12:c=x||c,L.label=13;case 13:return this.onAfter(o,c,g),this.onEnd(o,c,g),[3,15];case 14:throw E=L.sent(),this.onError(o,E),E;case 15:return[2,c]}})})},r.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),o={};for(var s in t){var u=s.replace(n,"");o[u]=t[s]}return o},r.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},r.prototype.onStart=function(t,e){var n=this.em;if(n){var o=t==="load"?Xr.startLoad:Xr.startStore;n.trigger(Xr.start,t,e),n.trigger(o,e)}},r.prototype.onAfter=function(t,e,n){var o=this.em;if(o){var s=t==="load"?Xr.afterLoad:Xr.afterStore;o.trigger(Xr.after),o.trigger(s,e,n);var u=t==="load"?Xr.load:Xr.store;o.trigger(u,e,n)}},r.prototype.onEnd=function(t,e,n){var o=this.em;if(o){var s=t==="load"?Xr.endLoad:Xr.endStore;o.trigger(Xr.end,t,e,n),o.trigger(s,e,n)}},r.prototype.onError=function(t,e){var n=this.em;if(n){var o=t==="load"?Xr.errorLoad:Xr.errorStore;n.trigger(Xr.error,e,t),n.trigger(o,e),this.onEnd(t,e)}},r.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r})(wn);const xS=SS;var OS=function(){return{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1}};const TS=OS;var PS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ms=function(){return ms=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ms.apply(this,arguments)},rg=(function(i){PS(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.events={},e.appendInput=!0;var n=t.config,o=n===void 0?{}:n,s=e,u=s.model,f=s.eventCapture,c=u.target,h=u.attributes.type;e.config=o,e.em=o.em,e.pfx=o.stylePrefix||"",e.ppfx=o.pStylePrefix||"",e.target=c,e.className=e.pfx+"trait",e.clsField="".concat(e.ppfx,"field ").concat(e.ppfx,"field-").concat(h);var g=[["change:value",e.onValueChange],["remove",e.removeView]];return g.forEach(function(m){var y=m[0],w=m[1];u.off(y,w),e.listenTo(u,y,w)}),u.view=e,e.listenTo(u,"change:label",e.render),e.listenTo(u,"change:placeholder",e.rerender),e.events={},f.forEach(function(m){return e.events[m]="onChange"}),e.delegateEvents(),e.init(),e}return r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(t){var e=this.ppfx,n=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(n,'">').concat(n,"</div>")},r.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(t){},r.prototype.onUpdate=function(t){},r.prototype.onEvent=function(t){},r.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,k.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(ms(ms({},this.getClbOpts()),{event:t}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},r.prototype.onValueChange=function(t,e,n){n===void 0&&(n={});var o=this.model,s=this.getValueForTarget();n.fromTarget?(this.setInputValue(s),this.postUpdate()):o.setValue(s,n)},r.prototype.renderLabel=function(){var t=this,e=t.$el,n=t.target,o=this.getLabel(),s=this.templateLabel(n);this.createLabel&&(s=this.createLabel({label:o,component:n,trait:this})||""),e.find("[data-label]").append(s)},r.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,n=e.label,o=e.name;return t.t("traitManager.traits.labels.".concat(o))||(0,Ot.capitalize)(n||o).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,n=t.model,o=n,s=n.attributes.name,u=o.get("placeholder")||o.get("default")||"",f=o.get("type")||"text",c=o.get("min"),h=o.get("max"),g=this.getModelValue(),m=(0,Tr.default)('<input type="'.concat(f,'">')),y=e.t("traitManager.traits.attributes.".concat(s))||{};m.attr(ms({placeholder:u},y)),(0,k.isUndefined)(g)||(o.set({value:g},{silent:!0}),m.prop("value",g)),c&&m.prop("min",c),h&&m.prop("max",h),this.$input=m}return this.$input.get(0)},r.prototype.getInputElem=function(){var t=this,e=t.input,n=t.$input;return e||n&&n.get&&n.get(0)||this.getElInput()},r.prototype.getModelValue=function(){return this.model.getValue()},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,o=t.model,s=e.find("[data-input]"),u=s[s.length-1],f=o.el;f||(f=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,k.isString)(f)?(u.innerHTML=f,this.elInput=u.firstChild):(n?u.appendChild(f):u.insertBefore(f,u.firstChild),this.elInput=f),o.el=this.elInput},r.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,o=t.ppfx,s=t.model,u=s.attributes,f=u.type,c=u.id,h=this.hasLabel&&this.hasLabel(),g="".concat(n,"trait");delete this.$input;var m='<div class="'.concat(g," ").concat(g,"--").concat(f,`">
      `).concat(h?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(f,`" data-input>
        `).concat(this.templateInput?(0,k.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(m),h&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(c),this.postUpdate(),this.onRender(this.getClbOpts()),this},r})(Ht.Ss);const Po=rg;rg.prototype.eventCapture=["change"];var ES=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ng=(function(i){ES(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){this.model.runCommand()},r.prototype.renderLabel=function(){this.model.get("label")&&Po.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var t=this,e=t.model,n=t.ppfx,o=e.props(),s=o.labelButton,u=o.text,f=o.full,c=s||u,h="".concat(n,"btn"),g='<button type="button" class="'.concat(h,"-prim").concat(f?" ".concat(h,"--full"):"",'">').concat(c,"</button>");return g},r})(Po);const AS=ng;ng.prototype.eventCapture=["click button"];var kS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),MS=(function(i){kS(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.appendInput=!1,t}return r.prototype.templateInput=function(){var t=this,e=t.ppfx,n=t.clsField;return'<label class="'.concat(n,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},r.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!this.$input,o=Po.prototype.getInputEl.apply(this,t);if(n){var s=void 0,u=void 0,f=this,c=f.model,h=f.target,g=c.attributes.valueFalse,m=c.getName();c.changeProp?(s=h.get(m),u=s):(u=h.get("attributes")[m],s=!!(u||u==="")),!(0,k.isUndefined)(g)&&u===g&&(s=!1),o.checked=s}return o},r})(Po);const DS=MS;function LS(i,r){if(!(0,Ot.hasWin)())return;var t={beforeShow:y,move:y,change:y,show:y,hide:y,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],n=!!/msie/i.exec(window.navigator.userAgent),o=(function(){function B(Et,pt){return!!~(""+Et).indexOf(pt)}var ot=document.createElement("div"),R=ot.style;return R.cssText="background-color:rgba(0,0,0,.5)",B(R.backgroundColor,"rgba")||B(R.backgroundColor,"hsla")})(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=(function(){var B="";if(n)for(var ot=1;ot<=6;ot++)B+="<div class='sp-"+ot+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",B,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")})();function f(B,ot,R,Et){for(var pt=[],It=0;It<B.length;It++){var Jt=B[It];if(Jt){var Zt=D(Jt),Gt=Zt.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Gt+=D.equals(ot,Jt)?" sp-thumb-active":"";var ae=Zt.toString(Et.preferredFormat||"rgb"),Se=o?"background-color:"+Zt.toRgbString():"filter:"+Zt.toFilter();pt.push('<span title="'+ae+'" data-color="'+Zt.toRgbString()+'" class="'+Gt+'"><span class="sp-thumb-inner" style="'+Se+';"></span></span>')}else{var Ae="sp-clear-display";pt.push(i("<div />").append(i('<span data-color="" style="background-color:transparent;" class="'+Ae+'"></span>').attr("title",Et.noColorSelectedText)).html())}}return"<div class='sp-cf "+R+"'>"+pt.join("")+"</div>"}function c(){for(var B=0;B<e.length;B++)e[B]&&e[B].hide()}function h(B,ot){var R=i.extend({},t,B);return R.callbacks={move:C(R.move,ot),change:C(R.change,ot),show:C(R.show,ot),hide:C(R.hide,ot),beforeShow:C(R.beforeShow,ot)},R}function g(B,ot){var R=h(ot,B),Et=R.flat,pt=R.showSelectionPalette,It=R.localStorageKey,Jt=R.theme,Zt=R.callbacks,Gt=E(Pn,10),ae=!1,Se=!1,Ae=!0,Te=0,Je=0,pr=0,F=0,Q=0,lt=0,Pt=0,Wt=0,fe=0,ye=0,Be=1,rr=[],We=[],bn={},ze=R.selectionPalette.slice(0),jr=R.maxSelectionSize,nn="sp-dragging",Le=null,nr=B.ownerDocument;nr.body;var ke=i(B),Mr=!1,ve=i(u,nr).addClass(Jt),on=ve.find(".sp-picker-container"),Br=ve.find(".sp-color"),ar=ve.find(".sp-dragger"),sr=ve.find(".sp-hue"),Rr=ve.find(".sp-slider"),Ie=ve.find(".sp-alpha-inner"),re=ve.find(".sp-alpha"),yr=ve.find(".sp-alpha-handle"),$e=ve.find(".sp-input"),_r=ve.find(".sp-palette"),Ee=ve.find(".sp-initial"),Ne=ve.find(".sp-cancel"),an=ve.find(".sp-clear"),Cn=ve.find(".sp-choose"),Mt=ve.find(".sp-palette-toggle"),pe=ke.is("input"),Sn=pe&&ke.attr("type")==="color"&&N(),I=pe&&!Et,X=I?i(s).addClass(Jt).addClass(R.className).addClass(R.replacerClassName):i([]),xt=I?X:ke,jt=X.find(".sp-preview-inner"),Ft=R.color||pe&&ke.val(),Ce=!1,Pe=R.preferredFormat,Ke=!R.showButtons||R.clickoutFiresChange,Re=!Ft,sn=R.allowEmpty&&!Sn;function Ao(){if(R.showPaletteOnly&&(R.showPalette=!0),Mt.text(R.showPaletteOnly?R.togglePaletteMoreText:R.togglePaletteLessText),R.palette){rr=R.palette.slice(0),We=i.isArray(rr[0])?rr:[rr],bn={};for(var ce=0;ce<We.length;ce++)for(var le=0;le<We[ce].length;le++){var Me=D(We[ce][le]).toRgbString();bn[Me]=!0}}ve.toggleClass("sp-flat",Et),ve.toggleClass("sp-input-disabled",!R.showInput),ve.toggleClass("sp-alpha-enabled",R.showAlpha),ve.toggleClass("sp-clear-enabled",sn),ve.toggleClass("sp-buttons-disabled",!R.showButtons),ve.toggleClass("sp-palette-buttons-disabled",!R.togglePaletteOnly),ve.toggleClass("sp-palette-disabled",!R.showPalette),ve.toggleClass("sp-palette-only",R.showPaletteOnly),ve.toggleClass("sp-initial-disabled",!R.showInitial),ve.addClass(R.className).addClass(R.containerClassName),Pn()}function lo(){if(n&&ve.find("*:not(input)").attr("unselectable","on"),Ao(),I&&ke.after(X).hide(),sn||an.hide(),Et)ke.after(ve).hide();else{var ce=R.appendTo==="parent"?ke.parent():i(R.appendTo);ce.length!==1&&(ce=i("body")),ce.append(ve)}uo(),xt.bind("click.spectrum touchstart.spectrum",function(ge){Mr||Do(),ge.stopPropagation(),i(ge.target).is("input")||ge.preventDefault()}),(ke.is(":disabled")||R.disabled===!0)&&Rn(),ve.click(w),$e.change(Kn),$e.bind("paste",function(){setTimeout(Kn,1)}),$e.keydown(function(ge){ge.keyCode==13&&Kn()}),Ne.text(R.cancelText),Ne.bind("click.spectrum",function(ge){ge.stopPropagation(),ge.preventDefault(),Gn(),xn()}),an.attr("title",R.clearText),an.bind("click.spectrum",function(ge){ge.stopPropagation(),ge.preventDefault(),Re=!0,$n(),Et&&Tn(!0)}),Cn.text(R.chooseText),Cn.bind("click.spectrum",function(ge){ge.stopPropagation(),ge.preventDefault(),n&&$e.is(":focus")&&$e.trigger("change"),ki()&&(Tn(!0),xn())}),Mt.text(R.showPaletteOnly?R.togglePaletteMoreText:R.togglePaletteLessText),Mt.bind("click.spectrum",function(ge){ge.stopPropagation(),ge.preventDefault(),R.showPaletteOnly=!R.showPaletteOnly,!R.showPaletteOnly&&!Et&&ve.css("left","-="+(on.outerWidth(!0)+5)),Ao()}),x(re,function(ge,qe,ur){Be=ge/Q,Re=!1,ur.shiftKey&&(Be=Math.round(Be*10)/10),$n()},fo,no),x(sr,function(ge,qe){Wt=parseFloat(qe/F),Re=!1,R.showAlpha||(Be=1),$n()},fo,no),x(Br,function(ge,qe,ur){if(!ur.shiftKey)Le=null;else if(!Le){var Fr=fe*Te,Vn=Je-ye*Je,Wr=Math.abs(ge-Fr)>Math.abs(qe-Vn);Le=Wr?"x":"y"}var zr=!Le||Le==="x",ln=!Le||Le==="y";zr&&(fe=parseFloat(ge/Te)),ln&&(ye=parseFloat((Je-qe)/Je)),Re=!1,R.showAlpha||(Be=1),$n()},fo,no),Ft?(Vr(Ft),On(),Pe=R.preferredFormat||D(Ft).getFormat(),co(Ft)):On(),Et&&lr();function le(ge){return ge.data&&ge.data.ignore?(Vr(i(ge.target).closest(".sp-thumb-el").data("color")),$n()):(Vr(i(ge.target).closest(".sp-thumb-el").data("color")),$n(),R.hideAfterPaletteSelect&&(Tn(!0),xn())),!1}var Me=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";_r.delegate(".sp-thumb-el",Me,le),Ee.delegate(".sp-thumb-el:nth-child(1)",Me,{ignore:!0},le)}function uo(){if(It&&window.localStorage){try{var ce=window.localStorage[It].split(",#");ce.length>1&&(delete window.localStorage[It],i.each(ce,function(le,Me){co(Me)}))}catch{}try{ze=window.localStorage[It].split(";")}catch{}}}function co(ce){if(pt){var le=D(ce).toRgbString();if(!bn[le]&&i.inArray(le,ze)===-1)for(ze.push(le);ze.length>jr;)ze.shift();if(It&&window.localStorage)try{window.localStorage[It]=ze.join(";")}catch{}}}function ni(){var ce=[];if(R.showPalette)for(var le=0;le<ze.length;le++){var Me=D(ze[le]).toRgbString();bn[Me]||ce.push(ze[le])}return ce.reverse().slice(0,R.maxSelectionSize)}function ko(){var ce=vr(),le=i.map(We,function(Me,ge){return f(Me,ce,"sp-palette-row sp-palette-row-"+ge,R)});uo(),ze&&le.push(f(ni(),ce,"sp-palette-row sp-palette-row-selection",R)),_r.html(le.join(""))}function Mo(){if(R.showInitial){var ce=Ce,le=vr();Ee.html(f([ce,le],le,"sp-palette-row-initial",R))}}function fo(){(Je<=0||Te<=0||F<=0)&&Pn(),Se=!0,ve.addClass(nn),Le=null,ke.trigger("dragstart.spectrum",[vr()])}function no(){Se=!1,ve.removeClass(nn),ke.trigger("dragstop.spectrum",[vr()])}function Kn(){var ce=$e.val();if((ce===null||ce==="")&&sn)Vr(null),Tn(!0);else{var le=D(ce);le.isValid()?(Vr(le),Tn(!0)):$e.addClass("sp-validation-error")}}function Do(){ae?xn():lr()}function lr(){var ce=i.Event("beforeShow.spectrum");if(ae){Pn();return}if(ke.trigger("beforeShow.spectrum",[vr()]),!(Zt.beforeShow(vr())===!1||ce.isDefaultPrevented())){c(),ae=!0;var le=i(nr);le.bind("keydown.spectrum",hr),le.bind("click.spectrum",oi),i(window).bind("resize.spectrum",Gt),X.addClass("sp-active"),ve.removeClass("sp-hidden"),Pn(),On(),Ce=vr(),Mo(),Zt.show(Ce),ke.trigger("show.spectrum",[Ce])}}function hr(ce){ce.keyCode===27&&xn()}function oi(ce){ce.button!=2&&(Se||(Ke?Tn(!0):Gn(),xn()))}function xn(){!ae||Et||(ae=!1,i(nr).unbind("keydown.spectrum",hr),i(nr).unbind("click.spectrum",oi),i(window).unbind("resize.spectrum",Gt),X.removeClass("sp-active"),ve.addClass("sp-hidden"),Zt.hide(vr()),ke.trigger("hide.spectrum",[vr()]))}function Gn(){Vr(Ce,!0)}function Vr(ce,le){if(D.equals(ce,vr())){On();return}var Me,ge;!ce&&sn?Re=!0:(Re=!1,Ae=!ce,Me=D(ce),ge=Me.toHsv(),Wt=ge.h%360/360,fe=ge.s,ye=ge.v,Be=ge.a),On(),Me&&Me.isValid()&&!le&&(Pe=R.preferredFormat||Me.getFormat())}function vr(ce){return ce=ce||{},sn&&Re?null:D.fromRatio({h:Wt,s:fe,v:ye,a:Math.round(Be*100)/100},{format:ce.format||Pe})}function ki(){return!$e.hasClass("sp-validation-error")}function $n(){On(),Zt.move(vr()),ke.trigger("move.spectrum",[vr()])}function On(){$e.removeClass("sp-validation-error"),po();var ce=D.fromRatio({h:Wt,s:1,v:1});Br.css("background-color",ce.toHexString());var le=Pe;Be<1&&!(Be===0&&le==="name")&&(le==="hex"||le==="hex3"||le==="hex6"||le==="name")&&(le="rgb");var Me=vr({format:le}),ge="";if(jt.removeClass("sp-clear-display"),jt.css("background-color","transparent"),!Me&&sn)jt.addClass("sp-clear-display");else{var qe=Me.toHexString(),ur=Me.toRgbString();if(o||Me.alpha===1?jt.css("background-color",ur):(jt.css("background-color","transparent"),jt.css("filter",Me.toFilter())),R.showAlpha){var Fr=Me.toRgb();Fr.a=0;var Vn=D(Fr).toRgbString(),Wr="linear-gradient(left, "+Vn+", "+qe+")";n?Ie.css("filter",D(Vn).toFilter({gradientType:1},qe)):(Ie.css("background","-webkit-"+Wr),Ie.css("background","-moz-"+Wr),Ie.css("background","-ms-"+Wr),Ie.css("background","linear-gradient(to right, "+Vn+", "+qe+")"))}ge=Me.toString(le)}R.showInput&&$e.val(ge),R.showPalette&&ko(),Mo()}function po(){var ce=fe,le=ye;if(sn&&Re)yr.hide(),Rr.hide(),ar.hide();else{yr.show(),Rr.show(),ar.show();var Me=ce*Te,ge=Je-le*Je;Me=Math.max(-pr,Math.min(Te-pr,Me-pr)),ge=Math.max(-pr,Math.min(Je-pr,ge-pr)),ar.css({top:ge+"px",left:Me+"px"});var qe=Be*Q;yr.css({left:qe-lt/2+"px"});var ur=Wt*F;Rr.css({top:ur-Pt+"px"})}}function Tn(ce){var le=vr(),Me="",ge=Ae?!0:!D.equals(le,Ce);le&&(Me=le.toString(Pe),!ae&&co(le)),pe&&ke.val(Me),ce&&ge&&(Zt.change(le),ke.trigger("change",[le]))}function Pn(){ae&&(Te=Br.width(),Je=Br.height(),pr=ar.height(),sr.width(),F=sr.height(),Pt=Rr.height(),Q=re.width(),lt=yr.width(),Et||(ve.css("position","absolute"),R.offset?ve.offset(R.offset):ve.offset(m(ve,xt))),po(),R.showPalette&&ko(),ke.trigger("reflow.spectrum"))}function ii(){ke.show(),xt.unbind("click.spectrum touchstart.spectrum"),ve.remove(),X.remove(),e[qn.id]=null}function Lo(ce,le){if(ce===r)return i.extend({},R);if(le===r)return R[ce];R[ce]=le,ce==="preferredFormat"&&(Pe=R.preferredFormat),Ao()}function ho(){Mr=!1,ke.attr("disabled",!1),xt.removeClass("sp-disabled")}function Rn(){xn(),Mr=!0,ke.attr("disabled",!0),xt.addClass("sp-disabled")}function vo(ce){R.offset=ce,Pn()}lo();var qn={show:lr,hide:xn,toggle:Do,reflow:Pn,option:Lo,enable:ho,disable:Rn,offset:vo,set:function(ce){Vr(ce),Tn()},get:vr,destroy:ii,container:ve};return qn.id=e.push(qn)-1,qn}function m(B,ot){for(var R=ot[0],Et=B[0],pt=Et.parentElement,It=R.getBoundingClientRect(),Jt=Et.offsetWidth,Zt=Et.offsetHeight,Gt={top:0,left:0,width:R.offsetWidth,height:R.offsetHeight};R&&(Gt.top+=R.offsetTop-R.scrollTop,Gt.left+=R.offsetLeft-R.scrollLeft,!(R===pt||!pt.contains(R.offsetParent)));)R=R.offsetParent;return It.right+Jt>window.innerWidth-window.scrollX&&It.right-Jt>0&&(Gt.left-=Jt-Gt.width),It.bottom+Zt<window.innerHeight-window.scrollY?Gt.top+=Gt.height:Gt.top-=Zt,Gt}function y(){}function w(B){B.stopPropagation()}function C(B,ot){var R=Array.prototype.slice,Et=R.call(arguments,2);return function(){return B.apply(ot,Et.concat(R.call(arguments)))}}function x(B,ot,R,Et){ot=ot||function(){},R=R||function(){},Et=Et||function(){};var pt=document,It=!1,Jt={},Zt=0,Gt=0,ae="ontouchstart"in window,Se={};Se.selectstart=Ae,Se.dragstart=Ae,Se["touchmove mousemove"]=Te,Se["touchend mouseup"]=pr;function Ae(F){F.stopPropagation&&F.stopPropagation(),F.preventDefault&&F.preventDefault(),F.returnValue=!1}function Te(F){if(It){if(n&&pt.documentMode<9&&!F.button)return pr();var Q=F&&F.touches&&F.touches[0],lt=Q&&Q.pageX||F.pageX,Pt=Q&&Q.pageY||F.pageY,Wt=Math.max(0,Math.min(lt-Jt.left,Gt)),fe=Math.max(0,Math.min(Pt-Jt.top,Zt));ae&&Ae(F),ot.apply(B,[Wt,fe,F])}}function Je(F){var Q=F.which?F.which==3:F.button==2;!Q&&!It&&R.apply(B,arguments)!==!1&&(It=!0,Zt=i(B).height(),Gt=i(B).width(),Jt=i(B).offset(),i(pt).bind(Se),i(pt.body).addClass("sp-dragging"),Te(F),Ae(F))}function pr(){It&&(i(pt).unbind(Se),i(pt.body).removeClass("sp-dragging"),setTimeout(function(){Et.apply(B,arguments)},0)),It=!1}i(B).bind("touchstart mousedown",Je)}function E(B,ot,R){var Et;return function(){var pt=this,It=arguments,Jt=function(){Et=null,B.apply(pt,It)};Et||(Et=setTimeout(Jt,ot))}}function N(){return i.fn.spectrum.inputTypeColorSupport()}var L="spectrum.id";i.fn.spectrum=function(B,ot){if(typeof B=="string"){var R=this,Et=Array.prototype.slice.call(arguments,1);return this.each(function(){var pt=e[i(this).data(L)];if(pt){var It=pt[B];if(!It)throw new Error("Spectrum: no such method: '"+B+"'");B=="get"?R=pt.get():B=="container"?R=pt.container:B=="option"?R=pt.option.apply(pt,Et):B=="destroy"?(pt.destroy(),i(this).removeData(L)):It.apply(pt,Et)}}),R}return this.spectrum("destroy").each(function(){var pt=i.extend({},B,i(this).data()),It=g(this,pt);i(this).data(L,It.id)})},i.fn.spectrum.load=!0,i.fn.spectrum.loadOpts={},i.fn.spectrum.draggable=x,i.fn.spectrum.defaults=t,i.fn.spectrum.inputTypeColorSupport=function B(){if(typeof B._cachedResult>"u"){var ot=i("<input type='color'/>")[0];B._cachedResult=ot.type==="color"&&ot.value!==""}return B._cachedResult},i.spectrum={},i.spectrum.localization={},i.spectrum.palettes={},i.fn.spectrum.processNativeColorInputs=function(){var B=i("input[type=color]");B.length&&!N()&&B.spectrum({preferredFormat:"hex6"})};var H=/^[\s,#]+/,rt=/\s+$/,nt=0,vt=Math,et=vt.round,G=vt.min,W=vt.max,U=vt.random,D=function(B,ot){if(B=B||"",ot=ot||{},B instanceof D)return B;if(!(this instanceof D))return new D(B,ot);var R=Y(B);this._originalInput=B,this._r=R.r,this._g=R.g,this._b=R.b,this._a=R.a,this._roundA=et(100*this._a)/100,this._format=ot.format||R.format,this._gradientType=ot.gradientType,this._r<1&&(this._r=et(this._r)),this._g<1&&(this._g=et(this._g)),this._b<1&&(this._b=et(this._b)),this._ok=R.ok,this._tc_id=nt++};D.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var B=this.toRgb();return(B.r*299+B.g*587+B.b*114)/1e3},setAlpha:function(B){return this._a=Rt(B),this._roundA=et(100*this._a)/100,this},toHsv:function(){var B=wt(this._r,this._g,this._b);return{h:B.h*360,s:B.s,v:B.v,a:this._a}},toHsvString:function(){var B=wt(this._r,this._g,this._b),ot=et(B.h*360),R=et(B.s*100),Et=et(B.v*100);return this._a==1?"hsv("+ot+", "+R+"%, "+Et+"%)":"hsva("+ot+", "+R+"%, "+Et+"%, "+this._roundA+")"},toHsl:function(){var B=ct(this._r,this._g,this._b);return{h:B.h*360,s:B.s,l:B.l,a:this._a}},toHslString:function(){var B=ct(this._r,this._g,this._b),ot=et(B.h*360),R=et(B.s*100),Et=et(B.l*100);return this._a==1?"hsl("+ot+", "+R+"%, "+Et+"%)":"hsla("+ot+", "+R+"%, "+Et+"%, "+this._roundA+")"},toHex:function(B){return At(this._r,this._g,this._b,B)},toHexString:function(B){return"#"+this.toHex(B)},toHex8:function(){return Qt(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:et(this._r),g:et(this._g),b:et(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+et(this._r)+", "+et(this._g)+", "+et(this._b)+")":"rgba("+et(this._r)+", "+et(this._g)+", "+et(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:et(T(this._r,255)*100)+"%",g:et(T(this._g,255)*100)+"%",b:et(T(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+et(T(this._r,255)*100)+"%, "+et(T(this._g,255)*100)+"%, "+et(T(this._b,255)*100)+"%)":"rgba("+et(T(this._r,255)*100)+"%, "+et(T(this._g,255)*100)+"%, "+et(T(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:mt[At(this._r,this._g,this._b,!0)]||!1},toFilter:function(B){var ot="#"+Qt(this._r,this._g,this._b,this._a),R=ot,Et=this._gradientType?"GradientType = 1, ":"";if(B){var pt=D(B);R=pt.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+Et+"startColorstr="+ot+",endColorstr="+R+")"},toString:function(B){var ot=!!B;B=B||this._format;var R=!1,Et=this._a<1&&this._a>=0,pt=!ot&&Et&&(B==="hex"||B==="hex6"||B==="hex3"||B==="name");return pt?B==="name"&&this._a===0?this.toName():this.toRgbString():(B==="rgb"&&(R=this.toRgbString()),B==="prgb"&&(R=this.toPercentageRgbString()),(B==="hex"||B==="hex6")&&(R=this.toHexString()),B==="hex3"&&(R=this.toHexString(!0)),B==="hex8"&&(R=this.toHex8String()),B==="name"&&(R=this.toName()),B==="hsl"&&(R=this.toHslString()),B==="hsv"&&(R=this.toHsvString()),R||this.toHexString())},_applyModification:function(B,ot){var R=B.apply(null,[this].concat([].slice.call(ot)));return this._r=R._r,this._g=R._g,this._b=R._b,this.setAlpha(R._a),this},lighten:function(){return this._applyModification(bt,arguments)},brighten:function(){return this._applyModification(Lt,arguments)},darken:function(){return this._applyModification(zt,arguments)},desaturate:function(){return this._applyModification(oe,arguments)},saturate:function(){return this._applyModification(yt,arguments)},greyscale:function(){return this._applyModification(Ct,arguments)},spin:function(){return this._applyModification(Dt,arguments)},_applyCombination:function(B,ot){return B.apply(null,[this].concat([].slice.call(ot)))},analogous:function(){return this._applyCombination(ee,arguments)},complement:function(){return this._applyCombination(Ut,arguments)},monochromatic:function(){return this._applyCombination(xe,arguments)},splitcomplement:function(){return this._applyCombination(Xt,arguments)},triad:function(){return this._applyCombination(Yt,arguments)},tetrad:function(){return this._applyCombination(se,arguments)}},D.fromRatio=function(B,ot){if(typeof B=="object"){var R={};for(var Et in B)B.hasOwnProperty(Et)&&(Et==="a"?R[Et]=B[Et]:R[Et]=ht(B[Et]));B=R}return D(B,ot)};function Y(B){var ot={r:0,g:0,b:0},R=1,Et=!1,pt=!1;return typeof B=="string"&&(B=me(B)),typeof B=="object"&&(B.hasOwnProperty("r")&&B.hasOwnProperty("g")&&B.hasOwnProperty("b")?(ot=K(B.r,B.g,B.b),Et=!0,pt=String(B.r).substr(-1)==="%"?"prgb":"rgb"):B.hasOwnProperty("h")&&B.hasOwnProperty("s")&&B.hasOwnProperty("v")?(B.s=ht(B.s),B.v=ht(B.v),ot=gt(B.h,B.s,B.v),Et=!0,pt="hsv"):B.hasOwnProperty("h")&&B.hasOwnProperty("s")&&B.hasOwnProperty("l")&&(B.s=ht(B.s),B.l=ht(B.l),ot=M(B.h,B.s,B.l),Et=!0,pt="hsl"),B.hasOwnProperty("a")&&(R=B.a)),R=Rt(R),{ok:Et,format:B.format||pt,r:G(255,W(ot.r,0)),g:G(255,W(ot.g,0)),b:G(255,W(ot.b,0)),a:R}}function K(B,ot,R){return{r:T(B,255)*255,g:T(ot,255)*255,b:T(R,255)*255}}function ct(B,ot,R){B=T(B,255),ot=T(ot,255),R=T(R,255);var Et=W(B,ot,R),pt=G(B,ot,R),It,Jt,Zt=(Et+pt)/2;if(Et==pt)It=Jt=0;else{var Gt=Et-pt;switch(Jt=Zt>.5?Gt/(2-Et-pt):Gt/(Et+pt),Et){case B:It=(ot-R)/Gt+(ot<R?6:0);break;case ot:It=(R-B)/Gt+2;break;case R:It=(B-ot)/Gt+4;break}It/=6}return{h:It,s:Jt,l:Zt}}function M(B,ot,R){var Et,pt,It;B=T(B,360),ot=T(ot,100),R=T(R,100);function Jt(ae,Se,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?ae+(Se-ae)*6*Ae:Ae<1/2?Se:Ae<2/3?ae+(Se-ae)*(2/3-Ae)*6:ae}if(ot===0)Et=pt=It=R;else{var Zt=R<.5?R*(1+ot):R+ot-R*ot,Gt=2*R-Zt;Et=Jt(Gt,Zt,B+1/3),pt=Jt(Gt,Zt,B),It=Jt(Gt,Zt,B-1/3)}return{r:Et*255,g:pt*255,b:It*255}}function wt(B,ot,R){B=T(B,255),ot=T(ot,255),R=T(R,255);var Et=W(B,ot,R),pt=G(B,ot,R),It,Jt,Zt=Et,Gt=Et-pt;if(Jt=Et===0?0:Gt/Et,Et==pt)It=0;else{switch(Et){case B:It=(ot-R)/Gt+(ot<R?6:0);break;case ot:It=(R-B)/Gt+2;break;case R:It=(B-ot)/Gt+4;break}It/=6}return{h:It,s:Jt,v:Zt}}function gt(B,ot,R){B=T(B,360)*6,ot=T(ot,100),R=T(R,100);var Et=vt.floor(B),pt=B-Et,It=R*(1-ot),Jt=R*(1-pt*ot),Zt=R*(1-(1-pt)*ot),Gt=Et%6,ae=[R,Jt,It,It,Zt,R][Gt],Se=[Zt,R,R,Jt,It,It][Gt],Ae=[It,It,Zt,R,R,Jt][Gt];return{r:ae*255,g:Se*255,b:Ae*255}}function At(B,ot,R,Et){var pt=[q(et(B).toString(16)),q(et(ot).toString(16)),q(et(R).toString(16))];return Et&&pt[0].charAt(0)==pt[0].charAt(1)&&pt[1].charAt(0)==pt[1].charAt(1)&&pt[2].charAt(0)==pt[2].charAt(1)?pt[0].charAt(0)+pt[1].charAt(0)+pt[2].charAt(0):pt.join("")}function Qt(B,ot,R,Et){var pt=[q(st(Et)),q(et(B).toString(16)),q(et(ot).toString(16)),q(et(R).toString(16))];return pt.join("")}D.equals=function(B,ot){return!B||!ot?!1:D(B).toRgbString()==D(ot).toRgbString()},D.random=function(){return D.fromRatio({r:U(),g:U(),b:U()})};function oe(B,ot){ot=ot===0?0:ot||10;var R=D(B).toHsl();return R.s-=ot/100,R.s=j(R.s),D(R)}function yt(B,ot){ot=ot===0?0:ot||10;var R=D(B).toHsl();return R.s+=ot/100,R.s=j(R.s),D(R)}function Ct(B){return D(B).desaturate(100)}function bt(B,ot){ot=ot===0?0:ot||10;var R=D(B).toHsl();return R.l+=ot/100,R.l=j(R.l),D(R)}function Lt(B,ot){ot=ot===0?0:ot||10;var R=D(B).toRgb();return R.r=W(0,G(255,R.r-et(255*-(ot/100)))),R.g=W(0,G(255,R.g-et(255*-(ot/100)))),R.b=W(0,G(255,R.b-et(255*-(ot/100)))),D(R)}function zt(B,ot){ot=ot===0?0:ot||10;var R=D(B).toHsl();return R.l-=ot/100,R.l=j(R.l),D(R)}function Dt(B,ot){var R=D(B).toHsl(),Et=(et(R.h)+ot)%360;return R.h=Et<0?360+Et:Et,D(R)}function Ut(B){var ot=D(B).toHsl();return ot.h=(ot.h+180)%360,D(ot)}function Yt(B){var ot=D(B).toHsl(),R=ot.h;return[D(B),D({h:(R+120)%360,s:ot.s,l:ot.l}),D({h:(R+240)%360,s:ot.s,l:ot.l})]}function se(B){var ot=D(B).toHsl(),R=ot.h;return[D(B),D({h:(R+90)%360,s:ot.s,l:ot.l}),D({h:(R+180)%360,s:ot.s,l:ot.l}),D({h:(R+270)%360,s:ot.s,l:ot.l})]}function Xt(B){var ot=D(B).toHsl(),R=ot.h;return[D(B),D({h:(R+72)%360,s:ot.s,l:ot.l}),D({h:(R+216)%360,s:ot.s,l:ot.l})]}function ee(B,ot,R){ot=ot||6,R=R||30;var Et=D(B).toHsl(),pt=360/R,It=[D(B)];for(Et.h=(Et.h-(pt*ot>>1)+720)%360;--ot;)Et.h=(Et.h+pt)%360,It.push(D(Et));return It}function xe(B,ot){ot=ot||6;for(var R=D(B).toHsv(),Et=R.h,pt=R.s,It=R.v,Jt=[],Zt=1/ot;ot--;)Jt.push(D({h:Et,s:pt,v:It})),It=(It+Zt)%1;return Jt}D.mix=function(B,ot,R){R=R===0?0:R||50;var Et=D(B).toRgb(),pt=D(ot).toRgb(),It=R/100,Jt=It*2-1,Zt=pt.a-Et.a,Gt;Jt*Zt==-1?Gt=Jt:Gt=(Jt+Zt)/(1+Jt*Zt),Gt=(Gt+1)/2;var ae=1-Gt,Se={r:pt.r*Gt+Et.r*ae,g:pt.g*Gt+Et.g*ae,b:pt.b*Gt+Et.b*ae,a:pt.a*It+Et.a*(1-It)};return D(Se)},D.readability=function(B,ot){var R=D(B),Et=D(ot),pt=R.toRgb(),It=Et.toRgb(),Jt=R.getBrightness(),Zt=Et.getBrightness(),Gt=Math.max(pt.r,It.r)-Math.min(pt.r,It.r)+Math.max(pt.g,It.g)-Math.min(pt.g,It.g)+Math.max(pt.b,It.b)-Math.min(pt.b,It.b);return{brightness:Math.abs(Jt-Zt),color:Gt}},D.isReadable=function(B,ot){var R=D.readability(B,ot);return R.brightness>125&&R.color>500},D.mostReadable=function(B,ot){for(var R=null,Et=0,pt=!1,It=0;It<ot.length;It++){var Jt=D.readability(B,ot[It]),Zt=Jt.brightness>125&&Jt.color>500,Gt=3*(Jt.brightness/125)+Jt.color/500;(Zt&&!pt||Zt&&pt&&Gt>Et||!Zt&&!pt&&Gt>Et)&&(pt=Zt,Et=Gt,R=D(ot[It]))}return R};var ue=D.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},mt=D.hexNames=Vt(ue);function Vt(B){var ot={};for(var R in B)B.hasOwnProperty(R)&&(ot[B[R]]=R);return ot}function Rt(B){return B=parseFloat(B),(isNaN(B)||B<0||B>1)&&(B=1),B}function T(B,ot){it(B)&&(B="100%");var R=_t(B);return B=G(ot,W(0,parseFloat(B))),R&&(B=parseInt(B*ot,10)/100),vt.abs(B-ot)<1e-6?1:B%ot/parseFloat(ot)}function j(B){return G(1,W(0,B))}function z(B){return parseInt(B,16)}function it(B){return typeof B=="string"&&B.indexOf(".")!=-1&&parseFloat(B)===1}function _t(B){return typeof B=="string"&&B.indexOf("%")!=-1}function q(B){return B.length==1?"0"+B:""+B}function ht(B){return B<=1&&(B=B*100+"%"),B}function st(B){return Math.round(parseFloat(B)*255).toString(16)}function ie(B){return z(B)/255}var _e=(function(){var B="[-\\+]?\\d+%?",ot="[-\\+]?\\d*\\.\\d+%?",R="(?:"+ot+")|(?:"+B+")",Et="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",pt="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?";return{rgb:new RegExp("rgb"+Et),rgba:new RegExp("rgba"+pt),hsl:new RegExp("hsl"+Et),hsla:new RegExp("hsla"+pt),hsv:new RegExp("hsv"+Et),hsva:new RegExp("hsva"+pt),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function me(B){B=B.replace(H,"").replace(rt,"").toLowerCase();var ot=!1;if(ue[B])B=ue[B],ot=!0;else if(B=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var R;return(R=_e.rgb.exec(B))?{r:R[1],g:R[2],b:R[3]}:(R=_e.rgba.exec(B))?{r:R[1],g:R[2],b:R[3],a:R[4]}:(R=_e.hsl.exec(B))?{h:R[1],s:R[2],l:R[3]}:(R=_e.hsla.exec(B))?{h:R[1],s:R[2],l:R[3],a:R[4]}:(R=_e.hsv.exec(B))?{h:R[1],s:R[2],v:R[3]}:(R=_e.hsva.exec(B))?{h:R[1],s:R[2],v:R[3],a:R[4]}:(R=_e.hex8.exec(B))?{a:ie(R[1]),r:z(R[2]),g:z(R[3]),b:z(R[4]),format:ot?"name":"hex8"}:(R=_e.hex6.exec(B))?{r:z(R[1]),g:z(R[2]),b:z(R[3]),format:ot?"name":"hex"}:(R=_e.hex3.exec(B))?{r:z(R[1]+""+R[1]),g:z(R[2]+""+R[2]),b:z(R[3]+""+R[3]),format:ot?"name":"hex"}:!1}window.tinycolor=D,i(function(){i.fn.spectrum.load&&i.fn.spectrum.processNativeColorInputs()})}var IS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),og=(function(i){IS(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this,n=t.ppfx||"";return e.opts=t,e.ppfx=n,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(t,e){var n=this.model,o=t||n.get("defaults"),s=this.getInputEl();s&&(s.value=o)},r.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},r.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},r.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,n=t.opts,o=n.type||"text",s=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,Tr.default)('<input type="'.concat(o,'" placeholder="').concat(s,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r})(Ht.Ss);const fu=og;og.prototype.events={change:"handleChange"};var jS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ys=function(){return ys=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ys.apply(this,arguments)};Tr.default&&LS(Tr.default);var ml=function(i){var r=i.getFormat()==="name"&&i.toName(),t=i.getAlpha()==1?i.toHexString():i.toRgbString();return r||t.replace(/ /g,"")},RS=(function(i){jS(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return i.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,k.isUndefined)(e)||this.__onInputChange(e)},r.prototype.__onInputChange=function(t){var e=this,n=e.model,o=e.opts,s=o.onChange,u=t,f=this.getColorEl();if(f){f.spectrum("set",u);var c=f.spectrum("get"),h=u&&ml(c);h&&(u=h)}s?s(u):n.set({value:u},{fromInput:1})},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n=this.model,o=(0,k.isUndefined)(e.def)?n.get("defaults"):e.def,s=(0,k.isUndefined)(t)?(0,k.isUndefined)(o)?"":o:t,u=this.getInputEl(),f=this.getColorEl(),c=s!="none"?s:"";u.value=s,f.get(0).style.backgroundColor=c,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(f.spectrum("set",c),this.noneColor=s=="none",this.movedColor=c)},r.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,o=e.model,s=e.opts,u=this.ppfx,f=s.onChange,c=(0,Tr.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),h=c.get(0).style,g=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor="";var m=!1,y;this.$el.find("[data-colorp-c]").append(c);var w=function(C,x){x===void 0&&(x=!0),f?f(C,!x):(x&&o.setValueFromInput(0,!1),o.setValueFromInput(C,x))};c.spectrum(ys(ys(ys({color:o.getValue()||!1,containerClassName:"".concat(u,"one-bg ").concat(u,"two-color ").concat(u,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},g),o.get("colorPicker")||{}),{move:function(C){var x=ml(C);t.movedColor=x,h.backgroundColor=x,w(x,!1)},change:function(C){m=!0;var x=ml(C);h.backgroundColor=x,w(x),t.noneColor=!1},show:function(C){m=!1,t.movedColor="",y=f?o.getValue({noDefault:!0}):ml(C)},hide:function(){!m&&(y||f)&&(t.noneColor&&(y=""),h.backgroundColor=y,c.spectrum("set",y),w(y,!1))}})),n&&n.on&&this.listenTo(n,"component:selected",function(){t.movedColor&&w(t.movedColor),m=!0,t.movedColor="",c.spectrum("hide")}),this.colorEl=c}return this.colorEl},r.prototype.render=function(){return fu.prototype.render.call(this),this.getColorEl(),this},r})(fu);const ig=RS;var VS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),FS=(function(i){VS(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new ig({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=n.render();o.setValue(e,{fromTarget:1}),this.input=o.el}return this.input},r})(Po);const NS=FS;var HS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ag=(function(i){HS(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;return(0,k.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return r.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},r.prototype.setValue=function(t,e){var n=e||{},o=this.validateInputValue(t,{deepCheck:1}),s={value:o.value,unit:""};(o.unit||o.force)&&(s.unit=o.unit),this.model.set(s,n),n.silent&&this.handleModelChange()},r.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},r.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach(function(s){var u=s==t.get("unit")?"selected":"";n.push("<option ".concat(u,">").concat(s,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},r.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},r.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,Kt.on)(this.doc,"mousemove",this.moveIncrement),(0,Kt.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get("step"),o=this.current,s=this.normalizeValue(o.val+(o.y-t.pageY)*n),u=this.validateInputValue(s),f=u.value,c=u.unit;return this.prValue=f,e.set({value:f,unit:c},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,Kt.AU)(this.doc,"mouseup",this.upIncrement),(0,Kt.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set("value",n,{avoidStore:1}).set("value",n+e),this.elementUpdated()}},r.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var n=this.model,o=n.get("step"),s=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var u=o.toString().split(".")[1];s=u?u.length:0}return s?parseFloat(t.toFixed(s)):t},r.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var n=0,o=e||{},s=this.model,u="",f=(0,k.isUndefined)(t)?u:t,c=e.units||s.get("units")||[],h=s.get("unit")||c.length&&c[0]||"",g=(0,k.isUndefined)(e.max)?s.get("max"):e.max,m=(0,k.isUndefined)(e.min)?s.get("min"):e.min,y=!!s.get("limitlessMax"),w=!!s.get("limitlessMin");if(o.deepCheck){var C=s.get("fixedValues")||[];if(f===""&&(h=""),f){var x=new RegExp("^"+C.join("|"),"g");if(C.length&&x.test(f))f=f.match(x)[0],h="",n=1;else{var E=f+"";f+="",f=parseFloat(f.replace(",",".")),f=isNaN(f)?u:f;var N=E.replace(f,"");(0,k.indexOf)(c,N)>=0&&(h=N)}}}return!isNaN(f)&&f!==""&&(!y&&!(0,k.isUndefined)(g)&&g!==""&&(f=f>g?g:f),!w&&!(0,k.isUndefined)(m)&&m!==""&&(f=f<m?m:f)),{force:n,value:f,unit:h}},r.prototype.render=function(){fu.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},r})(fu);const sg=ag;ag.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var US=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),BS=(function(i){US(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,n=e.value,o=e.unit;return!(0,k.isUndefined)(n)&&n!==""?n+o:t.get("default")},r.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,n=t.model,o=this.getModelValue(),s=new sg({contClass:"".concat(e,"field-int"),type:"number",model:n,ppfx:e});s.render(),this.$input=s.inputEl,this.$unit=s.unitEl,n.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=s.el}return this.input},r})(Po);const WS=BS;var zS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),KS=(function(i){zS(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return r.prototype.templateInput=function(){var t=this,e=t.ppfx,n=t.clsField;return'<div class="'.concat(n,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,n=t.em,o=e.get("name"),s=e.get("options")||[],u=[],f="<select>";s.forEach(function(g){var m="",y,w,C;(0,k.isString)(g)?(y=g,w=g):(y=g.name||g.label||g.value,w="".concat((0,k.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),C=g.style?g.style.replace(/"/g,"&quot;"):"",m+=C?' style="'.concat(C,'"'):"");var x=n.t("traitManager.traits.options.".concat(o,".").concat(w))||y;f+='<option value="'.concat(w,'"').concat(m,">").concat(x,"</option>"),u.push(w)}),f+="</select>",this.$input=(0,Tr.default)(f);var c=e.getTargetValue(),h=u.indexOf(c)>=0?c:e.get("default");!(0,k.isUndefined)(h)&&this.$input.val(h)}return this.$input.get(0)},r})(Po);const GS=KS;var $S=De(8242),qS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),mh="data-categories",yh="data-no-categories",lg=(function(i){qS(r,i);function r(t,e){var n=i.call(this,t)||this;n.reuseView=!0,n.renderedCategories=new Map,n.itemsView=e;var o=t.config||{};n.config=o;var s=t.editor;n.em=s;var u=o.pStylePrefix||"";return n.ppfx=u,n.pfx=u+o.stylePrefix||"",n.className="".concat(n.pfx,"traits"),n.traitContClass="".concat(u,"traits-c"),n.classNoCat="".concat(u,"traits-empty-c"),n.catsClass="".concat(u,"trait-categories"),n.collection=new Vl([],{em:s}),n.listenTo(s,"component:toggled",n.updatedCollection),n.updatedCollection(),n}return r.prototype.updatedCollection=function(){var t=this,e=t.ppfx,n=t.em,o=n.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=o?.traits||new Vl([],{em:n}),this.render()},r.prototype.add=function(t,e){var n=this,o=n.config,s=n.renderedCategories,u=this.itemView,f=t.get(this.itemType);this.itemsView&&this.itemsView[f]&&(u=this.itemsView[f]);var c=new u({config:o,model:t,attributes:t.get("attributes")}),h=c.render().el,g=t.parent.initCategory(t);if(g){var m=g.getId(),y=this.getCategoriesEl(),w=s.get(m);!w&&y&&(w=new Kv({model:g},o,"trait").render(),s.set(m,w),y.appendChild(w.el)),w?.append(h);return}e?e.appendChild(h):this.append(h)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(mh,"]"))),this.catsEl},r.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(yh,"]"))),this.traitsEl},r.prototype.append=function(t){var e=this.getTraitsEl();e?.appendChild(t)},r.prototype.render=function(){var t=this,e=this,n=e.el,o=e.ppfx,s=e.catsClass,u=e.traitContClass,f=e.classNoCat,c=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,n.innerHTML=`
      <div class="`.concat(s,'" ').concat(mh,`></div>
      <div class="`).concat(f," ").concat(u,'" ').concat(yh,`></div>
    `),this.collection.forEach(function(g){return t.add(g,c)}),this.append(c);var h="".concat(u,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(h),this.rendered=!0,this},r})($S.A);const _h=lg;lg.prototype.itemView=Po;var YS=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),XS=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},JS=(function(i){YS(r,i);function r(t){var e=i.call(this,t,"TraitManager",TS())||this;e.TraitsView=_h,e.events=Il,e.state=new Ht.Kx({traits:[]}),e.types={text:Po,number:WS,select:GS,checkbox:DS,color:NS,button:AS};var n=e,o=n.state,s=n.config,u=n.events,f=s.pStylePrefix;f&&(s.stylePrefix="".concat(f).concat(s.stylePrefix)),(0,k.bindAll)(e,"__onSelect");var c=(0,k.debounce)(function(){return e.__upSel()},0),h=(0,k.debounce)(function(){return e.__onUp()},0);return o.listenTo(t,"component:toggled",c),o.listenTo(t,u.value,h),o.on("change:traits",e.__onSelect),e.debounced=[c,h],e}return r.prototype.select=function(t){var e=t?.getTraits()||[];this.state.set({component:t,traits:e}),this.__trgCustom()},r.prototype.getCategories=function(){var t,e=this.getComponent(),n=((t=e?.traits.categories)===null||t===void 0?void 0:t.models)||[];return XS([],n,!0)},r.prototype.getTraits=function(){return this.getCurrent()},r.prototype.getTraitsByCategory=function(t){return Ov(t||this.getTraits())},r.prototype.getComponent=function(){return this.state.attributes.component},r.prototype.addType=function(t,e){var n=this.getType("text");this.types[t]=n.extend(e)},r.prototype.getType=function(t){return this.getTypes()[t]},r.prototype.getTypes=function(){return this.types},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.getCurrent=function(){return this.state.get("traits")||[]},r.prototype.render=function(){var t=this.view,e=this.em;return t=new _h({el:t?.el,collection:[],editor:e,config:this.getConfig()},this.getTypes()),this.view=t,t.el},r.prototype.postRender=function(){this.__appendTo()},r.prototype.__onSelect=function(){var t=this,e=t.em,n=t.events,o=t.state,s=o.attributes,u=s.component,f=s.traits;e.trigger(n.select,{component:u,traits:f})},r.prototype.__trgCustom=function(t){t===void 0&&(t={});var e=this,n=e.em,o=e.events,s=e.__ctn;this.__ctn=s||t.container,n.trigger(o.custom,this.__customData())},r.prototype.__customData=function(){return{container:this.__ctn}},r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getComponent())},r})(wn);const ZS=JS;var QS=function(){return{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}}};const tx=QS;var Af;(function(i){i.root="layer:root",i.component="layer:component",i.custom="layer:custom"})(Af||(Af={}));var ex=De(6756),rx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),nx=(function(i){rx(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},t}return Object.defineProperty(r.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){var t;return(t=this.model.viewLayer)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),r})(ex.h);const ox=nx;var ix=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ax=(function(i){ix(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.items=[],e.opt=t;var n=t.config||{};e.config=n,e.module=t.module,e.parentView=t.parentView;var o=n.stylePrefix||"";n.pStylePrefix;var s=e.collection;e.listenTo(s,"add",e.addTo),e.listenTo(s,"reset resetNavigator",e.render),e.listenTo(s,"remove",e.removeChildren),e.className="".concat(o,"layers");var u=n.em;if(n.sortable&&!e.opt.sorter){var f=u.Utils,c=n.sortContainer||e.el,h=e.createPlaceholder(o);e.opt.sorter=new f.ComponentSorter({em:u,treeClass:ox,containerContext:{container:c,containerSel:".".concat(e.className),itemSel:".".concat(o,"layer"),pfx:n.pStylePrefix,document,placeholderElement:h},dragBehavior:{dragDirection:Pi.A.Vertical,nested:!0}})}return e.$el.data("collection",s),t.parent&&e.$el.data("model",t.parent),e}return r.prototype.createPlaceholder=function(t){var e=document.createElement("div"),n=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},r.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},r.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},r.prototype.addToCollection=function(t,e,n){var o=this,s=o.parentView,u=o.opt,f=o.config,c=o.el,h=u.ItemView,g=u.opened,m=u.module,y=u.level,w=u.sorter,C=t.viewLayer||new h({ItemView:h,level:y,model:t,parentView:s,config:f,sorter:w,opened:g,module:m}),x=C.render().el;if(e)e.appendChild(x);else{var E=c,N=E.childNodes;if((0,k.isUndefined)(n))E.appendChild(x);else{var L=N.length==n;L&&n--,L||!N.length?E.appendChild(x):E.insertBefore(x,N[n])}}return this.items.push(C),x},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ht.Ss.prototype.remove.apply(this,t),this.items.map(function(n){return n.remove()}),this},r.prototype.render=function(){var t=this,e=this,n=e.el,o=e.module,s=document.createDocumentFragment();return n.innerHTML="",this.collection.map(function(u){return o.__getLayerFromComponent(u)}).forEach(function(u){return t.addToCollection(u,s)}),n.appendChild(s),n.className=this.className,this},r})(Ht.Ss);const sx=ax;var zc=De(9946),lx=function(){return{stylePrefix:"com-",defaults:{},strict:!0,defaultOptions:{}}};const ux=lx;var cx=De(1738),fx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),du=function(){return du=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},du.apply(this,arguments)},wh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},bh=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],ug={preserveSelected:1},cg=function(i){return function(r){return i.trigger("".concat(Jf,":start"),r)}},fg=function(i){return function(r){return i.trigger(Jf,r)}},dg=function(i,r,t){return t===void 0&&(t={}),function(e,n,o){setTimeout(function(){r.forEach(function(s){return s.set("status",s.get("selectable")?"selected":"")}),i.setSelected(r),r[0].emitUpdate()}),i.trigger("".concat(Jf,":end"),o),setTimeout(function(){return i.runDefault(ug)}),(t.altMode||o.cancelled)&&i.set("_cmpDrag",1)}},dx=(function(i){fx(r,i);function r(t){var e=i.call(this,t,"Commands",ux())||this;e.CommandAbstract=zc.default,e.defaultCommands={},e.commands={},e.active={},e.events=cx.A;var n=e.config,o=n.pStylePrefix,s=e.defaultCommands;o&&(n.stylePrefix=o+n.stylePrefix),Object.keys(n.defaults).forEach(function(f){var c=n.defaults[f];c.id&&e.add(c.id,c)}),s["tlb-delete"]={run:function(f){return f.runCommand("core:component-delete")}},s["tlb-clone"]={run:function(f){f.runCommand("core:copy"),f.runCommand("core:paste",{action:"clone-component"})}},s["tlb-move"]={run:function(f,c,h){var g,m;h===void 0&&(h={});var y=f.getModel(),w=h.event,C=h.target,x=Array.isArray(C)?C:C?[C]:wh([],f.getSelectedAll(),!0),E=x.map(function(D){var Y,K;return((K=(Y=D.delegate)===null||Y===void 0?void 0:Y.move)===null||K===void 0?void 0:K.call(Y,D))||D}).filter(Boolean),N=E[E.length-1],L=w?.type==="dragstart",H=["absolute","translate"];if(!N?.get("draggable"))return y.logWarning("The element is not draggable");var rt=h.mode||N.get("dmode")||y.get("dmode"),nt=function(){return y.stopDefault(ug)},vt=(0,k.includes)(H,rt);E.forEach(function(D){return D.trigger("disable",{fromMove:!0})}),L?setTimeout(nt,0):nt();var et=cg(y),G=fg(y),W=dg(y,E,{altMode:vt});if(vt)f.runCommand("core:component-drag",{guidesInfo:1,mode:rt,target:N,onStart:et,onDrag:G,onEnd:W,event:w});else{L&&((g=w?.dataTransfer)===null||g===void 0||g.setDragImage((m=N.view)===null||m===void 0?void 0:m.el,0,0));var U=f.Commands.get("move-comp");U.onStart=et,U.onDrag=G,U.onEndMoveFromModel=W,U.initSorterFromModels(E)}E.filter(function(D){return D.get("selectable")}).forEach(function(D){return D.set("status","freezed-selected")})}},s["core:undo"]=function(f){return f.UndoManager.undo()},s["core:redo"]=function(f){return f.UndoManager.redo()},bh.forEach(function(f){var c=f[2],h=De(585)("./".concat(f[1])).default,g="core:".concat(f[0]);s[g]=h,c&&(s[c]=h,["run","stop"].forEach(function(m){t.on("".concat(m,":").concat(c),function(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];return t.trigger.apply(t,wh(["".concat(m,":").concat(g)],y,!1))})}))}),n.model=t.Canvas;for(var u in s)e.add(u,s[u]);return e}return r.prototype.add=function(t,e){var n=(0,k.isFunction)(e)?{run:e}:e;return n.stop||(n.noStop=!0),delete n.initialize,n.id=t,this.commands[t]=zc.default.extend(n),this},r.prototype.get=function(t){var e=this.commands[t];return(0,k.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},r.prototype.extend=function(t,e){e===void 0&&(e={});var n=this.get(t);if(n){var o=du(du({},n.constructor.prototype),e);this.add(t,o);var s=bh.filter(function(u){return"core:".concat(u[0])===t&&u[2]})[0];s&&this.add(s[2],o)}return this},r.prototype.has=function(t){return!!this.commands[t]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},r.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},r.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(t,e){var n,o;e===void 0&&(e={});var s;if(t?.run){var u=this,f=u.em,c=u.config,h=t.id,g=f.Editor;if(!this.isActive(h)||e.force||!c.strict){var m=(o=(n=c.defaultOptions)===null||n===void 0?void 0:n[h])===null||o===void 0?void 0:o.run;(0,k.isFunction)(m)&&(e=m(e)),s=g&&t.callRun(g,e)}}return s},r.prototype.stopCommand=function(t,e){var n,o;e===void 0&&(e={});var s;if(t?.run){var u=this,f=u.em,c=u.config,h=t.id,g=f.Editor;if(this.isActive(h)||e.force||!c.strict){var m=(o=(n=c.defaultOptions)===null||n===void 0?void 0:n[h])===null||o===void 0?void 0:o.stop;(0,k.isFunction)(m)&&(e=m(e)),s=t.callStop(g,e)}}return s},r.prototype.create=function(t){t.stop||(t.noStop=!0);var e=zc.default.extend(t);return new e(this.config)},r.prototype.__onRun=function(t,e){var n=this,o=n.em,s=n.events;o.on("".concat(s.runCommand).concat(t),e)},r.prototype.__onStop=function(t,e){var n=this,o=n.em,s=n.events;o.on("".concat(s.stopCommand).concat(t),e)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r})(wn);const px=dx;var hx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),kf=function(){return kf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},kf.apply(this,arguments)},Ch="contentEditable",yl="data-toggle-move",vx=(function(i){hx(r,i);function r(t){var e=i.call(this,t)||this;(0,k.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var n=e,o=n.model,s=n.pfx,u=n.ppfx,f=o.get("type")||"default";return e.className="".concat(s,"layer ").concat(s,"layer__t-").concat(f," no-select ").concat(u,"two-color"),e.inputNameCls="".concat(u,"layer-name"),e.clsTitleC="".concat(s,"layer-title-c"),e.clsTitle="".concat(s,"layer-title"),e.clsCaret="".concat(s,"layer-caret"),e.clsCount="".concat(s,"layer-count"),e.clsMove="".concat(s,"layer-move"),e.clsChildren="".concat(s,"layer-children"),e.clsNoChild="".concat(s,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return r.prototype.events=function(){var t;return t={},t["mousedown [".concat(yl,"]")]="startSort",t["touchstart [".concat(yl,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},r.prototype.template=function(t){var e=this,n=e.pfx,o=e.ppfx,s=e.config,u=e.clsNoEdit,f=e.module,c=e.opt,h=e.em,g=s.hidable,m=f.getComponents(t).length,y=m?"":this.clsNoChild,w="".concat(this.clsTitle," ").concat(y),C="".concat(this.clsTitleC),x="".concat(this.inputNameCls," ").concat(u," ").concat(o,"no-app"),E=c.level||0,N="".concat(E*10,"px"),L=t.getName(),H=t.getIcon(),rt="".concat(n,"layer"),nt=(h?.getConfig()).icons,vt=nt,et=vt.move,G=vt.eye,W=vt.eyeOff,U=vt.chevron;return`
      <div class="`.concat(n,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(n,`layer-item-left">
          `).concat(g?'<i class="'.concat(n,`layer-vis" data-toggle-visible>
                <i class="`).concat(n,'layer-vis-on">').concat(G,`</i>
                <i class="`).concat(n,'layer-vis-off">').concat(W,`</i>
              </i>`):"",`
          <div class="`).concat(C,`">
            <div class="`).concat(w,'" style="padding-left: ').concat(N,`">
              <div class="`).concat(n,'layer-title-inn" title="').concat(L,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(U,`</i>
                  `).concat(H?'<span class="'.concat(rt,'__icon">').concat(H,"</span>"):"",`
                <span class="`).concat(x,'" data-name>').concat(L,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(n,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(m||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(yl,">").concat(et||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var t=this,e=this,n=e.model,o=e.config,s=o.onInit,u=n.components();this.listenTo(u,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(f){return t.listenTo(n,f[0],f[1])}),this.$el.data("model",n),this.$el.data("collection",u),n.viewLayer=this,s.bind(this)({component:n,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},r.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,o=t.module,s="".concat(e,"layer-hidden"),u=!o.isVisible(n),f=u?"addClass":"removeClass";this.$el[f](s),this.getVisibilityEl()[f]("".concat(e,"layer-off"))},r.prototype.updateMove=function(){var t=this,e=t.model,n=t.config,o=this.getItemContainer().find("[".concat(yl,"]"))[0];if(o){var s=e.get("draggable")&&n.sortable;o.style.display=s?"":"none"}},r.prototype.toggleVisibility=function(t){t?.stopImmediatePropagation();var e=this,n=e.module,o=e.model;n.setVisible(o,!n.isVisible(o))},r.prototype.handleEdit=function(t){t?.stopPropagation();var e=this,n=e.em,o=e.$el,s=e.clsNoEdit,u=e.clsEdit,f=this.getInputName();f[Ch]="true",f.focus(),document.execCommand("selectAll",!1),n.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(s).addClass(u)},r.prototype.handleEditKey=function(t){t.stopPropagation(),((0,Kt.v$)(t)||(0,Kt.Ci)(t))&&this.handleEditEnd(t)},r.prototype.handleEditEnd=function(t){t?.stopPropagation();var e=this,n=e.em,o=e.$el,s=e.clsNoEdit,u=e.clsEdit,f=e.model,c=this.getInputName(),h=c.textContent;c.scrollLeft=0,c[Ch]="false",f.setName(h),n.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(s).removeClass(u),this.updateName()},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,o=t.pfx,s="open",u="".concat(o,"layer-open"),f=this.getCaret();this.module.isOpen(n)?(e.addClass(s),f.addClass(u)):(e.removeClass(s),f.removeClass(u))},r.prototype.toggleOpening=function(t){var e=this,n=e.model,o=e.module;t?.stopImmediatePropagation(),n.get("components").length&&o.setOpen(n,!o.isOpen(n))},r.prototype.handleSelect=function(t){t?.stopPropagation();var e=this,n=e.module,o=e.model;n.setLayerData(o,{selected:!0},{event:t})},r.prototype.handleHover=function(t){t?.stopPropagation();var e=this,n=e.module,o=e.model;n.setLayerData(o,{hovered:!0})},r.prototype.handleHoverOut=function(t){t?.stopPropagation();var e=this,n=e.module,o=e.model;n.setLayerData(o,{hovered:!1})},r.prototype.startSort=function(t){var e,n,o;t.stopPropagation();var s=this,u=s.em,f=s.sorter,c=s.model;if(!(t.button&&t.button!==0)&&f){var h=((n=(e=c.delegate)===null||e===void 0?void 0:e.move)===null||n===void 0?void 0:n.call(e,c))||c;f.eventHandlers=kf({legacyOnStartSort:cg(u),legacyOnMoveClb:fg(u),legacyOnEndMove:dg(u,[h])},f.eventHandlers);var g=((o=h.viewLayer)===null||o===void 0?void 0:o.el)||t.target;f.startSort([{element:g}])}},r.prototype.updateStatus=function(){Ge.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},r.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,o=t.module,s=o.getComponents(e).length,u=this.getItemContainer(),f=u.find(".".concat(this.clsTitle)),c=u.find("[data-count]");f[s?"removeClass":"addClass"](n),c.html("".concat(s||"")),!s&&o.setOpen(e,!1)},r.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(t){var e,n=(0,k.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;n&&(this.stopListening(),this.model=n,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},r.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ht.Ss.prototype.remove.apply(this,t),delete this.model.viewLayer,this.__clearItems(),this},r.prototype.render=function(){var t=this,e=t.model,n=t.config,o=t.pfx,s=t.ppfx,u=t.opt,f=t.sorter;this.__clearItems();var c=u.opened,h=u.module,g=u.ItemView,m=!h.__isLayerable(e),y=this.$el.empty(),w=u.level+1;delete this.inputName,this.items=new sx({ItemView:g,collection:e.get("components"),config:n,sorter:f,opened:c,parentView:this,parent:e,level:w,module:h});var C=this.items.render().$el;return!n.showWrapper&&w===1?y.append(C):(y.html(this.template(e)),y.find(".".concat(this.clsChildren)).append(C)),!h.isVisible(e)&&(this.className+=" ".concat(o,"hide")),m&&(this.className+=" ".concat(s,"hidden")),y.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var t=this,e=t.model,n=t.config,o=t.el,s=n.onRender,u={component:e,el:o};s.bind(this)(u),this.em.trigger("layer:render",u)},r})(Ht.Ss);const gx=vx;var mx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Mf=function(){return Mf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Mf.apply(this,arguments)},Kc={mediaText:""},yx=["open","status","locked","custom-name","components","classes"].map(function(i){return"".concat(je.I.update,":").concat(i)}).join(" "),_x=function(i){return i===void 0&&(i={}),(i.display||"").trim().indexOf("none")===0},wx=(function(i){mx(r,i);function r(t){var e=i.call(this,t,"LayerManager",tx())||this;return e.events=Af,(0,k.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new ri.A(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return r.prototype.onLoad=function(){var t=this,e=this,n=e.em,o=e.config,s=e.model;s.listenTo(n,"component:selected",this.componentChanged),s.on("change:root",this.__onRootChange),s.listenTo(n,yx,this.__onComponent),this.componentChanged(),s.listenToOnce(n,"load",function(){t.setRoot(o.root),t.__appendTo()})},r.prototype.setRoot=function(t){var e=this.em.getWrapper(),n=(0,Ot.isComponent)(t)?t:e;t&&(0,k.isString)(t)&&(0,Ot.hasWin)()&&(n=e.find(t)[0]||e);var o=this.__getLayerFromComponent(n);return this.model.set("root",o),o},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(t){var e=this;return t.components().map(function(n){return e.__getLayerFromComponent(n)}).filter(function(n){return e.__isLayerable(n)})},r.prototype.setOpen=function(t,e){t.set("open",e)},r.prototype.isOpen=function(t){return!!t.get("open")},r.prototype.setVisible=function(t,e){var n="__prev-display",o=t.getStyle(Kc),s=o.display;if(e){var u=t.get(n);delete o.display,u&&(o.display=u,t.unset(n))}else s&&t.set(n,s),o.display="none";t.setStyle(o,Kc),this.updateLayer(t),this.em.trigger("component:toggled")},r.prototype.isVisible=function(t){return!_x(t.getStyle(Kc))},r.prototype.setLocked=function(t,e){t.set("locked",e)},r.prototype.isLocked=function(t){return!!t.get("locked")},r.prototype.setName=function(t,e){t.set("custom-name",e)},r.prototype.getName=function(t){return t.getName()},r.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},r.prototype.setLayerData=function(t,e,n){var o;n===void 0&&(n={});var s=this,u=s.em,f=s.config,c=e.open,h=e.selected,g=e.hovered,m=e.visible,y=e.locked,w=e.name,C=Mf({fromLayers:!0},n);if((0,Ot.isDef)(c)&&this.setOpen(t,c),(0,Ot.isDef)(h))if(h){u.setSelected(t,C);var x=f.scrollCanvas;x&&((o=t.views)===null||o===void 0||o.forEach(function(E){return E.scrollIntoView(x)}))}else u.removeSelected(t,C);(0,Ot.isDef)(g)&&f.showHover&&(g?u.setHovered(t,C):u.setHovered(null,C)),(0,Ot.isDef)(m)&&m!==this.isVisible(t)&&this.setVisible(t,m),(0,Ot.isDef)(y)&&this.setLocked(t,y),(0,Ot.isDef)(w)&&this.setName(t,w)},r.prototype.componentChanged=function(t,e){var n;if(e===void 0&&(e={}),!e.fromLayers){var o=this,s=o.em,u=o.config,f=u.scrollLayers,c=this.model.get("opened"),h=s.getSelected(),g=h?.parent();for(var m in c)c[m].set("open",!1),delete c[m];for(;g;)g.set("open",!0),c[g.cid]=g,g=g.parent();if(h&&f){var y=(n=h.viewLayer)===null||n===void 0?void 0:n.el;y?.scrollIntoView(f)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var t,e,n=this,o=n.config,s=n.model,u=gx.extend(o.extend);return this.view=new u({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:u,level:0,config:o,opened:s.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},r.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},r.prototype.__onRootChange=function(){var t,e=this,n=e.em,o=e.events,s=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(s),n.trigger(o.root,s),this.__trgCustom()},r.prototype.__getLayerFromComponent=function(t){var e,n;return((n=(e=t.delegate)===null||e===void 0?void 0:e.layer)===null||n===void 0?void 0:n.call(e,t))||t},r.prototype.__onComponent=function(t){this.updateLayer(t)},r.prototype.__isLayerable=function(t){var e=t.tagName,n=this.config.hideTextnode,o=!n||!t.isInstanceOf("textnode")&&e!=="br";return o&&t.get("layerable")},r.prototype.__trgCustom=function(t){var e=this,n=e.__ctn,o=e.em,s=e.events;this.__ctn=n||t?.container,o.trigger(s.custom,{container:this.__ctn,root:this.getRoot()})},r.prototype.updateLayer=function(t,e){var n=this,o=n.em,s=n.events;o.trigger(s.component,t,e)},r})(wn);const bx=wx;var Cx=function(){return{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""}};const Sx=Cx;var xx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),pg=(function(i){xx(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")||""},r.prototype.getFilename=function(){return this.getSrc().split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r})(Ht.Kx);const Df=pg;pg.prototype.idAttribute="src";var Ox=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),pu=function(){return pu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},pu.apply(this,arguments)},Tx=(function(i){Ox(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return pu(pu({},Df.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r})(Df);const Px=Tx;var Ex=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ax=(function(i){Ex(r,i);function r(t){var e=i.call(this,t)||this;e.options=t,e.collection=t.collection;var n=t.config||{};e.config=n,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var o=e.init&&e.init.bind(e);return o&&o(t),e}return r.prototype.__getBhv=function(){var t=this.em,e=t?.Assets;return e?.__getBehaviour()||{}},r.prototype.template=function(t,e){var n=this.pfx;return`
      <div class="`.concat(n,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(n,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(n,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,k.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},r})(Ht.Ss);const kx=Ax;var Mx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Sh=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},hg=(function(i){Mx(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.model,s=o.get("src");return gn(xh||(xh=Sh([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,s,e,n)},r.prototype.getInfo=function(){var t=this,e=t.pfx,n=t.model,o=n.get("name"),s=n.get("width"),u=n.get("height"),f=n.get("unitDim"),c=s&&u?"".concat(s,"x").concat(u).concat(f):"";return o=o||n.getFilename(),gn(Oh||(Oh=Sh([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,o,e,c)},r.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},r.prototype.onClick=function(){var t=this,e=t.model,n=t.pfx,o=this.__getBhv().select,s=this.config.onClick,u=this.collection;u.trigger("deselectAll"),this.$el.addClass(n+"highlight"),(0,k.isFunction)(o)?o(e,!1):(0,k.isFunction)(s)?s(e):this.updateTarget(u.target)},r.prototype.onDblClick=function(){var t=this,e=t.em,n=t.model,o=this.__getBhv().select,s=this.config.onDblClick,u=this.collection,f=u.target,c=u.onSelect;(0,k.isFunction)(o)?o(n,!0):(0,k.isFunction)(s)?s(n):(this.updateTarget(f),e?.Modal.close()),(0,k.isFunction)(c)&&c(n)},r.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},r})(kx);const Dx=hg;hg.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var xh,Oh,hu=function(){return hu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},hu.apply(this,arguments)},Lx={types:[],initialize:function(i,r){var t=this;r===void 0&&(r={});var e=r.em;this.em=e,this.opts=r,this.model=function(o,s){o===void 0&&(o={}),s===void 0&&(s={});var u,f,c;if(o&&o.type){var h=t.getBaseType();c=t.getType(o.type),u=c?c.model:h.model,f=c?c.view:h.view}else{var g=t.recognizeType(o);c=g.type,u=c.model,f=c.view,o=g.attributes}var m=new u(o,hu(hu({},s),{em:e}));return m.typeView=f,t.model.prototype=u.prototype,m};var n=this.init&&this.init.bind(this);n&&n()},recognizeType:function(i){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t],n=e.isType(i);if(n=typeof n=="boolean"&&n?{type:e.id}:n,n)return{type:e,attributes:n}}return{type:this.getBaseType(),attributes:i}},getBaseType:function(){var i=this.getTypes();return i[i.length-1]},getTypes:function(){return this.types},getType:function(i){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t];if(e.id===i)return e}},addType:function(i,r){var t=this.getType(i),e=this.getBaseType(),n=t?t.model:e.model,o=t?t.view:e.view,s=r.model,u=r.view,f=r.isType;s=s instanceof Ht.Kx||(0,k.isFunction)(s)?s:n.extend(s||{}),u=u instanceof Ht.Ss||(0,k.isFunction)(u)?u:o.extend(u||{}),this.extendViewApi&&!r.model&&!r.view&&(u=u.extend(r)),t?(t.model=s,t.view=u,t.isType=f||t.isType):(r.id=i,r.model=s,r.view=u,r.isType=f||function(c){if(c&&c.type==i)return!0},this.getTypes().unshift(r))}};const vg=Lx;var Ix=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),jx=Ht.pM.extend(vg),gg=(function(i){Ix(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(jx);const Gc=gg;gg.prototype.types=[{id:"image",model:Px,view:Dx,isType:function(i){return typeof i=="string"?{type:"image",src:i}:i}}];var Lf;(function(i){i.add="asset:add",i.remove="asset:remove",i.removeBefore="asset:remove:before",i.update="asset:update",i.open="asset:open",i.close="asset:close",i.uploadStart="asset:upload:start",i.uploadEnd="asset:upload:end",i.uploadError="asset:upload:error",i.uploadResponse="asset:upload:response",i.custom="asset:custom",i.all="asset"})(Lf||(Lf={}));const Th=Lf;var Rx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),mg=(function(i){Rx(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var n=e.collection;return e.listenTo(n,"reset",e.renderAssets),e.listenTo(n,"add",e.addToAsset),e.listenTo(n,"remove",e.removedAsset),e.listenTo(n,"deselectAll",e.deselectAll),e}return r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,o=t.em,s="";return this.config.showUrlInput&&(s=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(n,"field ").concat(e,`add-field">
              <input placeholder="`).concat(o?.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(n,'btn-prim">').concat(o?.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(s,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),o=this.config.handleAdd;if(n){e.value="";var s=this.getAssetsEl();s&&(s.scrollTop=0),o?o.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},r.prototype.addAsset=function(t,e){e===void 0&&(e=null);var n=e,o=this.collection,s=this.config,u=new t.typeView({model:t,collection:o,config:s}).render().el;if(n)n.appendChild(u);else{var f=this.getAssetsEl();f&&f.insertBefore(u,f.firstChild)}return u},r.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},r.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},r.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return t.addAsset(o,e)}),n.append(e)},r.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r})(Ht.Ss);const Vx=mg;mg.prototype.events={submit:"handleSubmit"};var Fx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Nx=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},Hx=(function(i){Fx(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;e.options=t;var n=t.config||{};e.module=t.module,e.config=n,e.em=e.config.em,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=n.disableUpload!==void 0?n.disableUpload:!n.upload&&!n.embedAsBase64,e.multiUpload=n.multiUpload!==void 0?n.multiUpload:!0;var o=n.uploadFile;return o?e.uploadFile=o.bind(e):!n.upload&&n.embedAsBase64&&(e.uploadFile=r.embedAsBase64),e.delegateEvents(),e}return r.prototype.template=function(t){var e=t.pfx,n=t.title,o=t.uploadId,s=t.disabled,u=t.multiUpload;return gn(Ph||(Ph=Nx([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,n,o,s?"disabled":"",u?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var t=this.module;t?.__propEv(t.events.uploadStart)},r.prototype.onUploadEnd=function(t){var e=this,n=e.$el,o=e.module;o?.__propEv(o.events.uploadEnd,t);var s=n.find("input");s&&s.val("")},r.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e?.__propEv(e.events.uploadError,t)},r.prototype.onUploadResponse=function(t,e){var n=this,o=n.module,s=n.config,u=n.target,f;try{f=typeof t=="string"?JSON.parse(t):t}catch{f=t}o?.__propEv(o.events.uploadResponse,f),s.autoAdd&&u&&u.add(f.data,{at:0}),this.onUploadEnd(t),e?.(f)},r.prototype.uploadFile=function(t,e,n){var o=this,s,u=t.dataTransfer?t.dataTransfer.files:(s=t.target)===null||s===void 0?void 0:s.files,f=this.config,c=f.beforeUpload,h=c&&c(u);if(h!==!1){var g=new FormData,m=f.params,y=f.customFetch,w=f.fetchOptions;for(var C in m)g.append(C,m[C]);if(this.multiUpload)for(var x=0;x<u.length;x++)g.append("".concat(f.uploadName).concat(f.multiUploadSuffix),u[x]);else u.length&&g.append(f.uploadName,u[0]);var E=f.upload,N=f.headers,L="X-Requested-With";if(typeof N[L]>"u"&&(N[L]="XMLHttpRequest"),E){this.onUploadStart();var H={method:"post",credentials:f.credentials||"include",headers:N,body:g},rt=w?.(H)||H,nt=y?y(E,rt):eg(E,rt).then(function(vt){return(vt.status/200|0)==1?vt.text():vt.text().then(function(et){return Promise.reject(et)})});return nt.then(function(vt){return o.onUploadResponse(vt,e)}).catch(function(vt){return o.onUploadError(vt)})}}},r.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(n){e.className="",n.preventDefault(),t.uploadFile(n)})}},r.prototype.initDropzone=function(t){var e=this,n=0,o=this.config,s=t.model,u=t.el,f=s.Editor,c=s.Canvas.getBody(),h=this.ppfx,g="".concat(h,"dropzone-active"),m="".concat(h,"dropzone"),y=function(){u.className=u.className.replace(g,"").trim(),n=0},w=function(){return n||(u.className+=" ".concat(g),n=1),!1},C=function(){return y(),!1},x=function(E){if(y(),E.preventDefault(),E.stopPropagation(),e.uploadFile(E),o.openAssetsOnDrop&&f){var N=f.getSelected();f.runCommand("open-assets",{target:N,onSelect:function(){f.Modal.close(),f.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(m,'">').concat(o.dropzoneContent,"</div>")),y(),"draggable"in u&&[u,c].forEach(function(E){E.ondragover=w,E.ondragleave=C,E.ondrop=x})},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr("class",n+"file-uploader"),this},r.embedAsBase64=function(t,e){var n=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,s={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var u=[],f=/^(.+)\/(.+)$/,c=function(y){var w=new Promise(function(C,x){var E=new FileReader;E.addEventListener("load",function(N){var L,H=y.name,rt=f.exec(y.type);if(rt?L=rt[1]:L=y.type,L==="image"){var nt={src:E.result,name:H,type:L,height:0,width:0},vt=new Image;vt.addEventListener("error",function(et){x(et)}),vt.addEventListener("load",function(){nt.height=vt.height,nt.width=vt.width,C(nt)}),vt.src=nt.src}else C(L?{src:E.result,name:H,type:L}:E.result)}),E.addEventListener("error",function(N){x(N)}),E.addEventListener("abort",function(N){x("Aborted")}),E.readAsDataURL(y)});u.push(w)},h=0,g=o;h<g.length;h++){var m=g[h];c(m)}return Promise.all(u).then(function(y){s.data=y,n.onUploadResponse(s,e)},function(y){n.onUploadError(y)})},r})(Ht.Ss);const Ux=Hx;var Ph,Bx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),da=function(){return da=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},da.apply(this,arguments)},Eh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},ss="open-assets",Wx=(function(i){Bx(r,i);function r(t){var e=i.call(this,t,"AssetManager",new Gc([],t),Th,Sx())||this;e.storageKey="assets",e.Asset=Df,e.Assets=Gc,e.events=Th;var n=e,o=n.all,s=n.config;e.assetsVis=new Gc([]);var u=s.pStylePrefix;return u&&(s.stylePrefix="".concat(u).concat(s.stylePrefix)),o.on("add",function(f){return e.getAllVisible().add(f)}),o.on("remove",function(f){return e.getAllVisible().remove(f)}),e.__onAllEvent=(0,k.debounce)(function(){return e.__trgCustom()},0),e}return r.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(ss,da({types:["image"],select:function(){}},t))},r.prototype.close=function(){var t=this.em.Commands;t.stop(ss)},r.prototype.isOpen=function(){var t=this.em.Commands;return!!t?.isActive(ss)},r.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},r.prototype.get=function(t){return this.all.where({src:t})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t)},r.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},r.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},r.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new Vx(da({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(t,e){this.getAll().addType(t,e)},r.prototype.getType=function(t){return this.getAll().getType(t)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new Ux(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,n=e.em,o=e.events;n.Commands.__onRun(ss,function(){return t.__propEv(o.open)}),n.Commands.__onStop(ss,function(){return t.__propEv(o.close)})},r.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},r.prototype.setTarget=function(t){this.assetsVis.target=t},r.prototype.onSelect=function(t){this.assetsVis.onSelect=t},r.prototype.onClick=function(t){this.config.onClick=t},r.prototype.onDblClick=function(t){this.config.onDblClick=t},r.prototype.__propEv=function(t){for(var e,n,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];(e=this.em).trigger.apply(e,Eh([t],o,!1)),(n=this.getAll()).trigger.apply(n,Eh([t],o,!1))},r.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(n,o){return t.remove(n,o)},select:function(n,o){var s=t.add(n);(0,k.isFunction)(e.select)&&e.select(s,o)},options:e.options||{}}},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=da(da({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(t){return this._bhv||{}},r.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},r})(Eo);const zx=Wx;var Kx=function(){return{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]}};const Gx=Kx;var $x=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),qx=(function(i){$x(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(n){return t.checkUnit(n)})},r.prototype.checkUnit=function(t){var e=this.get(t)||"",n=(parseFloat(e)||0).toString()===e.toString();n&&this.set(t,"".concat(e,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r})(Ht.Kx);const yg=qx;var Yx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),_g=(function(i){Yx(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r})(Ht.pM);const Ah=_g;_g.prototype.model=yg;var Xx=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Jx=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},Zx=(function(i){Xx(r,i);function r(t){var e=i.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return r.prototype.template=function(t){var e=t.ppfx,n=t.label;return gn(kh||(kh=Jx([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,n,e,e,e,e,e,e,e)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},r.prototype.updateSelect=function(){var t=this,e=t.em,n=t.devicesEl;if(e&&e.getDeviceModel&&n){var o=e.getDeviceModel();n.val(o?o.get("id"):"")}},r.prototype.getOptions=function(){var t=this,e=t.collection,n=t.em,o="";return e.forEach(function(s){var u=s.attributes,f=u.name,c=u.id,h=n&&n.t&&n.t("deviceManager.devices.".concat(c))||f;o+='<option value="'.concat(c||f,'">').concat(h,"</option>")}),o},r.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,o=t.$el,s=t.el,u=e&&e.t&&e.t("deviceManager.device");return o.html(this.template({ppfx:n,label:u})),this.devicesEl=o.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),s.className="".concat(n,"devices-c"),this},r})(Ht.Ss);const Qx=Zx;var kh,tO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),_s=function(){return _s=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},_s.apply(this,arguments)},eO=(function(i){tO(r,i);function r(t){var e,n=i.call(this,t,"DeviceManager",new Ah,cv,Gx())||this;return n.Device=yg,n.Devices=Ah,n.storageKey="",n.devices=n.all,(e=n.config.devices)===null||e===void 0||e.forEach(function(o){return n.add(o,{silent:!0})}),n.select(n.config.default||n.devices.at(0)),t.on("change:device",n._onSelect,n),n}return r.prototype._onSelect=function(t,e,n){var o=this,s=o.em,u=o.events,f=t.previous("device"),c=this.get(e),h=u.select;s.trigger(h,c,this.get(f)),this.__catchAllEvent(h,c,n)},r.prototype.add=function(t,e){e===void 0&&(e={});var n,o=e;if((0,k.isString)(t)){var s=e;o=arguments[2]||{},n=_s(_s({},o),{id:t,name:o.name||t,width:s})}else n=t;return n.id||(n.id=n.name||this._createId()),this.devices.add(n,o)},r.prototype.get=function(t){var e=this.getAll().filter(function(n){return n.get("name")===t})[0];return e||this.devices.get(t)||null},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,k.isString)(t)?this.get(t):t;return n&&this.em.set("device",n.get("id"),e),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new Qx({collection:this.devices,config:_s({em:e},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r})(Eo);const rO=eO;var nO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),oO=(function(i){nO(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this,t,e)||this,o=e.em,s={};n.em=o,t.frames||(s.component=t.component,s.styles=t.styles,["component","styles"].map(function(c){return n.unset(c)}));var u=t.frames||[s],f=new dv(o.Canvas,u);return f.page=n,n.set("frames",f),!n.getId()&&n.set("id",o?.Pages._createId()),o?.UndoManager.add(f),n}return r.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(t){return this.set({name:t})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var t=this.getMainFrame();return t?.getComponent()},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=Ht.Kx.prototype.toJSON.call(this,t),n=(0,k.result)(this,"defaults");return(0,k.forEach)(e,function(o,s){s.indexOf("_")===0&&delete e[s]}),(0,k.forEach)(n,function(o,s){e[s]===o&&delete e[s]}),e},r})(Ht.Kx);const If=oO;var iO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),vu=function(){return vu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},vu.apply(this,arguments)},aO=(function(i){iO(r,i);function r(t,e){var n=i.call(this,t)||this;return n.on("reset",n.onReset),n.on("remove",n.onRemove),n.model=function(o,s){return s===void 0&&(s={}),new If(o,vu(vu({},s),{em:e}))},n}return r.prototype.onReset=function(t,e){var n=this,o;(o=e?.previousModels)===null||o===void 0||o.map(function(s){return n.onRemove(s,n,e)})},r.prototype.onRemove=function(t,e,n){n===void 0&&(n={}),!(n.fromUndo||n.temporary)&&t?.onRemove()},r})(Ht.pM);const sO=aO;var lO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),pa=function(){return pa=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},pa.apply(this,arguments)},uO=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},cO=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Mh="change:selected",Dh="main",fO=(function(i){lO(r,i);function r(t){var e=i.call(this,t,"PageManager",new sO([],t),cf)||this;e.events=cf,e.storageKey="pages",(0,k.bindAll)(e,"_onPageChange");var n=new ri.A(e,{_undo:!0});return e.model=n,e.pages.on("reset",e.__onReset,e),e.pages.on("all",e.__onChange,e),n.on(Mh,e._onPageChange),e}return Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return cO([],this.all.models,!0)},r.prototype.__onChange=function(t,e,n,o){var s=this,u=s.em,f=s.events,c=o||n;u.trigger(f.all,{event:t,page:e,options:c})},r.prototype.__onReset=function(){var t=this.pages.at(0);t&&this.select(t)},r.prototype.onLoad=function(){var t,e=this,n=e.pages,o=e.config,s=e.em,u={silent:!0},f=((t=o.pages)===null||t===void 0?void 0:t.map(function(h){return new If(h,{em:s,config:o})}))||[];n.add(f,u);var c=n.length?this._initPage():this.add({type:Dh},u);c&&this.select(c,u)},r.prototype._onPageChange=function(t,e,n){var o=this,s=o.em,u=o.events,f=s.Layers,c=e.getMainComponent();f&&c&&f.setRoot(c),s.trigger(u.select,e,t.previous("selected")),this.__onChange(Mh,e,n)},r.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,o=t.pages,s=e.UndoManager;s.add(n),s.add(o),o.on("add remove reset change",function(u,f,c){var h=c||f;e.changesUp(c||f,{page:u,options:h})})},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var o=this,s=o.em,u=o.events;t.id=t.id||this._createId();var f=function(){var c=n.pages.add(new If(t,{em:n.em,config:n.config}),e);return e.select&&n.select(c),c};return!e.silent&&s.trigger(u.addBefore,t,f,e),e.abort?void 0:f()},r.prototype.remove=function(t,e){var n=this;e===void 0&&(e={});var o=this,s=o.em,u=o.events,f=(0,k.isString)(t)?this.get(t):t,c=function(){return f&&n.pages.remove(f,e),f};return!e.silent&&s.trigger(u.removeBefore,f,c,e),!e.abort&&c()},r.prototype.move=function(t,e){e===void 0&&(e={});var n=this.pages,o=(0,k.isString)(t)?this.get(t):t,s=e.at,u=s===void 0?0:s,f=uO(e,["at"]);if(o){var c=n.indexOf(o),h=c===u;if(!(u<0||u>=n.length||h))return this.remove(o,pa(pa({},f),{temporary:!0})),n.add(o,pa(pa({},f),{at:u})),o}},r.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},r.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===Dh})[0]||t.at(0)},r.prototype.getAllWrappers=function(){var t=this.getAll();return(0,k.unique)((0,k.flatten)(t.map(function(e){return e.getAllFrames().map(function(n){return n.getComponent()})})))},r.prototype.select=function(t,e){e===void 0&&(e={});var n=this,o=n.em,s=n.model,u=n.events,f=(0,k.isString)(t)?this.get(t):t;return f&&(o.trigger(u.selectBefore,f,e),s.set("selected",f,e)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){var e=this,n=this.loadProjectData(t,{all:this.pages,reset:!0,onResult:function(o,s){o.forEach(function(u){return e.add(u,s)}),e.__onReset()}});return this.pages.forEach(function(o){return o.getFrames().initRefs()}),n},r.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},r.prototype._createId=function(){var t=this.getAll(),e=t.length+16,n=this.getAllMap(),o;do o=(0,Ot.createId)(e);while(n[o]);return o},r})(Eo);const dO=fO;var $c={placeholder:"eg. Text here"};const pO={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:$c,alt:$c,title:$c,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var hO=function(){return{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:pO},messagesAdd:void 0}};const vO=hO;var jf;(function(i){i.add="i18n:add",i.update="i18n:update",i.locale="i18n:locale"})(jf||(jf={}));const gO=jf;var mO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),yO=(function(i){mO(r,i);function r(t){var e=i.call(this,t,"I18n",vO())||this;e.events=gO;var n=e.config.messagesAdd;return n&&e.addMessages(n),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return r.prototype.setLocale=function(t){var e=this,n=e.em,o=e.config,s=e.events;return n.trigger(s.locale,{value:t,valuePrev:o.locale}),o.locale=t,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(t,e){e===void 0&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},r.prototype.setMessages=function(t){var e=this,n=e.em,o=e.config,s=e.events;return o.messages=t,n.trigger(s.update,t),this},r.prototype.addMessages=function(t){var e=this,n=e.em,o=e.events,s=e.config,u=s.messages;return n.trigger(o.add,t),this.setMessages((0,Ot.deepMerge)(u,t)),this},r.prototype.t=function(t,e){e===void 0&&(e={});var n=this.config,o=e.params||{},s=e.l||this.getLocale(),u=e.lFlb||n.localeFallback,f=this._getMsg(t,s,e);return f||(f=this._getMsg(t,u,e)),!f&&this._debug("'".concat(t,"' i18n key not found in '").concat(s,"' lang"),e),f=f&&(0,k.isString)(f)?this._addParams(f,o):f,f},r.prototype._localLang=function(){var t=(0,Ot.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},r.prototype._addParams=function(t,e){var n=new RegExp("{([\\w\\d-]*)}","g");return t.replace(n,function(o,s){return e[s]||""}).trim()},r.prototype._getMsg=function(t,e,n){n===void 0&&(n={});var o=this.getMessages(e,n);if(o){var s=o[t];return!s&&t.indexOf(".")>0&&(s=t.split(".").reduce(function(u,f){if(!(0,k.isUndefined)(u))return u[f]},o)),s}},r.prototype._debug=function(t,e){e===void 0&&(e={});var n=this,o=n.em,s=n.config;(e.debug||s.debug)&&o&&o.logWarning(t)},r.prototype.destroy=function(){},r})(wn);const _O=yO;var wi=function(){return wi=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},wi.apply(this,arguments)},wO=function(i,r){r===void 0&&(r={});var t=r.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+i,e.setAttribute("data-"+t+"handler",i),e},bO=function(i,r){var t=window,e=i.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},CO=(function(){function i(r){r===void 0&&(r={}),this.moved=!1,this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=wi({},this.defOpts),this.setOptions(r),(0,k.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return i.prototype.getConfig=function(){return this.opts},i.prototype.setOptions=function(r,t){r===void 0&&(r={}),this.opts=wi(wi({},t?this.defOpts:this.opts),r),this.setup()},i.prototype.setup=function(){var r=this.opts,t=r.prefix||"",e=r.appendTo||document.body,n=this.container;for(n||(n=document.createElement("div"),n.className="".concat(t,"resizer-c"),e.appendChild(n),this.container=n);n.firstChild;)n.removeChild(n.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(f){return o[f]=r[f]?wO(f,r):null});for(var s in o){var u=o[s];u&&n.appendChild(u)}this.handlers=o,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},i.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,k.each)(t,function(e){return e.style.pointerEvents=r?"none":""})}},i.prototype.isHandler=function(r){var t=this.handlers;for(var e in t)if(t[e]===r)return!0;return!1},i.prototype.getFocusedEl=function(){return this.el},i.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},i.prototype.getDocumentEl=function(){return this.opts.docs||[this.el.ownerDocument,document]},i.prototype.getElementPos=function(r,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(r,t):bO(r)},i.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,Kt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},i.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Kt.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},i.prototype.start=function(r){var t,e=this,n=e.el,o=e.opts,s=o===void 0?{}:o;if(this.moved=!1,!(r.button!==0||!n)){r.preventDefault(),r.stopPropagation(),(t=this.selectedHandler)===null||t===void 0||t.setPointerCapture(r.pointerId);var u=this.getParentEl(),f=this,c=s,h=this.mousePosFetcher,g="data-"+c.prefix+"handler",m=this.getElementPos(n,{avoidFrameZoom:!0,avoidFrameOffset:!0}),y=this.getElementPos(u),w=r.target;this.handlerAttr=w.getAttribute(g),this.clickedHandler=w,this.startDim={t:m.top,l:m.left,w:m.width,h:m.height},this.rectDim={t:m.top,l:m.left,w:m.width,h:m.height},this.startPos=h?h(r):{x:r.clientX,y:r.clientY},this.parentDim={t:y.top,l:y.left,w:y.width,h:y.height};var C=this.getDocumentEl();this.docs=C,(0,Kt.on)(C,"pointermove",this.move),(0,Kt.on)(C,"keydown",this.handleKeyDown),(0,Kt.on)(C,"pointerup",this.stop),(0,k.isFunction)(this.onStart)&&this.onStart(r,{docs:C,config:c,el:n,resizer:f}),this.toggleFrames(!0),!c.updateOnMove&&this.move(r)}},i.prototype.move=function(r){var t,e;this.moved=!0;var n=this.el,o=this.opts,s=this.docs||this.getDocumentEl(),u=((t=this.mousePosFetcher)===null||t===void 0?void 0:t.call(this,r))||{x:r.clientX,y:r.clientY};this.currentPos=u,this.delta={x:u.x-this.startPos.x,y:u.y-this.startPos.y},this.keys={shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey},this.rectDim=this.calc(this),this.updateRect(!1,r),(e=this.onMove)===null||e===void 0||e.call(this,r,{docs:s,config:o,el:n,resizer:this})},i.prototype.stop=function(r){var t,e,n=this.el,o=this.opts,s=this.docs||this.getDocumentEl();(0,Kt.AU)(s,"pointermove",this.move),(0,Kt.AU)(s,"keydown",this.handleKeyDown),(0,Kt.AU)(s,"pointerup",this.stop),(this.moved||!o.updateOnMove)&&this.updateRect(!0,r),r.pointerId&&((t=this.selectedHandler)===null||t===void 0||t.releasePointerCapture(r.pointerId)),this.toggleFrames(),(e=this.onEnd)===null||e===void 0||e.call(this,r,{docs:s,config:o,el:n,resizer:this}),this.moved=!1,delete this.docs},i.prototype.updateRect=function(r,t){var e=this.el,n=this,o=this.opts,s=this.rectDim,u=this.updateTarget,f=this.getSelectedHandler(),c=o.unitHeight,h=o.unitWidth,g=o.keyWidth,m=o.keyHeight;if((0,k.isFunction)(u))u(e,s,{store:r,selectedHandler:f,resizer:n,config:o,event:t});else{var y=e.style;y[g]=s.w+h,y[m]=s.h+c}this.updateContainer()},i.prototype.updateContainer=function(r){var t;r===void 0&&(r={});var e=this,n=e.opts,o=e.container,s=e.el,u=o.style;!n.avoidContainerUpdate&&s&&r.forceShow&&(u.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:o,resizer:this,opts:wi(wi({},n),r)})},i.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var t in r)if(r[t]===this.selectedHandler)return t}},i.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},i.prototype.handleMouseDown=function(r){var t=r.target;this.isHandler(t)?(this.selectedHandler=t,this.start(r)):t!==this.el&&(delete this.selectedHandler,this.blur())},i.prototype.calc=function(r){var t,e=this.opts||{},n=e.step,o=this.startDim,s=e.minDim,u=e.maxDim,f=r.delta.x,c=r.delta.y,h=this.parentDim.w,g=this.parentDim.h,m=e.unitWidth,y=e.unitHeight,w=e.skipUnitAdjustments,C=this.getParentRect(),x=m==="%"&&!w,E=y==="%"&&!w,N=x?o.w/100*h:o.w,L=E?o.h/100*g:o.h,H={t:o.t-C.top,l:o.l-C.left,w:N,h:L};if(r){var rt=r.handlerAttr;~rt.indexOf("r")&&(t=x?(0,Ot.normalizeFloat)((N+f*n)/h*100,.01):(0,Ot.normalizeFloat)(N+f*n,n),t=Math.max(s,t),u&&(t=Math.min(u,t)),H.w=t),~rt.indexOf("b")&&(t=E?(0,Ot.normalizeFloat)((L+c*n)/g*100,.01):(0,Ot.normalizeFloat)(L+c*n,n),t=Math.max(s,t),u&&(t=Math.min(u,t)),H.h=t),~rt.indexOf("l")&&(t=x?(0,Ot.normalizeFloat)((N-f*n)/h*100,.01):(0,Ot.normalizeFloat)(N-f*n,n),t=Math.max(s,t),u&&(t=Math.min(u,t)),H.w=t),~rt.indexOf("t")&&(t=E?(0,Ot.normalizeFloat)((L-c*n)/g*100,.01):(0,Ot.normalizeFloat)(L-c*n,n),t=Math.max(s,t),u&&(t=Math.min(u,t)),H.h=t);var nt=e.ratioDefault?!r.keys.shift:r.keys.shift;if(rt.indexOf("c")<0&&nt){var vt=o.w/o.h;H.w/H.h>vt?H.h=Math.round(H.w/vt):H.w=Math.round(H.h*vt)}~rt.indexOf("l")&&(H.l+=o.w-H.w),~rt.indexOf("t")&&(H.t+=o.h-H.h);for(var et in H){var G=et;H[G]=parseInt("".concat(H[G]),10)}return H}},i.prototype.getParentRect=function(){var r={left:0,top:0,width:0,height:0},t=this.el;if(!t)return r;var e=t.offsetParent;return e&&e.tagName!=="BODY"&&(r=this.getElementPos(e)),r},i})();const SO=CO;var Ln=function(){return Ln=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ln.apply(this,arguments)};function xO(i,r,t){for(var e={index:0,placement:"before"},n=0,o=0,s=0,u=0,f=0,c=0,h=0,g,m=0,y=i.length;m<y;m++){g=i[m];var w=g.top,C=g.left,x=g.height,E=g.width;if(s=C+E,h=w+x,f=C+E/2,c=w+x/2,!(o&&C>o||u&&c>=u||n&&s<n))if(e.index=m,!g.dir)t<h&&(u=h),r<f?(o=f,e.placement="before"):(n=f,e.placement="after");else if(t<c){e.placement="before";break}else e.placement="after"}return e}function Lh(i){var r=i.getBoundingClientRect();return{top:r.top+document.body.scrollTop,left:r.left+document.body.scrollLeft}}function nd(i,r){return Ot.matches.call(i,r)}function OO(i,r){var t=Rf(i),e=Rf(r),n=e.filter(function(f){return t.includes(f)}),o=n[0];if(!o)return i.model.index()-r.model.index();var s=e[e.indexOf(o)-1],u=t[t.indexOf(o)-1];return u.index()-s.index()}function Rf(i){return i?[i].concat(Rf(i.parent())):[]}function TO(i,r){if(i)for(var t=i.parentNode;t&&t.nodeType===1;){if(nd(t,r))return t;t=t.parentNode}}function PO(i,r){if((0,Kt.ir)(i))return!1;var t=i.style||{},e=(0,Tr.default)(i),n=(0,Tr.default)(r);if(t.overflow&&t.overflow!=="visible")return!1;var o=e.css("float");return o&&o!=="none"||n.css("display")==="flex"&&n.css("flex-direction")!=="column"||!EO(t.position)?!1:AO(i)||kO(e)}function EO(i){switch(i){case"static":case"relative":case"":return!0;default:return!1}}function AO(i){var r=["TR","TBODY","THEAD","TFOOT"];return r.includes(i.tagName)}function kO(i){var r=i.css("display"),t=["block","list-item","table","flex","grid"];return t.includes(r)}function MO(i){var r={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:Pi.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},t=Ln(Ln(Ln({},r),i),{containerContext:Ln(Ln({},r.containerContext),i.containerContext),positionOptions:Ln(Ln({},r.positionOptions),i.positionOptions),dragBehavior:Ln(Ln({},r.dragBehavior),i.dragBehavior),eventHandlers:Ln(Ln({},r.eventHandlers),i.eventHandlers)});return t}var wg=(function(){function i(r){this.timeout=null,this.threshold=r}return i.prototype.updateArgs=function(r){this.lastArgs=r},i.prototype.execute=function(r){var t=this;this.timeout||(this.timeout=setTimeout(function(){t.lastArgs&&r(t.lastArgs),t.timeout=null},this.threshold))},i.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},i})(),Vf=function(){return Vf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Vf.apply(this,arguments)},DO=(function(){function i(r){this.top=r.top,this.left=r.left,this.height=r.height,this.width=r.width,this.offsets=r.offsets,this.dir=r.dir}return i.prototype.calculateDimensionDifference=function(r){var t=r.top-this.top,e=r.left-this.left;return{topDifference:t,leftDifference:e}},i.prototype.adjustDimensions=function(r){return this.top+=r.topDifference,this.left+=r.leftDifference,this},i.prototype.determinePlacement=function(r,t){var e=this.left+this.width/2,n=this.top+this.height/2;return this.dir?t<n?"before":"after":r<e?"before":"after"},i.prototype.equals=function(r){return r?this.top===r.top&&this.left===r.left&&this.height===r.height&&this.width===r.width&&this.dir===r.dir&&JSON.stringify(this.offsets)===JSON.stringify(r.offsets):!1},i.prototype.clone=function(){return new i({top:this.top,left:this.left,height:this.height,width:this.width,offsets:Vf({},this.offsets),dir:this.dir})},i.prototype.getDropArea=function(r){var t=this.clone(),e=this.adjustDropDimension(this.width,this.left,r),n=e.newSize,o=e.newPosition;t.width=n,t.left=o;var s=this.adjustDropDimension(this.height,this.top,r),u=s.newSize,f=s.newPosition;return t.height=u,t.top=f,t},i.prototype.adjustDropDimension=function(r,t,e){var n=e.ratio,o=e.minUndroppableDimension,s=e.maxUndroppableDimension,u=r*(1-n)/2;u=Math.max(u,o),u=Math.min(u,s);var f=r-u*2,c=t+u;return{newSize:f,newPosition:c}},i.prototype.isWithinBounds=function(r,t){return r>=this.left&&r<=this.left+this.width&&t>=this.top&&t<=this.top+this.height},i})();const LO=DO;var IO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),jO=(function(i){IO(r,i);function r(t){var e=i.call(this)||this;return e.sourceNodes=[],e.containerOffset={top:0,left:0},e.moveThreshold=20,e.treeClass=t.treeClass,e.em=t.em,e.containerContext=t.containerContext,e.positionOptions=t.positionOptions,e.dragDirection=t.dragDirection,e.eventHandlers=t.eventHandlers,(0,k.bindAll)(e,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),e.restLastMoveData(),e.rateLimiter=new wg(e.moveThreshold),e}return r.prototype.startSort=function(t){this.sourceNodes=t,this.bindDragEventHandlers()},r.prototype.bindDragEventHandlers=function(){(0,Kt.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,Kt.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,Kt.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},r.prototype.recalculateTargetOnScroll=function(){var t=this.lastMoveData.mouseEvent;t&&this.onMove(t)},r.prototype.onMove=function(t){this.rateLimiter.updateArgs(t),this.rateLimiter.execute(this.handleMove.bind(this))},r.prototype.handleMove=function(t){var e,n,o,s,u,f,c;this.adjustForScroll();var h=this.lastMoveData.targetNode;(n=(e=this.eventHandlers).onMouseMove)===null||n===void 0||n.call(e,t),this.cacheContainerPosition();var g=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),m=g.mouseXRelative,y=g.mouseYRelative,w=this.getMouseTargetElement(t),C=this.getFirstElementWithAModel(w),x=C?(o=(0,Tr.default)(C))===null||o===void 0?void 0:o.data("model"):void 0,E=x?this.getOrCreateHoveredNode(x):void 0,N=E?this.getIndexInParent(E,E.nodeDimensions,m,y):0,L=E?this.getValidParent(E,0,m,y):void 0,H=!L?.equals(h);if(H&&((u=(s=this.eventHandlers).onTargetChange)===null||u===void 0||u.call(s,h,L)),!L||!E){this.triggerLegacyOnMoveCallback(t,0),this.triggerMoveEvent(m,y),this.restLastMoveData();return}var rt=this.getDropPosition(L,m,y),nt=rt.index,vt=rt.placement,et=rt.placeholderDimensions,G=!et.equals(this.lastMoveData.placeholderDimensions)||vt!==this.lastMoveData.placement;G&&((c=(f=this.eventHandlers).onPlaceholderPositionChange)===null||c===void 0||c.call(f,et,vt)),this.lastMoveData={targetNode:L,hoveredNode:E,mouseEvent:t,index:nt,hoveredIndex:N,placement:vt,placeholderDimensions:et},this.triggerMoveEvent(m,y),this.triggerLegacyOnMoveCallback(t,nt)},r.prototype.adjustForScroll=function(){var t,e,n=this.lastMoveData.targetNode;if(n?.element){var o=this.getDim(n?.element),s=(t=n.nodeDimensions)===null||t===void 0?void 0:t.calculateDimensionDifference(o);s&&n.adjustDimensions(s)}var u=this.lastMoveData.hoveredNode;if(u?.element){var o=this.getDim(u?.element),s=(e=u.nodeDimensions)===null||e===void 0?void 0:e.calculateDimensionDifference(o);s&&u.adjustDimensions(s)}},r.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},r.prototype.triggerLegacyOnMoveCallback=function(t,e){var n,o,s,u,f=(n=this.sourceNodes[0])===null||n===void 0?void 0:n.model;(s=(o=this.eventHandlers).legacyOnMoveClb)===null||s===void 0||s.call(o,{event:t,target:f,parent:(u=this.lastMoveData.targetNode)===null||u===void 0?void 0:u.model,index:e})},r.prototype.triggerMoveEvent=function(t,e){var n,o=this.lastMoveData,s=o.targetNode,u=o.placement,f=o.index,c=f?f+(u==="after"?-1:0):0;this.em.trigger("sorter:drag",{target:s?.element||null,targetModel:(n=this.lastMoveData.targetNode)===null||n===void 0?void 0:n.model,sourceModel:this.sourceNodes[0].model,dims:s?.childrenDimensions||[],pos:{index:c,indexEl:c,placement:u},x:t,y:e})},r.prototype.getDropPosition=function(t,e,n){var o,s=t.nodeDimensions,u=t.childrenDimensions,f=t.getChildren(),c=f&&f.length>0;s=s||this.getDim(t.element),t.nodeDimensions=s,u=u||this.getChildrenDim(t),t.childrenDimensions=u;var h=s.clone(),g=0,m="inside";return c&&(o=xO(u,e,n),g=o.index,m=o.placement,h=u[g].clone(),g=g+(m=="after"?1:0)),{index:g,placement:m,placeholderDimensions:h}},r.prototype.getOrCreateHoveredNode=function(t){var e=this.lastMoveData.hoveredNode,n=new this.treeClass(t),o=n.equals(e),s=o?e:n;return s.nodeDimensions=o?e.nodeDimensions:this.getDim(n.element),s},r.prototype.getMouseTargetElement=function(t){var e=this.containerContext.customTarget,n=this.containerContext.document.elementFromPoint(t.clientX,t.clientY),o=e?e({event:t}):n;return o},r.prototype.onDragStart=function(t){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(t)},r.prototype.endDrag=function(){this.dropDragged()},r.prototype.cancelDrag=function(){var t,e,n=this.lastMoveData.targetNode;(e=(t=this.eventHandlers).onTargetChange)===null||e===void 0||e.call(t,n,void 0),this.finalizeMove()},r.prototype.finalizeMove=function(){var t,e,n,o;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),(e=(t=this.eventHandlers).onEnd)===null||e===void 0||e.call(t),(o=(n=this.eventHandlers).legacyOnEnd)===null||o===void 0||o.call(n),this.restLastMoveData(),this.rateLimiter.clearTimeout()},r.prototype.dropDragged=function(){var t,e,n=this.lastMoveData,o=n.targetNode,s=n.index;(e=(t=this.eventHandlers).onDrop)===null||e===void 0||e.call(t,o,this.sourceNodes,s),this.finalizeMove()},r.prototype.triggerOnDragEndEvent=function(){var t=this.lastMoveData.targetNode,e=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:t?t.getChildren():null,modelToDrop:e?.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(n){return n.element}),srcModel:e?.model,trg:t?.element,trgModel:t?.model,draggable:!0,droppable:!0},dst:t?.element,srcEl:e?.element})},r.prototype.getFirstElementWithAModel=function(t){for(var e=function(n){return(0,Tr.default)(n).data("model")!==void 0};t&&this.containerContext.container.contains(t);){if(e(t))return t;t=t.parentElement}return null},r.prototype.getValidParent=function(t,e,n,o){var s,u;if(t){var f=this.lastMoveData,c=f.targetNode,h=f.hoveredNode,g=f.hoveredIndex,m=f.mouseEvent,y=t.equals(h);t.nodeDimensions=y?h.nodeDimensions:this.getDim(t.element);var w=this.getIndexInParent(t,t.nodeDimensions,n,o),C=w===g,x=t.isWithinDropBounds(n,o),E=y&&C&&x===t.isWithinDropBounds((s=m?.clientX)!==null&&s!==void 0?s:0,(u=m?.clientY)!==null&&u!==void 0?u:0);if(E&&c)return c;if(!x)return this.handleParentTraversal(t,n,o);var N=this.sourceNodes.some(function(L){return t.canMove(L,e)});return this.triggerDragValidation(N,t),N?t:this.handleParentTraversal(t,n,o)}},r.prototype.handleParentTraversal=function(t,e,n){var o=t.getParent();if(o){var s=this.getIndexInParent(t,t.nodeDimensions,e,n);if(s!==void 0)return this.getValidParent(o,s,e,n)}},r.prototype.getIndexInParent=function(t,e,n,o){var s=t.getParent();if(s){var u=s?.indexOfChild(t);return e.dir=this.getDirection(t.element,s.element),u=u+(e.determinePlacement(n,o)=="after"?1:0),u}},r.prototype.triggerDragValidation=function(t,e){var n=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:t,src:n?.element,srcModel:n?.model,trg:e.element,trgModel:e.model}),n},r.prototype.cleanupEventListeners=function(){var t=this.containerContext.container;(0,Kt.AU)(t,"dragstart",this.onDragStart),(0,Kt.AU)(t,"mousemove dragover",this.onMove),(0,Kt.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},r.prototype.getDirection=function(t,e){var n;return this.dragDirection===Pi.A.Vertical?n=!0:this.dragDirection===Pi.A.Horizontal?n=!1:n=PO(t,e),n},r.prototype.getChildrenDim=function(t){var e=this,n=[],o=t.element;if(!o)return[];var s=t.getChildren();return!s||s.length===0?[]:((0,k.each)(s,function(u,f){var c=u.element;if(c&&!(!(0,Kt.ir)(c)&&!nd(c,e.containerContext.itemSel))){var h=e.getDim(c);h.dir=e.getDirection(c,o),n.push(h)}}),n)},r.prototype.getMousePositionRelativeToContainer=function(t,e){var n=e-this.containerOffset.top+this.containerContext.container.scrollTop,o=t-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var s=this.em.Canvas.getMouseRelativeCanvas({clientX:t,clientY:e},{noScroll:1});o=s.x,n=s.y}return{mouseXRelative:o,mouseYRelative:n}},r.prototype.cacheContainerPosition=function(){var t=this.containerContext.container,e=Lh(t),n=this.positionOptions.windowMargin?Math.abs(e.top):e.top,o=this.positionOptions.windowMargin?Math.abs(e.left):e.left;this.containerOffset={top:n,left:o}},r.prototype.getDim=function(t){var e=this.em,n=this.positionOptions.relative,o=this.positionOptions.windowMargin,s=e?.Canvas,u=s?s.getElementOffsets(t):{},f,c,h,g;if(this.positionOptions.canvasRelative&&this.em){var m=s.getElementPos(t,{noScroll:1});f=m.top,c=m.left,h=m.height,g=m.width}else{var y=Lh(t);f=n?t.offsetTop:y.top-(o?-1:1)*this.containerOffset.top,c=n?t.offsetLeft:y.left-(o?-1:1)*this.containerOffset.left,h=t.offsetHeight,g=t.offsetWidth}return new LO({top:f,left:c,height:h,width:g,offsets:u})},r})(Ht.Ss),RO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),VO=(function(i){RO(r,i);function r(t){var e=i.call(this)||this;return e.pfx=t.pfx||"",e.allowNesting=t.allowNesting||!1,e.container=t.container,e.setElement(t.el),e.offset={top:t.offset.top||0,left:t.offset.left||0},e.moveLimiter=new wg(100),e}return r.prototype.show=function(){this.el.style.display="block"},r.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},r.prototype.move=function(t,e){var n=this,o={elementDimension:t,placement:e};this.moveLimiter.updateArgs(o),this.moveLimiter.execute(function(s){var u=s.elementDimension,f=s.placement;n._move(u,f)})},r.prototype._move=function(t,e){var n=0,o="px",s=0,u=0,f="",c="";this.setOrientationForDimension(t);var h=t.top,g=t.left,m=t.height,y=t.width,w=t.dir,C=t.offsets;if(e==="inside"){if(this.setOrientation("horizontal"),!this.allowNesting){this.hide();return}var x=5,E=C?.paddingTop||x,N=C?.paddingLeft||x,L=C?.borderTopWidth||0,H=C?.borderLeftWidth||0,rt=C?.borderRightWidth||0,nt=H+rt;s=h+E+L,u=g+N+H,f=Math.max(y-N*2-nt,1)+"px",c="auto"}else w?(f=y+o,c="auto",s=e==="before"?h-n:h+m-n,u=g):(f="auto",c=m-n*2+o,s=h+n,u=e==="before"?g-n:g+y-n,this.setOrientation("vertical"));this.updateStyles(s,u,f,c),this.adjustOffset()},r.prototype.setOrientationForDimension=function(t){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),t&&!t.dir&&this.setOrientation("vertical")},r.prototype.setOrientation=function(t){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(t)},r.prototype.updateStyles=function(t,e,n,o){this.el.style.top=t+"px",this.el.style.left=e+"px",n&&(this.el.style.width=n),o&&(this.el.style.height=o)},r.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},r})(Ht.Ss),ha=function(){return ha=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ha.apply(this,arguments)},FO=(function(){function i(r){var t=MO(r);(0,k.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=t.containerContext,this.positionOptions=t.positionOptions,this.dragBehavior=t.dragBehavior,this.eventHandlers=ha(ha({},t.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=r.em,this.treeClass=r.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new jO({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return i.prototype.startSort=function(r){var t,e,n,o,s,u,f,c=this.getSourceNodes(r),h=c.sourceNodes,g=c.sourcesWithModel;this.sourceNodes=h,this.dropLocationDeterminer.startSort(h),this.bindDragEventHandlers(),(e=(t=this.eventHandlers).onStartSort)===null||e===void 0||e.call(t,this.sourceNodes,this.containerContext.container);var m=(n=this.sourceNodes[0])===null||n===void 0?void 0:n.model;(s=(o=this.eventHandlers).legacyOnStartSort)===null||s===void 0||s.call(o,{sorter:this,target:m,parent:m&&((u=m.parent)===null||u===void 0?void 0:u.call(m)),index:m&&((f=m.index)===null||f===void 0?void 0:f.call(m))}),this.em.trigger("sorter:drag:start",r[0],g[0])},i.prototype.validTarget=function(r,t,e){if(!r)return!1;var n=(0,Tr.default)(r).data("model");if(!n)return!1;var o=new this.treeClass(n),s=this.getSourceNodes(t).sourceNodes,u=s.some(function(f){return o.canMove(f,e)});return u},i.prototype.getSourceNodes=function(r){var t=this,e=r.filter(function(u){return!!u.dragSource||t.findValidSourceElement(u.element)}),n=e.map(function(u){var f,c;return{model:((f=u.dragSource)===null||f===void 0?void 0:f.model)||((c=(0,Tr.default)(u.element))===null||c===void 0?void 0:c.data("model")),content:u.dragSource}}),o=n.sort(function(u,f){return OO(u.model,f.model)}),s=o.map(function(u){return new t.treeClass(u.model,u.content)});return{sourceNodes:s,sourcesWithModel:n}},i.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},i.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},i.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},i.prototype.handlePlaceholderMove=function(r,t){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(r,t)},i.prototype.createPlaceholder=function(){return new VO({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},i.prototype.ensurePlaceholderElement=function(){var r=this.placeholder.el,t=this.containerContext.container;r.ownerDocument.contains(r)||t.append(this.placeholder.el)},i.prototype.updateOffset=function(){var r,t=((r=this.em)===null||r===void 0?void 0:r.get("canvasOffset"))||{};this.positionOptions.offsetTop=t.top,this.positionOptions.offsetLeft=t.left},i.prototype.findValidSourceElement=function(r){return r&&!nd(r,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(r=TO(r,this.containerContext.itemSel)),r},i.prototype.bindDragEventHandlers=function(){(0,Kt.on)(this.containerContext.document,"keydown",this.rollback)},i.prototype.updatePlaceholderPosition=function(r,t){this.placeholder.move(r,t)},i.prototype.cleanupEventListeners=function(){(0,Kt.AU)(this.containerContext.document,"keydown",this.rollback)},i.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},i.prototype.rollback=function(r){(0,Kt.AU)(this.containerContext.document,"keydown",this.rollback);var t="Escape";r.key===t&&this.cancelDrag()},i.prototype.triggerNullOnEndMove=function(r){var t,e,n,o,s,u=(t=this.sourceNodes)===null||t===void 0?void 0:t[0].model,f={target:u,parent:u&&((e=u.parent)===null||e===void 0?void 0:e.call(u)),index:u&&((n=u.index)===null||n===void 0?void 0:n.call(u))};(s=(o=this.eventHandlers).legacyOnEndMove)===null||s===void 0||s.call(o,null,this,ha(ha({},f),{cancelled:r}))},i})();const bg=FO;var NO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),va=function(){return va=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},va.apply(this,arguments)},HO=Bn.F.Target,qc={id:"sorter-target",type:HO},UO=(function(i){NO(r,i);function r(t){var e=t.em,n=t.treeClass,o=t.containerContext,s=t.dragBehavior,u=t.positionOptions,f=u===void 0?{}:u,c=t.eventHandlers,h=c===void 0?{}:c,g=i.call(this,{em:e,treeClass:n,containerContext:o,positionOptions:f,dragBehavior:s,eventHandlers:va(va({},h),{onStartSort:function(m,y){var w;(w=h.onStartSort)===null||w===void 0||w.call(h,m,y),g.onStartSort()},onDrop:function(m,y,w){var C;(C=h.onDrop)===null||C===void 0||C.call(h,m,y,w),g.onDrop(m,y,w)},onTargetChange:function(m,y){var w;(w=h.onTargetChange)===null||w===void 0||w.call(h,m,y),g.onTargetChange(m,y)},onMouseMove:function(m){var y;(y=h.onMouseMove)===null||y===void 0||y.call(h,m),g.onMouseMove(m)}})})||this;return g.targetIsText=!1,g.onMouseMove=function(m){var y,w=g.targetIsText&&((y=g.sourceNodes)===null||y===void 0?void 0:y.some(function(C){return C.isTextable()}));w&&g.updateTextViewCursorPosition(m)},g.onDrop=function(m,y,w){var C=typeof w=="number"?w:-1;if(m&&y.length>0){var x=g.handleNodeAddition(m,y,C);x.length===0&&g.triggerNullOnEndMove(!1)}else g.triggerNullOnEndMove(!0);m?.restNodeState(),g.placeholder.hide()},g.onTargetChange=function(m,y){var w;m?.restNodeState();var C=g.em.Canvas;if(!y){g.placeholder.hide(),C.removeSpots(qc);return}y?.setSelectedParentState(),g.targetIsText=y.isTextNode();var x=g.targetIsText&&((w=g.sourceNodes)===null||w===void 0?void 0:w.some(function(H){return H.isTextable()}));x?(y.setContentEditable(!0),g.placeholder.hide()):g.placeholder.show();var E=Bn.F.Select,N=Bn.F.Hover,L=Bn.F.Spacing;[E,N,L].forEach(function(H){return C.removeSpots({type:H})}),C.addSpot(va(va({},qc),{component:y.model}))},(0,k.bindAll)(g,"handleScrollEvent"),g}return r.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},r.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),i.prototype.bindDragEventHandlers.call(this)},r.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),i.prototype.cleanupEventListeners.call(this)},r.prototype.handleScrollEvent=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=(t=e?.[0])===null||t===void 0?void 0:t.frame,s=this.em.Canvas.getCanvasView().frame===o;s&&this.recalculateTargetOnScroll()},r.prototype.handleNodeAddition=function(t,e,n){var o=this;return e.reduce(function(s,u){if(!t.canMove(u,n))return s;if(o.isPositionChanged(t,u,n)){var f=o.moveNode(t,u,n),c=f.index,h=f.addedNode;s.push(h),n=c}return n++,s},[])},r.prototype.isPositionChanged=function(t,e,n){var o=e.getParent(),s=o?o.indexOfChild(e):-1;o?.model.cid===t.model.cid&&s<n&&n--;var u=o?.model.cid===t.model.cid,f=s===n,c=this.targetIsText&&e.isTextable();return!(u&&f&&!c)},r.prototype.moveNode=function(t,e,n){var o=e.getParent();if(o){var s=o.indexOfChild(e);o.removeChildAt(s,{temporary:!0}),o.model.cid===t.model.cid&&s<n&&n--}var u=t.addChildAt(e,n,{action:"move-component"});return u&&this.triggerEndMoveEvent(u),{addedNode:u,index:n}},r.prototype.triggerEndMoveEvent=function(t){var e,n,o,s,u,f;(n=(e=this.eventHandlers).legacyOnEndMove)===null||n===void 0||n.call(e,t.model,this,{target:t.model,parent:t.model&&((s=(o=t.model).parent)===null||s===void 0?void 0:s.call(o)),index:t.model&&((f=(u=t.model).index)===null||f===void 0?void 0:f.call(u))})},r.prototype.finalizeMove=function(){var t,e;(t=this.em)===null||t===void 0||t.Canvas.removeSpots(qc),(e=this.sourceNodes)===null||e===void 0||e.forEach(function(n){return n.restNodeState()}),this.setAutoCanvasScroll(!1),i.prototype.finalizeMove.call(this)},r.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.Canvas,o=n.getDocument(),s=null,u=(0,Kt.G2)(t);if(o.caretPositionFromPoint){var f=o.caretPositionFromPoint(u.clientX,u.clientY);f&&(s=o.createRange(),s.setStart(f.offsetNode,f.offset))}else o.caretRangeFromPoint?s=o.caretRangeFromPoint(u.clientX,u.clientY):t.rangeParent&&(s=o.createRange(),s.setStart(t.rangeParent,t.rangeOffset));var c=n.getWindow().getSelection();n.getFrameEl().focus(),c?.removeAllRanges(),s&&c?.addRange(s)}},r.prototype.setAutoCanvasScroll=function(t){var e=this.em,n=e?.Canvas;n&&(t?n.startAutoscroll():n.stopAutoscroll())},r})(bg);const Ih=UO;var BO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),gu=function(){return gu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},gu.apply(this,arguments)},WO=(function(i){BO(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var t=this.collection;this.prop=t?.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},r.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(n,o){return n[(0,Ot.camelCase)(o)]=e[o],n},{}):e},r.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},r.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},r.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},r.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},r.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},r.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},r.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},r.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",gu(gu({},this.getValues()),t))},r})(Ht.Kx);const cs=WO;var zO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Cg=(function(i){zO(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},r})(Ht.pM);const Tl=Cg;Cg.prototype.model=cs;var KO=De(3178),GO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),$O=(function(i){GO(r,i);function r(t){return i.call(this,t)||this}return r.prototype.getChildren=function(){return this.model instanceof Tl?this.model.models.map(function(t){return new r(t)}):null},r.prototype.getParent=function(){var t=this.model instanceof cs?this.model.collection:null;return t?new r(t):null},r.prototype.addChildAt=function(t,e){if(this.model instanceof cs)throw Error("Cannot add a layer model to another layer model");var n=this.model.add(t.model,{at:e});return new r(n)},r.prototype.removeChildAt=function(t){if(this.model instanceof cs)throw Error("Cannot remove a layer model from another layer model");var e=this.model.at(t);e&&this.model.remove(e)},r.prototype.indexOfChild=function(t){return!(t.model instanceof cs)||!(this.model instanceof Tl)?-1:this.model.indexOf(t.model)},r.prototype.canMove=function(t,e){return this.model instanceof Tl&&!!t.model},Object.defineProperty(r.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"element",{get:function(){var t;return(t=this.view)===null||t===void 0?void 0:t.el},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),r})(KO.$),qO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ff=function(){return Ff=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ff.apply(this,arguments)},YO=(function(i){qO(r,i);function r(t){var e=t.em,n=t.containerContext,o=t.dragBehavior,s=t.positionOptions,u=s===void 0?{}:s,f=t.eventHandlers,c=f===void 0?{}:f,h=i.call(this,{em:e,treeClass:$O,containerContext:n,positionOptions:u,dragBehavior:o,eventHandlers:Ff({onStartSort:function(g,m){var y;(y=c.onStartSort)===null||y===void 0||y.call(c,g,m),h.onLayerStartSort(g)},onDrop:function(g,m,y){var w;(w=c.onDrop)===null||w===void 0||w.call(c,g,m,y),h.onLayerDrop(g,m,y)},onEnd:function(){h.placeholder.hide()}},c)})||this;return h.onLayerStartSort=function(g){h.em.clearSelection();var m=g[0];h.em.trigger("sorter:drag:start",m?.element,m?.model),h.placeholder.show()},h.onLayerDrop=function(g,m,y){if(g){y=typeof y=="number"?y:-1;for(var w=0;w<m.length;w++){var C=m[w];if(g.canMove(C,w)){var x=C.getParent(),E=-1;x&&(E=x.indexOfChild(C),x.removeChildAt(E)),y=E<y?y-1:y,g.addChildAt(C,y)}}h.placeholder.hide()}},h}return r})(bg);const XO=YO;var JO=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Nf=function(){return Nf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Nf.apply(this,arguments)},ZO=(function(i){JO(r,i);function r(t){var e=i.call(this,t,"Utils")||this;return e.Sorter=Ih,e.Resizer=SO,e.Dragger=Mv.A,e.ComponentSorter=Ih,e.StyleManagerSorter=XO,e.helpers=Nf({},Ot),e}return r.prototype.destroy=function(){},r})(wn);const QO=ZO;var mn,jn={},Qr={16:!1,18:!1,17:!1,91:!1},Sg="all",Ai={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},xg={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},od=function(i){return xg[i]||i.toUpperCase().charCodeAt(0)},Ta=[];for(mn=1;mn<20;mn++)xg["f"+mn]=111+mn;function ws(i,r){for(var t=i.length;t--;)if(i[t]===r)return t;return-1}function tT(i,r){if(i.length!=r.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!==r[t])return!1;return!0}var eT={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function rT(i){for(mn in Qr)Qr[mn]=i[eT[mn]]}function nT(i){var r,t,e,n,o,s;if(r=i.keyCode,ws(Ta,r)==-1&&Ta.push(r),(r==93||r==224)&&(r=91),r in Qr){Qr[r]=!0;for(e in Ai)Ai[e]==r&&(rn[e]=!0);return}if(rT(i),!!rn.filter.call(this,i)&&r in jn){for(s=id(),n=0;n<jn[r].length;n++)if(t=jn[r][n],t.scope==s||t.scope=="all"){o=t.mods.length>0;for(e in Qr)(!Qr[e]&&ws(t.mods,+e)>-1||Qr[e]&&ws(t.mods,+e)==-1)&&(o=!1);(t.mods.length==0&&!Qr[16]&&!Qr[18]&&!Qr[17]&&!Qr[91]||o)&&t.method(i,t)===!1&&(i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation&&i.stopPropagation(),i.cancelBubble&&(i.cancelBubble=!0))}}}function oT(i){var r=i.keyCode,t,e=ws(Ta,r);if(e>=0&&Ta.splice(e,1),(r==93||r==224)&&(r=91),r in Qr){Qr[r]=!1;for(t in Ai)Ai[t]==r&&(rn[t]=!1)}}function iT(){for(mn in Qr)Qr[mn]=!1;for(mn in Ai)rn[mn]=!1}function rn(i,r,t){var e,n;e=Og(i),t===void 0&&(t=r,r="all");for(var o=0;o<e.length;o++)n=[],i=e[o].split("+"),i.length>1&&(n=Tg(i),i=[i[i.length-1]]),i=i[0],i=od(i),i in jn||(jn[i]=[]),jn[i].push({shortcut:e[o],scope:r,method:t,key:e[o],mods:n})}function aT(i,r){var t,e,n=[],o,s,u;for(t=Og(i),s=0;s<t.length;s++){if(e=t[s].split("+"),e.length>1&&(n=Tg(e)),i=e[e.length-1],i=od(i),r===void 0&&(r=id()),!jn[i])return;for(o=0;o<jn[i].length;o++)u=jn[i][o],u.scope===r&&tT(u.mods,n)&&(jn[i][o]={})}}function sT(i){return typeof i=="string"&&(i=od(i)),ws(Ta,i)!=-1}function lT(){return Ta.slice(0)}function uT(i){var r=(i.target||i.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")}for(mn in Ai)rn[mn]=!1;function cT(i){Sg=i||"all"}function id(){return Sg||"all"}function fT(i){var r,t,e;for(r in jn)for(t=jn[r],e=0;e<t.length;)t[e].scope===i?t.splice(e,1):e++}function Og(i){var r;return i=i.replace(/\s/g,""),r=i.split(","),r[r.length-1]==""&&(r[r.length-2]+=","),r}function Tg(i){for(var r=i.slice(0,i.length-1),t=0;t<r.length;t++)r[t]=Ai[r[t]];return r}function Yc(i,r,t){i.addEventListener?i.addEventListener(r,t,!1):i.attachEvent&&i.attachEvent("on"+r,function(){t(window.event)})}rn.setScope=cT;rn.getScope=id;rn.deleteScope=fT;rn.filter=uT;rn.isPressed=sT;rn.getPressedKeyCodes=lT;rn.unbind=aT;rn.handlers=jn;rn.init=function(i){Yc(i.document,"keydown",function(r){nT(r)}),Yc(i.document,"keyup",oT),Yc(i,"focus",iT)};const fs=rn;var dT=function(){return{defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}}};const pT=dT;var Hf;(function(i){i.add="keymap:add",i.remove="keymap:remove",i.emit="keymap:emit",i.emitId="keymap:emit:"})(Hf||(Hf={}));var hT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),jh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))};(0,Ot.hasWin)()&&fs.init(window);var vT=(function(i){hT(r,i);function r(t){var e=i.call(this,t,"Keymaps",pT())||this;return e.keymaster=fs,e.events=Hf,e.keymaps={},e}return r.prototype.onLoad=function(){if(!this.em.isHeadless){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}}},r.prototype.add=function(t,e,n,o){o===void 0&&(o={});var s=this,u=s.em,f=s.events,c=u.Commands,h=u.getEditor(),g=u.Canvas,m={id:t,keys:e,handler:n},y=this.keymaps[t];return y&&this.remove(t),this.keymaps[t]=m,fs(e,function(w,C){var x,E={event:w,h:C},N=(0,k.isString)(n)?c.get(n):n,L=!u.isEditing()&&!h.Canvas.isInputFocused();if(L||o.force){o.prevent&&((x=g.getCanvasView())===null||x===void 0||x.preventDefault(w)),(0,k.isFunction)(N)?N(h,0,E):c.runCommand(N,E);var H=[t,C.shortcut,w];u.trigger.apply(u,jh([f.emit],H,!1)),u.trigger.apply(u,jh(["".concat(f.emitId).concat(t)],H,!1))}},void 0),u.trigger(f.add,m),m},r.prototype.get=function(t){return this.keymaps[t]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(t){var e=this,n=e.em,o=e.events,s=this.get(t);if(s)return delete this.keymaps[t],s.keys.split(", ").forEach(function(u){fs.unbind(u.trim())}),n?.trigger(o.remove,s),s},r.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),fs.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r})(wn);const gT=vT;var mT=function(){return{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}}};const yT=mT;var _T=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),wT=(function(i){_T(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r})(ri.A);const bT=wT;var Uf;(function(i){i.open="modal:open",i.close="modal:close",i.all="modal"})(Uf||(Uf={}));var CT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),mu=function(){return mu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},mu.apply(this,arguments)},ST=(function(i){CT(r,i);function r(t){var e=i.call(this,t)||this,n=e.model;return e.listenTo(n,"change:open",e.updateOpen),e.listenTo(n,"change:title",e.updateTitle),e.listenTo(n,"change:content",e.updateContent),e}return r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,o=t.content,s=t.title;return'<div class="'.concat(e,"dialog ").concat(n,"one-bg ").concat(n,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(s,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},r.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),o=this.model.get("content");e.length&&n.append(e),t.empty().append(o)},r.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(t){var e=this,n=e.pfx,o=e.$el,s=e.el,u=[].slice.call(s.attributes).map(function(f){return f.name});o.removeAttr(u.join(" ")),o.attr(mu(mu({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||"").trim()}))},r.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},r})(zn);const xT=ST;var OT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),TT=(function(i){OT(r,i);function r(t){var e=i.call(this,t,"Modal",yT())||this;e.events=Uf;var n=e.events;return e.model=new bT(e),e.model.on("change:open",function(o,s){t.trigger(s?n.open:n.close)}),e.model.on("change",(0,k.debounce)(function(){var o=e._evData(),s=e.config.custom;(0,k.isFunction)(s)&&s(o),t.trigger(n.all,o)},0)),e}return r.prototype._evData=function(){var t=this,e=this.getTitle(),n=this.getContent(),o=this.model.attributes,s=o.open,u=o.attributes;return{open:s,attributes:u,title:(0,k.isString)(e)?(0,Kt.GZ)(e):e,content:(0,k.isString)(n)?(0,Kt.GZ)(n):n.get?n.get(0):n,close:function(){t.close()}}},r.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&e?.appendChild(n)},r.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(t){var e=this,n=e.em,o=e.events;return n.once(o.close,t),this},r.prototype.onceOpen=function(t){var e=this,n=e.em,o=e.events;return n.once(o.open,t),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(t){return this.model.set("title",t),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var t;if(!this.config.custom){var e=xT.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},r.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},r})(wn);const PT=TT;var Rh="sw-visibility",Vh="export-template",Fh="open-sm",Nh="open-tm",Hh="open-layers",Uh="open-blocks",Xc="fullscreen",Jc="preview",ET=function(){return{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Rh,className:"fa fa-square-o",command:"core:component-outline",context:Rh,attributes:{title:"View components"}},{id:Jc,className:"fa fa-eye",command:Jc,context:Jc,attributes:{title:"Preview"}},{id:Xc,className:"fa fa-arrows-alt",command:Xc,context:Xc,attributes:{title:"Fullscreen"}},{id:Vh,className:"fa fa-code",command:Vh,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Fh,className:"fa fa-paint-brush",command:Fh,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Nh,className:"fa fa-cog",command:Nh,togglable:!1,attributes:{title:"Settings"}},{id:Hh,className:"fa fa-bars",command:Hh,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Uh,className:"fa fa-th-large",command:Uh,togglable:!1,attributes:{title:"Open Blocks"}}]}]}};const AT=ET;var kT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),MT=(function(i){kT(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.get("buttons").length&&n.set("buttons",new Ag(n.module,n.get("buttons"))),n}return r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r})(ri.A);const Pg=MT;var DT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Eg=(function(i){DT(r,i);function r(t,e){return i.call(this,t,e,Pg)||this}return r.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(n,o){n!==t&&(n.set("active",!1),e&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(t,e))})},r.prototype.deactivateAll=function(t,e){var n=t||"";this.forEach(function(o){o.get("context")==n&&o!==e&&o.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(n,o){n.get("context")==e&&n.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(n,o){n!==t&&(n.set("disable",!0),e&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(t,e))})},r})(Fu);const Ag=Eg;Eg.prototype.model=Pg;var LT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),IT=(function(i){LT(r,i);function r(t,e){var n=i.call(this,t,e)||this,o=n.get("buttons")||[];return n.buttons=new Ag(t,o),n}return r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),r})(ri.A);const kg=IT;var jT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Mg=(function(i){jT(r,i);function r(t,e){return i.call(this,t,e,kg)||this}return r})(Fu);const RT=Mg;Mg.prototype.model=kg;var VT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ga=function(){return ga=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ga.apply(this,arguments)},FT=(function(i){VT(r,i);function r(t){var e=i.call(this,t)||this,n=e,o=n.model,s=n.em,u=n.pfx,f=n.ppfx,c=o.className,h=o.attributes,g=h.command,m=h.listen;if(e.id=u+o.get("id"),e.activeCls="".concat(u,"active ").concat(f,"four-color"),e.disableCls="".concat(f,"disabled"),e.btnsVisCls="".concat(u,"visible"),e.className=u+"btn"+(c?" "+c:""),e.listenTo(o,"change",e.render),e.listenTo(o,"change:active updateActive",e.updateActive),e.listenTo(o,"checkActive",e.checkActive),e.listenTo(o,"change:bntsVis",e.updateBtnsVis),e.listenTo(o,"change:attributes",e.updateAttributes),e.listenTo(o,"change:className",e.updateClassName),e.listenTo(o,"change:disable",e.updateDisable),s&&(0,k.isString)(g)&&m){var y={fromListen:!0};e.listenTo(s,"run:".concat(g),function(){return o.set("active",!0,y)}),e.listenTo(s,"stop:".concat(g),function(){return o.set("active",!1,y)})}return s&&s.get&&(e.commands=s.get("Commands")),e}return r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var t=this,e=t.model,n=t.pfx,o=e.className,s=e.get("attributes").class,u="".concat(s||""," ").concat(n,"btn ").concat(o||"");this.$el.attr("class",u.trim())},r.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,o=t.$el,s=n.get("attributes")||{},u=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));o.attr(s),u&&o.attr({title:u}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(t,e,n){var o;n===void 0&&(n={});var s=this,u=s.model,f=s.commands,c=s.$el,h=s.activeCls,g=n.fromCollection,m=n.fromListen,y=u.get("context"),w=u.get("options"),C=u.command,x={};C&&(f&&(0,k.isString)(C)?x=f.get(C)||{}:(0,k.isFunction)(C)?x=f.create({run:C}):C!==null&&(0,k.isObject)(C)&&(x=f.create(C)),u.active?(!g&&((o=u.collection)===null||o===void 0||o.deactivateAll(y,u)),u.set("active",!0,{silent:!0}).trigger("checkActive"),!m&&f.runCommand(x,ga(ga({},w),{sender:u})),x.noStop&&u.set("active",!1)):(c.removeClass(h),!m&&f.stopCommand(x,ga(ga({},w),{sender:u,force:1}))))},r.prototype.updateDisable=function(){var t=this,e=t.disableCls,n=t.model,o=n.disable;this.$el[o?"addClass":"removeClass"](e)},r.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,o=t.activeCls;e.active?n.addClass(o):n.removeClass(o)},r.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},r.prototype.toggleActive=function(){var t=this,e=t.model,n=t.em,o=e.active,s=e.togglable;o&&!s||(e.active=!o,o?e.runDefaultCommand&&n.runDefault():e.stopDefaultCommand&&n.stopDefault())},r.prototype.render=function(){var t=this.model,e=t.get("label"),n=this.$el;return!t.get("el")&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},r})(zn);const NT=FT;var HT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),UT=(function(i){HT(r,i);function r(t){var e=i.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,o=t.get("el"),s=new NT({el:o,model:t}),u=s.render().el;return n?n.appendChild(u):this.$el.append(u),u},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(n){return t.addToCollection(n,e)}),this.$el.append(e),this.$el.attr("class",(0,k.result)(this,"className")),this},r})(zn);const BT=UT;var WT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Bf=function(){return Bf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Bf.apply(this,arguments)},zT=(function(i){WT(r,i);function r(t){var e=i.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var t=this.em,e=t?.Editor,n=this.model.get("resizable");if(e&&n){var o=n===!0?[!0,!0,!0,!0]:n,s=o.length,u=void 0,f=void 0,c=void 0,h=!1;if(s==2){var g=o;u=g[0],c=g[0],f=g[1],h=g[1]}else if(s==4){var g=o;u=g[0],f=g[1],c=g[2],h=g[3]}var m=new e.Utils.Resizer(Bf({tc:u,cr:f,bc:c,cl:h,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(y,w){var C=w.target,x=y.style,E=m.getConfig(),N=E.keyWidth,L=E.keyHeight,H=y.getBoundingClientRect(),rt=C=="container",nt=x[N],vt=x[L],et=nt&&!rt?parseFloat(nt):H.width,G=vt&&!rt?parseFloat(vt):H.height;return{left:0,top:0,width:et,height:G}}},n&&typeof n!="boolean"?n:{}));m.blur=function(){},m.focus(this.el)}},r.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var s=new BT(t);e.append(s.render().el)}return e.append(this.model.get("content")),this},r})(zn);const KT=zT;var GT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),$T=(function(i){GT(r,i);function r(t){var e=i.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return r.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,o=t.get("el"),s=new KT(t),u=s.render().el,f=t.get("appendTo");if(!o)if(f){var c=document.querySelector(f);c?.appendChild(u)}else n?n.appendChild(u):this.$el.append(u);return s.initResize(),u},r.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each(function(o){return t.addToCollection(o,n)}),e.append(n),e.attr("class",this.className),this},r})(zn);const qT=$T;var YT=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),XT=(function(i){YT(r,i);function r(t){var e=i.call(this,t,"Panels",AT())||this;return e.panels=new RT(e,e.config.defaults),e}return r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},r.prototype.addPanel=function(t){return this.panels.add(t)},r.prototype.removePanel=function(t){return this.panels.remove(t)},r.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},r.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.buttons.add(e):null},r.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.buttons.remove(e)},r.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var o=n.buttons.where({id:e});return o.length?o[0]:null}return null},r.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new qT(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r})(wn);const JT=XT;var ZT=function(){return{stylePrefix:"cm-",optsCodeViewer:{}}};const QT=ZT;var t1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),e1=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},r1=(function(i){t1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.build=function(t,e){e===void 0&&(e={});var n=e.em,o=e1(e,["em"]),s=o;if(e.cleanId&&n){var u=n.Css.getAll(),f=u.toJSON().map(function(h){var g=h.selectors,m=g&&g.length===1&&g.models[0];return m&&m.isId()&&m.get("name")}).filter(Boolean),c=s.attributes;s.attributes=function(h,g){g=typeof c=="function"?c(h,g):g;var m=g.id;return m&&m[0]==="i"&&!h.get("script")&&!h.get("script-export")&&!h.get("attributes").id&&f.indexOf(m)<0&&delete g.id,g}}return t.toHTML(s)},r})(Ht.Kx);const n1=r1;var o1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),i1=(function(i){o1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.build=function(t){var e=this,n=t.toJSON();return this.beforeEach(n),(0,k.each)(n,function(o,s){var u=n[s];if(u instanceof Ht.Kx)n[s]=e.build(u);else if(u instanceof Ht.pM){var f=u;n[s]=[],f.length&&f.forEach(function(c,h){n[s][h]=e.build(c)})}}),n},r.prototype.beforeEach=function(t){delete t.status},r})(Ht.Kx);const a1=i1;var s1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})();function l1(i){var r,t=((r=i.toString().match(/\{([\s\S]*)\}/m))===null||r===void 0?void 0:r[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var u1=(function(i){s1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.mapModel=function(t){var e,n=this,o="",s=t.get("script-export")||t.get("script"),u=t.get("type"),f=t.get("components"),c=t.getId();if(s){var h=t.get("attributes");h=(0,k.extend)({},h,{id:c}),t.set("attributes",h,{silent:!0});var g=t.getScriptString(s),m=t.get("script-props");if(t.get("scriptUpdated")&&!m)this.mapJs[u+"-"+c]={ids:[c],code:g};else{var y=void 0,w=this.mapJs[u];if(m&&(y=t.__getScriptProps()),w)w.ids.push(c),y&&(w.props[c]=y);else{var C={ids:[c],code:g};y&&(C.props=(e={},e[c]=y,e)),this.mapJs[u]=C}}}return f.forEach(function(x){o+=n.mapModel(x)}),o},r.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var n in this.mapJs){var o=this.mapJs[n];if(o.code)if(o.props){if(l1(o.code))continue;e+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var s="#"+o.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(s,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return e},r})(Ht.Kx);const c1=u1;var f1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Wf=function(){return Wf=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Wf.apply(this,arguments)},bs;(0,Ot.hasWin)()&&(bs=De(4408),De(8253),De(7389),De(3640));var Dg=(function(i){f1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},r.prototype.init=function(t){return(0,k.bindAll)(this,"onChange"),this.editor=bs.fromTextArea(t,Wf({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(t){return this.element=t,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},r.prototype.setContent=function(t,e){var n=this;e===void 0&&(e={});var o=this.editor;if(o){o.setValue(t);var s=this.get("autoFormat"),u=o.autoFormatRange&&(s===!0||Array.isArray(s)&&s.includes(this.get("codeName")));u&&(bs.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),bs.commands.goDocStart(o)),!e.noRefresh&&setTimeout(function(){return n.refresh()})}},r})(Ht.Kx);const d1=Dg;Dg.prototype.CodeMirror=bs;var p1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),h1=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},v1=(function(i){p1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.template=function(t){var e=t.pfx,n=t.codeName,o=t.label;return gn(Bh||(Bh=h1([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,n,e,o,e)},r.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var t,e,n=this,o=n.model,s=n.pfx,u=n.$el,f=o.toJSON(),c=o.get("input")||((e=(t=o).getElement)===null||e===void 0?void 0:e.call(t));return f.pfx=s,u.html(this.template(f)),u.attr("class","".concat(s,"editor-c")),u.find("#".concat(s,"code")).append(c),this},r})(Ht.Ss);const g1=v1;var Bh,m1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),yu=function(){return yu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},yu.apply(this,arguments)},y1="CodeMirror",_1=(function(i){m1(r,i);function r(t){var e=i.call(this,t,"CodeManager",QT())||this;e.EditorView=g1;var n=e.config,o=n.pStylePrefix;return o&&(n.stylePrefix=o+n.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new n1,css:new dC,json:new a1,js:new c1},e.defViewers={CodeMirror:new d1},e.loadDefaultGenerators().loadDefaultViewers(),e}return r.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},r.prototype.getGenerator=function(t){return this.generators[t]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},r.prototype.getViewer=function(t){return this.viewers[t]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,k.isUndefined)(t.type)?y1:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),o=document.createElement("div"),s=document.createElement("textarea");return o.appendChild(s),n.set(yu(yu({},this.config.optsCodeViewer),t)),n.init(s),n.setElement(o),n},r.prototype.updateViewer=function(t,e){t.setContent(e)},r.prototype.getCode=function(t,e,n){n===void 0&&(n={}),n.em=this.em;var o=this.getGenerator(e);return o?o.build(t,n):""},r.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},r.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},r.prototype.destroy=function(){},r})(wn);const w1=_1;var b1=De(4729),C1=De.n(b1),S1=function(){return{maximumStackLength:500,trackSelection:!0}};const x1=S1;var tn;(function(i){i.update="update",i.updateBefore="updateBefore",i.undo="undo",i.redo="redo",i.load="load",i.projectLoad="project:load",i.projectLoaded="project:loaded",i.projectGet="project:get",i.log="log",i.telemetryInit="telemetry:init",i.destroy="destroy",i.destroyed="destroyed"})(tn||(tn={}));var O1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Co=function(){return Co=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Co.apply(this,arguments)},T1=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},_l=function(i){return i.avoidStore||i.noUndo||i.partial},Wh=function(i){return Object.keys(i.changedAttributes())},wl=new WeakMap,P1=(function(i){O1(r,i);function r(t){var e=i.call(this,t,"UndoManager",x1())||this;e.config._disable&&(e.config.maximumStackLength=0);var n=!0;return e.um=new(C1())(Co({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(o){var s=o.get("_undo");if(s){var u=o.get("_undoexc");if((0,k.isArray)(u)&&Wh(o).some(function(f){return u.indexOf(f)>=0}))return!1;if((0,k.isBoolean)(s)||(0,k.isArray)(s)&&Wh(o).some(function(f){return s.indexOf(f)>=0}))return!0}return!1},on:function(o,s,u){var f=wl.get(o);f||(f=o.previousAttributes(),wl.set(o,f));var c=u||s||{};if(c.noUndo&&setTimeout(function(){wl.delete(o)}),!_l(c)){var h=o.toJSON({fromUndo:n}),g={object:o,before:f,after:h};return wl.delete(o),(0,k.isEmpty)(h)?void 0:g}}}),e.um.changeUndoType("add",{on:function(o,s,u){if(u===void 0&&(u={}),!(_l(u)||!e.isRegistered(s)))return{object:s,before:void 0,after:o,options:Co(Co({},u),{fromUndo:n})}}}),e.um.changeUndoType("remove",{on:function(o,s,u){if(u===void 0&&(u={}),!(_l(u)||!e.isRegistered(s)))return{object:s,before:o,after:void 0,options:Co(Co({},u),{fromUndo:n})}}}),e.um.changeUndoType("reset",{undo:function(o,s){o.reset(s,{fromUndo:n})},redo:function(o,s,u){o.reset(u,{fromUndo:n})},on:function(o,s){if(s===void 0&&(s={}),!(_l(s)||!e.isRegistered(o)))return{object:o,before:s.previousModels,after:T1([],o.models,!0),options:Co(Co({},s),{fromUndo:n})}}}),e.um.on("undo redo",function(){t.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),[tn.undo,tn.redo].forEach(function(o){return e.um.on(o,function(){return t.trigger(o)})}),e}return r.prototype.postLoad=function(){var t=this,e=t.config,n=t.em;e.trackSelection&&n&&this.add(n.get("selected"))},r.prototype.add=function(t){return this.um.register(t),this},r.prototype.remove=function(t){return this.um.unregister(t),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,n=e.em,o=e.um;return!n.isEditing()&&o.undo(t),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,n=e.em,o=e.um;return!n.isEditing()&&o.redo(t),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(n){var o=n.get("magicFusionIndex");e.indexOf(o)<0&&(e.push(o),t.push(n))}),t},r.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},r.prototype.getGroupedStack=function(){var t={},e=this.getStack(),n=function(o,s){var u=o.attributes,f=u.type,c=u.after,h=u.before,g=u.object,m=u.options,y=m===void 0?{}:m;return{index:s,type:f,after:c,before:h,object:g,options:y}};return e.forEach(function(o,s){var u=o.get("magicFusionIndex"),f=n(o,s);t[u]?t[u].push(f):t[u]=[f]}),Object.keys(t).map(function(o){var s=t[o];return{index:s[s.length-1].index,actions:s,labels:(0,k.unique)(s.reduce(function(u,f){var c,h=(c=f.options)===null||c===void 0?void 0:c.action;return h&&u.push(h),u},[]))}})},r.prototype.goToGroup=function(t){var e=this;if(t){var n=this.getPointer(),o=t.index-n;(0,k.times)(Math.abs(o),function(){e[o<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r})(wn);const E1=P1;var A1=function(){return{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1}};const k1=A1;var ma=function(){return ma=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ma.apply(this,arguments)},_u;(function(i){i[i.ACTIVE=1]="ACTIVE",i[i.INACTIVE=0]="INACTIVE",i[i.DISABLED=-1]="DISABLED"})(_u||(_u={}));var Zc="_rte",Oi={ACTIVE:1,INACTIVE:0,DISABLED:-1},bl=function(i,r){r===void 0&&(r="A");var t=i.selection()||{},e=t.anchorNode,n=t.focusNode,o=e?.parentNode,s=n?.parentNode;return o?.nodeName==r||s?.nodeName==r},wu="data-selectme",ls={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(i){return i.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(i){return i.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(i){return i.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(i){return i.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(i){return i&&i.selection()&&bl(i)?Oi.ACTIVE:Oi.INACTIVE},result:function(i){bl(i)?i.exec("unlink"):i.insertHTML('<a href="" '.concat(wu,">").concat(i.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(i){return i?.selection()&&bl(i,"SPAN")?Oi.DISABLED:Oi.INACTIVE},result:function(i){!bl(i,"SPAN")&&i.insertHTML("<span ".concat(wu,">").concat(i.selection(),"</span>"),{select:!0})}}},M1=(function(){function i(r,t,e){e===void 0&&(e={});var n=this;if(this.em=r,this.settings=e,t[Zc])return t[Zc];t[Zc]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(e.actions||[]).map(function(h){var g=h;return(0,k.isString)(h)?g=ma({},ls[h]):ls[h.name]&&(g=ma(ma({},ls[h.name]),h)),g}),s=o.length?o:Object.keys(ls).map(function(h){return ls[h]});e.classes=ma({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var u=e.classes,f=e.actionbar;if(this.actionbar=f,this.classes=u,this.actions=s,!f){if(!this.isCustom(e.module)){var c=e.actionbarContainer;f=document.createElement("div"),f.className=u.actionbar,c?.appendChild(f),this.actionbar=f}s.forEach(function(h){return n.addAction(h)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return i.prototype.isCustom=function(r){var t=r||this.em.RichTextEditor;return!!(t?.config.custom||t?.customRte)},i.prototype.destroy=function(){},i.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},i.prototype.updateActiveActions=function(){var r=this,t=this.getActions();t.forEach(function(e){var n=e.update,o=e.btn,s=r.classes,u=s.active,f=s.inactive,c=s.disabled,h=e.state,g=e.name,m=r.doc,y=_u.INACTIVE;if(o&&(o.className=o.className.replace(u,"").trim(),o.className=o.className.replace(f,"").trim(),o.className=o.className.replace(c,"").trim()),h){var w=h(r,m);if(y=w,o)switch(w){case Oi.ACTIVE:o.className+=" ".concat(u);break;case Oi.INACTIVE:o.className+=" ".concat(f);break;case Oi.DISABLED:o.className+=" ".concat(c);break}}else m.queryCommandSupported(g)&&m.queryCommandState(g)&&(o&&(o.className+=" ".concat(u)),y=_u.ACTIVE);e.currentState=y,n?.(r,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},i.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},i.prototype.disable=function(){return this.__toggleEffects(!1)},i.prototype.__toggleEffects=function(r,t){r===void 0&&(r=!1),t===void 0&&(t={});var e=r?Kt.on:Kt.AU,n=this,o=n.el,s=n.doc,u=this.actionbarEl();if(u&&(u.style.display=r?"":"none"),o.contentEditable="".concat(!!r),e(o,"mouseup keyup",this.updateActiveActions),e(s,"keydown",this.__onKeydown),e(s,"paste",this.__onPaste),this.enabled=r,r){var f=t.event;if(this.syncActions(),this.updateActiveActions(),f){var c=null;if(s.caretRangeFromPoint){var h=(0,Kt.G2)(f);c=s.caretRangeFromPoint(h.clientX,h.clientY)}else f.rangeParent&&(c=s.createRange(),c.setStart(f.rangeParent,f.rangeOffset));var g=s.getSelection();g?.removeAllRanges(),c&&g?.addRange(c)}o.focus()}return this},i.prototype.__onKeydown=function(r){var t=this.em,e=t.RichTextEditor.getConfig().onKeydown;if(e)return e({ev:r,rte:this,editor:t.getEditor()});var n=this.doc,o=["insertOrderedList","insertUnorderedList"];r.key==="Enter"&&!o.some(function(s){return n.queryCommandState(s)})&&(n.execCommand("insertLineBreak"),r.preventDefault())},i.prototype.__onPaste=function(r){var t=this.em,e=t.RichTextEditor.getConfig().onPaste;if(e)return e({ev:r,rte:this,editor:t.getEditor()});var n=r.clipboardData,o=n.getData("text"),s=n.getData("text/html");if(o&&!s){r.preventDefault();var u=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,u)}},i.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(t){if(r.actionbar&&(!t.state||t.state&&t.state(r,r.doc)>=0)){var e=t.event||"click",n=t.btn;n&&(n["on".concat(e)]=function(){t.result(r,t),r.updateActiveActions()})}})},i.prototype.addAction=function(r,t){t===void 0&&(t={});var e=t.sync,n=this.actionbarEl();if(n){var o=r.icon,s=r.attributes,u=s===void 0?{}:s,f=document.createElement("span");f.className=this.classes.button,r.btn=f;for(var c in u)f.setAttribute(c,u[c]);typeof o=="string"?f.innerHTML=o:f.appendChild(o),n.appendChild(f)}e&&(this.actions.push(r),this.syncActions())},i.prototype.getActions=function(){return this.actions},i.prototype.selection=function(){return this.doc.getSelection()},i.prototype.exec=function(r,t){this.doc.execCommand(r,!1,t)},i.prototype.actionbarEl=function(){return this.actionbar},i.prototype.insertHTML=function(r,t){var e=t===void 0?{}:t,n=e.select,o=this,s=o.em,u=o.doc,f=o.el,c=u.getSelection();if(c&&c.rangeCount){var h=(0,Ot.getComponentModel)(f)||s.getSelected(),g=u.createElement("div"),m=c.getRangeAt(0);m.deleteContents(),(0,k.isString)(r)?g.innerHTML=r:r&&g.appendChild(r),Array.prototype.slice.call(g.childNodes).forEach(function(y){m.insertNode(y)}),c.removeAllRanges(),c.addRange(m),f.focus(),n&&h&&(h.once("rte:disable",function(){var y=h.find("[".concat(wu,"]"))[0];y&&(s.setSelected(y),y.removeAttributes(wu))}),h.trigger("disable"))}},i})();const D1=M1;var zf;(function(i){i.enable="rte:enable",i.disable="rte:disable",i.custom="rte:custom"})(zf||(zf={}));var L1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),bu=function(){return bu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},bu.apply(this,arguments)},Qc=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},tf=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},I1=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},ef="".concat(ps.refresh," frame:scroll ").concat(je.I.update),j1=(function(i){L1(r,i);function r(t){var e=i.call(this,t,"RichTextEditor",k1())||this;e.events=zf;var n=e.config,o=n.pStylePrefix;o&&(n.stylePrefix=o+n.stylePrefix),e.pfx=n.stylePrefix,e.actions=n.actions||[];var s=new Ht.Kx;return e.model=s,s.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,k.debounce)(function(){return e.__trgCustom()},0),e}return r.prototype.onLoad=function(){if((0,Ot.hasWin)()){var t=this.config,e=t.pStylePrefix,n=t.custom,o=(0,Kt.a_)("div",{class:(0,Kt.cx)("".concat(e,"rte-toolbar"),!n&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Kt.a_)("div")),(0,Kt.on)(o,"mousedown",function(s){return s.stopPropagation()})}},r.prototype.__trgCustom=function(){var t=this,e=t.model,n=t.em,o=t.events;n.trigger(o.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},r.prototype.destroy=function(){var t,e,n;(t=this.globalRte)===null||t===void 0||t.destroy(),(n=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Kt.YZ)(this.toolbar)},r.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(t){var e=this.globalRte,n=this,o=n.em,s=n.pfx,u=n.actionbar,f=n.config,c=this.actions||I1([],f.actions,!0),h={actionbar:"".concat(s,"actionbar"),button:"".concat(s,"action"),active:"".concat(s,"active"),inactive:"".concat(s,"inactive"),disabled:"".concat(s,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new D1(o,t,{classes:h,actions:c,actionbar:u,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},r.prototype.add=function(t,e){var n;e===void 0&&(e={}),e.name=t,(n=this.globalRte)===null||n===void 0||n.addAction(e,{sync:!0})},r.prototype.get=function(t){var e,n;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(o){o.name==t&&(n=o)}),n},r.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},r.prototype.remove=function(t){var e,n=this.getAll(),o=this.get(t);if(o){var s=o.btn,u=n.indexOf(o);(e=s?.parentNode)===null||e===void 0||e.removeChild(s),n.splice(u,1)}return o},r.prototype.run=function(t){var e=this.globalRte,n=(0,k.isString)(t)?this.get(t):t;e&&n&&(n.result(e,n),e.updateActiveActions())},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var t=this,e=t.em,n=t.toolbar,o="px",s=e.Canvas,u=n.style,f=s.getTargetToElementFixed(this.lastEl,n,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(c){var h=f[c];(0,Ot.isDef)(h)&&(u[c]=(0,k.isString)(h)?h:(h||0)+o)})},r.prototype.enable=function(t,e,n){return Qc(this,void 0,void 0,function(){var o,s,u,f,c,h;return tf(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,o=this,s=o.customRte,u=o.em,f=o.events,c=t.getChildrenContainer(),this.toolbar.style.display="",[4,s?s.enable(c,e,n):this.initRte(c).enable(n)];case 1:return h=g.sent(),u&&(setTimeout(this.updatePosition.bind(this),0),u.off(ef,this.updatePosition,this),u.on(ef,this.updatePosition,this),u.trigger(f.enable,t,h)),this.model.set({currentView:t}),[2,h]}})})},r.prototype.getContent=function(t,e){return Qc(this,void 0,void 0,function(){var n,o;return tf(this,function(s){switch(s.label){case 0:return n=this.customRte,o=t.getChildrenContainer(),n&&e&&(0,k.isFunction)(n.getContent)?[4,n.getContent(o,e,{view:t})]:[3,2];case 1:return[2,s.sent()];case 2:return[2,o.innerHTML]}})})},r.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},r.prototype.disable=function(t,e){return Qc(this,arguments,void 0,function(n,o,s){var u,f,c,h,g,m;return s===void 0&&(s={}),tf(this,function(y){switch(y.label){case 0:return u={},f=this,c=f.em,h=f.events,g=this.customRte,g?[4,g.disable(n.getChildrenContainer(),o,bu(bu({},s),{view:n}))]:[3,2];case 1:return m=y.sent(),m&&(u=m),[3,3];case 2:o&&o.disable(),y.label=3;case 3:return this.hideToolbar(),c&&(c.off(ef,this.updatePosition,this),!s.fromMove&&c.trigger(h.disable,n,o)),this.model.unset("currentView"),[2,u]}})})},r})(wn);const R1=j1;var V1=function(){return{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]}};const F1=V1;var N1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Jr=function(){return Jr=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Jr.apply(this,arguments)},H1=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},zh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},ad=(function(i){N1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getDefaults=function(){return(0,k.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var n=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||n).replace(/ /g,"-"));var s=this.get("property");!this.get("id")&&this.set("id",s),!o&&this.set("name",(0,Ot.capitalize)(s).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,t,e)},r.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},r.prototype.__upTargets=function(t,e){var n,o=this;e===void 0&&(e={});var s=this.em,u=s.Styles,f=this.getName(),c=e.__clear,h=c?"":this.__getFullValue(e),g=this.__getParentProp(),m=this.changedAttributes(),y=(0,k.keys)(m).reduce(function(L,H){return L[H]=o.previous(H),L},{}),w=zh(zh([],(0,k.keys)(this.__getClearProps()),!0),["__p"],!1),C=(0,k.keys)(m),x=!e.__up&&!g&&(c||w.some(function(L){return C.indexOf(L)>=0})),E=this.get("onChange"),N={property:this,from:y,to:m,value:h,opts:e};u.__trgEv(u.events.propertyUpdate,N),E&&E(N),x&&this.__upTargetsStyle((n={},n[f]=h,n),e)},r.prototype.__upTargetsStyle=function(t,e){var n,o=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager");o?.addStyleTargets(Jr(Jr({},t),{__p:!!e.avoidStore}),e)},r.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,o=H1(e,["partial"]);return t.__p=!!(o.avoidStore||n),this.set(t,Jr(Jr({},o),{avoidStore:t.__p}))},r.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Jr(Jr({},e),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,o=n===void 0?!0:n,s=this.getId(),u=this.get("name")||this.get("label");return o&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(s)))||u},r.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,n=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():n},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,n=e&&this.getParentTarget(),o=this.get("value");return!(0,k.isUndefined)(o)&&o!==""&&!n},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(t){var e;t===void 0&&(t={});var n=this.getName(),o=t.camelCase?(0,Ot.camelCase)(n):n;return e={},e[o]=this.__getFullValue(t),e},r.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,k.isUndefined)(t)?this.get("defaults"):t)},r.prototype.upValue=function(t,e){e===void 0&&(e={});var n=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Jr(Jr({},t),{__clear:!0})),this},r.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},r.prototype.__getClearProps=function(){return{value:"",important:!1}},r.prototype.setValue=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var o=this.parseValue(t),s=!e;!s&&this.set({value:void 0},{avoidStore:s,silent:!0}),this.set(o,Jr({avoidStore:s},n))},r.prototype.setValueFromInput=function(t,e,n){n===void 0&&(n={}),this.setValue(t,e,Jr(Jr({},n),{fromInput:1}))},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n={value:t},o="!important",s=this.get("functionName")||"";if((0,k.isString)(t)&&t.indexOf(o)!==-1&&(n.value=t.replace(o,"").trim(),n.important=!0),!s&&!e.complete)return n;var u=[],f="".concat(n.value).trim(),c=f.indexOf("(")+1,h=s||f.substring(0,c-1);if(h&&(n.functionName=h),!s||f.indexOf("".concat(s,"("))===0){var g=f.lastIndexOf(")");u.push(c),g>=0&&u.push(g),n.value=String.prototype.substring.apply(f,u)}if(e.numeric){var m=parseFloat(n.value);n.unit=n.value.replace(m,""),n.value=m}return n},r.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,n=e.withDefault;return!this.hasValue()&&n?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(t,e){e===void 0&&(e={});var n=this.get("functionName"),o=this.getDefaultValue(),s=(0,k.isUndefined)(t)?this.get("value"):t,u=this.hasValue();if(s&&o&&s===o)return o;if(n&&u){var f=n==="url"?"'".concat(s.replace(/'|"/g,""),"'"):s;s="".concat(n,"(").concat(f,")")}return u&&this.get("important")&&!e.skipImportant&&(s="".concat(s," !important")),s||""},r.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,n=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},r.prototype.__checkVisibility=function(t){var e=t.target,n=t.component,o=t.sector,s=t.sectors,u=n||e;if(!u)return!1;var f=this.getId(),c=this.getName(),h=this.attributes,g=h.requires,m=h.requiresParent,y=h.toRequire,w=h.isVisible,C=u.get("unstylable"),x=u.get("stylable-require"),E=u.get("stylable");if((0,k.isFunction)(w))return!!w({property:this,sector:o,target:e,component:n});if((0,k.isArray)(E)&&(E=E.indexOf(c)>=0),(0,k.isArray)(C)&&(E=C.indexOf(c)<0),y&&(E=!e||x&&(x.indexOf(f)>=0||x.indexOf(c)>=0)),s&&g){var N=(0,k.keys)(g);s.forEach(function(nt){nt.getProperties().forEach(function(vt){if((0,k.includes)(N,vt.id)){var et=g[vt.id];E=E&&(0,k.includes)(et,vt.get("value"))}})})}if(m){var L=n&&n.parent(),H=L&&L.getEl();if(H){var rt=(0,Ot.hasWin)()?window.getComputedStyle(H):{};(0,k.each)(m,function(nt,vt){E=E&&rt[vt]&&(0,k.includes)(nt,rt[vt])})}else E=!1}return!!E},r})(Ht.Kx);const Xe=ad;ad.callParentInit=function(i,r,t,e){e===void 0&&(e={}),i.prototype.initialize.apply(r,[t,Jr(Jr({},e),{skipInit:1})])};ad.callInit=function(i,r,t){t===void 0&&(t={}),!t.skipInit&&i.init(r,t)};var U1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ya=function(){return ya=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ya.apply(this,arguments)},Kh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Lg=function(i){return i==="integer"||i==="number"},B1=(function(i){U1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return ya(ya({},Xe.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Xe.callParentInit(Xe,this,t,e);var n=this.em,o=new ld(this.get("properties")||[],{em:n,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),Xe.callInit(this,t,e)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return Kh([],this.get("properties").models,!0)},r.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},r.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(t){var e=t===void 0?{}:t,n=e.byName;return this.getProperties().reduce(function(o,s){var u=n?s.getName():s.getId();return o[u]="".concat(s.__getFullValue()),o},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var n=this.getName(),o=this.__getJoin(),s=this.get("toStyle"),u=this.getValues(),f={};if(s)f=s(u,{join:o,name:n,property:this});else if(u=this.getValues({byName:!0}),this.isDetached())f=u;else{var c=this.getProperties().map(function(h){return h.__getFullValue({withDefault:1})}).filter(Boolean).join(o);f=(e={},e[n]=c,e)}return this.isDetached()?f[n]="":(f[n]=f[n]||"",f=ya(ya({},f),this.getProperties().reduce(function(h,g){return h[g.getName()]="",h},{}))),t.camelCase?Object.keys(f).reduce(function(h,g){return h[(0,Ot.camelCase)(g)]=f[g],h},{}):f},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},r.prototype.__upTargetsStyleProps=function(t,e){var n;t===void 0&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var s=e.getName();o=(n={},n[s]=o[s],n)}this.__upTargetsStyle(o,t)},r.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Xe.prototype._up.call(this,t,e),this},r.prototype.getStyle=function(t){return this.getStyleFromProps(t)},r.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return vf(e)},r.prototype.__getJoin=function(){var t=this.get("join");return(0,k.isString)(t)?t:this.get("separator")},r.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),n=this.getProperties(),o=n.map(function(u){return u.getName()}),s=Kh([e],o,!0);return s.some(function(u){return!(0,k.isUndefined)(t[u])&&t[u]!==""})},r.prototype.__splitValue=function(t,e){return vf(t).split(e).map(function(n){return n.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(t,e,n){var o=t[e];return this.__splitValue(o||"",n)},r.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var n=e===void 0?{}:e,o=n.byName,s=this.getProperties(),u=s.length===4&&s.every(function(h){return Lg(h.getType())}),f=this.__splitValue(t,this.getSplitSeparator()),c={};return s.forEach(function(h,g){var m=f[g],y=(0,k.isUndefined)(m)?"":m;if(u){var w=f.length;y=f[g]||f[g%w+(w!=1&&w%2?1:0)]||y}var C=o?h.getName():h.getId();c[C]=y||""}),c},r.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var n=e.byName,o=this.getName(),s=this.getProperties(),u=this.getSplitSeparator(),f=this.get("fromStyle"),c=f?f(t,{property:this,name:o,separator:u}):{};if(!f){var h=t[o];c=this.__getSplitValue(h||"",{byName:n}),s.forEach(function(g){var m=t[g.getName()],y=n?g.getName():g.getId();!(0,k.isUndefined)(m)&&m!==""&&(c[y]=m)})}return c},r.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(o){var s=t[o.getId()];o.__getFullValue()!==s&&o.upValue(s,e)});var n=(0,k.keys)(t).map(function(o){return t[o]}).join(" ");this.set("value",n,{silent:!0})},r.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),Xe.prototype.clear.call(this),this},r.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},r})(Xe);const oa=B1;var W1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),pn=function(){return pn=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},pn.apply(this,arguments)},z1=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},K1=/,(?![^\(]*\))/,G1=/\s(?![^(]*\))/,$1=(function(i){W1(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return pn(pn({},oa.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),oa.callParentInit(oa,this,t,e);var n=this.get("layers"),o=new Tl(n,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),oa.callInit(this,t,e)},Object.defineProperty(r.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),r.prototype.getLayers=function(){return this.layers.models},r.prototype.hasLayers=function(){return this.getLayers().length>0},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},r.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},r.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},r.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},r.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var n=this.layers,o=t?t.getIndex():-1;o>=0&&(0,k.isNumber)(e)&&e>=0&&e<n.length&&o!==e&&(this.removeLayer(t),n.add(t,{at:e}))},r.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={};this.getProperties().forEach(function(s){var u=s.getId(),f=t[u];n[u]=(0,k.isUndefined)(f)?s.getDefaultValue():f});var o=this.layers.push({values:n},e);return o},r.prototype.removeLayer=function(t){return this.layers.remove(t)},r.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},r.prototype.getLayerLabel=function(t){var e="";if(t){var n=this.get("layerLabel"),o=t.getValues(),s=t.getIndex();if(n)e=n(t,{index:s,values:o,property:this});else{var u=[];this.getProperties().map(function(f){u.push(o[f.getId()])}),e=u.filter(Boolean).join(" ")}}return e},r.prototype.getStyleFromLayer=function(t,e){var n;e===void 0&&(e={});var o=this.__getJoin(),s=this.__getJoinLayers(),u=this.get("toStyle"),f=this.getName(),c=t.getValues(),h;if(u)h=u(c,{join:o,joinLayers:s,name:f,layer:t,property:this});else{var g=this.getProperties().map(function(m){var y=m.getName(),w=c[m.getId()],C=(0,k.isUndefined)(w)?m.getDefaultValue():w;if(e.number&&Lg(m.getType())){var x=m.parseValue(w,e.number);C="".concat(x.value).concat(x.unit)}return{name:y,value:C}});h=this.isDetached()?g.reduce(function(m,y){return m[y.name]=y.value,m},{}):(n={},n[this.getName()]=g.map(function(m){return m.value}).join(o),n)}return e.camelCase?Object.keys(h).reduce(function(m,y){return m[(0,Ot.camelCase)(y)]=h[y],m},{}):h},r.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var n={},o=this.get("preview");return o&&(n=this.getStyleFromLayer(t,e)),n},r.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,k.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},r.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},r.prototype.__upProperties=function(t,e){var n;e===void 0&&(e={});var o=this.getSelectedLayer();o&&(o.upValues((n={},n[t.getId()]=t.__getFullValue(),n)),!e.__up&&this.__upTargetsStyleProps(e))},r.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},r.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return Xe.prototype.__upTargets.call(this,t,e)},r.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},r.prototype.__upTargetsStyle=function(t,e){return Xe.prototype.__upTargetsStyle.call(this,t,e)},r.prototype.__upSelected=function(t,e){var n=t===void 0?{}:t,o=n.noEvent;e===void 0&&(e={});var s=this.em.Styles,u=this.getSelectedLayer(),f=u?.getValues();f&&this.getProperties().forEach(function(c){var h,g=(h=f[c.getId()])!==null&&h!==void 0?h:"";c.__getFullValue()!==g&&c.upValue(g,pn(pn({},e),{__up:!0}))}),!o&&s.__trgEv(s.events.layerSelect,{property:this})},r.prototype._up=function(t,e){e===void 0&&(e={});var n=t.__layers,o=n===void 0?[]:n,s=z1(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),Xe.prototype._up.call(this,s,e),this},r.prototype.__setLayers=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=this.layers,o=t.map(function(s){return{values:s}});n.length===o.length?o.map(function(s,u){var f;return(f=n.at(u))===null||f===void 0?void 0:f.upValues(s.values)}):n.reset(o),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(K1).map(function(o){return o.trim()}).map(function(o){return e.__parseLayer(o)}).filter(Boolean),n},r.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),n=t.split(G1),o=this.getProperties();return e?e({value:t,values:n}):o.reduce(function(s,u,f){var c=n[f];return s[u.getId()]=(0,k.isUndefined)(c)?u.getDefaultValue():c,s},{})},r.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var n=this.getName(),o=this.getProperties(),s=this.getLayerSeparator(),u=this.attributes.fromStyle,f=u?u(t,{property:this,name:n,separatorLayers:s}):[];if(!u){var c=this.__splitStyleName(t,n,s).map(function(h){return h.split(e.getSplitSeparator())}).map(function(h){var g={};return o.forEach(function(m,y){var w=h[y];g[m.getId()]=(0,k.isUndefined)(w)?m.getDefaultValue():w}),g});o.forEach(function(h){var g=h.getId();e.__splitStyleName(t,h.getName(),s).map(function(m){var y;return y={},y[g]=m||h.getDefaultValue(),y}).forEach(function(m,y){c[y]=c[y]?pn(pn({},c[y]),m):m})}),f=c}return(0,k.isArray)(f)?f:[f]},r.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},r.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var n={},o=this.getName(),s=this.getLayers(),u=this.getProperties(),f=s.map(function(h){return e.getStyleFromLayer(h,t)});if(f.forEach(function(h){(0,k.keys)(h).map(function(g){n[g]||(n[g]=[]),n[g].push(h[g])})}),(0,k.keys)(n).map(function(h){n[h]=n[h].join(e.__getJoinLayers())}),this.isDetached())n[o]="",!s.length&&u.map(function(h){n[h.getName()]=""});else{var c=u.reduce(function(h,g){return h[g.getName()]="",h},{});n[o]=n[o]||"",n=pn(pn({},n),c)}return pn(pn({},n),t.__clear?{}:this.getEmptyValueStyle())},r.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.getEmptyValueStyle({force:!0}),n=(0,k.keys)(e);return!!n.length&&n.every(function(o){return e[o]===t[o]})},r.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.attributes.emptyValue;if(e&&(!this.hasLayers()||t.force)){var n=this.getName(),o=this.getProperties(),s=(0,k.isString)(e)?e:e({property:this});if((0,k.isString)(s)){var u={};return this.isDetached()?o.map(function(f){u[f.getName()]=s}):u[n]=s,u}else return s}else return{}},r.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,k.isString)(e)?e:t)},r.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return vf(t[this.getName()])},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,n=e&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!n},r.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(pn(pn({},t),{__clear:!0})),Xe.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r.prototype.__getLayers=function(){return this.layers},r})(oa);const q1=$1;var Y1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Cu=function(){return Cu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Cu.apply(this,arguments)},X1=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},J1=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},rf="data-clear-style",Z1=(function(i){Y1(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this;(0,k.bindAll)(e,"__change","__updateStyle");var n=t.config||{},o=n.em;e.config=n,e.em=o,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var s=e.model;s.view=e,e.onValueChange=(0,k.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,k.debounce)(e.updateStatus.bind(e),0),e.listenTo(s,"destroy remove",e.remove),e.listenTo(s,"change:visible",e.updateVisibility),e.listenTo(s,"change:name change:className change:full",e.render),e.listenTo(s,"change:value",e.onValueChange),e.listenTo(s,"change:parentTarget",e.updateStatus),e.listenTo(o,"change:device",e.onValueChange);var u=e.init&&e.init.bind(e);return u&&u(),e}return r.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(rf,"]")]="clear",t},r.prototype.template=function(t){var e=this,n=e.pfx,o=e.ppfx;return`
      <div class="`.concat(n,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(t){var e=this,n=e.pfx,o=e.em,s=t.parent,u=t.attributes,f=u.icon,c=f===void 0?"":f,h=u.info,g=h===void 0?"":h,m=o?.getConfig().icons,y=m?.close||"";return`
      <span class="`.concat(n,"icon ").concat(c,'" title="').concat(g,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(s?"":'<div class="'.concat(n,'clear" style="display: none" ').concat(rf,">").concat(y,"</div>"),`
    `)},r.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var t=this;return Ht.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var t,e=this,n=e.model,o=e.pfx,s=e.ppfx,u=e.config,f="".concat(s,"four-color"),c="".concat(s,"color-warn"),h=this.$el.children(".".concat(o,"label")),g=this.getClearEl(),m=g?g.style:{};h.removeClass("".concat(f," ").concat(c)),m.display="none",n.hasValue({noParent:!0})&&u.highlightChanged?(h.addClass(f),u.clearProperties&&(m.display="")):n.hasValue()&&u.highlightComputed&&h.addClass(c),(t=this.parent)===null||t===void 0||t.updateStatus()},r.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(rf,"]"))),this.clearEl},r.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},r.prototype.onValueChange=function(t,e,n){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(t){var e=this.model,n=(0,k.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)},r.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},r.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(Cu(Cu({},this._getClbOpts()),{value:t}))},r.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,J1([this._getClbOpts()],t,!1))},r.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var n=e.complete,o=e.partial;X1(e,["complete","partial"]);var s=this.model,u=n!==!1&&o!==!0;(0,Ot.isObject)(t)?s.__upTargetsStyle(t,{avoidStore:!u}):s.upValue(t,{partial:!u})},r.prototype._getClbOpts=function(){var t=this,e=t.model,n=t.el,o=t.createdEl;return{el:n,createdEl:o,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,o=t.el,s=t.$el,u=n.getName(),f=n.getType(),c=n.get("className")||"",h="".concat(e,"property"),g=f==="number"?"".concat(e).concat(f," ").concat(e,"integer"):"".concat(e).concat(f);this.createdEl&&this.__destroyFn(this._getClbOpts()),s.empty().append(this.template(n)),s.find("[data-sm-label]").append(this.templateLabel(n));var m=this.create&&this.create.bind(this);this.createdEl=m&&m(this._getClbOpts()),s.find("[data-sm-fields]").append(this.createdEl||this.templateInput(n)),o.className="".concat(h," ").concat(g," ").concat(h,"__").concat(u," ").concat(c).trim(),o.className+=n.isFull()?" ".concat(h,"--full"):"";var y=this.onRender&&this.onRender.bind(this);return y&&y(),this.setValue(n.getValue()),this},r.prototype.onRender=function(){},r})(Ht.Ss);const To=Z1;var Q1=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),tP=(function(i){Q1(r,i);function r(t){var e=i.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var n=e.collection;return e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.render),e}return r.prototype.addTo=function(t,e,n){this.add(t,null,n)},r.prototype.add=function(t,e,n){n===void 0&&(n={});var o=this,s=o.parent,u=o.config,f=e||this.el,c=new t.typeView({model:t,config:u});s&&(c.parent=s),c.render();var h=c.el;this.properties.push(c),(0,Kt.Sc)(f,h,n.at)},r.prototype.remove=function(){return Ht.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},r.prototype.render=function(){var t=this,e=this,n=e.$el,o=e.pfx;this.clearItems();var s=document.createDocumentFragment();return this.collection.forEach(function(u){return t.add(u,s)}),n.empty(),n.append(s),n.attr("class","".concat(o,"properties")),this},r})(Ht.Ss);const sd=tP;var eP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Su=function(){return Su=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Su.apply(this,arguments)},rP=(function(i){eP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),To.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get("properties");if(n.length&&!this.props){var o=e.isDetached(),s=new sd({config:Su(Su({},this.config),{highlightComputed:o,highlightChanged:o}),collection:n,parent:this});s.render(),this.$el.find("#".concat(t,"input-holder")).append(s.el),this.props=s}},r.prototype.clearCached=function(){To.prototype.clearCached.apply(this,arguments),delete this.props},r})(To);const ds=rP;var nP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),oP=(function(i){nP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.em,s=o?.getConfig().icons,u=s?.close||"",f=s?.move||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(n,`no-touch-actions" data-move-layer>
          `).concat(f,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(u,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},r.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort([{element:this.el}])},r.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),o=t.getStylePreview({number:{min:-3,max:3}}),s=(0,k.keys)(o).map(function(u){return"".concat(u,":").concat(o[u])}).join(";");n.setAttribute("style",s)}},r.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,o=e.model,s=e.propertyView,u=this.getPropertiesWrapper(),f=o.isSelected();u.style.display=f?"":"none",this.$el[f?"addClass":"removeClass"]("".concat(n,"active")),f&&u.appendChild((t=s.props)===null||t===void 0?void 0:t.el)},r.prototype.render=function(){var t=this,e=t.el,n=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),o.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r})(Ht.Ss);const iP=oP;var aP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),sP=(function(i){aP(r,i);function r(t){var e=i.call(this,t)||this,n=e.collection,o=t.config||{},s=o.em,u=o.stylePrefix||"",f=o.pStylePrefix||"";e.config=o,e.pfx=u,e.ppfx=f,e.propertyView=t.propertyView,e.className="".concat(u,"layers ").concat(f,"field"),e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.reset),e.items=[];var c=e.createPlaceholder(o.pStylePrefix);e.$el.append(c);var h=s?.Utils;return e.sorter=h?new h.StyleManagerSorter({em:s,containerContext:{container:e.el,containerSel:".".concat(u,"layers"),itemSel:".".concat(u,"layer"),pfx:o.pStylePrefix,document,placeholderElement:c},dragBehavior:{dragDirection:Pi.A.Vertical,nested:!1}}):void 0,n.view=e,e.$el.data("model",n),e.$el.data("collection",n),e}return r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var o=e||null,s=this,u=s.propertyView,f=s.config,c=s.sorter,h=s.$el,g=new iP({model:t,config:f,sorter:c,propertyView:u}),m=g.render().el;if(this.items.push(g),o)o.appendChild(m);else if(typeof n<"u"){var y="before";h.children().length===n&&(n--,y="after"),n<0?h.append(m):h.children().eq(n)[y](m)}else h.append(m);return m},r.prototype.reset=function(t,e){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),Ht.Ss.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},r.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(o){return t.addToCollection(o,n)}),e.append(n),e.attr("class",this.className),this},r.prototype.createPlaceholder=function(t){var e=document.createElement("div"),n=document.createElement("div");return this.el.parentNode,e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},r})(Ht.Ss);const lP=sP;var uP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),_a=function(){return _a=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},_a.apply(this,arguments)},cP=(function(i){uP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.events=function(){return _a(_a({},ds.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var t=this,e=t.pfx,n=t.em,o=n?.getConfig().icons,s=o?.plus||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(s,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),ds.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){ds.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var t=this,e=t.model,n=t.el,o=t.config,s=e.get("properties");if(s.length&&!this.props){var u=new sd({config:_a(_a({},o),{highlightComputed:!1,highlightChanged:!1}),collection:s,parent:this});u.render();var f=new lP({collection:e.layers,config:o,propertyView:this});f.render();var c=n.querySelector("[data-layers-wrapper]");c.appendChild(f.el),this.props=u,this.layersView=f}},r})(ds);const fP=cP;var dP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),xu=function(){return xu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},xu.apply(this,arguments)},pP=(function(i){dP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.events=function(){return xu(xu({},To.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var t,e=this,n=e.pfx,o=e.em,s=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,u=s?.close;return`
      <div class="`.concat(n,"field ").concat(n,`file">
        <div id='`).concat(n,`input-holder'>
          <div class="`).concat(n,`btn-c">
            <button class="`).concat(n,'btn" id="').concat(n,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(n,'preview-box" class="').concat(n,`preview-file" data-preview-box>
          <div id="`).concat(n,'preview-file" class="').concat(n,`preview-file-cnt" data-preview></div>
          <div id="`).concat(n,'close" class="').concat(n,'preview-file-close" data-clear-asset>').concat(u,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(t){var e=this,n=e.model,o=e.el,s=n.getDefaultValue(),u=o.querySelector("[data-preview-box]"),f=o.querySelector("[data-preview]");u.style.display=!t||t===s?"none":"",f.style.backgroundImage=t||n.getDefaultValue()},r.prototype.openAssetManager=function(){var t=this,e,n=(e=this.em)===null||e===void 0?void 0:e.Assets;n?.open({select:function(o,s){var u=(0,k.isString)(o)?o:o.get("src");t.model.upValue(u,{partial:!s}),s&&n.close()},types:["image"],accept:"image/*"})},r})(To);const hP=pP;var vP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),gP=(function(i){vP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.templateInput=function(t){return""},r.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},r.prototype.setValue=function(t){},r.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,o=t.el;if(!this.inputInst){var s=n.input;s.ppfx=e,s.render();var u=o.querySelector(".".concat(e,"fields"));u.appendChild(s.el),this.input=s.inputEl.get(0),this.inputInst=s}},r.prototype.clearCached=function(){To.prototype.clearCached.apply(this,arguments),this.inputInst=null},r})(To);const So=gP;var mP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),yP=(function(i){mP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var t=this;So.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(n){return t[n]=null}),this},r.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},r.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,o=e.model,s=e.em,u=e.el,f=new ig({target:s,model:o,ppfx:n,onChange:this.__handleChange}),c=f.render();u.querySelector(".".concat(n,"fields")).appendChild(c.el),this.input=(t=c.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=c}},r})(So);const _P=yP;var wP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Ou=function(){return Ou=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Ou.apply(this,arguments)},Gh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},bP=(function(i){wP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return Ou(Ou({},Xe.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},r.prototype.getOption=function(t){var e=this,n=(0,Ot.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===n})[0]||null},r.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},r.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(Gh(Gh([],e,!0),[t],!1))}return this},r.prototype.getOptionId=function(t){return(0,Ot.isDef)(t.id)?t.id:t.value},r.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var o=e.locale,s=o===void 0?!0:o,u=((0,k.isString)(t)?this.getOption(t):t)||{},f=this.getOptionId(u),c=u.label||u.name||f,h=e.property||this.getId();return s&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.options.".concat(h,".").concat(f)))||c},r.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Xe.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r})(Xe);const Kf=bP;var CP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),SP=(function(i){CP(r,i);function r(t){var e=i.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return r.prototype.templateInput=function(){var t=this,e=t.pfx,n=t.ppfx;return`
      <div class="`.concat(n,"field ").concat(n,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(n,`sel-arrow">
          <div class="`).concat(n,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var o=[];n.forEach(function(u){var f=e.getOptionId(u),c=e.getOptionLabel(f),h=u.style?u.style.replace(/"/g,"&quot;"):"",g=h?'style="'.concat(h,'"'):"",m=f.replace(/"/g,"&quot;");o.push('<option value="'.concat(m,'" ').concat(g,">").concat(c,"</option>"))});var s=this.el.querySelector("#".concat(t,"input-holder"));s.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=s.firstChild}},r.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),o=e.getOptions()[0],s=o?e.getOptionId(o):"";n&&(n.value=t||s)},r})(To);const Ig=SP;var xP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Tu=function(){return Tu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Tu.apply(this,arguments)},OP=(function(i){xP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return Tu(Tu({},Kf.getDefaults()),{full:1})},r})(Kf);const TP=OP;var PP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),EP=(function(i){PP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},r.prototype.onRender=function(){var t=this,e=t.pfx,n=t.ppfx,o=this.model,s="".concat(n,"radio-item-label"),u=o.getName(),f=o.getOptions(),c="".concat(e,"radio ").concat(e,"radio-").concat(u),h=o.cid;if(!this.input){var g=[];f.forEach(function(y){var w=y.className?"".concat(y.className," ").concat(e,"icon ").concat(s):"",C=o.getOptionId(y),x="".concat(u,"-").concat(C,"-").concat(h),E=w?"":o.getOptionLabel(C),N=y.title?'title="'.concat(y.title,'"'):"",L=o.getValue()===C?"checked":"";g.push(`
          <div class="`.concat(n,`radio-item">
            <input type="radio" class="`).concat(c,'" id="').concat(x,'" name="').concat(u,"-").concat(h,'" value="').concat(C,'" ').concat(L,`/>
            <label class="`).concat(w||s,'" ').concat(N,' for="').concat(x,'">').concat(E,`</label>
          </div>
        `))});var m=this.el.querySelector(".".concat(n,"field"));m.innerHTML='<div class="'.concat(n,'radio-items">').concat(g.join(""),"</div>"),this.input=m.firstChild}},r.prototype.__setValueInput=function(t){var e,n=this.model,o=t||n.getDefaultValue(),s=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(o,'"]'));s&&(s.checked=!0)},r})(Ig);const AP=EP;var kP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),bi=function(){return bi=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},bi.apply(this,arguments)},MP=(function(i){kP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return bi(bi({},Xe.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Xe.callParentInit(Xe,this,t,e);var n=this.get("unit"),o=this.getUnits();this.input=(0,Ot.hasWin)()?new sg({model:this}):void 0,o.length&&!n&&this.set("unit",o[0],{silent:!0}),Xe.callInit(this,t,e)},r.prototype.__getClearProps=function(){return bi(bi({},Xe.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n=Xe.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(n.value,bi({deepCheck:1},e)),s=o.value,u=o.unit;return n.value=s,n.unit=u,n},r.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),n=(0,k.isUndefined)(t)?"":"".concat(t),o=!(0,k.isUndefined)(e)&&n?e:"",s="".concat(n).concat(o);return Xe.prototype.getFullValue.apply(this,[s])},r})(Xe);const Pu=MP;var DP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Eu=function(){return Eu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Eu.apply(this,arguments)},LP=(function(i){DP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.defaults=function(){return Eu(Eu({},Pu.getDefaults()),{showInput:1})},r})(Pu);const IP=LP;var jP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Au=function(){return Au=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Au.apply(this,arguments)},RP=(function(i){jP(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.events=function(){return Au(Au({},So.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(n.value),So.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){So.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){So.prototype.clearCached.apply(this,arguments),delete this.slider},r})(So);const VP=RP;var FP=Ht.pM.extend(vg),NP=FP.extend({extendViewApi:1,init:function(){var i=this,r=i.opts,t=i.em,e=r.module||t?.get("StyleManager");e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:q1,view:fP,isType:function(i){if(i&&i.type=="stack")return i}},{id:"composite",model:oa,view:ds,isType:function(i){if(i&&i.type=="composite")return i}},{id:"file",model:Xe,view:hP,isType:function(i){if(i&&i.type=="file")return i}},{id:"color",model:Xe,view:_P,isType:function(i){if(i&&i.type=="color")return i}},{id:"select",model:Kf,view:Ig,isType:function(i){if(i&&i.type=="select")return i}},{id:"radio",model:TP,view:AP,isType:function(i){if(i&&i.type=="radio")return i}},{id:"slider",model:IP,view:VP,isType:function(i){if(i&&i.type=="slider")return i}},{id:"integer",model:Pu,view:So,isType:function(i){if(i&&i.type=="integer")return i}},{id:"number",model:Pu,view:So,isType:function(i){if(i&&i.type=="number")return i}},{id:"base",model:Xe,view:To,isType:function(i){return i.type="base",i}}]});const ld=NP;var Jo=function(){return Jo=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Jo.apply(this,arguments)},HP=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},gi=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Or=function(i){return i.map(function(r){return{id:r}})},UP=(function(){function i(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",t=["flex-start","flex-end","center"],e=gi(gi([],t,!0),["baseline","stretch"],!1);this.optsBgSize=Or(["auto","cover","contain"]),this.optsBgAttach=Or(["scroll","fixed","local"]),this.optsBgRepeat=Or(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=Or(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=Or(["visible","hidden","scroll","auto"]),this.optsDir=Or(["row","row-reverse","column","column-reverse"]),this.opstDisplay=Or(["block","inline","inline-block","flex","none"]),this.optsTransitFn=Or(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=Or(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=Or(["none","left","right"]),this.optsPos=Or(["static","relative","absolute","fixed"]),this.optsTextAlign=Or(["left","center","right","justify"]),this.optsFlexAlign=Or(e),this.optsJustCont=Or(gi(gi([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=Or(gi(gi([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=Or(gi(["auto"],e,!0)),this.optsTransitProp=Or(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=Or(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=Or(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(n){return{id:n,label:n.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return i.prototype.__sub=function(r){var t=this;return function(){return r.map(function(e){if((0,k.isString)(e))return t.get(e);var n=e.extend,o=HP(e,["extend"]);return Jo(Jo({},t.get(n)),o)})}},i.prototype.init=function(){var r=this,t=this,e=t.fixedValues,n=t.requireFlex,o=t.typeNumber;this.props={};var s=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:n},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:n}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:n},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:n},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(u,f){var c=f.values,h=c["box-shadow-h"],g=c["box-shadow-v"],m=c["box-shadow-blur"],y=c["box-shadow-spread"];return"".concat(h," ").concat(g," ").concat(m," ").concat(y)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(u,f){var c=f.values,h=c["text-shadow-h"],g=c["text-shadow-v"],m=c["text-shadow-blur"];return"".concat(h," ").concat(g," ").concat(m)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(u,f){var c=f.values,h=c["background-repeat-sub"]||"",g=c["background-position-sub"]||"",m=c["background-attachment-sub"]||"",y=c["background-size-sub"]||"";return[h,g,m,y].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(u,f){var c=f.property,h=f.name,g=u[h]||"",m=c.getLayerSeparator();return g?g.split(m).map(function(y){var w=c.__parseFn(y),C=w.name,x=w.value;return{"transform-type":C,"transform-value":x}}):[]},toStyle:function(u,f){var c,h=f.name;return c={},c[h]="".concat(u["transform-type"],"(").concat(u["transform-value"],")"),c},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(u){var f=u.property,c=u.to;if(c.value){var h=f.getOption(),g=Jo({},h.propValue||{}),m=f.getParent().getProperty("transform-value"),y=m.getUnit();(!y||g?.units.indexOf(y)<0)&&(g.unit=g?.units[0]||""),m.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return s.forEach(function(u){var f=u[0],c=u[1],h=u[2];r.add(f,c||{},{from:h})}),this},i.prototype.add=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.from||"",o=this.props[n||r]||{},s=Jo(Jo(Jo({},o),{property:r}),t);return s.properties&&(0,k.isFunction)(s.properties)&&(s.properties=s.properties()),this.props[r]=s,s},i.prototype.get=function(r){return this.props[r]},i.prototype.build=function(r){var t=this,e=[],n=(0,k.isString)(r)?[r]:r;return n.forEach(function(o){e.push(t.get(o)||{property:o})}),e},i})();const BP=UP;var WP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),ku=function(){return ku=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},ku.apply(this,arguments)},zP=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},KP=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},GP=(function(i){WP(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this,t)||this,o=e.em;n.em=o;var s=t||{},u=n.buildProperties(s.buildProps),f=n.get("name")||"",c=[];!n.get("id")&&n.set("id",f.replace(/ /g,"_").toLowerCase()),u?c=n.extendProperties(u):c=n.get("properties").map(function(g){return(0,k.isString)(g)?n.buildProperties(g)[0]:g}).filter(Boolean),c=c.map(function(g){return n.checkExtend(g)});var h=new ld(c,{em:o});return h.sector=n,n.set("properties",h),n}return r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},r.prototype.setName=function(t){return this.set("name",t)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(t){return this.set("open",t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.properties,n=e.models?KP([],e.models,!0):e;return n.filter(function(o){var s=!0;if(t.withValue&&(s=o.hasValue({noParent:!0})),t.withParentValue){var u=o.hasValue({noParent:!0});s=!u&&o.hasValue()}return s})},r.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},r.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},r.prototype.extendProperties=function(t,e,n){n===void 0&&(n=!1);for(var o=t.length,s=e||this.get("properties"),u=this.get("extendBuilded"),f=[],c=0,h=s.length;c<h;c++){for(var g=s[c],m=0,y=0;y<o;y++){var w=t[y];if(g.property==w.property||g.id==w.property){var C=g.properties;C&&C.length&&(g.properties=this.extendProperties(w.properties||[],C,1)),t[y]=u?(0,k.extend)(w,g):g,f[y]=t[y],m=1;continue}}m||(t.push(g),f.push(g))}return n?f.filter(function(x){return x}):t},r.prototype.checkExtend=function(t){var e=((0,k.isString)(t)?{extend:t}:t)||{},n=e.extend,o=zP(e,["extend"]);return n?ku(ku({},this.buildProperties([n])[0]||{}),o):t},r.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var o=(e=this.em)===null||e===void 0?void 0:e.Styles.builtIn;return o?.build(n)},r})(Ht.Kx);const jg=GP;var $P=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Mu=function(){return Mu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Mu.apply(this,arguments)},qP=(function(i){$P(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initialize=function(t,e){e===void 0&&(e={});var n=e.module,o=e.em;this.em=o,this.module=n,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(t,e){e===void 0&&(e={});var n=e.collection.em;return new jg(t,Mu(Mu({},e),{em:n}))},r.prototype.onReset=function(t,e){e===void 0&&(e={});var n=e.previousModels||[];n.forEach(function(o){return o.get("properties").reset()})},r})(Ht.pM);const YP=qP;var Du;(function(i){i.sectorAdd="style:sector:add",i.sectorRemove="style:sector:remove",i.sectorUpdate="style:sector:update",i.propertyAdd="style:property:add",i.propertyRemove="style:property:remove",i.propertyUpdate="style:property:update",i.target="style:target",i.layerSelect="style:layer:select",i.custom="style:custom",i.all="style"})(Du||(Du={}));var XP=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),JP=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i},ZP=(function(i){XP(r,i);function r(t){var e=i.call(this,t)||this,n=t.config||{},o=e.model,s=n.em;return e.config=n,e.em=s,e.pfx=n.stylePrefix||"",e.listenTo(o,"destroy remove",e.remove),e.listenTo(o,"change:open",e.updateOpen),e.listenTo(o,"change:visible",e.updateVisibility),e}return r.prototype.template=function(t){var e,n=t.pfx,o=t.label,s=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,u=s?.caret||"",f="".concat(n,"sector-");return gn($h||($h=JP([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),f,f,u,f,o)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,o=t.pfx,s=n.isOpen();e[s?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=s?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var t=this,e=t.$el,n=t.pfx;return e.find(".".concat(n,"properties")).get(0)},r.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},r.prototype.renderProperties=function(){var t=this,e=t.model,n=t.config,o=e.get("properties");if(o){var s=new sd({collection:o,config:n});this.$el.append(s.render().el)}},r.prototype.render=function(){var t=this,e=t.pfx,n=t.model,o=t.$el,s=n.getId(),u=n.getName();return o.html(this.template({pfx:e,label:u})),this.renderProperties(),o.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(s," no-select")),this.updateOpen(),this},r})(Ht.Ss);const QP=ZP;var $h,tE=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),eE=(function(i){tE(r,i);function r(t){t===void 0&&(t={});var e=i.call(this,t)||this,n=t.module,o=t.config,s=e.collection;return e.pfx=o?.stylePrefix||"",e.ppfx=o?.pStylePrefix||"",e.config=o,e.module=n,e.listenTo(s,"add",e.addTo),e.listenTo(s,"reset",e.render),e}return r.prototype.remove=function(){var t=this;return Ht.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},r.prototype.addTo=function(t,e,n){n===void 0&&(n={}),this.addToCollection(t,null,n)},r.prototype.addToCollection=function(t,e,n){n===void 0&&(n={});var o=this,s=o.config,u=o.el,f=e||u,c=new QP({model:t,config:s}).render().el;return(0,Kt.Sc)(f,c,n.at),c},r.prototype.render=function(){var t=this,e=this,n=e.$el,o=e.pfx,s=e.ppfx;n.empty();var u=document.createDocumentFragment();return this.collection.each(function(f){return t.addToCollection(f,u)}),n.append(u),n.addClass("".concat(o,"sectors ").concat(s,"one-bg ").concat(s,"two-color")),this},r})(Ht.Ss);const rE=eE;var nE=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Zo=function(){return Zo=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Zo.apply(this,arguments)},qh=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},Yh=function(i){return i||i===0},oE=(function(i){nE(r,i);function r(t){var e=i.call(this,t,"StyleManager",new YP([],{em:t}),Du,F1())||this;e.events=Du,e.Sector=jg,e.storageKey="",(0,k.bindAll)(e,"__clearStateTarget");var n=e.events,o=e.config,s=o.pStylePrefix;s&&(o.stylePrefix=s+o.stylePrefix),e.builtIn=new BP,e.properties=new ld([],{em:t,module:e}),e.sectors=e.all;var u=new Ht.Kx({targets:[]});e.model=u;var f=je.I.update,c="component:toggled ".concat(f,":classes change:state change:device frame:resized selector:type");e.upAll=(0,k.debounce)(function(){return e.__upSel()},0),u.listenTo(t,c,e.upAll),u.listenTo(t,"component:toggled",e.__clearStateTarget);var h=(0,k.debounce)(function(){e.__upProps(),e.__trgCustom()},0);u.listenTo(t,"styleable:change undo redo",h);var g=(0,k.debounce)(function(){return e.__trgCustom()},0);return u.listenTo(t,"".concat(n.layerSelect," ").concat(n.target),g),u.on("change:lastTarget",function(){return t.trigger(n.target,e.getSelected())}),e}return r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.em).trigger.apply(e,qh([t],n,!1))},r.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&e?.skip(function(){e.Css.remove(n),t.model.set({stateTarget:null})})},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(t,e,n){n===void 0&&(n={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,n)),o},r.prototype.getSector=function(t,e){e===void 0&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},r.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,n=e&&e.models?t.array?qh([],e.models,!0):e:[];return t.visible?n.filter(function(o){return o.isVisible()}):n},r.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},r.prototype.addProperty=function(t,e,n){n===void 0&&(n={});var o=this.getSector(t,{warn:!0}),s;return o&&(s=o.addProperty(e,n)),s},r.prototype.getProperty=function(t,e){var n=this.getSector(t,{warn:!0}),o;return n&&(o=n.properties.filter(function(s){return s.get("property")===e||s.get("id")===e})[0]),o},r.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},r.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},r.prototype.select=function(t,e){var n=this;e===void 0&&(e={});var o=this.em,s=(0,k.isArray)(t)?t:[t],u=e.stylable,f=o.Css,c=[];s.filter(Boolean).forEach(function(C){var x=C;if((0,k.isString)(C)){var E=f.getRule(C)||f.setRule(C);!(0,k.isUndefined)(u)&&E.set({stylable:u}),x=E}c.push(x)});var h=e.component||c.filter(function(C){return(0,Ot.isComponent)(C)}).reverse()[0];c=c.map(function(C){return n.getModelToStyle(C)});var g=o.getState(),m=c.slice().reverse()[0],y=this.getParentRules(m,{state:g,component:h}),w=this.__getStateTarget();return o.skip(function(){var C;if(g&&(!((C=m?.getState)===null||C===void 0)&&C.call(m))){var x=m.getStyle();w?w.setStyle(x):w=f.getAll().add({selectors:"gjs-selected",style:x,shallow:!0,important:!0})}else w&&(f.remove(w),w=void 0)}),this.model.set({targets:c,lastTarget:m,lastTargetParents:y,stateTarget:w,component:h}),this.__upProps(e),c},r.prototype.getSelected=function(){return this.model.get("lastTarget")},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(s){return s.addStyle(t,e)});var n=this.getSelected();n&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();n&&o?.setStyle(n.getStyle(),e)},r.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},r.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var n=this.em,o=e.skipAdd;if(n&&t?.toHTML){var s=n.getConfig(),u=n.UndoManager,f=n.Css,c=n.Selectors,h=c?c.getConfig():{},g=s.devicePreviewMode?"":n.get("state"),m=t.get("classes"),y=m.getStyleable(),w=y.length,C=!h.componentFirst||e.useClasses,x={noCount:1},E={state:g,addOpts:x};u.skip(function(){var N;if(w&&C){var L=n.getCurrentMedia();N=f.get(y,g,L),!N&&!o&&(N=f.add(y,g,L,{},x))}else if(s.avoidInlineStyle){var H=t.getId();N=f.getIdRule(H,E),!N&&!o&&(N=f.setIdRule(H,{},E)),t.is("wrapper")&&N.set("wrapper",1,x)}N&&(t=N)})}return t},r.prototype.getParentRules=function(t,e){var n=e===void 0?{}:e,o=n.state,s=n.component,u=this.em,f=[];if(u&&t){var c=s,h=u.Css,g=u.CodeManager.getGenerator("css"),m=t.toHTML?t:t.getComponent(),y={array:!0},w=[],C=[],x=[],E=[],N=[],L=function(et){return et.length?h.getRules().filter(function(G){var W=G.getSelectors().map(function(U){return U.getFullName()});return W.length===0?!1:W.every(function(U){return et.indexOf(U)>=0})}):[]},H=function(et){return et?h.getRules().filter(function(G){return G.selectorsToString()===et}):[]};if(m)w=h.getRules("#".concat(m.getId())),C=H(m.get("tagName")),E=c?L(c.getSelectors().getFullName(y)):[],N=E.concat(C).concat(w);else{w=c?h.getRules("#".concat(c.getId())):[],C=H(c?.get("tagName")||"");var rt=c?.getSelectors().getFullName(y)||[],nt=rt.filter(function(et){return t.getSelectors().getFullName(y).findIndex(function(G){return G===et})===-1});x=L(nt.concat(t.getSelectors().getFullName(y))),N=C.concat(w).concat(x)}var vt=N.filter(function(et){return(0,k.isUndefined)(o)?1:et.get("state")===o}).sort(g.sortRules).reverse();f=vt.slice(vt.indexOf(t)+1)}return f},r.prototype.addType=function(t,e){this.properties.addType(t,e)},r.prototype.getType=function(t){return this.properties.getType(t)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(t,e){var n=e===void 0?{}:e,o=n.model,s=o===void 0?{}:o,u=n.view,f=u===void 0?{}:u,c=this.config,h=this.getType(t);if(h)return new h.view(Zo({model:new h.model(s),config:c},f))},r.prototype.render=function(){var t=this,e=t.config,n=t.em,o=t.SectView,s=o&&o.el;return this.SectView=new rE({el:s,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},r.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var n=this.em;if(!t.__p){var o=this.getSelectedAll(),s=e.components||n.getSelectedAll(),u=Array.isArray(s)?s:[s],f=Zo({},t);delete f.__p,u.forEach(function(c){return!o.includes(c)&&c.__onStyleChange(f)})}},r.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var n=this.getSelected();if(n){var o=this.sectors,s=this.model.get("component"),u=this.getSelectedParents(),f=n.getStyle(),c=u.map(function(h){return{target:h,style:h.getStyle()}});o.map(function(h){h.getProperties().map(function(g){e.__upProp(g,f,c,t)})}),o.forEach(function(h){var g=h.getProperties();g.forEach(function(y){var w=y.__checkVisibility({target:n,sector:h,component:s,sectors:o.models});y.set("visible",w)});var m=g.some(function(y){return y.isVisible()});h.set("visible",m)})}},r.prototype.__upProp=function(t,e,n,o){var s=this,u=t.getName(),f=e[u],c=Yh(f),h=t.getType()==="stack",g=t.getType()==="composite",m=Zo(Zo({},o),{__up:!0}),y=!g&&!h,w=t,C=t,x=h?w.__getLayersFromStyle(e):[],E=g?C.__getPropsFromStyle(e):{},N=c?f:null,L=null;if(h&&x===null||g&&E===null){var H=h?"__getLayersFromStyle":"__getPropsFromStyle",rt=n.filter(function(W){return w[H](W.style)!==null})[0];if(rt){N=rt.style[u],L=rt.target;var nt=w[H](rt.style);h?x=nt:E=nt}}else if(!c){N=null;var rt=n.filter(function(U){return Yh(U.style[u])})[0];rt&&(N=rt.style[u],L=rt.target)}if(t.__setParentTarget(L),y&&t.__getFullValue()!==N&&t.upValue(N,m),h&&w.__setLayers(x||[],{isEmptyValue:w.isEmptyValueStyle(e)}),g){var vt=C.getProperties();if(C.isDetached()){var et=C.__getPropsFromStyle(e,{byName:!0})||{},G=n.map(function(W){return Zo(Zo({},W),{style:C.__getPropsFromStyle(W.style,{byName:!0})||{}})});vt.map(function(W){return s.__upProp(W,et,G,o)})}else C.__setProperties(E||{},m),C.getProperties().map(function(W){return W.__setParentTarget(L)})}},r.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},r})(Eo);const iE=oE;var aE=function(){return{autoloadProviders:!1}};const sE=aE;var Gf;(function(i){i.currentIndex="currentIndex",i.startIndex="startIndex",i.currentItem="currentItem",i.currentKey="currentKey",i.endIndex="endIndex",i.collectionId="collectionId",i.totalItems="totalItems",i.remainingItems="remainingItems"})(Gf||(Gf={}));var lE=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),Lu=function(){return Lu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Lu.apply(this,arguments)},uE=(function(i){lE(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.em=e,n.model=function(o,s){return s===void 0&&(s={}),new Iv(o,Lu(Lu({},s),{em:e}))},n}return r})(Ht.pM);const cE=uE;var fE=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),wa=function(){return wa=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},wa.apply(this,arguments)},dE=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},pE=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},hE=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},vE=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},gE=(function(i){fE(r,i);function r(t){var e=i.call(this,t,"DataSources",new cE([],t),Oo,sE())||this;return e.storageKey="dataSources",e.events=Oo,e.dataComponentTypes=dr,e.dataCollectionKeys=Ss,e.dataCollectionStateTypes=Gf,e.dataOperationTypes={any:xs,boolean:Ci,number:so,string:Un},Object.assign(e,Yf.Events),e}return r.prototype.destroy=function(){},r.prototype.add=function(t,e){e===void 0&&(e={});var n=this.all;return t.id=t.id||this._createId(),n.add(t,e)},r.prototype.get=function(t){return this.all.get(t)},r.prototype.getAll=function(){return vE([],this.all.models,!0)},r.prototype.getValue=function(t,e,n){return(0,Ot.get)(n?.context||this.getContext(),t,e)},r.prototype.setValue=function(t,e){var n=this.fromPath(t);n[0];var o=n[1],s=n[2];if(o&&(s||s==="")){var u=wa({},o.attributes);if((0,Ot.set)(u,s||"",e))return o.set(u),!0}return!1},r.prototype.getContext=function(){return this.all.reduce(function(t,e){return t[e.id]=e.records.reduce(function(n,o,s){var u=o,f=wa({},u.attributes);return delete f.__p,n[u.id||s]=f,n},{}),t},{})},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.fromPath=function(t){var e=[],n=(0,Ot.stringToPath)(t||""),o=n[0],s=n[1],u=n.slice(2),f=this.get(o),c=f?.records.get(s);return f&&e.push(f),c&&(e.push(c),u.length&&e.push(u.join("."))),e},r.prototype.store=function(){var t,e=[];return this.all.forEach(function(n){var o=n.attributes,s=o.skipFromStorage;o.transformers;var u=o.records,f=o.schema,c=hE(o,["skipFromStorage","transformers","records","schema"]);s||e.push(wa(wa({},c),{id:c.id,schema:(0,k.isEmpty)(f)?void 0:f,records:c.provider?void 0:u}))}),t={},t[this.storageKey]=e,t},r.prototype.load=function(t){var e=this,n=this,o=n.config,s=n.all,u=n.events,f=n.em,c=this.loadProjectData(t);if(o.autoloadProviders){var h=s.filter(function(m){return m.hasProvider});if(h.length){var g=function(){return dE(e,void 0,void 0,function(){var m;return pE(this,function(y){switch(y.label){case 0:return f.trigger(u.providerLoadAllBefore),m=h.map(function(w){return w.loadProvider()}),[4,Promise.all(m)];case 1:return y.sent(),f.trigger(u.providerLoadAll),[2]}})})};g()}}return c},r.prototype.postLoad=function(){var t=this,e=t.em,n=t.all;e.listenTo(n,Ht.e2,function(o,s,u){var f=u||s;e.changesUp(f,{dataSource:o,options:f})}),this.em.UndoManager.add(n)},r})(Eo);const Rg=gE;var mE=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),kr=function(){return kr=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},kr.apply(this,arguments)},nf=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},of=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},yE=function(i,r){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&r.indexOf(e)<0&&(t[e]=i[e]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(i);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(i,e[n])&&(t[e[n]]=i[e[n]]);return t},_E=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))};gy().$=Tr.default;var wE=[QO,_O,gT,E1,xS,rO,iS,iE,$v,PT,w1,JT,R1,ZS,bx,__,px,RC,Rg],bE=[Rg,zx,wC,dO,iC,$v];my({$:Tr.default});var Xh={debug:console.log,info:console.info,warning:console.warn,error:console.error},CE=(function(i){mE(r,i);function r(t){t===void 0&&(t={});var e=i.call(this)||this;e.Model=Ht.Kx,e.Collection=Ht.pM,e.events=tn,e.__skip=!1,e.defaultRunning=!1,e.loadTriggered=!1,e.destroyed=!1,e._isStoring=!1,e._config=t;var n=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new wy),e.set("dmode",n.dragMode);var o=n.el,s=n.log,u=s===!0?(0,k.keys)(Xh):(0,k.isArray)(s)?s:[];return(0,k.bindAll)(e,"initBaseColorPicker"),o&&n.fromElement&&(n.components=o.innerHTML),e.attrsOrig=o?(0,k.toArray)(o.attributes).reduce(function(f,c){return f[c.nodeName]=c.nodeValue,f},{}):"",n.components&&!n.pageManager&&(n.pageManager={pages:[{component:n.components}]}),wE.forEach(function(f){return e.loadModule(f)}),bE.forEach(function(f){return e.loadStorableModule(f)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),u.forEach(function(f){return e.listenLog(f)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(f){var c=f.from,h=f.to;e.listenTo(e,c,function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];e.trigger.apply(e,_E([h],g,!1)),e.logWarning("The event '".concat(c,"' is deprecated, replace it with '").concat(h,"'"))})}),e}return r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(t){var e=this;this.listenTo(this,"log:".concat(t),function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(e.config.log){var s=Xh[t];s?.apply(void 0,n)}})},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){var t;return((t=this.config.grapesjs)===null||t===void 0?void 0:t.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),r.prototype.initModules=function(){this.modules.forEach(function(t){return t.onInit()})},r.prototype.getConfig=function(t){var e=this.config;return(0,k.isUndefined)(t)?e:e[t]},r.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,o=e.headless,s={initial:!0},u=this.Storage;this.toLoad.reverse().forEach(function(h){return h.onLoad()});var f=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};o?(n&&this.loadData(n,s),f()):this._storageTimeout=setTimeout(function(){return nf(t,void 0,void 0,function(){var h;return of(this,function(g){switch(g.label){case 0:return n?(this.loadData(n,s),[3,5]):[3,1];case 1:if(!u?.canAutoload())return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load({},s)];case 3:return g.sent(),[3,5];case 4:return h=g.sent(),this.logError(h),[3,5];case 5:return f(),[2]}})})});var c=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});c.set({isShallow:!0}),c.Pages.onLoad(),c.Canvas.postLoad(),this.set("shallow",c)},r.prototype.updateChanges=function(t,e,n){var o=this,s=this.Storage,u=this.getDirtyCount();n.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger(tn.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=u?function(){return!0}:null),s.isAutosave()&&u>=s.getStepsBeforeSave()&&this.store().catch(function(f){return o.logError(f)})},r.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},r.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},r.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(t,e){var n=this;t===void 0&&(t={}),!(this.__skip||!this.loadTriggered||t.temporary||t.noCount||t.avoidStore||t.partial)&&(this.trigger(this.events.updateBefore,e),this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var o=n.getDirtyCount()||0;t.unset;var s=yE(t,["unset"]);n.set("changesCount",o+1,s)},0))},r.prototype.changesUp=function(t,e){this.handleUpdates(t,e)},r.prototype.componentHovered=function(t,e,n){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,n),e&&this.trigger("component:hovered",e,n)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(t,e){var n=this;e===void 0&&(e={});var o=e.event,s=o&&(o.ctrlKey||o.metaKey),u=(o||{}).shiftKey,f=((0,k.isArray)(t)?t:[t]).map(function(m){var y,w;return((w=(y=m?.delegate)===null||y===void 0?void 0:y.select)===null||w===void 0?void 0:w.call(y,m))||m}).filter(Boolean),c=this.getSelectedAll(),h=this.getConfig().multipleSelection,g=(0,k.isArray)(t);(g||!t)&&this.removeSelected(c.filter(function(m){return!(0,k.contains)(f,m)})),f.forEach(function(m){if(m&&(n.trigger(je.I.selectBefore,m,e),!m.get("selectable")||e.abort))if(e.useValid){for(var y=m.parent();y&&!y.get("selectable");)y=y.parent();m=y}else return;if(s&&h)return n.toggleSelected(m);if(u&&h){if(n.isEditing())return;n.clearSelection(n.Canvas.getWindow());var w=m.collection,C=m.index(),x,E;if(n.getSelectedAll().forEach(function(N){var L=N.collection,H=N.index();L===w&&(H<C?x=(0,k.isUndefined)(x)?H:Math.max(x,H):H>C&&(E=(0,k.isUndefined)(E)?H:Math.min(E,H)))}),!(0,k.isUndefined)(x))for(;x!==C;)n.addSelected(w.at(x),e),x++;if(!(0,k.isUndefined)(E))for(;E!==C;)n.addSelected(w.at(E),e),E--;return n.addSelected(m,e)}!g&&n.removeSelected(c.filter(function(N){return N!==m})),n.addSelected(m,e)})},r.prototype.addSelected=function(t,e){var n=this;e===void 0&&(e={});var o=(0,k.isArray)(t)?t:[t];o.forEach(function(s){var u=n.selected;if(!(!s||!s.get("selectable")||s.parents().some(function(h){return u.hasComponent(h)}))){e.forceChange&&n.removeSelected(s,e);var f=u.allComponents().filter(function(h){return(0,k.contains)(h.parents(),s)});if(f.forEach(function(h){return n.removeSelected(h,e)}),u.addComponent(s,e),n.trigger(je.I.select,s,e),n.Canvas.addSpot({type:Bn.F.Select,component:s}),e.activate){var c=s.getView();c?.rendered?c.onActive(e.event):s.once(je.I.render,function(h){var g=h.view;return g.onActive(e.event)})}}})},r.prototype.removeSelected=function(t,e){var n=this;e===void 0&&(e={}),this.selected.removeComponent(t,e);var o=(0,k.isArray)(t)?t:[t];o.forEach(function(s){return n.Canvas.removeSpots({type:Bn.F.Select,component:s})})},r.prototype.toggleSelected=function(t,e){var n=this;e===void 0&&(e={});var o=(0,k.isArray)(t)?t:[t];o.forEach(function(s){n.selected.hasComponent(s)?n.removeSelected(s,e):n.addSelected(s,e)})},r.prototype.setHovered=function(t,e){var n=this;e===void 0&&(e={});var o=function(f,c){var h=n,g=h.config,m=h.Canvas,y=n.getHovered(),w=n.getSelectedAll(),C=Bn.F.Hover,x=Bn.F.Spacing;n.set("componentHovered",f||null,c),y&&(m.removeSpots({type:C,component:y}),m.removeSpots({type:x,component:y})),f&&(m.addSpot({type:C,component:f}),(!w.includes(f)||g.showOffsetsSelected)&&m.addSpot({type:x,component:f}))};if(!t)return o();var s="component:hover";if(e.forceChange&&o(),this.trigger("".concat(s,":before"),t,e),!t.get("hoverable"))if(e.useValid&&!e.abort){for(var u=t.parent();u&&!u.get("hoverable");)u=u.parent();t=u}else return;e.abort||(o(t,e),this.trigger(s,t,e))},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},r.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var n=t.getComponents();return e.getCode(n,"json")}},r.prototype.setStyle=function(t,e){e===void 0&&(e={});var n=this.Css;return n.clear(e),n.getAll().add(t,e),this},r.prototype.addStyle=function(t,e){e===void 0&&(e={});var n=this.getStyle().add(t,e);return(0,k.isArray)(n)?n:[n]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(t){return this.set("state",t),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,n=e.optsHtml,o=e.jsInHtml?this.getJs(t):"",s=t.component||this.Components.getComponent(),u=s?this.CodeManager.getCode(s,"html",kr(kr({},n),t)):"";return u+=o?"<script>".concat(o,"<\/script>"):"",u},r.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,n=e.optsCss,o=t.avoidProtected,s=(0,k.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,u=this.Css,f=t.component||this.Components.getComponent(),c=o?"":e.protectedCss||"",h=f&&this.CodeManager.getCode(f,"css",kr(kr({cssc:u,keepUnusedStyles:s},n),t));return f?t.json?h:c+h:""},r.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},r.prototype.store=function(t){return nf(this,void 0,void 0,function(){var e,n=this;return of(this,function(o){switch(o.label){case 0:return this._isStoring?[2]:(this._isStoring=!0,setTimeout(function(){n.clearDirtyCount()},1),e=this.storeData(),[4,this.Storage.store(e,t)]);case 1:return o.sent(),setTimeout(function(){n._isStoring=!1},1),[2,e]}})})},r.prototype.load=function(t){return nf(this,arguments,void 0,function(e,n){var o;return n===void 0&&(n={}),of(this,function(s){switch(s.label){case 0:return[4,this.Storage.load(e)];case 1:return o=s.sent(),this.loadData(o,n),[4,(0,Ot.wait)()];case 2:return s.sent(),n.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},r.prototype.storeData=function(){var t={},e=this.getEditing();e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(o){t=kr(kr({},t),o.store(1))});var n=JSON.parse(JSON.stringify(t));return this.trigger(tn.projectGet,{project:n}),n},r.prototype.loadData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={project:t,options:e,initial:!!e.initial},o=!1;return(0,Ot.isEmptyObj)(t)||(this.storables.forEach(function(s){return s.clear()}),this.storables.forEach(function(s){return s.load(t)}),o=!0),this.trigger(tn.projectLoad,kr(kr({},n),{loaded:o})),o&&this.trigger(tn.projectLoaded,n),t},r.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},r.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.Commands.get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},r.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.Commands;if(e){var n=e.get(this.config.defaultCommand);!n||!this.defaultRunning||(n.stop(this,this,t),this.defaultRunning=!1)}},r.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},r.prototype.clearSelection=function(t){var e,n=t||window;(e=n.getSelection())===null||e===void 0||e.removeAllRanges()},r.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,o=t.devicePreviewMode,s=e&&e.get("widthMedia");return e&&s&&!o?"(".concat(n,": ").concat(s,")"):""},r.prototype.getWrapper=function(){return this.Components.getWrapper()},r.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},r.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},r.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.getDragMode=function(t){var e=t?.getDragMode()||this.get("dmode");return e||""},r.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get("I18n");return n?.t.apply(n,t)},r.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},r.prototype.destroyAll=function(){var t=this,e=this,n=e.config,o=e.view;this.trigger(tn.destroy);var s=this.getEditor(),u=(n.grapesjs||{}).editors,f=u===void 0?[]:u,c=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),c?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(h){return h.destroy()}),o?.remove&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(h){return t[h]={}}),f.splice(f.indexOf(s),1),(0,Ot.hasWin)()&&(0,Tr.default)(n.el).empty().attr(this.attrsOrig),this.trigger(tn.destroyed)},r.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},r.prototype.setEditing=function(t){return this.set("editing",t),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(t,e){e===void 0&&(e={});var n=tn.log,o=e.ns,s=e.level,u=s===void 0?"debug":s;if(this.trigger(n,t,e),u&&this.trigger("".concat(n,":").concat(u),t,e),o){var f="".concat(n,"-").concat(o);this.trigger(f,t,e),u&&this.trigger("".concat(f,":").concat(u),t,e)}},r.prototype.logInfo=function(t,e){this.log(t,kr(kr({},e),{level:"info"}))},r.prototype.logWarning=function(t,e){this.log(t,kr(kr({},e),{level:"warning"}))},r.prototype.logError=function(t,e){this.log(t,kr(kr({},e),{level:"error"}))},r.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var n=this.config,o=n.colorPicker,s=o===void 0?{}:o,u=n.el,f=n.stylePrefix;return(0,Tr.default)(t).spectrum(kr(kr({containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:u||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),s))},r.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},r.prototype.data=function(t,e,n){var o="_gjs-data";if(t[o]||(t[o]={}),(0,k.isUndefined)(n))return t[o][e];t[o][e]=n},r})(Ht.Kx);const SE=CE;function xE(){return window.location.hostname}var OE=(function(){var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},i(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}})(),TE=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},PE=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},EE=(function(i){OE(r,i);function r(t){var e=i.call(this,{model:t})||this,n=t.Panels,o=t.UndoManager;return t.view=e,t.once("change:ready",function(){n.active(),n.disableButtons(),t.getConfig().telemetry&&e.sendTelemetryData().catch(function(){}),setTimeout(function(){t.trigger(tn.load,t.Editor),t.loadTriggered=!0,o.clear(),t.clearDirtyCount()})}),e}return r.prototype.render=function(){var t=this,e=this,n=e.$el,o=e.model,s=o.Panels,u=o.Canvas,f=o.config,c=o.modules,h=f.stylePrefix,g=["".concat(h,"editor")];!f.customUI&&g.push("".concat(h,"one-bg ").concat(h,"two-color"));var m=(0,Tr.default)(f.el||"body ".concat(f.container));f.cssIcons&&(0,Ot.appendStyles)(f.cssIcons,{unique:!0,prepand:!0}),n.empty(),f.width&&m.css("width",f.width),f.height&&m.css("height",f.height),n.append(u.render()),n.append(s.render());var y=o.shallow,w=y.Canvas.render();return w.style.display="none",n.append(w),n.attr("class",g.join(" ")),m.addClass("".concat(h,"editor-cont")).empty().append(n),c.forEach(function(C){var x;return(x=C.postRender)===null||x===void 0?void 0:x.call(C,t)}),this},r.prototype.sendTelemetryData=function(){return TE(this,void 0,void 0,function(){var t,e,n,o,s,u,f,c;return PE(this,function(h){switch(h.label){case 0:return t=xE(),t==="localhost"||t.includes("localhost")?[2]:(e="gjs_telemetry_sent_",n=this.model.version,o="".concat(e).concat(n),sessionStorage.getItem(o)?[2]:(s="https://app.grapesjs.com",[4,fetch("".concat(s,"/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:t,version:n})})]));case 1:return u=h.sent(),u.ok?[3,3]:(f=Error.bind,c="Failed to send telemetry data ".concat,[4,u.text()]);case 2:throw new(f.apply(Error,[void 0,c.apply("Failed to send telemetry data ",[h.sent()])]));case 3:return sessionStorage.setItem(o,"true"),Object.keys(sessionStorage).forEach(function(g){g.startsWith(e)&&g!==o&&sessionStorage.removeItem(g)}),this.trigger(tn.telemetryInit),[2]}})})},r})(Ht.Ss);const AE=EE;var Cs=function(){return Cs=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Cs.apply(this,arguments)},Jh=function(i,r,t,e){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(h){try{c(e.next(h))}catch(g){s(g)}}function f(h){try{c(e.throw(h))}catch(g){s(g)}}function c(h){h.done?o(h.value):n(h.value).then(u,f)}c((e=e.apply(i,r||[])).next())})},Zh=function(i,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,n,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(h){return f([c,h])}}function f(c){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(e=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(i,t)}catch(h){c=[6,h],n=0}finally{e=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},kE=function(i,r,t){if(t||arguments.length===2)for(var e=0,n=r.length,o;e<n;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return i.concat(o||Array.prototype.slice.call(r))},ME=(function(){function i(r,t){r===void 0&&(r={}),t===void 0&&(t={});var e;this.events=tn,this.html=gn;var n=vy();this.config=Cs(Cs(Cs({},n),r),{pStylePrefix:(e=r.stylePrefix)!==null&&e!==void 0?e:n.stylePrefix}),this.em=new SE(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(i.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),i.prototype.getConfig=function(r){return this.em.getConfig(r)},i.prototype.getHtml=function(r){return this.em.getHtml(r)},i.prototype.getCss=function(r){return this.em.getCss(r)},i.prototype.getJs=function(r){return this.em.getJs(r)},i.prototype.getComponents=function(){return this.Components.getComponents()},i.prototype.getWrapper=function(){return this.Components.getWrapper()},i.prototype.setComponents=function(r,t){return t===void 0&&(t={}),this.em.setComponents(r,t),this},i.prototype.addComponents=function(r,t){return this.getWrapper().append(r,t)},i.prototype.getStyle=function(){return this.em.Css.getAll()},i.prototype.setStyle=function(r,t){return t===void 0&&(t={}),this.em.setStyle(r,t),this},i.prototype.addStyle=function(r,t){return t===void 0&&(t={}),this.em.addStyle(r,t)},i.prototype.getSelected=function(){return this.em.getSelected()},i.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},i.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},i.prototype.select=function(r,t){return this.em.setSelected(r,t),this},i.prototype.selectAdd=function(r){return this.em.addSelected(r),this},i.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},i.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},i.prototype.getEditing=function(){return this.em.getEditing()},i.prototype.setDevice=function(r){return this.em.set("device",r),this},i.prototype.getDevice=function(){return this.em.get("device")},i.prototype.runCommand=function(r,t){return t===void 0&&(t={}),this.Commands.run(r,t)},i.prototype.stopCommand=function(r,t){return t===void 0&&(t={}),this.Commands.stop(r,t)},i.prototype.store=function(r){return Jh(this,void 0,void 0,function(){return Zh(this,function(t){switch(t.label){case 0:return[4,this.em.store(r)];case 1:return[2,t.sent()]}})})},i.prototype.load=function(r){return Jh(this,arguments,void 0,function(t,e){return e===void 0&&(e={}),Zh(this,function(n){switch(n.label){case 0:return[4,this.em.load(t,e)];case 1:return[2,n.sent()]}})})},i.prototype.getProjectData=function(){return this.em.storeData()},i.prototype.loadProjectData=function(r,t){return t===void 0&&(t={}),this.em.loadData(r,t)},i.prototype.storeData=function(){return this.em.storeData()},i.prototype.loadData=function(r){return this.em.loadData(r)},i.prototype.getContainer=function(){return this.config.el},i.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},i.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},i.prototype.refresh=function(r){this.em.refreshCanvas(r)},i.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},i.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},i.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},i.prototype.log=function(r,t){return t===void 0&&(t={}),this.em.log(r,t),this},i.prototype.t=function(){for(var r,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(r=this.em).t.apply(r,t)},i.prototype.on=function(r,t){return this.em.on(r,t),this},i.prototype.once=function(r,t){return this.em.once(r,t),this},i.prototype.off=function(r,t){return this.em.off(r,t),this},i.prototype.trigger=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,kE([r],t,!0)),this},i.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},i.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},i.prototype.getModel=function(){return this.em},i.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new AE(this.em),this.editorView.render().el},i.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},i})();const DE=ME;var LE=function(i,r){var t=r.get(i);if(!t){var e=(0,Ot.getGlobal)()[i];t=e?.default||e}return t},Vg=function(i,r){return(0,k.isString)(i)?LE(i,r):i?.default||i},Fg=function(i,r){i.getModel().logWarning("Plugin ".concat(r," not found"),{context:"plugins",plugin:r})},IE=(function(){function i(){this.plugins={}}return i.prototype.add=function(r,t){var e=this.get(r);return e||(this.plugins[r]=t,t)},i.prototype.get=function(r){return this.plugins[r]},i.prototype.getAll=function(){return this.plugins},i})();const jE=IE,RE=(function(){var i=function(){for(var t,e=window.navigator.userAgent,n=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<n.length;o++){var s=n[o];if(t=s[1].exec(e),t)break}return!!t};if((0,Ot.hasWin)()&&i()){var r=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),r.apply(document.implementation,[t])}}});var Iu=function(){return Iu=Object.assign||function(i){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},Iu.apply(this,arguments)};RE();var $f=new jE,Qh=[],Ng=function(i,r){var t=Vg(i,$f);return function(e){t?t(e,r||{}):Fg(e,i)}},Hg={$:Tr.default,editors:Qh,plugins:$f,usePlugin:Ng,version:"0.22.14",init:function(i){i===void 0&&(i={});var r=i.headless,t=i.container;if(!t&&!r)throw new Error("'container' is required");var e=Iu(Iu({autorender:!0,plugins:[],pluginsOpts:{}},i),{grapesjs:this,el:r?void 0:(0,k.isElement)(t)?t:document.querySelector(t)}),n=new DE(e,{$:Tr.default}),o=n.getModel();return o.initModules(),e.plugins.forEach(function(s){var u=Vg(s,$f),f=e.pluginsOpts[s]||{};u?u(n,f):Fg(n,s)}),o.loadOnStart(),e.autorender&&!r&&n.render(),Qh.push(n),n}};const VE=Hg;var LA=Vu.Ay;Vu.I0;Vu.nu;var Pl={exports:{}};var FE=Pl.exports,tv;function NE(){return tv||(tv=1,(function(i,r){(function(t,e){i.exports=e()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:FE,(()=>(()=>{var t={d:(w,C)=>{for(var x in C)t.o(C,x)&&!t.o(w,x)&&Object.defineProperty(w,x,{enumerable:!0,get:C[x]})},o:(w,C)=>Object.prototype.hasOwnProperty.call(w,C),r:w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>y});var n=function(){return n=Object.assign||function(w){for(var C,x=1,E=arguments.length;x<E;x++)for(var N in C=arguments[x])Object.prototype.hasOwnProperty.call(C,N)&&(w[N]=C[N]);return w},n.apply(this,arguments)},o="gjs-open-import-webpage",s="set-device-desktop",u="set-device-tablet",f="set-device-mobile",c="canvas-clear",h=function(){return h=Object.assign||function(w){for(var C,x=1,E=arguments.length;x<E;x++)for(var N in C=arguments[x])Object.prototype.hasOwnProperty.call(C,N)&&(w[N]=C[N]);return w},h.apply(this,arguments)};const g=function(w,C){var x=w.Commands,E=C.textCleanCanvas;(function(N,L){var H=N.getConfig("stylePrefix"),rt=L.modalImportLabel,nt=L.modalImportContent;N.Commands.add(o,{codeViewer:null,container:null,run:function(vt){var et=typeof nt=="function"?nt(vt):nt,G=this.getCodeViewer();vt.Modal.open({title:L.modalImportTitle,content:this.getContainer()}).onceClose((function(){return vt.stopCommand(o)})),G.setContent(et??""),G.refresh(),setTimeout((function(){return G.focus()}),0)},stop:function(){N.Modal.close()},getContainer:function(){if(!this.container){var vt=this.getCodeViewer(),et=document.createElement("div");if(et.className="".concat(H,"import-container"),rt){var G=document.createElement("div");G.className="".concat(H,"import-label"),G.innerHTML=rt,et.appendChild(G)}et.appendChild(vt.getElement());var W=document.createElement("button");W.type="button",W.innerHTML=L.modalImportButton,W.className="".concat(H,"btn-prim ").concat(H,"btn-import"),W.onclick=function(){N.Css.clear(),N.setComponents(vt.getContent().trim()),N.Modal.close()},et.appendChild(W),this.container=et}return this.container},getCodeViewer:function(){return this.codeViewer||(this.codeViewer=N.CodeManager.createViewer(h({codeName:"htmlmixed",theme:"hopscotch",readOnly:!1},L.importViewerOptions))),this.codeViewer}})})(w,C),x.add(s,{run:function(N){return N.setDevice("Desktop")},stop:function(){}}),x.add(u,{run:function(N){return N.setDevice("Tablet")},stop:function(){}}),x.add(f,{run:function(N){return N.setDevice("Mobile portrait")},stop:function(){}}),x.add(c,(function(N){return confirm(E)&&N.runCommand("core:canvas-clear")}))};var m=function(){return m=Object.assign||function(w){for(var C,x=1,E=arguments.length;x<E;x++)for(var N in C=arguments[x])Object.prototype.hasOwnProperty.call(C,N)&&(w[N]=C[N]);return w},m.apply(this,arguments)};const y=function(w,C){C===void 0&&(C={});var x=m({blocks:["link-block","quote","text-basic"],block:function(){return{}},modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0},C);if(x.useCustomTheme&&typeof window<"u"){var E="gjs-",N="";[["one","#463a3c"],["two","#b9a5a6"],["three","#804f7b"],["four","#d97aa6"]].forEach((function(H){var rt=H[0],nt=H[1];N+=`
        .`.concat(E).concat(rt,`-bg {
          background-color: `).concat(nt,`;
        }

        .`).concat(E).concat(rt,`-color {
          color: `).concat(nt,`;
        }

        .`).concat(E).concat(rt,`-color-h:hover {
          color: `).concat(nt,`;
        }
      `)}));var L=document.createElement("style");L.innerText=N,document.head.appendChild(L)}(function(H,rt){var nt=function(vt,et){rt.blocks.indexOf(vt)>=0&&H.Blocks.add(vt,n(n({select:!0,category:"Basic"},et),rt.block(vt)))};nt("link-block",{label:"Link Block",media:`<svg viewBox="0 0 24 24">
      <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path>
    </svg>`,content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),nt("quote",{label:"Quote",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z" />
    </svg>`,content:`<blockquote class="quote">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit
      </blockquote>`}),nt("text-basic",{label:"Text section",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" />
    </svg>`,content:`<section class="bdg-sect">
      <h1 class="heading">Insert title here</h1>
      <p class="paragraph">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
      </section>`})})(w,x),g(w,x),(function(H,rt){var nt=H.Panels,vt=H.getConfig(),et="sw-visibility",G="export-template",W="open-sm",U="open-tm",D="open-layers",Y="open-blocks",K="fullscreen",ct="preview",M='style="display: block; max-width:22px"';vt.showDevices=!1,nt.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:s,command:s,active:!0,label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`)},{id:u,command:u,label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`)},{id:f,command:f,label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`)}]},{id:"options",buttons:[{id:et,command:et,context:et,label:"<svg ".concat(M,` viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`)},{id:ct,context:ct,command:function(){return H.runCommand(ct)},label:"<svg ".concat(M,' viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>')},{id:K,command:K,context:K,label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`)},{id:G,command:function(){return H.runCommand(G)},label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`)},{id:"undo",command:function(){return H.runCommand("core:undo")},label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`)},{id:"redo",command:function(){return H.runCommand("core:redo")},label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`)},{id:o,command:function(){return H.runCommand(o)},label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`)},{id:c,command:function(){return H.runCommand(c)},label:"<svg ".concat(M,` viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`)}]},{id:"views",buttons:[{id:W,command:W,active:!0,label:"<svg ".concat(M,` viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`)},{id:U,command:U,label:"<svg ".concat(M,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`)},{id:D,command:D,label:"<svg ".concat(M,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`)},{id:Y,command:Y,label:"<svg ".concat(M,` viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`)}]}]);var wt=nt.getButton("views",Y);H.on("load",(function(){return wt?.set("active",!0)})),rt.showStylesOnChange&&H.on("component:selected",(function(){var gt=nt.getButton("views",W),At=nt.getButton("views",D);At&&At.get("active")||!H.getSelected()||gt==null||gt.set("active",!0)}))})(w,x)};return e})()))})(Pl)),Pl.exports}NE();function HE(i,r){if(i.match(/^[a-z]+:\/\//i))return i;if(i.match(/^\/\//))return window.location.protocol+i;if(i.match(/^[a-z]+:/i))return i;const t=document.implementation.createHTMLDocument(),e=t.createElement("base"),n=t.createElement("a");return t.head.appendChild(e),t.body.appendChild(n),r&&(e.href=r),n.href=i,n.href}const UE=(()=>{let i=0;const r=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(i+=1,`u${r()}${i}`)})();function ei(i){const r=[];for(let t=0,e=i.length;t<e;t++)r.push(i[t]);return r}let ea=null;function Ug(i={}){return ea||(i.includeStyleProperties?(ea=i.includeStyleProperties,ea):(ea=ei(window.getComputedStyle(document.documentElement)),ea))}function ju(i,r){const e=(i.ownerDocument.defaultView||window).getComputedStyle(i).getPropertyValue(r);return e?parseFloat(e.replace("px","")):0}function BE(i){const r=ju(i,"border-left-width"),t=ju(i,"border-right-width");return i.clientWidth+r+t}function WE(i){const r=ju(i,"border-top-width"),t=ju(i,"border-bottom-width");return i.clientHeight+r+t}function Bg(i,r={}){const t=r.width||BE(i),e=r.height||WE(i);return{width:t,height:e}}function zE(){let i,r;try{r=process}catch{}const t=r&&r.env?r.env.devicePixelRatio:null;return t&&(i=parseInt(t,10),Number.isNaN(i)&&(i=1)),i||window.devicePixelRatio||1}const Mn=16384;function KE(i){(i.width>Mn||i.height>Mn)&&(i.width>Mn&&i.height>Mn?i.width>i.height?(i.height*=Mn/i.width,i.width=Mn):(i.width*=Mn/i.height,i.height=Mn):i.width>Mn?(i.height*=Mn/i.width,i.width=Mn):(i.width*=Mn/i.height,i.height=Mn))}function GE(i,r={}){return i.toBlob?new Promise(t=>{i.toBlob(t,r.type?r.type:"image/png",r.quality?r.quality:1)}):new Promise(t=>{const e=window.atob(i.toDataURL(r.type?r.type:void 0,r.quality?r.quality:void 0).split(",")[1]),n=e.length,o=new Uint8Array(n);for(let s=0;s<n;s+=1)o[s]=e.charCodeAt(s);t(new Blob([o],{type:r.type?r.type:"image/png"}))})}function Ru(i){return new Promise((r,t)=>{const e=new Image;e.onload=()=>{e.decode().then(()=>{requestAnimationFrame(()=>r(e))})},e.onerror=t,e.crossOrigin="anonymous",e.decoding="async",e.src=i})}async function $E(i){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(i)).then(encodeURIComponent).then(r=>`data:image/svg+xml;charset=utf-8,${r}`)}async function qE(i,r,t){const e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg"),o=document.createElementNS(e,"foreignObject");return n.setAttribute("width",`${r}`),n.setAttribute("height",`${t}`),n.setAttribute("viewBox",`0 0 ${r} ${t}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),n.appendChild(o),o.appendChild(i),$E(n)}const _n=(i,r)=>{if(i instanceof r)return!0;const t=Object.getPrototypeOf(i);return t===null?!1:t.constructor.name===r.name||_n(t,r)};function YE(i){const r=i.getPropertyValue("content");return`${i.cssText} content: '${r.replace(/'|"/g,"")}';`}function XE(i,r){return Ug(r).map(t=>{const e=i.getPropertyValue(t),n=i.getPropertyPriority(t);return`${t}: ${e}${n?" !important":""};`}).join(" ")}function JE(i,r,t,e){const n=`.${i}:${r}`,o=t.cssText?YE(t):XE(t,e);return document.createTextNode(`${n}{${o}}`)}function ev(i,r,t,e){const n=window.getComputedStyle(i,t),o=n.getPropertyValue("content");if(o===""||o==="none")return;const s=UE();try{r.className=`${r.className} ${s}`}catch{return}const u=document.createElement("style");u.appendChild(JE(s,t,n,e)),r.appendChild(u)}function ZE(i,r,t){ev(i,r,":before",t),ev(i,r,":after",t)}const rv="application/font-woff",nv="image/jpeg",QE={woff:rv,woff2:rv,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:nv,jpeg:nv,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function tA(i){const r=/\.([^./]*?)$/g.exec(i);return r?r[1]:""}function ud(i){const r=tA(i).toLowerCase();return QE[r]||""}function eA(i){return i.split(/,/)[1]}function qf(i){return i.search(/^(data:)/)!==-1}function rA(i,r){return`data:${r};base64,${i}`}async function Wg(i,r,t){const e=await fetch(i,r);if(e.status===404)throw new Error(`Resource "${e.url}" not found`);const n=await e.blob();return new Promise((o,s)=>{const u=new FileReader;u.onerror=s,u.onloadend=()=>{try{o(t({res:e,result:u.result}))}catch(f){s(f)}},u.readAsDataURL(n)})}const af={};function nA(i,r,t){let e=i.replace(/\?.*/,"");return t&&(e=i),/ttf|otf|eot|woff2?/i.test(e)&&(e=e.replace(/.*\//,"")),r?`[${r}]${e}`:e}async function cd(i,r,t){const e=nA(i,r,t.includeQueryParams);if(af[e]!=null)return af[e];t.cacheBust&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());let n;try{const o=await Wg(i,t.fetchRequestInit,({res:s,result:u})=>(r||(r=s.headers.get("Content-Type")||""),eA(u)));n=rA(o,r)}catch(o){n=t.imagePlaceholder||"";let s=`Failed to fetch resource: ${i}`;o&&(s=typeof o=="string"?o:o.message),s&&console.warn(s)}return af[e]=n,n}async function oA(i){const r=i.toDataURL();return r==="data:,"?i.cloneNode(!1):Ru(r)}async function iA(i,r){if(i.currentSrc){const o=document.createElement("canvas"),s=o.getContext("2d");o.width=i.clientWidth,o.height=i.clientHeight,s?.drawImage(i,0,0,o.width,o.height);const u=o.toDataURL();return Ru(u)}const t=i.poster,e=ud(t),n=await cd(t,e,r);return Ru(n)}async function aA(i,r){var t;try{if(!((t=i?.contentDocument)===null||t===void 0)&&t.body)return await Uu(i.contentDocument.body,r,!0)}catch{}return i.cloneNode(!1)}async function sA(i,r){return _n(i,HTMLCanvasElement)?oA(i):_n(i,HTMLVideoElement)?iA(i,r):_n(i,HTMLIFrameElement)?aA(i,r):i.cloneNode(zg(i))}const lA=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SLOT",zg=i=>i.tagName!=null&&i.tagName.toUpperCase()==="SVG";async function uA(i,r,t){var e,n;if(zg(r))return r;let o=[];return lA(i)&&i.assignedNodes?o=ei(i.assignedNodes()):_n(i,HTMLIFrameElement)&&(!((e=i.contentDocument)===null||e===void 0)&&e.body)?o=ei(i.contentDocument.body.childNodes):o=ei(((n=i.shadowRoot)!==null&&n!==void 0?n:i).childNodes),o.length===0||_n(i,HTMLVideoElement)||await o.reduce((s,u)=>s.then(()=>Uu(u,t)).then(f=>{f&&r.appendChild(f)}),Promise.resolve()),r}function cA(i,r,t){const e=r.style;if(!e)return;const n=window.getComputedStyle(i);n.cssText?(e.cssText=n.cssText,e.transformOrigin=n.transformOrigin):Ug(t).forEach(o=>{let s=n.getPropertyValue(o);o==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),_n(i,HTMLIFrameElement)&&o==="display"&&s==="inline"&&(s="block"),o==="d"&&r.getAttribute("d")&&(s=`path(${r.getAttribute("d")})`),e.setProperty(o,s,n.getPropertyPriority(o))})}function fA(i,r){_n(i,HTMLTextAreaElement)&&(r.innerHTML=i.value),_n(i,HTMLInputElement)&&r.setAttribute("value",i.value)}function dA(i,r){if(_n(i,HTMLSelectElement)){const e=Array.from(r.children).find(n=>i.value===n.getAttribute("value"));e&&e.setAttribute("selected","")}}function pA(i,r,t){return _n(r,Element)&&(cA(i,r,t),ZE(i,r,t),fA(i,r),dA(i,r)),r}async function hA(i,r){const t=i.querySelectorAll?i.querySelectorAll("use"):[];if(t.length===0)return i;const e={};for(let o=0;o<t.length;o++){const u=t[o].getAttribute("xlink:href");if(u){const f=i.querySelector(u),c=document.querySelector(u);!f&&c&&!e[u]&&(e[u]=await Uu(c,r,!0))}}const n=Object.values(e);if(n.length){const o="http://www.w3.org/1999/xhtml",s=document.createElementNS(o,"svg");s.setAttribute("xmlns",o),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const u=document.createElementNS(o,"defs");s.appendChild(u);for(let f=0;f<n.length;f++)u.appendChild(n[f]);i.appendChild(s)}return i}async function Uu(i,r,t){return!t&&r.filter&&!r.filter(i)?null:Promise.resolve(i).then(e=>sA(e,r)).then(e=>uA(i,e,r)).then(e=>pA(i,e,r)).then(e=>hA(e,r))}const Kg=/url\((['"]?)([^'"]+?)\1\)/g,vA=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,gA=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function mA(i){const r=i.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${r})(['"]?\\))`,"g")}function yA(i){const r=[];return i.replace(Kg,(t,e,n)=>(r.push(n),t)),r.filter(t=>!qf(t))}async function _A(i,r,t,e,n){try{const o=t?HE(r,t):r,s=ud(r);let u;return n||(u=await cd(o,s,e)),i.replace(mA(r),`$1${u}$3`)}catch{}return i}function wA(i,{preferredFontFormat:r}){return r?i.replace(gA,t=>{for(;;){const[e,,n]=vA.exec(t)||[];if(!n)return"";if(n===r)return`src: ${e};`}}):i}function Gg(i){return i.search(Kg)!==-1}async function $g(i,r,t){if(!Gg(i))return i;const e=wA(i,t);return yA(e).reduce((o,s)=>o.then(u=>_A(u,s,r,t)),Promise.resolve(e))}async function ra(i,r,t){var e;const n=(e=r.style)===null||e===void 0?void 0:e.getPropertyValue(i);if(n){const o=await $g(n,null,t);return r.style.setProperty(i,o,r.style.getPropertyPriority(i)),!0}return!1}async function bA(i,r){await ra("background",i,r)||await ra("background-image",i,r),await ra("mask",i,r)||await ra("-webkit-mask",i,r)||await ra("mask-image",i,r)||await ra("-webkit-mask-image",i,r)}async function CA(i,r){const t=_n(i,HTMLImageElement);if(!(t&&!qf(i.src))&&!(_n(i,SVGImageElement)&&!qf(i.href.baseVal)))return;const e=t?i.src:i.href.baseVal,n=await cd(e,ud(e),r);await new Promise((o,s)=>{i.onload=o,i.onerror=r.onImageErrorHandler?(...f)=>{try{o(r.onImageErrorHandler(...f))}catch(c){s(c)}}:s;const u=i;u.decode&&(u.decode=o),u.loading==="lazy"&&(u.loading="eager"),t?(i.srcset="",i.src=n):i.href.baseVal=n})}async function SA(i,r){const e=ei(i.childNodes).map(n=>qg(n,r));await Promise.all(e).then(()=>i)}async function qg(i,r){_n(i,Element)&&(await bA(i,r),await CA(i,r),await SA(i,r))}function xA(i,r){const{style:t}=i;r.backgroundColor&&(t.backgroundColor=r.backgroundColor),r.width&&(t.width=`${r.width}px`),r.height&&(t.height=`${r.height}px`);const e=r.style;return e!=null&&Object.keys(e).forEach(n=>{t[n]=e[n]}),i}const ov={};async function iv(i){let r=ov[i];if(r!=null)return r;const e=await(await fetch(i)).text();return r={url:i,cssText:e},ov[i]=r,r}async function av(i,r){let t=i.cssText;const e=/url\(["']?([^"')]+)["']?\)/g,o=(t.match(/url\([^)]+\)/g)||[]).map(async s=>{let u=s.replace(e,"$1");return u.startsWith("https://")||(u=new URL(u,i.url).href),Wg(u,r.fetchRequestInit,({result:f})=>(t=t.replace(s,`url(${f})`),[s,f]))});return Promise.all(o).then(()=>t)}function sv(i){if(i==null)return[];const r=[],t=/(\/\*[\s\S]*?\*\/)/gi;let e=i.replace(t,"");const n=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const f=n.exec(e);if(f===null)break;r.push(f[0])}e=e.replace(n,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(s,"gi");for(;;){let f=o.exec(e);if(f===null){if(f=u.exec(e),f===null)break;o.lastIndex=u.lastIndex}else u.lastIndex=o.lastIndex;r.push(f[0])}return r}async function OA(i,r){const t=[],e=[];return i.forEach(n=>{if("cssRules"in n)try{ei(n.cssRules||[]).forEach((o,s)=>{if(o.type===CSSRule.IMPORT_RULE){let u=s+1;const f=o.href,c=iv(f).then(h=>av(h,r)).then(h=>sv(h).forEach(g=>{try{n.insertRule(g,g.startsWith("@import")?u+=1:n.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:g,error:m})}})).catch(h=>{console.error("Error loading remote css",h.toString())});e.push(c)}})}catch(o){const s=i.find(u=>u.href==null)||document.styleSheets[0];n.href!=null&&e.push(iv(n.href).then(u=>av(u,r)).then(u=>sv(u).forEach(f=>{s.insertRule(f,s.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",o)}}),Promise.all(e).then(()=>(i.forEach(n=>{if("cssRules"in n)try{ei(n.cssRules||[]).forEach(o=>{t.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${n.href}`,o)}}),t))}function TA(i){return i.filter(r=>r.type===CSSRule.FONT_FACE_RULE).filter(r=>Gg(r.style.getPropertyValue("src")))}async function PA(i,r){if(i.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=ei(i.ownerDocument.styleSheets),e=await OA(t,r);return TA(e)}function Yg(i){return i.trim().replace(/["']/g,"")}function EA(i){const r=new Set;function t(e){(e.style.fontFamily||getComputedStyle(e).fontFamily).split(",").forEach(o=>{r.add(Yg(o))}),Array.from(e.children).forEach(o=>{o instanceof HTMLElement&&t(o)})}return t(i),r}async function AA(i,r){const t=await PA(i,r),e=EA(i);return(await Promise.all(t.filter(o=>e.has(Yg(o.style.fontFamily))).map(o=>{const s=o.parentStyleSheet?o.parentStyleSheet.href:null;return $g(o.cssText,s,r)}))).join(`
`)}async function kA(i,r){const t=r.fontEmbedCSS!=null?r.fontEmbedCSS:r.skipFonts?null:await AA(i,r);if(t){const e=document.createElement("style"),n=document.createTextNode(t);e.appendChild(n),i.firstChild?i.insertBefore(e,i.firstChild):i.appendChild(e)}}async function MA(i,r={}){const{width:t,height:e}=Bg(i,r),n=await Uu(i,r,!0);return await kA(n,r),await qg(n,r),xA(n,r),await qE(n,t,e)}async function DA(i,r={}){const{width:t,height:e}=Bg(i,r),n=await MA(i,r),o=await Ru(n),s=document.createElement("canvas"),u=s.getContext("2d"),f=r.pixelRatio||zE(),c=r.canvasWidth||t,h=r.canvasHeight||e;return s.width=c*f,s.height=h*f,r.skipAutoScale||KE(s),s.style.width=`${c}`,s.style.height=`${h}`,r.backgroundColor&&(u.fillStyle=r.backgroundColor,u.fillRect(0,0,s.width,s.height)),u.drawImage(o,0,0,s.width,s.height),s}async function IA(i,r={}){const t=await DA(i,r);return await GE(t)}export{LA as _,IA as t};
