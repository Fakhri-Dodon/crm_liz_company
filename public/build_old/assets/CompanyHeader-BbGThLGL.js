import{r as k,j as e}from"./app-BTbkV42h.js";import{B as T}from"./building-2-gPSzt0QW.js";import{M as P}from"./map-pin-CoQOVUzC.js";import{G as $}from"./globe-CiSLK2lF.js";import{M}from"./mail-CMvUT1Eg.js";import{P as D}from"./phone-CJHv2jh8.js";import{C as L}from"./calendar-BTlTyD--.js";import{I as A}from"./info-_39fDCir.js";import"./createLucideIcon-DHxmSlVR.js";const J=({company:t,activeTab:b,data:r,statistics:n})=>{const[m,x]=k.useState(null),f=(()=>{switch(b){case"profile":return[{label:"Total Kontak",value:r.contacts?.length||0,color:"bg-blue-500"},{label:"Tahun Aktif",value:t.client_since?new Date().getFullYear()-new Date(t.client_since).getFullYear():0,color:"bg-green-500"},{label:"Status",value:t.is_active?"Aktif":"Non-Aktif",color:t.is_active?"bg-yellow-500":"bg-gray-500"},{label:"Tipe Klien",value:t.client_type?.name||"N/A",color:"bg-red-500"}];case"quotation":return[{label:"Total Quotation",value:n.total_quotations||0,color:"bg-blue-500"},{label:"Diterima",value:n.accepted_quotations||0,color:"bg-green-500"},{label:"Kadaluarsa",value:n.expired_quotations||0,color:"bg-yellow-500"},{label:"Dibatalkan",value:n.cancelled_quotations||0,color:"bg-red-500"}];case"invoice":return[{label:"Total Invoice",value:n.total_invoices||0,color:"bg-blue-500"},{label:"Dibayar",value:n.paid_invoices||0,color:"bg-green-500"},{label:"Pending",value:n.pending_invoices||0,color:"bg-yellow-500"},{label:"Jatuh Tempo",value:n.overdue_invoices||0,color:"bg-red-500"}];case"payment":const l=r.payments?.length||0,a=r.payments?.filter(s=>s.method==="bank_transfer").length||0,i=r.payments?.filter(s=>s.method==="cash").length||0,u=r.payments?.filter(s=>s.method==="check").length||0;return[{label:"Total Pembayaran",value:l,color:"bg-blue-500"},{label:"Transfer Bank",value:a,color:"bg-green-500"},{label:"Tunai",value:i,color:"bg-yellow-500"},{label:"Cek",value:u,color:"bg-red-500"}];case"project":const c=r.projects?.length||0,j=r.projects?.filter(s=>s.status==="completed").length||0,v=r.projects?.filter(s=>s.status==="in_progress").length||0,w=r.projects?.filter(s=>s.status==="delayed").length||0;return[{label:"Total Proyek",value:c,color:"bg-blue-500"},{label:"Selesai",value:j,color:"bg-green-500"},{label:"Dalam Proses",value:v,color:"bg-yellow-500"},{label:"Terlambat",value:w,color:"bg-red-500"}];case"contact":const N=r.contacts?.filter(s=>s.is_primary).length||0,y=r.contacts?.length||0,_=r.contacts?.filter(s=>s.is_active).length||0;return[{label:"Total Kontak",value:y,color:"bg-blue-500"},{label:"Kontak Utama",value:N,color:"bg-green-500"},{label:"Aktif",value:_,color:"bg-yellow-500"},{label:"Management",value:r.contacts?.filter(s=>s.position?.toLowerCase().includes("manager")).length||0,color:"bg-red-500"}];default:return[{label:"Total",value:"0",color:"bg-blue-500"},{label:"Aktif",value:"0",color:"bg-green-500"},{label:"Pending",value:"0",color:"bg-yellow-500"},{label:"Non-Aktif",value:"0",color:"bg-red-500"}]}})(),p=l=>l>=1e9?`Rp${(l/1e9).toFixed(1)}M`:l>=1e6?`Rp${(l/1e6).toFixed(1)}Jt`:l>=1e3?`Rp${(l/1e3).toFixed(0)}Rb`:`Rp${l}`,d=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l),g=r.invoices?.filter(l=>l.status!=="paid").reduce((l,a)=>l+(a.amount_due||0),0)||0,h=l=>{if(!l)return"N/A";const a=new Date(l),u=Math.abs(new Date-a),c=Math.ceil(u/(1e3*60*60*24));return c<30?`${c} hari lalu`:c<365?`${Math.floor(c/30)} bulan lalu`:`${Math.floor(c/365)} tahun lalu`},o=({text:l,maxLength:a=20,className:i=""})=>l?l.length<=a?e.jsx("span",{className:i,children:l}):e.jsx("div",{className:"relative inline-block",children:e.jsxs("span",{className:`${i} truncate max-w-[150px] sm:max-w-[200px] cursor-help`,onMouseEnter:()=>x(l),onMouseLeave:()=>x(null),children:[l.substring(0,a),"..."]})}):null;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 lg:p-6",children:[m&&e.jsx("div",{className:"fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg",children:m}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between mb-6 lg:mb-8 gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.client_code,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl object-cover shadow-md mx-auto sm:mx-0"}):e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-[#054748] to-[#0a5d5e] rounded-xl flex items-center justify-center shadow-md mx-auto sm:mx-0",children:e.jsx(T,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:e.jsx(o,{text:t.client_code,maxLength:25})}),e.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:flex-wrap gap-2 sm:gap-3 text-sm text-gray-600",children:[(t.city||t.province)&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(P,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(o,{text:`${t.city||""}${t.province?`, ${t.province}`:""}${t.country?`, ${t.country}`:""}`,maxLength:30})]}),t.website&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx($,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(o,{text:t.website,maxLength:25})]}),t.primary_contact?.email&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(M,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(o,{text:t.primary_contact.email,maxLength:25})]}),t.primary_contact?.phone&&e.jsxs("div",{className:"flex items-center justify-center sm:justify-start space-x-1",children:[e.jsx(D,{className:"w-4 h-4 flex-shrink-0"}),e.jsx(o,{text:t.primary_contact.phone,maxLength:20})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap justify-center sm:justify-start gap-2",children:[e.jsx("span",{className:"inline-block px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs font-medium",children:e.jsx(o,{text:`Kode: ${t.client_code}`,maxLength:15})}),t.client_type&&e.jsx("span",{className:"inline-block px-2 py-1 bg-green-50 text-green-700 rounded-full text-xs font-medium",children:e.jsx(o,{text:t.client_type.name,maxLength:15})}),t.nib&&e.jsx("span",{className:"inline-block px-2 py-1 bg-purple-50 text-purple-700 rounded-full text-xs font-medium",children:e.jsx(o,{text:`NIB: ${t.nib}`,maxLength:15})}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${t.is_active?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:t.is_active?"Aktif":"Non-Aktif"})]})]})]}),e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Piutang"}),e.jsx("div",{className:"relative inline-block",children:e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-red-600 cursor-help",onMouseEnter:()=>x(d(g)),onMouseLeave:()=>x(null),children:p(g)})}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:[r.invoices?.filter(l=>l.status!=="paid").length||0," invoice belum dibayar"]}),t.client_since&&e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-2 flex items-center justify-center sm:justify-end space-x-1",children:[e.jsx(L,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{children:["Klien sejak: ",h(t.client_since)]})]}),t.created_at&&e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:["Dibuat: ",h(t.created_at)]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:f.map((l,a)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 border border-gray-200 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-1 h-8 sm:h-10 ${l.color} rounded-full mr-3 flex-shrink-0`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 truncate",children:l.value}),typeof l.value=="string"&&l.value.includes("Rp")&&e.jsx(A,{className:"w-4 h-4 text-gray-400 ml-2 cursor-help flex-shrink-0",onMouseEnter:()=>{if(l.value.includes("Rp")){const i=l.value.match(/\d+/)?.[0];i&&x(d(parseFloat(i)))}},onMouseLeave:()=>x(null)})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 truncate",children:l.label})]})]})},a))})]})};export{J as default};
