import{r as _,j as e}from"./app-DSAstNJH.js";import{u as w}from"./useTranslation-BTkknNM_.js";import{S as u}from"./square-pen-EjYThDv6.js";import{T as j}from"./trash-2-CVjnwYw9.js";import{F as b}from"./folder-kanban-BBY3nP8H.js";import{C as v}from"./calendar-G4u4f0fT.js";import{C as k}from"./clock-RFUf-FY5.js";import{c as i}from"./createLucideIcon-B1SYFIyP.js";import{T as C}from"./triangle-alert-9alNtL-H.js";import{C as D}from"./circle-x-DmYymIpe.js";import{C as $}from"./circle-check-big-yLdXT5kW.js";const T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],M=i("circle-pause",T);const P=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],A=i("circle-play",P);const S=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],q=i("ellipsis-vertical",S),J=({data:r,onEdit:d,onDelete:x})=>{const{t:s}=w(),[o,n]=_.useState(null),c=t=>{if(!t)return s("project_table.not_available");try{return new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}catch{return t}},m=t=>{if(!t)return 0;try{const a=new Date,N=new Date(t)-a;return Math.ceil(N/(1e3*60*60*24))}catch{return 0}},p=t=>{const a="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium";switch(t){case"in_progress":case"progress":case"active":case"on_progress":return e.jsxs("span",{className:`${a} bg-blue-100 text-blue-800`,children:[e.jsx(A,{className:"w-3 h-3 mr-1"}),s("project_table.status_in_progress")]});case"completed":case"done":case"finished":return e.jsxs("span",{className:`${a} bg-green-100 text-green-800`,children:[e.jsx($,{className:"w-3 h-3 mr-1"}),s("project_table.status_completed")]});case"pending":case"draft":case"new":return e.jsxs("span",{className:`${a} bg-yellow-100 text-yellow-800`,children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),s("project_table.status_pending")]});case"cancelled":case"canceled":case"rejected":return e.jsxs("span",{className:`${a} bg-red-100 text-red-800`,children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),s("project_table.status_cancelled")]});case"delayed":case"overdue":return e.jsxs("span",{className:`${a} bg-orange-100 text-orange-800`,children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),s("project_table.status_delayed")]});default:return e.jsx("span",{className:`${a} bg-gray-100 text-gray-800`,children:t||s("project_table.status_unknown")})}},h=(t,a)=>a==="completed"||a==="done"||a==="finished"?s("project_table.completed"):a==="cancelled"||a==="canceled"||a==="rejected"?s("project_table.cancelled"):a==="delayed"||a==="overdue"?s("project_table.overdue"):t!=null?t<0?s("project_table.days_late",{days:Math.abs(t)}):t===0?s("project_table.today"):t===1?s("project_table.tomorrow"):s("project_table.days_left",{days:t}):s("project_table.not_available"),g=(t,a)=>a==="completed"||a==="done"||a==="finished"?"text-green-800 bg-green-100":a==="cancelled"||a==="canceled"||a==="rejected"?"text-red-800 bg-red-100":a==="delayed"||a==="overdue"?"text-orange-800 bg-orange-100":t!=null?t<0?"text-red-800 bg-red-100":t<=7?"text-yellow-800 bg-yellow-100":"text-green-800 bg-green-100":"text-gray-800 bg-gray-100",y=t=>{n(o===t?null:t)},f=({project:t,index:a})=>{const l=t.days_left!==void 0?t.days_left:m(t.deadline);return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-3 hover:shadow-sm transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-blue-50 p-2 rounded-lg",children:e.jsx(b,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-sm leading-tight mb-1",children:[a+1,". ",t.project_description?.substring(0,60)||s("project_table.no_description"),t.project_description?.length>60&&"..."]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),s("project_table.start"),": ",c(t.start_date)]}),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),s("project_table.deadline"),": ",c(t.deadline)]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>y(a),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(q,{className:"w-4 h-4"})}),o===a&&e.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:[e.jsxs("button",{onClick:()=>{d(t),n(null)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[e.jsx(u,{className:"w-3 h-3 mr-2"}),s("project_table.edit")]}),e.jsxs("button",{onClick:()=>{x(t),n(null)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-gray-50 flex items-center",children:[e.jsx(j,{className:"w-3 h-3 mr-2"}),s("project_table.delete")]})]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx("div",{className:`px-2 py-1 rounded text-xs ${g(l,t.status)}`,children:h(l,t.status)}),p(t.status)]}),t.note&&e.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:[s("project_table.note_label"),":"]})," ",t.note]})]})]})})})};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:s("project_table.title")||"Daftar Proyek"}),e.jsx("div",{className:"sm:hidden",children:r.map((t,a)=>e.jsx(f,{project:t,index:a},t.id||a))}),e.jsx("div",{className:"hidden sm:block overflow-hidden rounded-lg border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.no")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.project_description")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.start_date")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.deadline")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.time_left")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.status")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.note")}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s("project_table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((t,a)=>{const l=t.days_left!==void 0?t.days_left:m(t.deadline);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:a+1}),e.jsx("td",{className:"px-4 py-3 max-w-[300px]",children:e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:t.project_description||s("project_table.not_available")})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:c(t.start_date)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:c(t.deadline)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${g(l,t.status)}`,children:h(l,t.status)})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:p(t.status)}),e.jsx("td",{className:"px-4 py-3 max-w-[200px]",children:e.jsx("div",{className:"text-sm text-gray-600 truncate",title:t.note,children:t.note||s("project_table.not_available")})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d(t),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:s("project_table.edit_project"),children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(t),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:s("project_table.delete_project"),children:e.jsx(j,{className:"w-4 h-4"})})]})})]},t.id||a)})})]})})}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("project_table.no_projects_found")}),e.jsx("p",{className:"text-gray-600",children:s("project_table.no_projects_message")})]}),r.length>0&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("project_table.total_projects")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("project_table.completed")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(t=>t.status==="completed"||t.status==="done"||t.status==="finished").length})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("project_table.pending")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(t=>t.status==="pending"||t.status==="draft"||t.status==="new").length})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s("project_table.cancelled")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(t=>t.status==="cancelled"||t.status==="canceled"||t.status==="rejected").length})]})]})})]})};export{J as default};
