import{r as w,a as M,u as R,j as e,c as O}from"./app-D-CXuYp-.js";import{B as Q,h as X}from"./html2pdf-tN8WAVVN.js";import{u as z}from"./useTranslation-C5DOJpQ8.js";import{T as J}from"./trash-2-C428PtZi.js";import"./createLucideIcon-Da68c0mB.js";function q({leads:C=[],companies:F=[],auth:V,quotation:t,ppn:D}){const[E,T]=w.useState(!1),[f,k]=w.useState({name:"",processing:"",price:""}),{app_config:P}=M().props,{t:g}=z(),I=s=>{const r={...s,id:Date.now()+Math.random(),price:Number(s.price)||0};console.log("Menambahkan item dengan ID:",r.id),j("services",[...l.services,r])};let S="";t.company_contact_person_id?S=String(t.company_contact_person_id):t.is_client||(S=String(t.lead_id||t.company_id||"")),console.log("INITIAL CONTACT: ",S);let y=t.company_contact_person||t.lead||{};console.log("saved contact: ",y);const{data:l,setData:j,patch:G,processing:H}=R({document_type:"QUOTATION",client_type:t.is_client?"Client":"Lead",prepared_by_name:t.creator?.name,prepared_by_role:t.creator?.role?.name,my_company_name:P.company_name,date:t.date||"",number:t.quotation_number||"",company_id:t.is_client?t.company?.id:t.lead_id||t.company_id,company_contact_person_id:t.company_contact_person_id?String(t.company_contact_person_id):"",company_name:t.lead?.company_name||null,address:t.lead?.address||"",contact_person:y.name||y.contact_person||"",email:y.email||"",phone:y.phone||y.mobile||"",position:y.position||y.job_title||"",subject:t.subject||"",payment_terms:t.payment_terms||"",note:t.note||"",valid_until:t.valid_until||"",services:t.items.map(s=>({id:s.id,name:s.name,processing:s.processing,price:s.amount}))||[],discount:parseFloat(t.discount)>0?"yes":"no",discount_amount:parseFloat(t.discount)||0,sub_total:(()=>{const s=Array.isArray(t.items)&&t.items.length?t.items.reduce((r,c)=>r+(parseFloat(c.amount)||0),0):0;if(s>0)return s;if(t.sub_total!==void 0&&t.sub_total!==null){const r=parseFloat(t.sub_total)||0;if(r>0)return r}if(t.subtotal!==void 0&&t.subtotal!==null){const r=parseFloat(t.subtotal)||0;if(r>0)return r}return s})(),tax_amount:parseFloat(t.tax)||0,tax:(()=>{const s=parseFloat(t.tax)||0;let c=Array.isArray(t.items)&&t.items.length?t.items.reduce((i,p)=>i+(parseFloat(p.amount)||0),0):0;if(c<=0&&(t.sub_total!==void 0&&t.sub_total!==null&&(c=parseFloat(t.sub_total)||0),c<=0&&t.subtotal!==void 0&&t.subtotal!==null&&(c=parseFloat(t.subtotal)||0)),s<=0||c<=0)return 0;const b=s/c;return isFinite(b)?parseFloat(b.toFixed(2)):0})(),tax_type:(()=>{const s=parseFloat(t.tax)||0;let c=Array.isArray(t.items)&&t.items.length?t.items.reduce((i,p)=>i+(parseFloat(p.amount)||0),0):0;return c<=0&&(t.sub_total!==void 0&&t.sub_total!==null&&(c=parseFloat(t.sub_total)||0),c<=0&&t.subtotal!==void 0&&t.subtotal!==null&&(c=parseFloat(t.subtotal)||0)),s<=0||c<=0?null:s/c>=.12?"PPN 12%":"PPN 11%"})(),total:parseFloat(t.total)||(function(){let r=Array.isArray(t.items)&&t.items.length?t.items.reduce((i,p)=>i+(parseFloat(p.amount)||0),0):0;r<=0&&(t.sub_total!==void 0&&t.sub_total!==null&&(r=parseFloat(t.sub_total)||0),r<=0&&t.subtotal!==void 0&&t.subtotal!==null&&(r=parseFloat(t.subtotal)||0));const c=parseFloat(t.tax)||0,b=parseFloat(t.discount)||0;return r+c-b})()});console.log("full data :",l);const $=async()=>{if(l.services.length===0){alert("Peringatan: Anda harus menambahkan setidaknya satu jasa/layanan sebelum menyimpan.");return}if(!l.company_id){alert("Pilih client");return}try{const s=document.getElementById("quotation-pdf"),r={margin:0,filename:`${l.number}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}},c=await X().set(r).from(s).output("blob"),b=l.services.reduce((x,a)=>x+Number(a.price||0),0),i=b*(parseFloat(l.tax)||0),p=b+i-(parseFloat(l.discount_amount)||0),h=new FormData;h.append("_method","PATCH"),Object.keys(l).forEach(x=>{if(x==="services"){const a=l.services.map(n=>({id:n.id||null,name:n.name||n.name||"-",processing:n.processing||"-",price:n.price||0}));h.append("services",JSON.stringify(a))}else l[x]!==null&&l[x]!==void 0?h.append(x,l[x]):x==="sub_total"?h.append("sub_total",b):x==="tax_amount"?h.append("tax_amount",i):x==="total"?h.append("total",p):l[x]!==null&&l[x]!==void 0&&h.append(x,l[x])}),h.append("pdf_file",c,`${l.number}.pdf`),O.post(`/quotation/update/${t.id}`,h,{forceFormData:!0,onSuccess:()=>alert("Berhasil disimpan!"),onError:x=>{console.error("Penyebab Gagal Simpan",x);for(let a of h.entries())console.log(a[0]+": "+a[1])}})}catch(s){console.error("Error:",s)}},N=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(s),L=({data:s})=>{const r=new jsPDF,c=s.services.reduce((i,p)=>i+Number(p.price||0),0);s.tax_type&&c*(Number(s.tax)||0),s.has_discount==="yes"&&Number(s.discount_amount||0),r.text(`Quotation untuk: ${s.clientName}`,10,10);const b=r.output("bloburl");return window.open(b,"_blank"),e.jsxs("div",{className:"p-8 text-sm text-gray-800 leading-relaxed h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-blue-900 tracking-tighter italic",children:"LOGO"}),e.jsx("p",{className:"text-[10px] text-gray-500 max-w-[200px] mt-2",children:"Jl. Alamat Perusahaan No. 123, Jakarta Indonesia"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-2xl font-bold uppercase tracking-widest",children:s.document_type||"QUOTATION"}),e.jsxs("p",{className:"font-mono text-xs",children:["No: ",s.document_number||"---"]}),e.jsxs("p",{className:"font-mono text-xs",children:["Date: ",s.date||"---"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-10 mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold border-b border-gray-300 mb-2 uppercase text-[10px] text-gray-500",children:"To:"}),e.jsx("p",{className:"font-bold text-lg",children:s.company_name||"Customer Name"}),e.jsx("p",{children:s.address||"Customer Address"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold border-b border-gray-300 mb-2 uppercase text-[10px] text-gray-500",children:"Subject:"}),e.jsx("p",{className:"whitespace-pre-line",children:s.subject||"---"})]})]}),e.jsxs("table",{className:"w-full mb-8 text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 uppercase text-[10px] tracking-wider",children:[e.jsx("th",{className:"p-2 border",children:"No"}),e.jsx("th",{className:"p-2 border",children:"Description"}),e.jsx("th",{className:"p-2 border",children:"Process Time"}),e.jsx("th",{className:"p-2 border text-right",children:"Price"})]})}),e.jsx("tbody",{children:s.services.map((i,p)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 align-top text-center",children:p+1}),e.jsx("td",{className:"p-2 align-top font-semibold",children:i.name}),e.jsx("td",{className:"p-2 align-top italic text-gray-600",children:i.processing}),e.jsx("td",{className:"p-2 align-top text-right",children:N(i.price)})]},i.id))})]}),e.jsx("div",{className:"flex justify-end mb-10",children:e.jsxs("div",{className:"w-1/2 space-y-2",children:[e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:N(s.subTotal)})]}),s.has_discount==="yes"&&e.jsxs("div",{className:"flex justify-between text-red-600 italic",children:[e.jsx("span",{children:"Discount"}),e.jsx("span",{children:s.discount==="yes"&&e.jsxs("p",{children:["Diskon: -",N(s.discount_amount)]})})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:s.tax_type||"Tax"}),e.jsxs("span",{children:["(",s.tax_type||"-","):"," ",N(s.tax_amount)]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-black bg-gray-50 p-1",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{children:N(s.total)})]})]})}),e.jsxs("div",{className:"mt-4 mb-10 italic text-[11px] text-gray-500",children:[s.valid_until&&e.jsxs("p",{children:["• This quotation is valid until ",s.valid_until]}),e.jsx("p",{children:"• Prices include applicable taxes unless stated otherwise."})]}),e.jsx("div",{className:"mt-auto flex justify-end text-center",children:e.jsxs("div",{className:"w-48",children:[e.jsx("p",{className:"mb-20 font-bold uppercase tracking-tighter",children:"Best Regards,"}),e.jsx("p",{className:"font-bold border-b border-black",children:s.company_name||"---"}),e.jsx("p",{className:"text-[10px] uppercase",children:"Authorized Signature"})]})})]})};w.useCallback((s,r,c,b,i)=>{const p=(s||[]).reduce((a,n)=>a+Number(n.price||0),0),h=c?p*r:0,x=p+h-Number(b||0);i("sub_total",p),i("tax_amount",h),i("total",x)},[]);const B=()=>{O.get("/quotation")};return e.jsxs(e.Fragment,{children:[E&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999]",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-[400px] border border-gray-200",children:[e.jsx("h3",{className:"font-black text-gray-800 mb-4 uppercase tracking-tight text-sm",children:"Add New Service"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-gray-400",children:"Service Name"}),e.jsx("input",{className:"w-full border-gray-300 rounded-lg p-2 text-sm",placeholder:"Sertifikasi Alat",value:f.name,onChange:s=>k({...f,name:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-gray-400",children:"Processing"}),e.jsx("input",{className:"w-full border-gray-300 rounded-lg p-2 text-sm",placeholder:"7 Days",value:f.processing,onChange:s=>k({...f,processing:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase text-gray-400",children:"Price"}),e.jsx("input",{type:"number",className:"w-full border-gray-300 rounded-lg p-2 text-sm",placeholder:"0",value:f.price,onChange:s=>k({...f,price:s.target.value})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-sm font-bold text-gray-400",children:"CANCEL"}),e.jsx("button",{onClick:()=>{if(!f.name||!f.price)return alert("Lengkapi data!");const s={id:Date.now(),name:f.name,processing:f.processing||"-",price:parseFloat(f.price)};I(s),T(!1),k({name:"",processing:"",price:""})},className:"bg-[#2d6a4f] text-white px-6 py-2 rounded-lg font-bold text-sm shadow-lg",children:"ADD ITEM"})]})]})}),e.jsx(Q,{title:g("quotations.builder.title"),data:l,setData:j,onSave:$,onBack:B,renderEditor:({updateField:s})=>{const r=!l.client_type,c=a=>{const n=l.client_type==="Client",d=(n?F:C).find(m=>String(m.id)===String(a));if(d){const m=d.contacts||[];let u=null;m.length===1&&(u=m[0]);const _={company_id:d.id,lead_id:n?d.lead_id:d.id,company_name:n?d.lead?.company_name||d.client_code:d.company_name,address:(n?d.lead?.address:d.address)||"",company_contact_person_id:u?String(u.id):"",contact_person:u?.name||"",position:u?.position||"",email:u?.email||"",phone:u?.phone||""};Object.entries(_).forEach(([v,A])=>s(v,A)),j(v=>({...v,..._}))}},b=a=>{const d=(l.client_type==="Client"?F:C).find(m=>String(m.id)===String(l.company_id));if(d){const u=(d.contacts||[]).find(_=>String(_.id)===String(a));if(u){const _={company_contact_person_id:a,contact_person:u.name||"",email:u.email||"",phone:u.phone||"",position:u.position||""};Object.entries(_).forEach(([v,A])=>s(v,A)),j(v=>({...v,..._}))}}},i=l.client_type==="Client"?F||[]:C||[];w.useEffect(()=>{typeof s=="function"&&(l.date&&s("date",l.date),l.valid_until&&s("valid_until",l.valid_until))},[l.date,l.valid_until]);const p=a=>{s("discount",a),j("discount",a),a==="no"&&(s("discount_amount",0),j("discount_amount",0))},h=a=>{const n=Number(a)||0;s("discount_amount",n),j("discount_amount",n)},x=a=>{let n=null,o=0;if(a&&a.includes("|")&&a!=="|0"){const u=a.split("|");n=u[0],o=parseFloat(u[1])||0}const m=Number(l.sub_total||0)*o;s("tax_type",n),s("tax",o),s("tax_amount",m),j(u=>({...u,tax_type:n,tax:o,tax_amount:m}))};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.date"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",className:"w-full border-gray-300 rounded text-sm",value:l.date||"",onChange:a=>{s("date",a.target.value),j("date",a.target.value)}})]}),e.jsx("div",{className:"flex bg-gray-100 p-1 rounded-xl",children:["Client","Lead"].map(a=>{const n=l.client_type===a;return e.jsx("button",{type:"button",onClick:o=>{o.preventDefault(),typeof s=="function"&&s("client_type",a),j(d=>({...d,client_type:a,company_id:null,company_name:null,contact_person:"",email:"",phone:"",company_contact_person_id:""}))},className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${n?"bg-[#065f46] text-white shadow-md":"text-gray-400 hover:text-gray-600"}`,children:a.toUpperCase()},a)})}),e.jsxs("div",{className:r?"opacity-40 pointer-events-none":"",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.select_company"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:l.company_id||"",onChange:a=>c(a.target.value),children:[e.jsxs("option",{value:"",children:["-- Choose ",l.client_type," --"]}),i.map(a=>e.jsx("option",{value:a.id,children:l.client_type==="Client"?a.lead?.company_name||a.client_code:a.company_name},a.id))]})]}),e.jsxs("div",{className:`space-y-1 ${l.company_id?"":"opacity-40"}`,children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.select_contact"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:String(l.company_contact_person_id||""),onChange:a=>b(a.target.value),disabled:!l.company_id,children:[e.jsx("option",{value:"",children:"-- Choose Person --"}),(()=>{const o=(l.client_type==="Client"?F:C).find(m=>String(m.id)===String(l.company_id));return o?(o.contacts||[]).map(m=>e.jsxs("option",{value:m.id,children:[m.name," ",m.position?`(${m.position})`:""]},m.id)):null})()]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.subject"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("textarea",{rows:"3",className:"w-full border-gray-300 rounded text-sm font-bold",value:l.subject||"",onChange:a=>{const n=a.target.value;s("subject",n),j("subject",n)}})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:g("quotations.builder.discount")}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:l.discount||"no",onChange:a=>p(a.target.value),children:[e.jsx("option",{value:"",children:"-- Choose Option --"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),l.discount==="yes"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:g("quotations.builder.discount_amount")}),e.jsx("input",{type:"number",className:"w-full border-gray-300 rounded text-sm font-bold",value:l.discount_amount||"",onChange:a=>h(a.target.value)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:g("quotations.builder.tax")}),e.jsxs("select",{className:"w-full border-gray-300 rounded text-sm",value:(()=>{const a=Number(l.tax||0),n=D.find(o=>Math.abs(Number(o.rate)-a)<1e-4);return n?`PPN ${n.name}|${n.rate}`:"|0"})(),onChange:a=>x(a.target.value),children:[e.jsx("option",{value:"|0",children:"-- No Tax --"}),D.map(a=>e.jsxs("option",{value:`PPN ${a.name}|${a.rate}`,children:["PPN ",a.name]},a.id))]})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.payment_terms"),e.jsx("span",{className:"text-red-600",children:"* "}),e.jsxs("span",{className:`text-[9px] font-bold ${l.payment_terms?.length>=250?"text-red-500":"text-gray-400"}`,children:[l.payment_terms?.length||0," / 255"]})]}),e.jsx("textarea",{rows:"3",className:"w-full border-gray-300 rounded text-sm font-bold",value:l.payment_terms||"",onChange:a=>{const n=a.target.value;n.length<=255&&(s("payment_terms",n),j("payment_terms",n))}})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.note"),e.jsx("span",{className:"text-red-600",children:"* "}),e.jsxs("span",{className:`text-[9px] font-bold ${l.note?.length>=250?"text-red-500":"text-gray-400"}`,children:[l.note?.length||0," / 255"]})]}),e.jsx("textarea",{rows:"3",className:"w-full border-gray-300 rounded text-sm font-bold",value:l.note||"",onChange:a=>{const n=a.target.value;n.length<=255&&(s("note",n),j("note",n))}})]}),e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsxs("label",{className:"text-[10px] font-bold text-gray-400 uppercase",children:[g("quotations.builder.valid_until"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"date",className:"w-full border-gray-300 rounded text-sm",value:l.valid_until||"",onChange:a=>{s("valid_until",a.target.value),j("valid_until",a.target.value)}})]})]})]})},renderPreview:({data:s,addItem:r,removeItem:c,updateField:b})=>{I||setBuilderAddItem(()=>r);const i=s.services.reduce((o,d)=>o+parseFloat(d.price||0),0),p=parseFloat(s.tax),h=isNaN(p)||!isFinite(p)?0:p,x=s.discount==="yes"&&parseFloat(s.discount_amount)||0,a=i*h,n=i+a-x;return w.useEffect(()=>{(Math.abs((s.sub_total||0)-i)>1||Math.abs((s.total||0)-n)>1)&&j(d=>({...d,sub_total:i,tax_amount:a,total:n}))},[i,a,n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-2 text-[12px]",children:[e.jsxs("div",{className:"flex justify-between pb-4 mb-6",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Number"}),e.jsx("p",{className:"font-bold",children:s.number||"Q-2024-XXXX"})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Date"}),e.jsx("p",{className:"font-bold",children:s.date||"Date Not Set"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"border border-black p-5 rounded-sm",children:e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"To:"}),e.jsx("p",{className:"font-bold text-emerald-800",children:s.contact_person||"---"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Email:"}),e.jsx("p",{className:"text-black",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Handphone:"}),e.jsx("p",{className:"text-black",children:s.phone})]})]})}),e.jsx("div",{className:"border border-black p-5 rounded-sm",children:e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Company:"}),e.jsx("p",{className:"font-black",children:s.company_name||"---"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Address:"}),e.jsx("p",{className:"text-black leading-tight",children:s.address||"No address provided."})]})]})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[15px] font-bold text-black",children:"Subject"}),e.jsx("p",{className:"text-[13px] text-gray-600 font-medium",children:s.subject})]})]}),e.jsx("p",{className:"text-[15px] font-bold text-black mb-2",children:"Quotation Detail"}),e.jsxs("table",{className:"w-full border-collapse border border-black",children:[e.jsx("thead",{className:"bg-gray-50 uppercase text-[10px] font-black border-b border-black",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-center w-8 border border-black",children:"No"}),e.jsx("th",{className:"p-2 text-left border border-black",children:"Description"}),e.jsx("th",{className:"p-2 text-center w-24 border border-black",children:"Processing"}),e.jsx("th",{className:"p-2 text-right w-32",children:"Amount"}),e.jsx("th",{"data-html2canvas-ignore":"true",className:"print:hidden p-2 w-10"})]})}),e.jsx("tbody",{children:s.services.map((o,d)=>e.jsxs("tr",{className:"border-b border-gray-100 relative group",children:[e.jsx("td",{className:"p-2 text-center font-bold text-gray-400 border border-black",children:s.services.indexOf(o)+1}),e.jsx("td",{className:"p-2 font-bold uppercase border border-black",children:o.name}),e.jsx("td",{className:"p-2 text-center border border-black",children:o.processing}),e.jsx("td",{className:"p-2 text-right font-black border-b border-black",children:N(o.price)}),e.jsx("td",{className:"print:hidden p-2 text-center border-b border-black",children:e.jsx("button",{type:"button","data-html2canvas-ignore":"true",onClick:()=>{console.log("ID Item ini adalah:",o.id),c(o.id)},className:"text-red-400 hover:text-red-600 transition-colors",children:e.jsx(J,{size:14})})})]},o.id||d))})]}),e.jsx("div",{"data-html2canvas-ignore":"true",className:"mt-4 flex justify-start print:hidden",children:e.jsx("button",{"data-html2canvas-ignore":"true",onClick:()=>T(!0),className:"flex items-center gap-2 bg-[#065f46] text-white px-4 py-2 rounded-sm text-[10px] font-bold tracking-widest hover:scale-105 transition-all shadow-lg",children:"ADD SERVICE"})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-stretch gap-10",children:[e.jsxs("div",{className:"w-3/5 flex flex-col",children:[e.jsxs("div",{className:"flex-grow space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[15px] font-bold mb-1",children:"Payment Terms"}),e.jsx("p",{className:"text-red-600 text-[11px] font-medium leading-tight whitespace-pre-wrap break-words max-w-[300px]",children:s.payment_terms||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[15px] font-bold mb-1",children:"Note"}),e.jsx("p",{className:"text-red-600 text-[11px] font-medium leading-tight whitespace-pre-wrap break-words max-w-[300px]",children:s.note||"-"})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("p",{className:"text-[15px] font-bold mb-1",children:"Valid Until"}),e.jsx("p",{className:"text-red-600 text-[11px] font-medium leading-tight",children:`This quotation is valid until (${s.valid_until||""})`})]})]}),e.jsxs("div",{className:"w-2/5 flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-1 font-bold mb-10",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Discount"}),e.jsx("span",{children:s.discount==="yes"?N(s.discount_amount):N(0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:N(s.sub_total||0)})]}),e.jsxs("div",{className:"flex justify-between border-b border-black pb-1",children:[e.jsx("span",{children:s.tax_type||"Tax"}),e.jsx("span",{children:N(s.tax_amount||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-black pt-1",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{children:N(s.total||0)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[16px] uppercase font-black",children:s.my_company_name||"---"}),e.jsx("div",{className:"h-20"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] uppercase font-black leading-tight",children:s.prepared_by_name||"---"}),e.jsx("p",{className:"text-[13px] text-gray-500 leading-tight",children:s.prepared_by_role||"---"})]})]})]})]}),e.jsx("div",{className:"mt-10 p-3 bg-slate-100 rounded-md border border-slate-200",children:e.jsx("p",{className:"text-[12px] text-gray-600",children:P?.address})})]})]})})},renderPDFPreview:L})]})}export{q as default};
